/*! For license information please see main.fcb772a9.js.LICENSE.txt */
!function(){var e={725:function(e){"use strict";var t=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable;e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var i={};return"abcdefghijklmnopqrst".split("").forEach((function(e){i[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},i)).join("")}catch(r){return!1}}()?Object.assign:function(e,r){for(var a,s,o=function(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}(e),l=1;l<arguments.length;l++){for(var u in a=Object(arguments[l]))n.call(a,u)&&(o[u]=a[u]);if(t){s=t(a);for(var c=0;c<s.length;c++)i.call(a,s[c])&&(o[s[c]]=a[s[c]])}}return o}},463:function(e,t,n){"use strict";var i=n(791),r=n(725),a=n(296);function s(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!i)throw Error(s(227));var o=new Set,l={};function u(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(l[e]=t,e=0;e<t.length;e++)o.add(t[e])}var d=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f=Object.prototype.hasOwnProperty,p={},g={};function m(e,t,n,i,r,a,s){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=s}var v={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){v[e]=new m(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];v[t]=new m(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){v[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){v[e]=new m(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){v[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){v[e]=new m(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){v[e]=new m(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){v[e]=new m(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){v[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)}));var y=/[\-:]([a-z])/g;function _(e){return e[1].toUpperCase()}function b(e,t,n,i){var r=v.hasOwnProperty(t)?v[t]:null;(null!==r?0===r.type:!i&&(2<t.length&&("o"===t[0]||"O"===t[0])&&("n"===t[1]||"N"===t[1])))||(function(e,t,n,i){if(null===t||"undefined"===typeof t||function(e,t,n,i){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!i&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,i))return!0;if(i)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,r,i)&&(n=null),i||null===r?function(e){return!!f.call(g,e)||!f.call(p,e)&&(h.test(e)?g[e]=!0:(p[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):r.mustUseProperty?e[r.propertyName]=null===n?3!==r.type&&"":n:(t=r.attributeName,i=r.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(r=r.type)||4===r&&!0===n?"":""+n,i?e.setAttributeNS(i,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(y,_);v[t]=new m(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(y,_);v[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(y,_);v[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){v[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)})),v.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){v[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)}));var T=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,k=60103,x=60106,S=60107,w=60108,E=60114,C=60109,P=60110,I=60112,A=60113,O=60120,L=60115,M=60116,D=60121,R=60128,N=60129,U=60130,j=60131;if("function"===typeof Symbol&&Symbol.for){var F=Symbol.for;k=F("react.element"),x=F("react.portal"),S=F("react.fragment"),w=F("react.strict_mode"),E=F("react.profiler"),C=F("react.provider"),P=F("react.context"),I=F("react.forward_ref"),A=F("react.suspense"),O=F("react.suspense_list"),L=F("react.memo"),M=F("react.lazy"),D=F("react.block"),F("react.scope"),R=F("react.opaque.id"),N=F("react.debug_trace_mode"),U=F("react.offscreen"),j=F("react.legacy_hidden")}var B,z="function"===typeof Symbol&&Symbol.iterator;function V(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=z&&e[z]||e["@@iterator"])?e:null}function H(e){if(void 0===B)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);B=t&&t[1]||""}return"\n"+B+e}var W=!1;function q(e,t){if(!e||W)return"";W=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(l){var i=l}Reflect.construct(e,[],t)}else{try{t.call()}catch(l){i=l}e.call(t.prototype)}else{try{throw Error()}catch(l){i=l}e()}}catch(l){if(l&&i&&"string"===typeof l.stack){for(var r=l.stack.split("\n"),a=i.stack.split("\n"),s=r.length-1,o=a.length-1;1<=s&&0<=o&&r[s]!==a[o];)o--;for(;1<=s&&0<=o;s--,o--)if(r[s]!==a[o]){if(1!==s||1!==o)do{if(s--,0>--o||r[s]!==a[o])return"\n"+r[s].replace(" at new "," at ")}while(1<=s&&0<=o);break}}}finally{W=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?H(e):""}function G(e){switch(e.tag){case 5:return H(e.type);case 16:return H("Lazy");case 13:return H("Suspense");case 19:return H("SuspenseList");case 0:case 2:case 15:return e=q(e.type,!1);case 11:return e=q(e.type.render,!1);case 22:return e=q(e.type._render,!1);case 1:return e=q(e.type,!0);default:return""}}function X(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case S:return"Fragment";case x:return"Portal";case E:return"Profiler";case w:return"StrictMode";case A:return"Suspense";case O:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case P:return(e.displayName||"Context")+".Consumer";case C:return(e._context.displayName||"Context")+".Provider";case I:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case L:return X(e.type);case D:return X(e._render);case M:t=e._payload,e=e._init;try{return X(e(t))}catch(n){}}return null}function K(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function $(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function Y(e){e._valueTracker||(e._valueTracker=function(e){var t=$(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),i=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var r=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return r.call(this)},set:function(e){i=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(e){i=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function Q(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),i="";return e&&(i=$(e)?e.checked?"true":"false":e.value),(e=i)!==n&&(t.setValue(e),!0)}function J(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Z(e,t){var n=t.checked;return r({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function ee(e,t){var n=null==t.defaultValue?"":t.defaultValue,i=null!=t.checked?t.checked:t.defaultChecked;n=K(null!=t.value?t.value:n),e._wrapperState={initialChecked:i,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function te(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function ne(e,t){te(e,t);var n=K(t.value),i=t.type;if(null!=n)"number"===i?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===i||"reset"===i)return void e.removeAttribute("value");t.hasOwnProperty("value")?re(e,t.type,n):t.hasOwnProperty("defaultValue")&&re(e,t.type,K(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function ie(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var i=t.type;if(!("submit"!==i&&"reset"!==i||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function re(e,t,n){"number"===t&&J(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}function ae(e,t){return e=r({children:void 0},t),(t=function(e){var t="";return i.Children.forEach(e,(function(e){null!=e&&(t+=e)})),t}(t.children))&&(e.children=t),e}function se(e,t,n,i){if(e=e.options,t){t={};for(var r=0;r<n.length;r++)t["$"+n[r]]=!0;for(n=0;n<e.length;n++)r=t.hasOwnProperty("$"+e[n].value),e[n].selected!==r&&(e[n].selected=r),r&&i&&(e[n].defaultSelected=!0)}else{for(n=""+K(n),t=null,r=0;r<e.length;r++){if(e[r].value===n)return e[r].selected=!0,void(i&&(e[r].defaultSelected=!0));null!==t||e[r].disabled||(t=e[r])}null!==t&&(t.selected=!0)}}function oe(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(s(91));return r({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function le(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(s(92));if(Array.isArray(n)){if(!(1>=n.length))throw Error(s(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:K(n)}}function ue(e,t){var n=K(t.value),i=K(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=i&&(e.defaultValue=""+i)}function ce(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}var de={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"};function he(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function fe(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?he(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var pe,ge,me=(ge=function(e,t){if(e.namespaceURI!==de.svg||"innerHTML"in e)e.innerHTML=t;else{for((pe=pe||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=pe.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,i){MSApp.execUnsafeLocalFunction((function(){return ge(e,t)}))}:ge);function ve(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var ye={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},_e=["Webkit","ms","Moz","O"];function be(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||ye.hasOwnProperty(e)&&ye[e]?(""+t).trim():t+"px"}function Te(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var i=0===n.indexOf("--"),r=be(n,t[n],i);"float"===n&&(n="cssFloat"),i?e.setProperty(n,r):e[n]=r}}Object.keys(ye).forEach((function(e){_e.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),ye[t]=ye[e]}))}));var ke=r({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function xe(e,t){if(t){if(ke[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(s(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(s(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(s(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(s(62))}}function Se(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function we(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Ee=null,Ce=null,Pe=null;function Ie(e){if(e=nr(e)){if("function"!==typeof Ee)throw Error(s(280));var t=e.stateNode;t&&(t=rr(t),Ee(e.stateNode,e.type,t))}}function Ae(e){Ce?Pe?Pe.push(e):Pe=[e]:Ce=e}function Oe(){if(Ce){var e=Ce,t=Pe;if(Pe=Ce=null,Ie(e),t)for(e=0;e<t.length;e++)Ie(t[e])}}function Le(e,t){return e(t)}function Me(e,t,n,i,r){return e(t,n,i,r)}function De(){}var Re=Le,Ne=!1,Ue=!1;function je(){null===Ce&&null===Pe||(De(),Oe())}function Fe(e,t){var n=e.stateNode;if(null===n)return null;var i=rr(n);if(null===i)return null;n=i[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(i=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!i;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(s(231,t,typeof n));return n}var Be=!1;if(d)try{var ze={};Object.defineProperty(ze,"passive",{get:function(){Be=!0}}),window.addEventListener("test",ze,ze),window.removeEventListener("test",ze,ze)}catch(ge){Be=!1}function Ve(e,t,n,i,r,a,s,o,l){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(c){this.onError(c)}}var He=!1,We=null,qe=!1,Ge=null,Xe={onError:function(e){He=!0,We=e}};function Ke(e,t,n,i,r,a,s,o,l){He=!1,We=null,Ve.apply(Xe,arguments)}function $e(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(1026&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Ye(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Qe(e){if($e(e)!==e)throw Error(s(188))}function Je(e){if(e=function(e){var t=e.alternate;if(!t){if(null===(t=$e(e)))throw Error(s(188));return t!==e?null:e}for(var n=e,i=t;;){var r=n.return;if(null===r)break;var a=r.alternate;if(null===a){if(null!==(i=r.return)){n=i;continue}break}if(r.child===a.child){for(a=r.child;a;){if(a===n)return Qe(r),e;if(a===i)return Qe(r),t;a=a.sibling}throw Error(s(188))}if(n.return!==i.return)n=r,i=a;else{for(var o=!1,l=r.child;l;){if(l===n){o=!0,n=r,i=a;break}if(l===i){o=!0,i=r,n=a;break}l=l.sibling}if(!o){for(l=a.child;l;){if(l===n){o=!0,n=a,i=r;break}if(l===i){o=!0,i=a,n=r;break}l=l.sibling}if(!o)throw Error(s(189))}}if(n.alternate!==i)throw Error(s(190))}if(3!==n.tag)throw Error(s(188));return n.stateNode.current===n?e:t}(e),!e)return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}function Ze(e,t){for(var n=e.alternate;null!==t;){if(t===e||t===n)return!0;t=t.return}return!1}var et,tt,nt,it,rt=!1,at=[],st=null,ot=null,lt=null,ut=new Map,ct=new Map,dt=[],ht="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ft(e,t,n,i,r){return{blockedOn:e,domEventName:t,eventSystemFlags:16|n,nativeEvent:r,targetContainers:[i]}}function pt(e,t){switch(e){case"focusin":case"focusout":st=null;break;case"dragenter":case"dragleave":ot=null;break;case"mouseover":case"mouseout":lt=null;break;case"pointerover":case"pointerout":ut.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ct.delete(t.pointerId)}}function gt(e,t,n,i,r,a){return null===e||e.nativeEvent!==a?(e=ft(t,n,i,r,a),null!==t&&(null!==(t=nr(t))&&tt(t)),e):(e.eventSystemFlags|=i,t=e.targetContainers,null!==r&&-1===t.indexOf(r)&&t.push(r),e)}function mt(e){var t=tr(e.target);if(null!==t){var n=$e(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Ye(n)))return e.blockedOn=t,void it(e.lanePriority,(function(){a.unstable_runWithPriority(e.priority,(function(){nt(n)}))}))}else if(3===t&&n.stateNode.hydrate)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function vt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Jt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=nr(n))&&tt(t),e.blockedOn=n,!1;t.shift()}return!0}function yt(e,t,n){vt(e)&&n.delete(t)}function _t(){for(rt=!1;0<at.length;){var e=at[0];if(null!==e.blockedOn){null!==(e=nr(e.blockedOn))&&et(e);break}for(var t=e.targetContainers;0<t.length;){var n=Jt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n){e.blockedOn=n;break}t.shift()}null===e.blockedOn&&at.shift()}null!==st&&vt(st)&&(st=null),null!==ot&&vt(ot)&&(ot=null),null!==lt&&vt(lt)&&(lt=null),ut.forEach(yt),ct.forEach(yt)}function bt(e,t){e.blockedOn===t&&(e.blockedOn=null,rt||(rt=!0,a.unstable_scheduleCallback(a.unstable_NormalPriority,_t)))}function Tt(e){function t(t){return bt(t,e)}if(0<at.length){bt(at[0],e);for(var n=1;n<at.length;n++){var i=at[n];i.blockedOn===e&&(i.blockedOn=null)}}for(null!==st&&bt(st,e),null!==ot&&bt(ot,e),null!==lt&&bt(lt,e),ut.forEach(t),ct.forEach(t),n=0;n<dt.length;n++)(i=dt[n]).blockedOn===e&&(i.blockedOn=null);for(;0<dt.length&&null===(n=dt[0]).blockedOn;)mt(n),null===n.blockedOn&&dt.shift()}function kt(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var xt={animationend:kt("Animation","AnimationEnd"),animationiteration:kt("Animation","AnimationIteration"),animationstart:kt("Animation","AnimationStart"),transitionend:kt("Transition","TransitionEnd")},St={},wt={};function Et(e){if(St[e])return St[e];if(!xt[e])return e;var t,n=xt[e];for(t in n)if(n.hasOwnProperty(t)&&t in wt)return St[e]=n[t];return e}d&&(wt=document.createElement("div").style,"AnimationEvent"in window||(delete xt.animationend.animation,delete xt.animationiteration.animation,delete xt.animationstart.animation),"TransitionEvent"in window||delete xt.transitionend.transition);var Ct=Et("animationend"),Pt=Et("animationiteration"),It=Et("animationstart"),At=Et("transitionend"),Ot=new Map,Lt=new Map,Mt=["abort","abort",Ct,"animationEnd",Pt,"animationIteration",It,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",At,"transitionEnd","waiting","waiting"];function Dt(e,t){for(var n=0;n<e.length;n+=2){var i=e[n],r=e[n+1];r="on"+(r[0].toUpperCase()+r.slice(1)),Lt.set(i,t),Ot.set(i,r),u(r,[i])}}(0,a.unstable_now)();var Rt=8;function Nt(e){if(0!==(1&e))return Rt=15,1;if(0!==(2&e))return Rt=14,2;if(0!==(4&e))return Rt=13,4;var t=24&e;return 0!==t?(Rt=12,t):0!==(32&e)?(Rt=11,32):0!==(t=192&e)?(Rt=10,t):0!==(256&e)?(Rt=9,256):0!==(t=3584&e)?(Rt=8,t):0!==(4096&e)?(Rt=7,4096):0!==(t=4186112&e)?(Rt=6,t):0!==(t=62914560&e)?(Rt=5,t):67108864&e?(Rt=4,67108864):0!==(134217728&e)?(Rt=3,134217728):0!==(t=805306368&e)?(Rt=2,t):0!==(1073741824&e)?(Rt=1,1073741824):(Rt=8,e)}function Ut(e,t){var n=e.pendingLanes;if(0===n)return Rt=0;var i=0,r=0,a=e.expiredLanes,s=e.suspendedLanes,o=e.pingedLanes;if(0!==a)i=a,r=Rt=15;else if(0!==(a=134217727&n)){var l=a&~s;0!==l?(i=Nt(l),r=Rt):0!==(o&=a)&&(i=Nt(o),r=Rt)}else 0!==(a=n&~s)?(i=Nt(a),r=Rt):0!==o&&(i=Nt(o),r=Rt);if(0===i)return 0;if(i=n&((0>(i=31-Ht(i))?0:1<<i)<<1)-1,0!==t&&t!==i&&0===(t&s)){if(Nt(t),r<=Rt)return t;Rt=r}if(0!==(t=e.entangledLanes))for(e=e.entanglements,t&=i;0<t;)r=1<<(n=31-Ht(t)),i|=e[n],t&=~r;return i}function jt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function Ft(e,t){switch(e){case 15:return 1;case 14:return 2;case 12:return 0===(e=Bt(24&~t))?Ft(10,t):e;case 10:return 0===(e=Bt(192&~t))?Ft(8,t):e;case 8:return 0===(e=Bt(3584&~t))&&(0===(e=Bt(4186112&~t))&&(e=512)),e;case 2:return 0===(t=Bt(805306368&~t))&&(t=268435456),t}throw Error(s(358,e))}function Bt(e){return e&-e}function zt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Vt(e,t,n){e.pendingLanes|=t;var i=t-1;e.suspendedLanes&=i,e.pingedLanes&=i,(e=e.eventTimes)[t=31-Ht(t)]=n}var Ht=Math.clz32?Math.clz32:function(e){return 0===e?32:31-(Wt(e)/qt|0)|0},Wt=Math.log,qt=Math.LN2;var Gt=a.unstable_UserBlockingPriority,Xt=a.unstable_runWithPriority,Kt=!0;function $t(e,t,n,i){Ne||De();var r=Qt,a=Ne;Ne=!0;try{Me(r,e,t,n,i)}finally{(Ne=a)||je()}}function Yt(e,t,n,i){Xt(Gt,Qt.bind(null,e,t,n,i))}function Qt(e,t,n,i){var r;if(Kt)if((r=0===(4&t))&&0<at.length&&-1<ht.indexOf(e))e=ft(null,e,t,n,i),at.push(e);else{var a=Jt(e,t,n,i);if(null===a)r&&pt(e,i);else{if(r){if(-1<ht.indexOf(e))return e=ft(a,e,t,n,i),void at.push(e);if(function(e,t,n,i,r){switch(t){case"focusin":return st=gt(st,e,t,n,i,r),!0;case"dragenter":return ot=gt(ot,e,t,n,i,r),!0;case"mouseover":return lt=gt(lt,e,t,n,i,r),!0;case"pointerover":var a=r.pointerId;return ut.set(a,gt(ut.get(a)||null,e,t,n,i,r)),!0;case"gotpointercapture":return a=r.pointerId,ct.set(a,gt(ct.get(a)||null,e,t,n,i,r)),!0}return!1}(a,e,t,n,i))return;pt(e,i)}Di(e,t,i,null,n)}}}function Jt(e,t,n,i){var r=we(i);if(null!==(r=tr(r))){var a=$e(r);if(null===a)r=null;else{var s=a.tag;if(13===s){if(null!==(r=Ye(a)))return r;r=null}else if(3===s){if(a.stateNode.hydrate)return 3===a.tag?a.stateNode.containerInfo:null;r=null}else a!==r&&(r=null)}}return Di(e,t,i,r,n),null}var Zt=null,en=null,tn=null;function nn(){if(tn)return tn;var e,t,n=en,i=n.length,r="value"in Zt?Zt.value:Zt.textContent,a=r.length;for(e=0;e<i&&n[e]===r[e];e++);var s=i-e;for(t=1;t<=s&&n[i-t]===r[a-t];t++);return tn=r.slice(e,1<t?1-t:void 0)}function rn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function an(){return!0}function sn(){return!1}function on(e){function t(t,n,i,r,a){for(var s in this._reactName=t,this._targetInst=i,this.type=n,this.nativeEvent=r,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(s)&&(t=e[s],this[s]=t?t(r):r[s]);return this.isDefaultPrevented=(null!=r.defaultPrevented?r.defaultPrevented:!1===r.returnValue)?an:sn,this.isPropagationStopped=sn,this}return r(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=an)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=an)},persist:function(){},isPersistent:an}),t}var ln,un,cn,dn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},hn=on(dn),fn=r({},dn,{view:0,detail:0}),pn=on(fn),gn=r({},fn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Cn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==cn&&(cn&&"mousemove"===e.type?(ln=e.screenX-cn.screenX,un=e.screenY-cn.screenY):un=ln=0,cn=e),ln)},movementY:function(e){return"movementY"in e?e.movementY:un}}),mn=on(gn),vn=on(r({},gn,{dataTransfer:0})),yn=on(r({},fn,{relatedTarget:0})),_n=on(r({},dn,{animationName:0,elapsedTime:0,pseudoElement:0})),bn=r({},dn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Tn=on(bn),kn=on(r({},dn,{data:0})),xn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Sn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},wn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function En(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=wn[e])&&!!t[e]}function Cn(){return En}var Pn=r({},fn,{key:function(e){if(e.key){var t=xn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=rn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?Sn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Cn,charCode:function(e){return"keypress"===e.type?rn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?rn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),In=on(Pn),An=on(r({},gn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),On=on(r({},fn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Cn})),Ln=on(r({},dn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Mn=r({},gn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Dn=on(Mn),Rn=[9,13,27,32],Nn=d&&"CompositionEvent"in window,Un=null;d&&"documentMode"in document&&(Un=document.documentMode);var jn=d&&"TextEvent"in window&&!Un,Fn=d&&(!Nn||Un&&8<Un&&11>=Un),Bn=String.fromCharCode(32),zn=!1;function Vn(e,t){switch(e){case"keyup":return-1!==Rn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Hn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Wn=!1;var qn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Gn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!qn[e.type]:"textarea"===t}function Xn(e,t,n,i){Ae(i),0<(t=Ni(t,"onChange")).length&&(n=new hn("onChange","change",null,n,i),e.push({event:n,listeners:t}))}var Kn=null,$n=null;function Yn(e){Pi(e,0)}function Qn(e){if(Q(ir(e)))return e}function Jn(e,t){if("change"===e)return t}var Zn=!1;if(d){var ei;if(d){var ti="oninput"in document;if(!ti){var ni=document.createElement("div");ni.setAttribute("oninput","return;"),ti="function"===typeof ni.oninput}ei=ti}else ei=!1;Zn=ei&&(!document.documentMode||9<document.documentMode)}function ii(){Kn&&(Kn.detachEvent("onpropertychange",ri),$n=Kn=null)}function ri(e){if("value"===e.propertyName&&Qn($n)){var t=[];if(Xn(t,$n,e,we(e)),e=Yn,Ne)e(t);else{Ne=!0;try{Le(e,t)}finally{Ne=!1,je()}}}}function ai(e,t,n){"focusin"===e?(ii(),$n=n,(Kn=t).attachEvent("onpropertychange",ri)):"focusout"===e&&ii()}function si(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Qn($n)}function oi(e,t){if("click"===e)return Qn(t)}function li(e,t){if("input"===e||"change"===e)return Qn(t)}var ui="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},ci=Object.prototype.hasOwnProperty;function di(e,t){if(ui(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++)if(!ci.call(t,n[i])||!ui(e[n[i]],t[n[i]]))return!1;return!0}function hi(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function fi(e,t){var n,i=hi(e);for(e=0;i;){if(3===i.nodeType){if(n=e+i.textContent.length,e<=t&&n>=t)return{node:i,offset:t-e};e=n}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=hi(i)}}function pi(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?pi(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function gi(){for(var e=window,t=J();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(i){n=!1}if(!n)break;t=J((e=t.contentWindow).document)}return t}function mi(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var vi=d&&"documentMode"in document&&11>=document.documentMode,yi=null,_i=null,bi=null,Ti=!1;function ki(e,t,n){var i=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;Ti||null==yi||yi!==J(i)||("selectionStart"in(i=yi)&&mi(i)?i={start:i.selectionStart,end:i.selectionEnd}:i={anchorNode:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset},bi&&di(bi,i)||(bi=i,0<(i=Ni(_i,"onSelect")).length&&(t=new hn("onSelect","select",null,t,n),e.push({event:t,listeners:i}),t.target=yi)))}Dt("cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0),Dt("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1),Dt(Mt,2);for(var xi="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),Si=0;Si<xi.length;Si++)Lt.set(xi[Si],0);c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),u("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),u("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),u("onBeforeInput",["compositionend","keypress","textInput","paste"]),u("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var wi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ei=new Set("cancel close invalid load scroll toggle".split(" ").concat(wi));function Ci(e,t,n){var i=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,i,r,a,o,l,u){if(Ke.apply(this,arguments),He){if(!He)throw Error(s(198));var c=We;He=!1,We=null,qe||(qe=!0,Ge=c)}}(i,t,void 0,e),e.currentTarget=null}function Pi(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var i=e[n],r=i.event;i=i.listeners;e:{var a=void 0;if(t)for(var s=i.length-1;0<=s;s--){var o=i[s],l=o.instance,u=o.currentTarget;if(o=o.listener,l!==a&&r.isPropagationStopped())break e;Ci(r,o,u),a=l}else for(s=0;s<i.length;s++){if(l=(o=i[s]).instance,u=o.currentTarget,o=o.listener,l!==a&&r.isPropagationStopped())break e;Ci(r,o,u),a=l}}}if(qe)throw e=Ge,qe=!1,Ge=null,e}function Ii(e,t){var n=ar(t),i=e+"__bubble";n.has(i)||(Mi(t,e,2,!1),n.add(i))}var Ai="_reactListening"+Math.random().toString(36).slice(2);function Oi(e){e[Ai]||(e[Ai]=!0,o.forEach((function(t){Ei.has(t)||Li(t,!1,e,null),Li(t,!0,e,null)})))}function Li(e,t,n,i){var r=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,a=n;if("selectionchange"===e&&9!==n.nodeType&&(a=n.ownerDocument),null!==i&&!t&&Ei.has(e)){if("scroll"!==e)return;r|=2,a=i}var s=ar(a),o=e+"__"+(t?"capture":"bubble");s.has(o)||(t&&(r|=4),Mi(a,e,r,t),s.add(o))}function Mi(e,t,n,i){var r=Lt.get(t);switch(void 0===r?2:r){case 0:r=$t;break;case 1:r=Yt;break;default:r=Qt}n=r.bind(null,t,n,e),r=void 0,!Be||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(r=!0),i?void 0!==r?e.addEventListener(t,n,{capture:!0,passive:r}):e.addEventListener(t,n,!0):void 0!==r?e.addEventListener(t,n,{passive:r}):e.addEventListener(t,n,!1)}function Di(e,t,n,i,r){var a=i;if(0===(1&t)&&0===(2&t)&&null!==i)e:for(;;){if(null===i)return;var s=i.tag;if(3===s||4===s){var o=i.stateNode.containerInfo;if(o===r||8===o.nodeType&&o.parentNode===r)break;if(4===s)for(s=i.return;null!==s;){var l=s.tag;if((3===l||4===l)&&((l=s.stateNode.containerInfo)===r||8===l.nodeType&&l.parentNode===r))return;s=s.return}for(;null!==o;){if(null===(s=tr(o)))return;if(5===(l=s.tag)||6===l){i=a=s;continue e}o=o.parentNode}}i=i.return}!function(e,t,n){if(Ue)return e(t,n);Ue=!0;try{Re(e,t,n)}finally{Ue=!1,je()}}((function(){var i=a,r=we(n),s=[];e:{var o=Ot.get(e);if(void 0!==o){var l=hn,u=e;switch(e){case"keypress":if(0===rn(n))break e;case"keydown":case"keyup":l=In;break;case"focusin":u="focus",l=yn;break;case"focusout":u="blur",l=yn;break;case"beforeblur":case"afterblur":l=yn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=mn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=vn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=On;break;case Ct:case Pt:case It:l=_n;break;case At:l=Ln;break;case"scroll":l=pn;break;case"wheel":l=Dn;break;case"copy":case"cut":case"paste":l=Tn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=An}var c=0!==(4&t),d=!c&&"scroll"===e,h=c?null!==o?o+"Capture":null:o;c=[];for(var f,p=i;null!==p;){var g=(f=p).stateNode;if(5===f.tag&&null!==g&&(f=g,null!==h&&(null!=(g=Fe(p,h))&&c.push(Ri(p,g,f)))),d)break;p=p.return}0<c.length&&(o=new l(o,u,null,n,r),s.push({event:o,listeners:c}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(o="mouseover"===e||"pointerover"===e)||0!==(16&t)||!(u=n.relatedTarget||n.fromElement)||!tr(u)&&!u[Zi])&&(l||o)&&(o=r.window===r?r:(o=r.ownerDocument)?o.defaultView||o.parentWindow:window,l?(l=i,null!==(u=(u=n.relatedTarget||n.toElement)?tr(u):null)&&(u!==(d=$e(u))||5!==u.tag&&6!==u.tag)&&(u=null)):(l=null,u=i),l!==u)){if(c=mn,g="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(c=An,g="onPointerLeave",h="onPointerEnter",p="pointer"),d=null==l?o:ir(l),f=null==u?o:ir(u),(o=new c(g,p+"leave",l,n,r)).target=d,o.relatedTarget=f,g=null,tr(r)===i&&((c=new c(h,p+"enter",u,n,r)).target=f,c.relatedTarget=d,g=c),d=g,l&&u)e:{for(h=u,p=0,f=c=l;f;f=Ui(f))p++;for(f=0,g=h;g;g=Ui(g))f++;for(;0<p-f;)c=Ui(c),p--;for(;0<f-p;)h=Ui(h),f--;for(;p--;){if(c===h||null!==h&&c===h.alternate)break e;c=Ui(c),h=Ui(h)}c=null}else c=null;null!==l&&ji(s,o,l,c,!1),null!==u&&null!==d&&ji(s,d,u,c,!0)}if("select"===(l=(o=i?ir(i):window).nodeName&&o.nodeName.toLowerCase())||"input"===l&&"file"===o.type)var m=Jn;else if(Gn(o))if(Zn)m=li;else{m=si;var v=ai}else(l=o.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===o.type||"radio"===o.type)&&(m=oi);switch(m&&(m=m(e,i))?Xn(s,m,n,r):(v&&v(e,o,i),"focusout"===e&&(v=o._wrapperState)&&v.controlled&&"number"===o.type&&re(o,"number",o.value)),v=i?ir(i):window,e){case"focusin":(Gn(v)||"true"===v.contentEditable)&&(yi=v,_i=i,bi=null);break;case"focusout":bi=_i=yi=null;break;case"mousedown":Ti=!0;break;case"contextmenu":case"mouseup":case"dragend":Ti=!1,ki(s,n,r);break;case"selectionchange":if(vi)break;case"keydown":case"keyup":ki(s,n,r)}var y;if(Nn)e:{switch(e){case"compositionstart":var _="onCompositionStart";break e;case"compositionend":_="onCompositionEnd";break e;case"compositionupdate":_="onCompositionUpdate";break e}_=void 0}else Wn?Vn(e,n)&&(_="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(_="onCompositionStart");_&&(Fn&&"ko"!==n.locale&&(Wn||"onCompositionStart"!==_?"onCompositionEnd"===_&&Wn&&(y=nn()):(en="value"in(Zt=r)?Zt.value:Zt.textContent,Wn=!0)),0<(v=Ni(i,_)).length&&(_=new kn(_,e,null,n,r),s.push({event:_,listeners:v}),y?_.data=y:null!==(y=Hn(n))&&(_.data=y))),(y=jn?function(e,t){switch(e){case"compositionend":return Hn(t);case"keypress":return 32!==t.which?null:(zn=!0,Bn);case"textInput":return(e=t.data)===Bn&&zn?null:e;default:return null}}(e,n):function(e,t){if(Wn)return"compositionend"===e||!Nn&&Vn(e,t)?(e=nn(),tn=en=Zt=null,Wn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Fn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(i=Ni(i,"onBeforeInput")).length&&(r=new kn("onBeforeInput","beforeinput",null,n,r),s.push({event:r,listeners:i}),r.data=y))}Pi(s,t)}))}function Ri(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Ni(e,t){for(var n=t+"Capture",i=[];null!==e;){var r=e,a=r.stateNode;5===r.tag&&null!==a&&(r=a,null!=(a=Fe(e,n))&&i.unshift(Ri(e,a,r)),null!=(a=Fe(e,t))&&i.push(Ri(e,a,r))),e=e.return}return i}function Ui(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function ji(e,t,n,i,r){for(var a=t._reactName,s=[];null!==n&&n!==i;){var o=n,l=o.alternate,u=o.stateNode;if(null!==l&&l===i)break;5===o.tag&&null!==u&&(o=u,r?null!=(l=Fe(n,a))&&s.unshift(Ri(n,l,o)):r||null!=(l=Fe(n,a))&&s.push(Ri(n,l,o))),n=n.return}0!==s.length&&e.push({event:t,listeners:s})}function Fi(){}var Bi=null,zi=null;function Vi(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function Hi(e,t){return"textarea"===e||"option"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var Wi="function"===typeof setTimeout?setTimeout:void 0,qi="function"===typeof clearTimeout?clearTimeout:void 0;function Gi(e){1===e.nodeType?e.textContent="":9===e.nodeType&&(null!=(e=e.body)&&(e.textContent=""))}function Xi(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break}return e}function Ki(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var $i=0;var Yi=Math.random().toString(36).slice(2),Qi="__reactFiber$"+Yi,Ji="__reactProps$"+Yi,Zi="__reactContainer$"+Yi,er="__reactEvents$"+Yi;function tr(e){var t=e[Qi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Zi]||n[Qi]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=Ki(e);null!==e;){if(n=e[Qi])return n;e=Ki(e)}return t}n=(e=n).parentNode}return null}function nr(e){return!(e=e[Qi]||e[Zi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function ir(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(s(33))}function rr(e){return e[Ji]||null}function ar(e){var t=e[er];return void 0===t&&(t=e[er]=new Set),t}var sr=[],or=-1;function lr(e){return{current:e}}function ur(e){0>or||(e.current=sr[or],sr[or]=null,or--)}function cr(e,t){or++,sr[or]=e.current,e.current=t}var dr={},hr=lr(dr),fr=lr(!1),pr=dr;function gr(e,t){var n=e.type.contextTypes;if(!n)return dr;var i=e.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===t)return i.__reactInternalMemoizedMaskedChildContext;var r,a={};for(r in n)a[r]=t[r];return i&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function mr(e){return null!==(e=e.childContextTypes)&&void 0!==e}function vr(){ur(fr),ur(hr)}function yr(e,t,n){if(hr.current!==dr)throw Error(s(168));cr(hr,t),cr(fr,n)}function _r(e,t,n){var i=e.stateNode;if(e=t.childContextTypes,"function"!==typeof i.getChildContext)return n;for(var a in i=i.getChildContext())if(!(a in e))throw Error(s(108,X(t)||"Unknown",a));return r({},n,i)}function br(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||dr,pr=hr.current,cr(hr,e),cr(fr,fr.current),!0}function Tr(e,t,n){var i=e.stateNode;if(!i)throw Error(s(169));n?(e=_r(e,t,pr),i.__reactInternalMemoizedMergedChildContext=e,ur(fr),ur(hr),cr(hr,e)):ur(fr),cr(fr,n)}var kr=null,xr=null,Sr=a.unstable_runWithPriority,wr=a.unstable_scheduleCallback,Er=a.unstable_cancelCallback,Cr=a.unstable_shouldYield,Pr=a.unstable_requestPaint,Ir=a.unstable_now,Ar=a.unstable_getCurrentPriorityLevel,Or=a.unstable_ImmediatePriority,Lr=a.unstable_UserBlockingPriority,Mr=a.unstable_NormalPriority,Dr=a.unstable_LowPriority,Rr=a.unstable_IdlePriority,Nr={},Ur=void 0!==Pr?Pr:function(){},jr=null,Fr=null,Br=!1,zr=Ir(),Vr=1e4>zr?Ir:function(){return Ir()-zr};function Hr(){switch(Ar()){case Or:return 99;case Lr:return 98;case Mr:return 97;case Dr:return 96;case Rr:return 95;default:throw Error(s(332))}}function Wr(e){switch(e){case 99:return Or;case 98:return Lr;case 97:return Mr;case 96:return Dr;case 95:return Rr;default:throw Error(s(332))}}function qr(e,t){return e=Wr(e),Sr(e,t)}function Gr(e,t,n){return e=Wr(e),wr(e,t,n)}function Xr(){if(null!==Fr){var e=Fr;Fr=null,Er(e)}Kr()}function Kr(){if(!Br&&null!==jr){Br=!0;var e=0;try{var t=jr;qr(99,(function(){for(;e<t.length;e++){var n=t[e];do{n=n(!0)}while(null!==n)}})),jr=null}catch(n){throw null!==jr&&(jr=jr.slice(e+1)),wr(Or,Xr),n}finally{Br=!1}}}var $r=T.ReactCurrentBatchConfig;function Yr(e,t){if(e&&e.defaultProps){for(var n in t=r({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var Qr=lr(null),Jr=null,Zr=null,ea=null;function ta(){ea=Zr=Jr=null}function na(e){var t=Qr.current;ur(Qr),e.type._context._currentValue=t}function ia(e,t){for(;null!==e;){var n=e.alternate;if((e.childLanes&t)===t){if(null===n||(n.childLanes&t)===t)break;n.childLanes|=t}else e.childLanes|=t,null!==n&&(n.childLanes|=t);e=e.return}}function ra(e,t){Jr=e,ea=Zr=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(Rs=!0),e.firstContext=null)}function aa(e,t){if(ea!==e&&!1!==t&&0!==t)if("number"===typeof t&&1073741823!==t||(ea=e,t=1073741823),t={context:e,observedBits:t,next:null},null===Zr){if(null===Jr)throw Error(s(308));Zr=t,Jr.dependencies={lanes:0,firstContext:t,responders:null}}else Zr=Zr.next=t;return e._currentValue}var sa=!1;function oa(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function la(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function ua(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function ca(e,t){if(null!==(e=e.updateQueue)){var n=(e=e.shared).pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}}function da(e,t){var n=e.updateQueue,i=e.alternate;if(null!==i&&n===(i=i.updateQueue)){var r=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?r=a=s:a=a.next=s,n=n.next}while(null!==n);null===a?r=a=t:a=a.next=t}else r=a=t;return n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:a,shared:i.shared,effects:i.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function ha(e,t,n,i){var a=e.updateQueue;sa=!1;var s=a.firstBaseUpdate,o=a.lastBaseUpdate,l=a.shared.pending;if(null!==l){a.shared.pending=null;var u=l,c=u.next;u.next=null,null===o?s=c:o.next=c,o=u;var d=e.alternate;if(null!==d){var h=(d=d.updateQueue).lastBaseUpdate;h!==o&&(null===h?d.firstBaseUpdate=c:h.next=c,d.lastBaseUpdate=u)}}if(null!==s){for(h=a.baseState,o=0,d=c=u=null;;){l=s.lane;var f=s.eventTime;if((i&l)===l){null!==d&&(d=d.next={eventTime:f,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var p=e,g=s;switch(l=t,f=n,g.tag){case 1:if("function"===typeof(p=g.payload)){h=p.call(f,h,l);break e}h=p;break e;case 3:p.flags=-4097&p.flags|64;case 0:if(null===(l="function"===typeof(p=g.payload)?p.call(f,h,l):p)||void 0===l)break e;h=r({},h,l);break e;case 2:sa=!0}}null!==s.callback&&(e.flags|=32,null===(l=a.effects)?a.effects=[s]:l.push(s))}else f={eventTime:f,lane:l,tag:s.tag,payload:s.payload,callback:s.callback,next:null},null===d?(c=d=f,u=h):d=d.next=f,o|=l;if(null===(s=s.next)){if(null===(l=a.shared.pending))break;s=l.next,l.next=null,a.lastBaseUpdate=l,a.shared.pending=null}}null===d&&(u=h),a.baseState=u,a.firstBaseUpdate=c,a.lastBaseUpdate=d,zo|=o,e.lanes=o,e.memoizedState=h}}function fa(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var i=e[t],r=i.callback;if(null!==r){if(i.callback=null,i=n,"function"!==typeof r)throw Error(s(191,r));r.call(i)}}}var pa=(new i.Component).refs;function ga(e,t,n,i){n=null===(n=n(i,t=e.memoizedState))||void 0===n?t:r({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var ma={isMounted:function(e){return!!(e=e._reactInternals)&&$e(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var i=hl(),r=fl(e),a=ua(i,r);a.payload=t,void 0!==n&&null!==n&&(a.callback=n),ca(e,a),pl(e,r,i)},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var i=hl(),r=fl(e),a=ua(i,r);a.tag=1,a.payload=t,void 0!==n&&null!==n&&(a.callback=n),ca(e,a),pl(e,r,i)},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=hl(),i=fl(e),r=ua(n,i);r.tag=2,void 0!==t&&null!==t&&(r.callback=t),ca(e,r),pl(e,i,n)}};function va(e,t,n,i,r,a,s){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(i,a,s):!t.prototype||!t.prototype.isPureReactComponent||(!di(n,i)||!di(r,a))}function ya(e,t,n){var i=!1,r=dr,a=t.contextType;return"object"===typeof a&&null!==a?a=aa(a):(r=mr(t)?pr:hr.current,a=(i=null!==(i=t.contextTypes)&&void 0!==i)?gr(e,r):dr),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=ma,e.stateNode=t,t._reactInternals=e,i&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=r,e.__reactInternalMemoizedMaskedChildContext=a),t}function _a(e,t,n,i){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,i),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,i),t.state!==e&&ma.enqueueReplaceState(t,t.state,null)}function ba(e,t,n,i){var r=e.stateNode;r.props=n,r.state=e.memoizedState,r.refs=pa,oa(e);var a=t.contextType;"object"===typeof a&&null!==a?r.context=aa(a):(a=mr(t)?pr:hr.current,r.context=gr(e,a)),ha(e,n,r,i),r.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(ga(e,t,a,n),r.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof r.getSnapshotBeforeUpdate||"function"!==typeof r.UNSAFE_componentWillMount&&"function"!==typeof r.componentWillMount||(t=r.state,"function"===typeof r.componentWillMount&&r.componentWillMount(),"function"===typeof r.UNSAFE_componentWillMount&&r.UNSAFE_componentWillMount(),t!==r.state&&ma.enqueueReplaceState(r,r.state,null),ha(e,n,r,i),r.state=e.memoizedState),"function"===typeof r.componentDidMount&&(e.flags|=4)}var Ta=Array.isArray;function ka(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(s(309));var i=n.stateNode}if(!i)throw Error(s(147,e));var r=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===r?t.ref:(t=function(e){var t=i.refs;t===pa&&(t=i.refs={}),null===e?delete t[r]:t[r]=e},t._stringRef=r,t)}if("string"!==typeof e)throw Error(s(284));if(!n._owner)throw Error(s(290,e))}return e}function xa(e,t){if("textarea"!==e.type)throw Error(s(31,"[object Object]"===Object.prototype.toString.call(t)?"object with keys {"+Object.keys(t).join(", ")+"}":t))}function Sa(e){function t(t,n){if(e){var i=t.lastEffect;null!==i?(i.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n,n.nextEffect=null,n.flags=8}}function n(n,i){if(!e)return null;for(;null!==i;)t(n,i),i=i.sibling;return null}function i(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function r(e,t){return(e=Gl(e,t)).index=0,e.sibling=null,e}function a(t,n,i){return t.index=i,e?null!==(i=t.alternate)?(i=i.index)<n?(t.flags=2,n):i:(t.flags=2,n):n}function o(t){return e&&null===t.alternate&&(t.flags=2),t}function l(e,t,n,i){return null===t||6!==t.tag?((t=Yl(n,e.mode,i)).return=e,t):((t=r(t,n)).return=e,t)}function u(e,t,n,i){return null!==t&&t.elementType===n.type?((i=r(t,n.props)).ref=ka(e,t,n),i.return=e,i):((i=Xl(n.type,n.key,n.props,null,e.mode,i)).ref=ka(e,t,n),i.return=e,i)}function c(e,t,n,i){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Ql(n,e.mode,i)).return=e,t):((t=r(t,n.children||[])).return=e,t)}function d(e,t,n,i,a){return null===t||7!==t.tag?((t=Kl(n,e.mode,i,a)).return=e,t):((t=r(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t||"number"===typeof t)return(t=Yl(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case k:return(n=Xl(t.type,t.key,t.props,null,e.mode,n)).ref=ka(e,null,t),n.return=e,n;case x:return(t=Ql(t,e.mode,n)).return=e,t}if(Ta(t)||V(t))return(t=Kl(t,e.mode,n,null)).return=e,t;xa(e,t)}return null}function f(e,t,n,i){var r=null!==t?t.key:null;if("string"===typeof n||"number"===typeof n)return null!==r?null:l(e,t,""+n,i);if("object"===typeof n&&null!==n){switch(n.$$typeof){case k:return n.key===r?n.type===S?d(e,t,n.props.children,i,r):u(e,t,n,i):null;case x:return n.key===r?c(e,t,n,i):null}if(Ta(n)||V(n))return null!==r?null:d(e,t,n,i,null);xa(e,n)}return null}function p(e,t,n,i,r){if("string"===typeof i||"number"===typeof i)return l(t,e=e.get(n)||null,""+i,r);if("object"===typeof i&&null!==i){switch(i.$$typeof){case k:return e=e.get(null===i.key?n:i.key)||null,i.type===S?d(t,e,i.props.children,r,i.key):u(t,e,i,r);case x:return c(t,e=e.get(null===i.key?n:i.key)||null,i,r)}if(Ta(i)||V(i))return d(t,e=e.get(n)||null,i,r,null);xa(t,i)}return null}function g(r,s,o,l){for(var u=null,c=null,d=s,g=s=0,m=null;null!==d&&g<o.length;g++){d.index>g?(m=d,d=null):m=d.sibling;var v=f(r,d,o[g],l);if(null===v){null===d&&(d=m);break}e&&d&&null===v.alternate&&t(r,d),s=a(v,s,g),null===c?u=v:c.sibling=v,c=v,d=m}if(g===o.length)return n(r,d),u;if(null===d){for(;g<o.length;g++)null!==(d=h(r,o[g],l))&&(s=a(d,s,g),null===c?u=d:c.sibling=d,c=d);return u}for(d=i(r,d);g<o.length;g++)null!==(m=p(d,r,g,o[g],l))&&(e&&null!==m.alternate&&d.delete(null===m.key?g:m.key),s=a(m,s,g),null===c?u=m:c.sibling=m,c=m);return e&&d.forEach((function(e){return t(r,e)})),u}function m(r,o,l,u){var c=V(l);if("function"!==typeof c)throw Error(s(150));if(null==(l=c.call(l)))throw Error(s(151));for(var d=c=null,g=o,m=o=0,v=null,y=l.next();null!==g&&!y.done;m++,y=l.next()){g.index>m?(v=g,g=null):v=g.sibling;var _=f(r,g,y.value,u);if(null===_){null===g&&(g=v);break}e&&g&&null===_.alternate&&t(r,g),o=a(_,o,m),null===d?c=_:d.sibling=_,d=_,g=v}if(y.done)return n(r,g),c;if(null===g){for(;!y.done;m++,y=l.next())null!==(y=h(r,y.value,u))&&(o=a(y,o,m),null===d?c=y:d.sibling=y,d=y);return c}for(g=i(r,g);!y.done;m++,y=l.next())null!==(y=p(g,r,m,y.value,u))&&(e&&null!==y.alternate&&g.delete(null===y.key?m:y.key),o=a(y,o,m),null===d?c=y:d.sibling=y,d=y);return e&&g.forEach((function(e){return t(r,e)})),c}return function(e,i,a,l){var u="object"===typeof a&&null!==a&&a.type===S&&null===a.key;u&&(a=a.props.children);var c="object"===typeof a&&null!==a;if(c)switch(a.$$typeof){case k:e:{for(c=a.key,u=i;null!==u;){if(u.key===c){if(7===u.tag){if(a.type===S){n(e,u.sibling),(i=r(u,a.props.children)).return=e,e=i;break e}}else if(u.elementType===a.type){n(e,u.sibling),(i=r(u,a.props)).ref=ka(e,u,a),i.return=e,e=i;break e}n(e,u);break}t(e,u),u=u.sibling}a.type===S?((i=Kl(a.props.children,e.mode,l,a.key)).return=e,e=i):((l=Xl(a.type,a.key,a.props,null,e.mode,l)).ref=ka(e,i,a),l.return=e,e=l)}return o(e);case x:e:{for(u=a.key;null!==i;){if(i.key===u){if(4===i.tag&&i.stateNode.containerInfo===a.containerInfo&&i.stateNode.implementation===a.implementation){n(e,i.sibling),(i=r(i,a.children||[])).return=e,e=i;break e}n(e,i);break}t(e,i),i=i.sibling}(i=Ql(a,e.mode,l)).return=e,e=i}return o(e)}if("string"===typeof a||"number"===typeof a)return a=""+a,null!==i&&6===i.tag?(n(e,i.sibling),(i=r(i,a)).return=e,e=i):(n(e,i),(i=Yl(a,e.mode,l)).return=e,e=i),o(e);if(Ta(a))return g(e,i,a,l);if(V(a))return m(e,i,a,l);if(c&&xa(e,a),"undefined"===typeof a&&!u)switch(e.tag){case 1:case 22:case 0:case 11:case 15:throw Error(s(152,X(e.type)||"Component"))}return n(e,i)}}var wa=Sa(!0),Ea=Sa(!1),Ca={},Pa=lr(Ca),Ia=lr(Ca),Aa=lr(Ca);function Oa(e){if(e===Ca)throw Error(s(174));return e}function La(e,t){switch(cr(Aa,t),cr(Ia,e),cr(Pa,Ca),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:fe(null,"");break;default:t=fe(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}ur(Pa),cr(Pa,t)}function Ma(){ur(Pa),ur(Ia),ur(Aa)}function Da(e){Oa(Aa.current);var t=Oa(Pa.current),n=fe(t,e.type);t!==n&&(cr(Ia,e),cr(Pa,n))}function Ra(e){Ia.current===e&&(ur(Pa),ur(Ia))}var Na=lr(0);function Ua(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(64&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ja=null,Fa=null,Ba=!1;function za(e,t){var n=Wl(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=t,n.return=e,n.flags=8,null!==e.lastEffect?(e.lastEffect.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n}function Va(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,!0);default:return!1}}function Ha(e){if(Ba){var t=Fa;if(t){var n=t;if(!Va(e,t)){if(!(t=Xi(n.nextSibling))||!Va(e,t))return e.flags=-1025&e.flags|2,Ba=!1,void(ja=e);za(ja,n)}ja=e,Fa=Xi(t.firstChild)}else e.flags=-1025&e.flags|2,Ba=!1,ja=e}}function Wa(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ja=e}function qa(e){if(e!==ja)return!1;if(!Ba)return Wa(e),Ba=!0,!1;var t=e.type;if(5!==e.tag||"head"!==t&&"body"!==t&&!Hi(t,e.memoizedProps))for(t=Fa;t;)za(e,t),t=Xi(t.nextSibling);if(Wa(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(s(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){Fa=Xi(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}Fa=null}}else Fa=ja?Xi(e.stateNode.nextSibling):null;return!0}function Ga(){Fa=ja=null,Ba=!1}var Xa=[];function Ka(){for(var e=0;e<Xa.length;e++)Xa[e]._workInProgressVersionPrimary=null;Xa.length=0}var $a=T.ReactCurrentDispatcher,Ya=T.ReactCurrentBatchConfig,Qa=0,Ja=null,Za=null,es=null,ts=!1,ns=!1;function is(){throw Error(s(321))}function rs(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ui(e[n],t[n]))return!1;return!0}function as(e,t,n,i,r,a){if(Qa=a,Ja=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,$a.current=null===e||null===e.memoizedState?Os:Ls,e=n(i,r),ns){a=0;do{if(ns=!1,!(25>a))throw Error(s(301));a+=1,es=Za=null,t.updateQueue=null,$a.current=Ms,e=n(i,r)}while(ns)}if($a.current=As,t=null!==Za&&null!==Za.next,Qa=0,es=Za=Ja=null,ts=!1,t)throw Error(s(300));return e}function ss(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===es?Ja.memoizedState=es=e:es=es.next=e,es}function os(){if(null===Za){var e=Ja.alternate;e=null!==e?e.memoizedState:null}else e=Za.next;var t=null===es?Ja.memoizedState:es.next;if(null!==t)es=t,Za=e;else{if(null===e)throw Error(s(310));e={memoizedState:(Za=e).memoizedState,baseState:Za.baseState,baseQueue:Za.baseQueue,queue:Za.queue,next:null},null===es?Ja.memoizedState=es=e:es=es.next=e}return es}function ls(e,t){return"function"===typeof t?t(e):t}function us(e){var t=os(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var i=Za,r=i.baseQueue,a=n.pending;if(null!==a){if(null!==r){var o=r.next;r.next=a.next,a.next=o}i.baseQueue=r=a,n.pending=null}if(null!==r){r=r.next,i=i.baseState;var l=o=a=null,u=r;do{var c=u.lane;if((Qa&c)===c)null!==l&&(l=l.next={lane:0,action:u.action,eagerReducer:u.eagerReducer,eagerState:u.eagerState,next:null}),i=u.eagerReducer===e?u.eagerState:e(i,u.action);else{var d={lane:c,action:u.action,eagerReducer:u.eagerReducer,eagerState:u.eagerState,next:null};null===l?(o=l=d,a=i):l=l.next=d,Ja.lanes|=c,zo|=c}u=u.next}while(null!==u&&u!==r);null===l?a=i:l.next=o,ui(i,t.memoizedState)||(Rs=!0),t.memoizedState=i,t.baseState=a,t.baseQueue=l,n.lastRenderedState=i}return[t.memoizedState,n.dispatch]}function cs(e){var t=os(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var i=n.dispatch,r=n.pending,a=t.memoizedState;if(null!==r){n.pending=null;var o=r=r.next;do{a=e(a,o.action),o=o.next}while(o!==r);ui(a,t.memoizedState)||(Rs=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),n.lastRenderedState=a}return[a,i]}function ds(e,t,n){var i=t._getVersion;i=i(t._source);var r=t._workInProgressVersionPrimary;if(null!==r?e=r===i:(e=e.mutableReadLanes,(e=(Qa&e)===e)&&(t._workInProgressVersionPrimary=i,Xa.push(t))),e)return n(t._source);throw Xa.push(t),Error(s(350))}function hs(e,t,n,i){var r=Mo;if(null===r)throw Error(s(349));var a=t._getVersion,o=a(t._source),l=$a.current,u=l.useState((function(){return ds(r,t,n)})),c=u[1],d=u[0];u=es;var h=e.memoizedState,f=h.refs,p=f.getSnapshot,g=h.source;h=h.subscribe;var m=Ja;return e.memoizedState={refs:f,source:t,subscribe:i},l.useEffect((function(){f.getSnapshot=n,f.setSnapshot=c;var e=a(t._source);if(!ui(o,e)){e=n(t._source),ui(d,e)||(c(e),e=fl(m),r.mutableReadLanes|=e&r.pendingLanes),e=r.mutableReadLanes,r.entangledLanes|=e;for(var i=r.entanglements,s=e;0<s;){var l=31-Ht(s),u=1<<l;i[l]|=e,s&=~u}}}),[n,t,i]),l.useEffect((function(){return i(t._source,(function(){var e=f.getSnapshot,n=f.setSnapshot;try{n(e(t._source));var i=fl(m);r.mutableReadLanes|=i&r.pendingLanes}catch(a){n((function(){throw a}))}}))}),[t,i]),ui(p,n)&&ui(g,t)&&ui(h,i)||((e={pending:null,dispatch:null,lastRenderedReducer:ls,lastRenderedState:d}).dispatch=c=Is.bind(null,Ja,e),u.queue=e,u.baseQueue=null,d=ds(r,t,n),u.memoizedState=u.baseState=d),d}function fs(e,t,n){return hs(os(),e,t,n)}function ps(e){var t=ss();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e=(e=t.queue={pending:null,dispatch:null,lastRenderedReducer:ls,lastRenderedState:e}).dispatch=Is.bind(null,Ja,e),[t.memoizedState,e]}function gs(e,t,n,i){return e={tag:e,create:t,destroy:n,deps:i,next:null},null===(t=Ja.updateQueue)?(t={lastEffect:null},Ja.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(i=n.next,n.next=e,e.next=i,t.lastEffect=e),e}function ms(e){return e={current:e},ss().memoizedState=e}function vs(){return os().memoizedState}function ys(e,t,n,i){var r=ss();Ja.flags|=e,r.memoizedState=gs(1|t,n,void 0,void 0===i?null:i)}function _s(e,t,n,i){var r=os();i=void 0===i?null:i;var a=void 0;if(null!==Za){var s=Za.memoizedState;if(a=s.destroy,null!==i&&rs(i,s.deps))return void gs(t,n,a,i)}Ja.flags|=e,r.memoizedState=gs(1|t,n,a,i)}function bs(e,t){return ys(516,4,e,t)}function Ts(e,t){return _s(516,4,e,t)}function ks(e,t){return _s(4,2,e,t)}function xs(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Ss(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,_s(4,2,xs.bind(null,t,e),n)}function ws(){}function Es(e,t){var n=os();t=void 0===t?null:t;var i=n.memoizedState;return null!==i&&null!==t&&rs(t,i[1])?i[0]:(n.memoizedState=[e,t],e)}function Cs(e,t){var n=os();t=void 0===t?null:t;var i=n.memoizedState;return null!==i&&null!==t&&rs(t,i[1])?i[0]:(e=e(),n.memoizedState=[e,t],e)}function Ps(e,t){var n=Hr();qr(98>n?98:n,(function(){e(!0)})),qr(97<n?97:n,(function(){var n=Ya.transition;Ya.transition=1;try{e(!1),t()}finally{Ya.transition=n}}))}function Is(e,t,n){var i=hl(),r=fl(e),a={lane:r,action:n,eagerReducer:null,eagerState:null,next:null},s=t.pending;if(null===s?a.next=a:(a.next=s.next,s.next=a),t.pending=a,s=e.alternate,e===Ja||null!==s&&s===Ja)ns=ts=!0;else{if(0===e.lanes&&(null===s||0===s.lanes)&&null!==(s=t.lastRenderedReducer))try{var o=t.lastRenderedState,l=s(o,n);if(a.eagerReducer=s,a.eagerState=l,ui(l,o))return}catch(u){}pl(e,r,i)}}var As={readContext:aa,useCallback:is,useContext:is,useEffect:is,useImperativeHandle:is,useLayoutEffect:is,useMemo:is,useReducer:is,useRef:is,useState:is,useDebugValue:is,useDeferredValue:is,useTransition:is,useMutableSource:is,useOpaqueIdentifier:is,unstable_isNewReconciler:!1},Os={readContext:aa,useCallback:function(e,t){return ss().memoizedState=[e,void 0===t?null:t],e},useContext:aa,useEffect:bs,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,ys(4,2,xs.bind(null,t,e),n)},useLayoutEffect:function(e,t){return ys(4,2,e,t)},useMemo:function(e,t){var n=ss();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var i=ss();return t=void 0!==n?n(t):t,i.memoizedState=i.baseState=t,e=(e=i.queue={pending:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:t}).dispatch=Is.bind(null,Ja,e),[i.memoizedState,e]},useRef:ms,useState:ps,useDebugValue:ws,useDeferredValue:function(e){var t=ps(e),n=t[0],i=t[1];return bs((function(){var t=Ya.transition;Ya.transition=1;try{i(e)}finally{Ya.transition=t}}),[e]),n},useTransition:function(){var e=ps(!1),t=e[0];return ms(e=Ps.bind(null,e[1])),[e,t]},useMutableSource:function(e,t,n){var i=ss();return i.memoizedState={refs:{getSnapshot:t,setSnapshot:null},source:e,subscribe:n},hs(i,e,t,n)},useOpaqueIdentifier:function(){if(Ba){var e=!1,t=function(e){return{$$typeof:R,toString:e,valueOf:e}}((function(){throw e||(e=!0,n("r:"+($i++).toString(36))),Error(s(355))})),n=ps(t)[1];return 0===(2&Ja.mode)&&(Ja.flags|=516,gs(5,(function(){n("r:"+($i++).toString(36))}),void 0,null)),t}return ps(t="r:"+($i++).toString(36)),t},unstable_isNewReconciler:!1},Ls={readContext:aa,useCallback:Es,useContext:aa,useEffect:Ts,useImperativeHandle:Ss,useLayoutEffect:ks,useMemo:Cs,useReducer:us,useRef:vs,useState:function(){return us(ls)},useDebugValue:ws,useDeferredValue:function(e){var t=us(ls),n=t[0],i=t[1];return Ts((function(){var t=Ya.transition;Ya.transition=1;try{i(e)}finally{Ya.transition=t}}),[e]),n},useTransition:function(){var e=us(ls)[0];return[vs().current,e]},useMutableSource:fs,useOpaqueIdentifier:function(){return us(ls)[0]},unstable_isNewReconciler:!1},Ms={readContext:aa,useCallback:Es,useContext:aa,useEffect:Ts,useImperativeHandle:Ss,useLayoutEffect:ks,useMemo:Cs,useReducer:cs,useRef:vs,useState:function(){return cs(ls)},useDebugValue:ws,useDeferredValue:function(e){var t=cs(ls),n=t[0],i=t[1];return Ts((function(){var t=Ya.transition;Ya.transition=1;try{i(e)}finally{Ya.transition=t}}),[e]),n},useTransition:function(){var e=cs(ls)[0];return[vs().current,e]},useMutableSource:fs,useOpaqueIdentifier:function(){return cs(ls)[0]},unstable_isNewReconciler:!1},Ds=T.ReactCurrentOwner,Rs=!1;function Ns(e,t,n,i){t.child=null===e?Ea(t,null,n,i):wa(t,e.child,n,i)}function Us(e,t,n,i,r){n=n.render;var a=t.ref;return ra(t,r),i=as(e,t,n,i,a,r),null===e||Rs?(t.flags|=1,Ns(e,t,i,r),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~r,ro(e,t,r))}function js(e,t,n,i,r,a){if(null===e){var s=n.type;return"function"!==typeof s||ql(s)||void 0!==s.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Xl(n.type,null,i,t,t.mode,a)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,Fs(e,t,s,i,r,a))}return s=e.child,0===(r&a)&&(r=s.memoizedProps,(n=null!==(n=n.compare)?n:di)(r,i)&&e.ref===t.ref)?ro(e,t,a):(t.flags|=1,(e=Gl(s,i)).ref=t.ref,e.return=t,t.child=e)}function Fs(e,t,n,i,r,a){if(null!==e&&di(e.memoizedProps,i)&&e.ref===t.ref){if(Rs=!1,0===(a&r))return t.lanes=e.lanes,ro(e,t,a);0!==(16384&e.flags)&&(Rs=!0)}return Vs(e,t,n,i,a)}function Bs(e,t,n){var i=t.pendingProps,r=i.children,a=null!==e?e.memoizedState:null;if("hidden"===i.mode||"unstable-defer-without-hiding"===i.mode)if(0===(4&t.mode))t.memoizedState={baseLanes:0},kl(t,n);else{if(0===(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e},kl(t,e),null;t.memoizedState={baseLanes:0},kl(t,null!==a?a.baseLanes:n)}else null!==a?(i=a.baseLanes|n,t.memoizedState=null):i=n,kl(t,i);return Ns(e,t,r,n),t.child}function zs(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=128)}function Vs(e,t,n,i,r){var a=mr(n)?pr:hr.current;return a=gr(t,a),ra(t,r),n=as(e,t,n,i,a,r),null===e||Rs?(t.flags|=1,Ns(e,t,n,r),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~r,ro(e,t,r))}function Hs(e,t,n,i,r){if(mr(n)){var a=!0;br(t)}else a=!1;if(ra(t,r),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),ya(t,n,i),ba(t,n,i,r),i=!0;else if(null===e){var s=t.stateNode,o=t.memoizedProps;s.props=o;var l=s.context,u=n.contextType;"object"===typeof u&&null!==u?u=aa(u):u=gr(t,u=mr(n)?pr:hr.current);var c=n.getDerivedStateFromProps,d="function"===typeof c||"function"===typeof s.getSnapshotBeforeUpdate;d||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(o!==i||l!==u)&&_a(t,s,i,u),sa=!1;var h=t.memoizedState;s.state=h,ha(t,i,s,r),l=t.memoizedState,o!==i||h!==l||fr.current||sa?("function"===typeof c&&(ga(t,n,c,i),l=t.memoizedState),(o=sa||va(t,n,o,i,h,l,u))?(d||"function"!==typeof s.UNSAFE_componentWillMount&&"function"!==typeof s.componentWillMount||("function"===typeof s.componentWillMount&&s.componentWillMount(),"function"===typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount()),"function"===typeof s.componentDidMount&&(t.flags|=4)):("function"===typeof s.componentDidMount&&(t.flags|=4),t.memoizedProps=i,t.memoizedState=l),s.props=i,s.state=l,s.context=u,i=o):("function"===typeof s.componentDidMount&&(t.flags|=4),i=!1)}else{s=t.stateNode,la(e,t),o=t.memoizedProps,u=t.type===t.elementType?o:Yr(t.type,o),s.props=u,d=t.pendingProps,h=s.context,"object"===typeof(l=n.contextType)&&null!==l?l=aa(l):l=gr(t,l=mr(n)?pr:hr.current);var f=n.getDerivedStateFromProps;(c="function"===typeof f||"function"===typeof s.getSnapshotBeforeUpdate)||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(o!==d||h!==l)&&_a(t,s,i,l),sa=!1,h=t.memoizedState,s.state=h,ha(t,i,s,r);var p=t.memoizedState;o!==d||h!==p||fr.current||sa?("function"===typeof f&&(ga(t,n,f,i),p=t.memoizedState),(u=sa||va(t,n,u,i,h,p,l))?(c||"function"!==typeof s.UNSAFE_componentWillUpdate&&"function"!==typeof s.componentWillUpdate||("function"===typeof s.componentWillUpdate&&s.componentWillUpdate(i,p,l),"function"===typeof s.UNSAFE_componentWillUpdate&&s.UNSAFE_componentWillUpdate(i,p,l)),"function"===typeof s.componentDidUpdate&&(t.flags|=4),"function"===typeof s.getSnapshotBeforeUpdate&&(t.flags|=256)):("function"!==typeof s.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=256),t.memoizedProps=i,t.memoizedState=p),s.props=i,s.state=p,s.context=l,i=u):("function"!==typeof s.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=256),i=!1)}return Ws(e,t,n,i,a,r)}function Ws(e,t,n,i,r,a){zs(e,t);var s=0!==(64&t.flags);if(!i&&!s)return r&&Tr(t,n,!1),ro(e,t,a);i=t.stateNode,Ds.current=t;var o=s&&"function"!==typeof n.getDerivedStateFromError?null:i.render();return t.flags|=1,null!==e&&s?(t.child=wa(t,e.child,null,a),t.child=wa(t,null,o,a)):Ns(e,t,o,a),t.memoizedState=i.state,r&&Tr(t,n,!0),t.child}function qs(e){var t=e.stateNode;t.pendingContext?yr(0,t.pendingContext,t.pendingContext!==t.context):t.context&&yr(0,t.context,!1),La(e,t.containerInfo)}var Gs,Xs,Ks,$s,Ys={dehydrated:null,retryLane:0};function Qs(e,t,n){var i,r=t.pendingProps,a=Na.current,s=!1;return(i=0!==(64&t.flags))||(i=(null===e||null!==e.memoizedState)&&0!==(2&a)),i?(s=!0,t.flags&=-65):null!==e&&null===e.memoizedState||void 0===r.fallback||!0===r.unstable_avoidThisFallback||(a|=1),cr(Na,1&a),null===e?(void 0!==r.fallback&&Ha(t),e=r.children,a=r.fallback,s?(e=Js(t,e,a,n),t.child.memoizedState={baseLanes:n},t.memoizedState=Ys,e):"number"===typeof r.unstable_expectedLoadTime?(e=Js(t,e,a,n),t.child.memoizedState={baseLanes:n},t.memoizedState=Ys,t.lanes=33554432,e):((n=$l({mode:"visible",children:e},t.mode,n,null)).return=t,t.child=n)):(e.memoizedState,s?(r=eo(e,t,r.children,r.fallback,n),s=t.child,a=e.child.memoizedState,s.memoizedState=null===a?{baseLanes:n}:{baseLanes:a.baseLanes|n},s.childLanes=e.childLanes&~n,t.memoizedState=Ys,r):(n=Zs(e,t,r.children,n),t.memoizedState=null,n))}function Js(e,t,n,i){var r=e.mode,a=e.child;return t={mode:"hidden",children:t},0===(2&r)&&null!==a?(a.childLanes=0,a.pendingProps=t):a=$l(t,r,0,null),n=Kl(n,r,i,null),a.return=e,n.return=e,a.sibling=n,e.child=a,n}function Zs(e,t,n,i){var r=e.child;return e=r.sibling,n=Gl(r,{mode:"visible",children:n}),0===(2&t.mode)&&(n.lanes=i),n.return=t,n.sibling=null,null!==e&&(e.nextEffect=null,e.flags=8,t.firstEffect=t.lastEffect=e),t.child=n}function eo(e,t,n,i,r){var a=t.mode,s=e.child;e=s.sibling;var o={mode:"hidden",children:n};return 0===(2&a)&&t.child!==s?((n=t.child).childLanes=0,n.pendingProps=o,null!==(s=n.lastEffect)?(t.firstEffect=n.firstEffect,t.lastEffect=s,s.nextEffect=null):t.firstEffect=t.lastEffect=null):n=Gl(s,o),null!==e?i=Gl(e,i):(i=Kl(i,a,r,null)).flags|=2,i.return=t,n.return=t,n.sibling=i,t.child=n,i}function to(e,t){e.lanes|=t;var n=e.alternate;null!==n&&(n.lanes|=t),ia(e.return,t)}function no(e,t,n,i,r,a){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r,lastEffect:a}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=i,s.tail=n,s.tailMode=r,s.lastEffect=a)}function io(e,t,n){var i=t.pendingProps,r=i.revealOrder,a=i.tail;if(Ns(e,t,i.children,n),0!==(2&(i=Na.current)))i=1&i|2,t.flags|=64;else{if(null!==e&&0!==(64&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&to(e,n);else if(19===e.tag)to(e,n);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}i&=1}if(cr(Na,i),0===(2&t.mode))t.memoizedState=null;else switch(r){case"forwards":for(n=t.child,r=null;null!==n;)null!==(e=n.alternate)&&null===Ua(e)&&(r=n),n=n.sibling;null===(n=r)?(r=t.child,t.child=null):(r=n.sibling,n.sibling=null),no(t,!1,r,n,a,t.lastEffect);break;case"backwards":for(n=null,r=t.child,t.child=null;null!==r;){if(null!==(e=r.alternate)&&null===Ua(e)){t.child=r;break}e=r.sibling,r.sibling=n,n=r,r=e}no(t,!0,n,null,a,t.lastEffect);break;case"together":no(t,!1,null,null,void 0,t.lastEffect);break;default:t.memoizedState=null}return t.child}function ro(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),zo|=t.lanes,0!==(n&t.childLanes)){if(null!==e&&t.child!==e.child)throw Error(s(153));if(null!==t.child){for(n=Gl(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Gl(e,e.pendingProps)).return=t;n.sibling=null}return t.child}return null}function ao(e,t){if(!Ba)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var i=null;null!==n;)null!==n.alternate&&(i=n),n=n.sibling;null===i?t||null===e.tail?e.tail=null:e.tail.sibling=null:i.sibling=null}}function so(e,t,n){var i=t.pendingProps;switch(t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:case 17:return mr(t.type)&&vr(),null;case 3:return Ma(),ur(fr),ur(hr),Ka(),(i=t.stateNode).pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),null!==e&&null!==e.child||(qa(t)?t.flags|=4:i.hydrate||(t.flags|=256)),Xs(t),null;case 5:Ra(t);var a=Oa(Aa.current);if(n=t.type,null!==e&&null!=t.stateNode)Ks(e,t,n,i,a),e.ref!==t.ref&&(t.flags|=128);else{if(!i){if(null===t.stateNode)throw Error(s(166));return null}if(e=Oa(Pa.current),qa(t)){i=t.stateNode,n=t.type;var o=t.memoizedProps;switch(i[Qi]=t,i[Ji]=o,n){case"dialog":Ii("cancel",i),Ii("close",i);break;case"iframe":case"object":case"embed":Ii("load",i);break;case"video":case"audio":for(e=0;e<wi.length;e++)Ii(wi[e],i);break;case"source":Ii("error",i);break;case"img":case"image":case"link":Ii("error",i),Ii("load",i);break;case"details":Ii("toggle",i);break;case"input":ee(i,o),Ii("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!o.multiple},Ii("invalid",i);break;case"textarea":le(i,o),Ii("invalid",i)}for(var u in xe(n,o),e=null,o)o.hasOwnProperty(u)&&(a=o[u],"children"===u?"string"===typeof a?i.textContent!==a&&(e=["children",a]):"number"===typeof a&&i.textContent!==""+a&&(e=["children",""+a]):l.hasOwnProperty(u)&&null!=a&&"onScroll"===u&&Ii("scroll",i));switch(n){case"input":Y(i),ie(i,o,!0);break;case"textarea":Y(i),ce(i);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(i.onclick=Fi)}i=e,t.updateQueue=i,null!==i&&(t.flags|=4)}else{switch(u=9===a.nodeType?a:a.ownerDocument,e===de.html&&(e=he(n)),e===de.html?"script"===n?((e=u.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof i.is?e=u.createElement(n,{is:i.is}):(e=u.createElement(n),"select"===n&&(u=e,i.multiple?u.multiple=!0:i.size&&(u.size=i.size))):e=u.createElementNS(e,n),e[Qi]=t,e[Ji]=i,Gs(e,t,!1,!1),t.stateNode=e,u=Se(n,i),n){case"dialog":Ii("cancel",e),Ii("close",e),a=i;break;case"iframe":case"object":case"embed":Ii("load",e),a=i;break;case"video":case"audio":for(a=0;a<wi.length;a++)Ii(wi[a],e);a=i;break;case"source":Ii("error",e),a=i;break;case"img":case"image":case"link":Ii("error",e),Ii("load",e),a=i;break;case"details":Ii("toggle",e),a=i;break;case"input":ee(e,i),a=Z(e,i),Ii("invalid",e);break;case"option":a=ae(e,i);break;case"select":e._wrapperState={wasMultiple:!!i.multiple},a=r({},i,{value:void 0}),Ii("invalid",e);break;case"textarea":le(e,i),a=oe(e,i),Ii("invalid",e);break;default:a=i}xe(n,a);var c=a;for(o in c)if(c.hasOwnProperty(o)){var d=c[o];"style"===o?Te(e,d):"dangerouslySetInnerHTML"===o?null!=(d=d?d.__html:void 0)&&me(e,d):"children"===o?"string"===typeof d?("textarea"!==n||""!==d)&&ve(e,d):"number"===typeof d&&ve(e,""+d):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(l.hasOwnProperty(o)?null!=d&&"onScroll"===o&&Ii("scroll",e):null!=d&&b(e,o,d,u))}switch(n){case"input":Y(e),ie(e,i,!1);break;case"textarea":Y(e),ce(e);break;case"option":null!=i.value&&e.setAttribute("value",""+K(i.value));break;case"select":e.multiple=!!i.multiple,null!=(o=i.value)?se(e,!!i.multiple,o,!1):null!=i.defaultValue&&se(e,!!i.multiple,i.defaultValue,!0);break;default:"function"===typeof a.onClick&&(e.onclick=Fi)}Vi(n,i)&&(t.flags|=4)}null!==t.ref&&(t.flags|=128)}return null;case 6:if(e&&null!=t.stateNode)$s(e,t,e.memoizedProps,i);else{if("string"!==typeof i&&null===t.stateNode)throw Error(s(166));n=Oa(Aa.current),Oa(Pa.current),qa(t)?(i=t.stateNode,n=t.memoizedProps,i[Qi]=t,i.nodeValue!==n&&(t.flags|=4)):((i=(9===n.nodeType?n:n.ownerDocument).createTextNode(i))[Qi]=t,t.stateNode=i)}return null;case 13:return ur(Na),i=t.memoizedState,0!==(64&t.flags)?(t.lanes=n,t):(i=null!==i,n=!1,null===e?void 0!==t.memoizedProps.fallback&&qa(t):n=null!==e.memoizedState,i&&!n&&0!==(2&t.mode)&&(null===e&&!0!==t.memoizedProps.unstable_avoidThisFallback||0!==(1&Na.current)?0===jo&&(jo=3):(0!==jo&&3!==jo||(jo=4),null===Mo||0===(134217727&zo)&&0===(134217727&Vo)||yl(Mo,Ro))),(i||n)&&(t.flags|=4),null);case 4:return Ma(),Xs(t),null===e&&Oi(t.stateNode.containerInfo),null;case 10:return na(t),null;case 19:if(ur(Na),null===(i=t.memoizedState))return null;if(o=0!==(64&t.flags),null===(u=i.rendering))if(o)ao(i,!1);else{if(0!==jo||null!==e&&0!==(64&e.flags))for(e=t.child;null!==e;){if(null!==(u=Ua(e))){for(t.flags|=64,ao(i,!1),null!==(o=u.updateQueue)&&(t.updateQueue=o,t.flags|=4),null===i.lastEffect&&(t.firstEffect=null),t.lastEffect=i.lastEffect,i=n,n=t.child;null!==n;)e=i,(o=n).flags&=2,o.nextEffect=null,o.firstEffect=null,o.lastEffect=null,null===(u=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=u.childLanes,o.lanes=u.lanes,o.child=u.child,o.memoizedProps=u.memoizedProps,o.memoizedState=u.memoizedState,o.updateQueue=u.updateQueue,o.type=u.type,e=u.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return cr(Na,1&Na.current|2),t.child}e=e.sibling}null!==i.tail&&Vr()>Go&&(t.flags|=64,o=!0,ao(i,!1),t.lanes=33554432)}else{if(!o)if(null!==(e=Ua(u))){if(t.flags|=64,o=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),ao(i,!0),null===i.tail&&"hidden"===i.tailMode&&!u.alternate&&!Ba)return null!==(t=t.lastEffect=i.lastEffect)&&(t.nextEffect=null),null}else 2*Vr()-i.renderingStartTime>Go&&1073741824!==n&&(t.flags|=64,o=!0,ao(i,!1),t.lanes=33554432);i.isBackwards?(u.sibling=t.child,t.child=u):(null!==(n=i.last)?n.sibling=u:t.child=u,i.last=u)}return null!==i.tail?(n=i.tail,i.rendering=n,i.tail=n.sibling,i.lastEffect=t.lastEffect,i.renderingStartTime=Vr(),n.sibling=null,t=Na.current,cr(Na,o?1&t|2:1&t),n):null;case 23:case 24:return xl(),null!==e&&null!==e.memoizedState!==(null!==t.memoizedState)&&"unstable-defer-without-hiding"!==i.mode&&(t.flags|=4),null}throw Error(s(156,t.tag))}function oo(e){switch(e.tag){case 1:mr(e.type)&&vr();var t=e.flags;return 4096&t?(e.flags=-4097&t|64,e):null;case 3:if(Ma(),ur(fr),ur(hr),Ka(),0!==(64&(t=e.flags)))throw Error(s(285));return e.flags=-4097&t|64,e;case 5:return Ra(e),null;case 13:return ur(Na),4096&(t=e.flags)?(e.flags=-4097&t|64,e):null;case 19:return ur(Na),null;case 4:return Ma(),null;case 10:return na(e),null;case 23:case 24:return xl(),null;default:return null}}function lo(e,t){try{var n="",i=t;do{n+=G(i),i=i.return}while(i);var r=n}catch(a){r="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:r}}function uo(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}Gs=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Xs=function(){},Ks=function(e,t,n,i){var a=e.memoizedProps;if(a!==i){e=t.stateNode,Oa(Pa.current);var s,o=null;switch(n){case"input":a=Z(e,a),i=Z(e,i),o=[];break;case"option":a=ae(e,a),i=ae(e,i),o=[];break;case"select":a=r({},a,{value:void 0}),i=r({},i,{value:void 0}),o=[];break;case"textarea":a=oe(e,a),i=oe(e,i),o=[];break;default:"function"!==typeof a.onClick&&"function"===typeof i.onClick&&(e.onclick=Fi)}for(d in xe(n,i),n=null,a)if(!i.hasOwnProperty(d)&&a.hasOwnProperty(d)&&null!=a[d])if("style"===d){var u=a[d];for(s in u)u.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else"dangerouslySetInnerHTML"!==d&&"children"!==d&&"suppressContentEditableWarning"!==d&&"suppressHydrationWarning"!==d&&"autoFocus"!==d&&(l.hasOwnProperty(d)?o||(o=[]):(o=o||[]).push(d,null));for(d in i){var c=i[d];if(u=null!=a?a[d]:void 0,i.hasOwnProperty(d)&&c!==u&&(null!=c||null!=u))if("style"===d)if(u){for(s in u)!u.hasOwnProperty(s)||c&&c.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in c)c.hasOwnProperty(s)&&u[s]!==c[s]&&(n||(n={}),n[s]=c[s])}else n||(o||(o=[]),o.push(d,n)),n=c;else"dangerouslySetInnerHTML"===d?(c=c?c.__html:void 0,u=u?u.__html:void 0,null!=c&&u!==c&&(o=o||[]).push(d,c)):"children"===d?"string"!==typeof c&&"number"!==typeof c||(o=o||[]).push(d,""+c):"suppressContentEditableWarning"!==d&&"suppressHydrationWarning"!==d&&(l.hasOwnProperty(d)?(null!=c&&"onScroll"===d&&Ii("scroll",e),o||u===c||(o=[])):"object"===typeof c&&null!==c&&c.$$typeof===R?c.toString():(o=o||[]).push(d,c))}n&&(o=o||[]).push("style",n);var d=o;(t.updateQueue=d)&&(t.flags|=4)}},$s=function(e,t,n,i){n!==i&&(t.flags|=4)};var co="function"===typeof WeakMap?WeakMap:Map;function ho(e,t,n){(n=ua(-1,n)).tag=3,n.payload={element:null};var i=t.value;return n.callback=function(){Yo||(Yo=!0,Qo=i),uo(0,t)},n}function fo(e,t,n){(n=ua(-1,n)).tag=3;var i=e.type.getDerivedStateFromError;if("function"===typeof i){var r=t.value;n.payload=function(){return uo(0,t),i(r)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(n.callback=function(){"function"!==typeof i&&(null===Jo?Jo=new Set([this]):Jo.add(this),uo(0,t));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}var po="function"===typeof WeakSet?WeakSet:Set;function go(e){var t=e.ref;if(null!==t)if("function"===typeof t)try{t(null)}catch(n){Bl(e,n)}else t.current=null}function mo(e,t){switch(t.tag){case 0:case 11:case 15:case 22:case 5:case 6:case 4:case 17:return;case 1:if(256&t.flags&&null!==e){var n=e.memoizedProps,i=e.memoizedState;t=(e=t.stateNode).getSnapshotBeforeUpdate(t.elementType===t.type?n:Yr(t.type,n),i),e.__reactInternalSnapshotBeforeUpdate=t}return;case 3:return void(256&t.flags&&Gi(t.stateNode.containerInfo))}throw Error(s(163))}function vo(e,t,n){switch(n.tag){case 0:case 11:case 15:case 22:if(null!==(t=null!==(t=n.updateQueue)?t.lastEffect:null)){e=t=t.next;do{if(3===(3&e.tag)){var i=e.create;e.destroy=i()}e=e.next}while(e!==t)}if(null!==(t=null!==(t=n.updateQueue)?t.lastEffect:null)){e=t=t.next;do{var r=e;i=r.next,0!==(4&(r=r.tag))&&0!==(1&r)&&(Ul(n,e),Nl(n,e)),e=i}while(e!==t)}return;case 1:return e=n.stateNode,4&n.flags&&(null===t?e.componentDidMount():(i=n.elementType===n.type?t.memoizedProps:Yr(n.type,t.memoizedProps),e.componentDidUpdate(i,t.memoizedState,e.__reactInternalSnapshotBeforeUpdate))),void(null!==(t=n.updateQueue)&&fa(n,t,e));case 3:if(null!==(t=n.updateQueue)){if(e=null,null!==n.child)switch(n.child.tag){case 5:case 1:e=n.child.stateNode}fa(n,t,e)}return;case 5:return e=n.stateNode,void(null===t&&4&n.flags&&Vi(n.type,n.memoizedProps)&&e.focus());case 6:case 4:case 12:case 19:case 17:case 20:case 21:case 23:case 24:return;case 13:return void(null===n.memoizedState&&(n=n.alternate,null!==n&&(n=n.memoizedState,null!==n&&(n=n.dehydrated,null!==n&&Tt(n)))))}throw Error(s(163))}function yo(e,t){for(var n=e;;){if(5===n.tag){var i=n.stateNode;if(t)"function"===typeof(i=i.style).setProperty?i.setProperty("display","none","important"):i.display="none";else{i=n.stateNode;var r=n.memoizedProps.style;r=void 0!==r&&null!==r&&r.hasOwnProperty("display")?r.display:null,i.style.display=be("display",r)}}else if(6===n.tag)n.stateNode.nodeValue=t?"":n.memoizedProps;else if((23!==n.tag&&24!==n.tag||null===n.memoizedState||n===e)&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}}function _o(e,t){if(xr&&"function"===typeof xr.onCommitFiberUnmount)try{xr.onCommitFiberUnmount(kr,t)}catch(a){}switch(t.tag){case 0:case 11:case 14:case 15:case 22:if(null!==(e=t.updateQueue)&&null!==(e=e.lastEffect)){var n=e=e.next;do{var i=n,r=i.destroy;if(i=i.tag,void 0!==r)if(0!==(4&i))Ul(t,n);else{i=t;try{r()}catch(a){Bl(i,a)}}n=n.next}while(n!==e)}break;case 1:if(go(t),"function"===typeof(e=t.stateNode).componentWillUnmount)try{e.props=t.memoizedProps,e.state=t.memoizedState,e.componentWillUnmount()}catch(a){Bl(t,a)}break;case 5:go(t);break;case 4:wo(e,t)}}function bo(e){e.alternate=null,e.child=null,e.dependencies=null,e.firstEffect=null,e.lastEffect=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.return=null,e.updateQueue=null}function To(e){return 5===e.tag||3===e.tag||4===e.tag}function ko(e){e:{for(var t=e.return;null!==t;){if(To(t))break e;t=t.return}throw Error(s(160))}var n=t;switch(t=n.stateNode,n.tag){case 5:var i=!1;break;case 3:case 4:t=t.containerInfo,i=!0;break;default:throw Error(s(161))}16&n.flags&&(ve(t,""),n.flags&=-17);e:t:for(n=e;;){for(;null===n.sibling;){if(null===n.return||To(n.return)){n=null;break e}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag&&18!==n.tag;){if(2&n.flags)continue t;if(null===n.child||4===n.tag)continue t;n.child.return=n,n=n.child}if(!(2&n.flags)){n=n.stateNode;break e}}i?xo(e,n,t):So(e,n,t)}function xo(e,t,n){var i=e.tag,r=5===i||6===i;if(r)e=r?e.stateNode:e.stateNode.instance,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Fi));else if(4!==i&&null!==(e=e.child))for(xo(e,t,n),e=e.sibling;null!==e;)xo(e,t,n),e=e.sibling}function So(e,t,n){var i=e.tag,r=5===i||6===i;if(r)e=r?e.stateNode:e.stateNode.instance,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==i&&null!==(e=e.child))for(So(e,t,n),e=e.sibling;null!==e;)So(e,t,n),e=e.sibling}function wo(e,t){for(var n,i,r=t,a=!1;;){if(!a){a=r.return;e:for(;;){if(null===a)throw Error(s(160));switch(n=a.stateNode,a.tag){case 5:i=!1;break e;case 3:case 4:n=n.containerInfo,i=!0;break e}a=a.return}a=!0}if(5===r.tag||6===r.tag){e:for(var o=e,l=r,u=l;;)if(_o(o,u),null!==u.child&&4!==u.tag)u.child.return=u,u=u.child;else{if(u===l)break e;for(;null===u.sibling;){if(null===u.return||u.return===l)break e;u=u.return}u.sibling.return=u.return,u=u.sibling}i?(o=n,l=r.stateNode,8===o.nodeType?o.parentNode.removeChild(l):o.removeChild(l)):n.removeChild(r.stateNode)}else if(4===r.tag){if(null!==r.child){n=r.stateNode.containerInfo,i=!0,r.child.return=r,r=r.child;continue}}else if(_o(e,r),null!==r.child){r.child.return=r,r=r.child;continue}if(r===t)break;for(;null===r.sibling;){if(null===r.return||r.return===t)return;4===(r=r.return).tag&&(a=!1)}r.sibling.return=r.return,r=r.sibling}}function Eo(e,t){switch(t.tag){case 0:case 11:case 14:case 15:case 22:var n=t.updateQueue;if(null!==(n=null!==n?n.lastEffect:null)){var i=n=n.next;do{3===(3&i.tag)&&(e=i.destroy,i.destroy=void 0,void 0!==e&&e()),i=i.next}while(i!==n)}return;case 1:case 12:case 17:return;case 5:if(null!=(n=t.stateNode)){i=t.memoizedProps;var r=null!==e?e.memoizedProps:i;e=t.type;var a=t.updateQueue;if(t.updateQueue=null,null!==a){for(n[Ji]=i,"input"===e&&"radio"===i.type&&null!=i.name&&te(n,i),Se(e,r),t=Se(e,i),r=0;r<a.length;r+=2){var o=a[r],l=a[r+1];"style"===o?Te(n,l):"dangerouslySetInnerHTML"===o?me(n,l):"children"===o?ve(n,l):b(n,o,l,t)}switch(e){case"input":ne(n,i);break;case"textarea":ue(n,i);break;case"select":e=n._wrapperState.wasMultiple,n._wrapperState.wasMultiple=!!i.multiple,null!=(a=i.value)?se(n,!!i.multiple,a,!1):e!==!!i.multiple&&(null!=i.defaultValue?se(n,!!i.multiple,i.defaultValue,!0):se(n,!!i.multiple,i.multiple?[]:"",!1))}}}return;case 6:if(null===t.stateNode)throw Error(s(162));return void(t.stateNode.nodeValue=t.memoizedProps);case 3:return void((n=t.stateNode).hydrate&&(n.hydrate=!1,Tt(n.containerInfo)));case 13:return null!==t.memoizedState&&(qo=Vr(),yo(t.child,!0)),void Co(t);case 19:return void Co(t);case 23:case 24:return void yo(t,null!==t.memoizedState)}throw Error(s(163))}function Co(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new po),t.forEach((function(t){var i=Vl.bind(null,e,t);n.has(t)||(n.add(t),t.then(i,i))}))}}function Po(e,t){return null!==e&&(null===(e=e.memoizedState)||null!==e.dehydrated)&&(null!==(t=t.memoizedState)&&null===t.dehydrated)}var Io=Math.ceil,Ao=T.ReactCurrentDispatcher,Oo=T.ReactCurrentOwner,Lo=0,Mo=null,Do=null,Ro=0,No=0,Uo=lr(0),jo=0,Fo=null,Bo=0,zo=0,Vo=0,Ho=0,Wo=null,qo=0,Go=1/0;function Xo(){Go=Vr()+500}var Ko,$o=null,Yo=!1,Qo=null,Jo=null,Zo=!1,el=null,tl=90,nl=[],il=[],rl=null,al=0,sl=null,ol=-1,ll=0,ul=0,cl=null,dl=!1;function hl(){return 0!==(48&Lo)?Vr():-1!==ol?ol:ol=Vr()}function fl(e){if(0===(2&(e=e.mode)))return 1;if(0===(4&e))return 99===Hr()?1:2;if(0===ll&&(ll=Bo),0!==$r.transition){0!==ul&&(ul=null!==Wo?Wo.pendingLanes:0),e=ll;var t=4186112&~ul;return 0===(t&=-t)&&(0===(t=(e=4186112&~e)&-e)&&(t=8192)),t}return e=Hr(),0!==(4&Lo)&&98===e?e=Ft(12,ll):e=Ft(e=function(e){switch(e){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}(e),ll),e}function pl(e,t,n){if(50<al)throw al=0,sl=null,Error(s(185));if(null===(e=gl(e,t)))return null;Vt(e,t,n),e===Mo&&(Vo|=t,4===jo&&yl(e,Ro));var i=Hr();1===t?0!==(8&Lo)&&0===(48&Lo)?_l(e):(ml(e,n),0===Lo&&(Xo(),Xr())):(0===(4&Lo)||98!==i&&99!==i||(null===rl?rl=new Set([e]):rl.add(e)),ml(e,n)),Wo=e}function gl(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}function ml(e,t){for(var n=e.callbackNode,i=e.suspendedLanes,r=e.pingedLanes,a=e.expirationTimes,o=e.pendingLanes;0<o;){var l=31-Ht(o),u=1<<l,c=a[l];if(-1===c){if(0===(u&i)||0!==(u&r)){c=t,Nt(u);var d=Rt;a[l]=10<=d?c+250:6<=d?c+5e3:-1}}else c<=t&&(e.expiredLanes|=u);o&=~u}if(i=Ut(e,e===Mo?Ro:0),t=Rt,0===i)null!==n&&(n!==Nr&&Er(n),e.callbackNode=null,e.callbackPriority=0);else{if(null!==n){if(e.callbackPriority===t)return;n!==Nr&&Er(n)}15===t?(n=_l.bind(null,e),null===jr?(jr=[n],Fr=wr(Or,Kr)):jr.push(n),n=Nr):14===t?n=Gr(99,_l.bind(null,e)):(n=function(e){switch(e){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(s(358,e))}}(t),n=Gr(n,vl.bind(null,e))),e.callbackPriority=t,e.callbackNode=n}}function vl(e){if(ol=-1,ul=ll=0,0!==(48&Lo))throw Error(s(327));var t=e.callbackNode;if(Rl()&&e.callbackNode!==t)return null;var n=Ut(e,e===Mo?Ro:0);if(0===n)return null;var i=n,r=Lo;Lo|=16;var a=El();for(Mo===e&&Ro===i||(Xo(),Sl(e,i));;)try{Il();break}catch(l){wl(e,l)}if(ta(),Ao.current=a,Lo=r,null!==Do?i=0:(Mo=null,Ro=0,i=jo),0!==(Bo&Vo))Sl(e,0);else if(0!==i){if(2===i&&(Lo|=64,e.hydrate&&(e.hydrate=!1,Gi(e.containerInfo)),0!==(n=jt(e))&&(i=Cl(e,n))),1===i)throw t=Fo,Sl(e,0),yl(e,n),ml(e,Vr()),t;switch(e.finishedWork=e.current.alternate,e.finishedLanes=n,i){case 0:case 1:throw Error(s(345));case 2:case 5:Ll(e);break;case 3:if(yl(e,n),(62914560&n)===n&&10<(i=qo+500-Vr())){if(0!==Ut(e,0))break;if(((r=e.suspendedLanes)&n)!==n){hl(),e.pingedLanes|=e.suspendedLanes&r;break}e.timeoutHandle=Wi(Ll.bind(null,e),i);break}Ll(e);break;case 4:if(yl(e,n),(4186112&n)===n)break;for(i=e.eventTimes,r=-1;0<n;){var o=31-Ht(n);a=1<<o,(o=i[o])>r&&(r=o),n&=~a}if(n=r,10<(n=(120>(n=Vr()-n)?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Io(n/1960))-n)){e.timeoutHandle=Wi(Ll.bind(null,e),n);break}Ll(e);break;default:throw Error(s(329))}}return ml(e,Vr()),e.callbackNode===t?vl.bind(null,e):null}function yl(e,t){for(t&=~Ho,t&=~Vo,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Ht(t),i=1<<n;e[n]=-1,t&=~i}}function _l(e){if(0!==(48&Lo))throw Error(s(327));if(Rl(),e===Mo&&0!==(e.expiredLanes&Ro)){var t=Ro,n=Cl(e,t);0!==(Bo&Vo)&&(n=Cl(e,t=Ut(e,t)))}else n=Cl(e,t=Ut(e,0));if(0!==e.tag&&2===n&&(Lo|=64,e.hydrate&&(e.hydrate=!1,Gi(e.containerInfo)),0!==(t=jt(e))&&(n=Cl(e,t))),1===n)throw n=Fo,Sl(e,0),yl(e,t),ml(e,Vr()),n;return e.finishedWork=e.current.alternate,e.finishedLanes=t,Ll(e),ml(e,Vr()),null}function bl(e,t){var n=Lo;Lo|=1;try{return e(t)}finally{0===(Lo=n)&&(Xo(),Xr())}}function Tl(e,t){var n=Lo;Lo&=-2,Lo|=8;try{return e(t)}finally{0===(Lo=n)&&(Xo(),Xr())}}function kl(e,t){cr(Uo,No),No|=t,Bo|=t}function xl(){No=Uo.current,ur(Uo)}function Sl(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,qi(n)),null!==Do)for(n=Do.return;null!==n;){var i=n;switch(i.tag){case 1:null!==(i=i.type.childContextTypes)&&void 0!==i&&vr();break;case 3:Ma(),ur(fr),ur(hr),Ka();break;case 5:Ra(i);break;case 4:Ma();break;case 13:case 19:ur(Na);break;case 10:na(i);break;case 23:case 24:xl()}n=n.return}Mo=e,Do=Gl(e.current,null),Ro=No=Bo=t,jo=0,Fo=null,Ho=Vo=zo=0}function wl(e,t){for(;;){var n=Do;try{if(ta(),$a.current=As,ts){for(var i=Ja.memoizedState;null!==i;){var r=i.queue;null!==r&&(r.pending=null),i=i.next}ts=!1}if(Qa=0,es=Za=Ja=null,ns=!1,Oo.current=null,null===n||null===n.return){jo=1,Fo=t,Do=null;break}e:{var a=e,s=n.return,o=n,l=t;if(t=Ro,o.flags|=2048,o.firstEffect=o.lastEffect=null,null!==l&&"object"===typeof l&&"function"===typeof l.then){var u=l;if(0===(2&o.mode)){var c=o.alternate;c?(o.updateQueue=c.updateQueue,o.memoizedState=c.memoizedState,o.lanes=c.lanes):(o.updateQueue=null,o.memoizedState=null)}var d=0!==(1&Na.current),h=s;do{var f;if(f=13===h.tag){var p=h.memoizedState;if(null!==p)f=null!==p.dehydrated;else{var g=h.memoizedProps;f=void 0!==g.fallback&&(!0!==g.unstable_avoidThisFallback||!d)}}if(f){var m=h.updateQueue;if(null===m){var v=new Set;v.add(u),h.updateQueue=v}else m.add(u);if(0===(2&h.mode)){if(h.flags|=64,o.flags|=16384,o.flags&=-2981,1===o.tag)if(null===o.alternate)o.tag=17;else{var y=ua(-1,1);y.tag=2,ca(o,y)}o.lanes|=1;break e}l=void 0,o=t;var _=a.pingCache;if(null===_?(_=a.pingCache=new co,l=new Set,_.set(u,l)):void 0===(l=_.get(u))&&(l=new Set,_.set(u,l)),!l.has(o)){l.add(o);var b=zl.bind(null,a,u,o);u.then(b,b)}h.flags|=4096,h.lanes=t;break e}h=h.return}while(null!==h);l=Error((X(o.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.")}5!==jo&&(jo=2),l=lo(l,o),h=s;do{switch(h.tag){case 3:a=l,h.flags|=4096,t&=-t,h.lanes|=t,da(h,ho(0,a,t));break e;case 1:a=l;var T=h.type,k=h.stateNode;if(0===(64&h.flags)&&("function"===typeof T.getDerivedStateFromError||null!==k&&"function"===typeof k.componentDidCatch&&(null===Jo||!Jo.has(k)))){h.flags|=4096,t&=-t,h.lanes|=t,da(h,fo(h,a,t));break e}}h=h.return}while(null!==h)}Ol(n)}catch(x){t=x,Do===n&&null!==n&&(Do=n=n.return);continue}break}}function El(){var e=Ao.current;return Ao.current=As,null===e?As:e}function Cl(e,t){var n=Lo;Lo|=16;var i=El();for(Mo===e&&Ro===t||Sl(e,t);;)try{Pl();break}catch(r){wl(e,r)}if(ta(),Lo=n,Ao.current=i,null!==Do)throw Error(s(261));return Mo=null,Ro=0,jo}function Pl(){for(;null!==Do;)Al(Do)}function Il(){for(;null!==Do&&!Cr();)Al(Do)}function Al(e){var t=Ko(e.alternate,e,No);e.memoizedProps=e.pendingProps,null===t?Ol(e):Do=t,Oo.current=null}function Ol(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(2048&t.flags)){if(null!==(n=so(n,t,No)))return void(Do=n);if(24!==(n=t).tag&&23!==n.tag||null===n.memoizedState||0!==(1073741824&No)||0===(4&n.mode)){for(var i=0,r=n.child;null!==r;)i|=r.lanes|r.childLanes,r=r.sibling;n.childLanes=i}null!==e&&0===(2048&e.flags)&&(null===e.firstEffect&&(e.firstEffect=t.firstEffect),null!==t.lastEffect&&(null!==e.lastEffect&&(e.lastEffect.nextEffect=t.firstEffect),e.lastEffect=t.lastEffect),1<t.flags&&(null!==e.lastEffect?e.lastEffect.nextEffect=t:e.firstEffect=t,e.lastEffect=t))}else{if(null!==(n=oo(t)))return n.flags&=2047,void(Do=n);null!==e&&(e.firstEffect=e.lastEffect=null,e.flags|=2048)}if(null!==(t=t.sibling))return void(Do=t);Do=t=e}while(null!==t);0===jo&&(jo=5)}function Ll(e){var t=Hr();return qr(99,Ml.bind(null,e,t)),null}function Ml(e,t){do{Rl()}while(null!==el);if(0!==(48&Lo))throw Error(s(327));var n=e.finishedWork;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(s(177));e.callbackNode=null;var i=n.lanes|n.childLanes,r=i,a=e.pendingLanes&~r;e.pendingLanes=r,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=r,e.mutableReadLanes&=r,e.entangledLanes&=r,r=e.entanglements;for(var o=e.eventTimes,l=e.expirationTimes;0<a;){var u=31-Ht(a),c=1<<u;r[u]=0,o[u]=-1,l[u]=-1,a&=~c}if(null!==rl&&0===(24&i)&&rl.has(e)&&rl.delete(e),e===Mo&&(Do=Mo=null,Ro=0),1<n.flags?null!==n.lastEffect?(n.lastEffect.nextEffect=n,i=n.firstEffect):i=n:i=n.firstEffect,null!==i){if(r=Lo,Lo|=32,Oo.current=null,Bi=Kt,mi(o=gi())){if("selectionStart"in o)l={start:o.selectionStart,end:o.selectionEnd};else e:if(l=(l=o.ownerDocument)&&l.defaultView||window,(c=l.getSelection&&l.getSelection())&&0!==c.rangeCount){l=c.anchorNode,a=c.anchorOffset,u=c.focusNode,c=c.focusOffset;try{l.nodeType,u.nodeType}catch(E){l=null;break e}var d=0,h=-1,f=-1,p=0,g=0,m=o,v=null;t:for(;;){for(var y;m!==l||0!==a&&3!==m.nodeType||(h=d+a),m!==u||0!==c&&3!==m.nodeType||(f=d+c),3===m.nodeType&&(d+=m.nodeValue.length),null!==(y=m.firstChild);)v=m,m=y;for(;;){if(m===o)break t;if(v===l&&++p===a&&(h=d),v===u&&++g===c&&(f=d),null!==(y=m.nextSibling))break;v=(m=v).parentNode}m=y}l=-1===h||-1===f?null:{start:h,end:f}}else l=null;l=l||{start:0,end:0}}else l=null;zi={focusedElem:o,selectionRange:l},Kt=!1,cl=null,dl=!1,$o=i;do{try{Dl()}catch(E){if(null===$o)throw Error(s(330));Bl($o,E),$o=$o.nextEffect}}while(null!==$o);cl=null,$o=i;do{try{for(o=e;null!==$o;){var _=$o.flags;if(16&_&&ve($o.stateNode,""),128&_){var b=$o.alternate;if(null!==b){var T=b.ref;null!==T&&("function"===typeof T?T(null):T.current=null)}}switch(1038&_){case 2:ko($o),$o.flags&=-3;break;case 6:ko($o),$o.flags&=-3,Eo($o.alternate,$o);break;case 1024:$o.flags&=-1025;break;case 1028:$o.flags&=-1025,Eo($o.alternate,$o);break;case 4:Eo($o.alternate,$o);break;case 8:wo(o,l=$o);var k=l.alternate;bo(l),null!==k&&bo(k)}$o=$o.nextEffect}}catch(E){if(null===$o)throw Error(s(330));Bl($o,E),$o=$o.nextEffect}}while(null!==$o);if(T=zi,b=gi(),_=T.focusedElem,o=T.selectionRange,b!==_&&_&&_.ownerDocument&&pi(_.ownerDocument.documentElement,_)){null!==o&&mi(_)&&(b=o.start,void 0===(T=o.end)&&(T=b),"selectionStart"in _?(_.selectionStart=b,_.selectionEnd=Math.min(T,_.value.length)):(T=(b=_.ownerDocument||document)&&b.defaultView||window).getSelection&&(T=T.getSelection(),l=_.textContent.length,k=Math.min(o.start,l),o=void 0===o.end?k:Math.min(o.end,l),!T.extend&&k>o&&(l=o,o=k,k=l),l=fi(_,k),a=fi(_,o),l&&a&&(1!==T.rangeCount||T.anchorNode!==l.node||T.anchorOffset!==l.offset||T.focusNode!==a.node||T.focusOffset!==a.offset)&&((b=b.createRange()).setStart(l.node,l.offset),T.removeAllRanges(),k>o?(T.addRange(b),T.extend(a.node,a.offset)):(b.setEnd(a.node,a.offset),T.addRange(b))))),b=[];for(T=_;T=T.parentNode;)1===T.nodeType&&b.push({element:T,left:T.scrollLeft,top:T.scrollTop});for("function"===typeof _.focus&&_.focus(),_=0;_<b.length;_++)(T=b[_]).element.scrollLeft=T.left,T.element.scrollTop=T.top}Kt=!!Bi,zi=Bi=null,e.current=n,$o=i;do{try{for(_=e;null!==$o;){var x=$o.flags;if(36&x&&vo(_,$o.alternate,$o),128&x){b=void 0;var S=$o.ref;if(null!==S){var w=$o.stateNode;$o.tag,b=w,"function"===typeof S?S(b):S.current=b}}$o=$o.nextEffect}}catch(E){if(null===$o)throw Error(s(330));Bl($o,E),$o=$o.nextEffect}}while(null!==$o);$o=null,Ur(),Lo=r}else e.current=n;if(Zo)Zo=!1,el=e,tl=t;else for($o=i;null!==$o;)t=$o.nextEffect,$o.nextEffect=null,8&$o.flags&&((x=$o).sibling=null,x.stateNode=null),$o=t;if(0===(i=e.pendingLanes)&&(Jo=null),1===i?e===sl?al++:(al=0,sl=e):al=0,n=n.stateNode,xr&&"function"===typeof xr.onCommitFiberRoot)try{xr.onCommitFiberRoot(kr,n,void 0,64===(64&n.current.flags))}catch(E){}if(ml(e,Vr()),Yo)throw Yo=!1,e=Qo,Qo=null,e;return 0!==(8&Lo)||Xr(),null}function Dl(){for(;null!==$o;){var e=$o.alternate;dl||null===cl||(0!==(8&$o.flags)?Ze($o,cl)&&(dl=!0):13===$o.tag&&Po(e,$o)&&Ze($o,cl)&&(dl=!0));var t=$o.flags;0!==(256&t)&&mo(e,$o),0===(512&t)||Zo||(Zo=!0,Gr(97,(function(){return Rl(),null}))),$o=$o.nextEffect}}function Rl(){if(90!==tl){var e=97<tl?97:tl;return tl=90,qr(e,jl)}return!1}function Nl(e,t){nl.push(t,e),Zo||(Zo=!0,Gr(97,(function(){return Rl(),null})))}function Ul(e,t){il.push(t,e),Zo||(Zo=!0,Gr(97,(function(){return Rl(),null})))}function jl(){if(null===el)return!1;var e=el;if(el=null,0!==(48&Lo))throw Error(s(331));var t=Lo;Lo|=32;var n=il;il=[];for(var i=0;i<n.length;i+=2){var r=n[i],a=n[i+1],o=r.destroy;if(r.destroy=void 0,"function"===typeof o)try{o()}catch(u){if(null===a)throw Error(s(330));Bl(a,u)}}for(n=nl,nl=[],i=0;i<n.length;i+=2){r=n[i],a=n[i+1];try{var l=r.create;r.destroy=l()}catch(u){if(null===a)throw Error(s(330));Bl(a,u)}}for(l=e.current.firstEffect;null!==l;)e=l.nextEffect,l.nextEffect=null,8&l.flags&&(l.sibling=null,l.stateNode=null),l=e;return Lo=t,Xr(),!0}function Fl(e,t,n){ca(e,t=ho(0,t=lo(n,t),1)),t=hl(),null!==(e=gl(e,1))&&(Vt(e,1,t),ml(e,t))}function Bl(e,t){if(3===e.tag)Fl(e,e,t);else for(var n=e.return;null!==n;){if(3===n.tag){Fl(n,e,t);break}if(1===n.tag){var i=n.stateNode;if("function"===typeof n.type.getDerivedStateFromError||"function"===typeof i.componentDidCatch&&(null===Jo||!Jo.has(i))){var r=fo(n,e=lo(t,e),1);if(ca(n,r),r=hl(),null!==(n=gl(n,1)))Vt(n,1,r),ml(n,r);else if("function"===typeof i.componentDidCatch&&(null===Jo||!Jo.has(i)))try{i.componentDidCatch(t,e)}catch(a){}break}}n=n.return}}function zl(e,t,n){var i=e.pingCache;null!==i&&i.delete(t),t=hl(),e.pingedLanes|=e.suspendedLanes&n,Mo===e&&(Ro&n)===n&&(4===jo||3===jo&&(62914560&Ro)===Ro&&500>Vr()-qo?Sl(e,0):Ho|=n),ml(e,t)}function Vl(e,t){var n=e.stateNode;null!==n&&n.delete(t),0===(t=0)&&(0===(2&(t=e.mode))?t=1:0===(4&t)?t=99===Hr()?1:2:(0===ll&&(ll=Bo),0===(t=Bt(62914560&~ll))&&(t=4194304))),n=hl(),null!==(e=gl(e,t))&&(Vt(e,t,n),ml(e,n))}function Hl(e,t,n,i){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function Wl(e,t,n,i){return new Hl(e,t,n,i)}function ql(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Gl(e,t){var n=e.alternate;return null===n?((n=Wl(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Xl(e,t,n,i,r,a){var o=2;if(i=e,"function"===typeof e)ql(e)&&(o=1);else if("string"===typeof e)o=5;else e:switch(e){case S:return Kl(n.children,r,a,t);case N:o=8,r|=16;break;case w:o=8,r|=1;break;case E:return(e=Wl(12,n,t,8|r)).elementType=E,e.type=E,e.lanes=a,e;case A:return(e=Wl(13,n,t,r)).type=A,e.elementType=A,e.lanes=a,e;case O:return(e=Wl(19,n,t,r)).elementType=O,e.lanes=a,e;case U:return $l(n,r,a,t);case j:return(e=Wl(24,n,t,r)).elementType=j,e.lanes=a,e;default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case C:o=10;break e;case P:o=9;break e;case I:o=11;break e;case L:o=14;break e;case M:o=16,i=null;break e;case D:o=22;break e}throw Error(s(130,null==e?e:typeof e,""))}return(t=Wl(o,n,t,r)).elementType=e,t.type=i,t.lanes=a,t}function Kl(e,t,n,i){return(e=Wl(7,e,i,t)).lanes=n,e}function $l(e,t,n,i){return(e=Wl(23,e,i,t)).elementType=U,e.lanes=n,e}function Yl(e,t,n){return(e=Wl(6,e,null,t)).lanes=n,e}function Ql(e,t,n){return(t=Wl(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Jl(e,t,n){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=n,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=zt(0),this.expirationTimes=zt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zt(0),this.mutableSourceEagerHydrationData=null}function Zl(e,t,n,i){var r=t.current,a=hl(),o=fl(r);e:if(n){t:{if($e(n=n._reactInternals)!==n||1!==n.tag)throw Error(s(170));var l=n;do{switch(l.tag){case 3:l=l.stateNode.context;break t;case 1:if(mr(l.type)){l=l.stateNode.__reactInternalMemoizedMergedChildContext;break t}}l=l.return}while(null!==l);throw Error(s(171))}if(1===n.tag){var u=n.type;if(mr(u)){n=_r(n,u,l);break e}}n=l}else n=dr;return null===t.context?t.context=n:t.pendingContext=n,(t=ua(a,o)).payload={element:e},null!==(i=void 0===i?null:i)&&(t.callback=i),ca(r,t),pl(r,o,a),o}function eu(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function tu(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function nu(e,t){tu(e,t),(e=e.alternate)&&tu(e,t)}function iu(e,t,n){var i=null!=n&&null!=n.hydrationOptions&&n.hydrationOptions.mutableSources||null;if(n=new Jl(e,t,null!=n&&!0===n.hydrate),t=Wl(3,null,null,2===t?7:1===t?3:0),n.current=t,t.stateNode=n,oa(t),e[Zi]=n.current,Oi(8===e.nodeType?e.parentNode:e),i)for(e=0;e<i.length;e++){var r=(t=i[e])._getVersion;r=r(t._source),null==n.mutableSourceEagerHydrationData?n.mutableSourceEagerHydrationData=[t,r]:n.mutableSourceEagerHydrationData.push(t,r)}this._internalRoot=n}function ru(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function au(e,t,n,i,r){var a=n._reactRootContainer;if(a){var s=a._internalRoot;if("function"===typeof r){var o=r;r=function(){var e=eu(s);o.call(e)}}Zl(t,s,e,r)}else{if(a=n._reactRootContainer=function(e,t){if(t||(t=!(!(t=e?9===e.nodeType?e.documentElement:e.firstChild:null)||1!==t.nodeType||!t.hasAttribute("data-reactroot"))),!t)for(var n;n=e.lastChild;)e.removeChild(n);return new iu(e,0,t?{hydrate:!0}:void 0)}(n,i),s=a._internalRoot,"function"===typeof r){var l=r;r=function(){var e=eu(s);l.call(e)}}Tl((function(){Zl(t,s,e,r)}))}return eu(s)}function su(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!ru(t))throw Error(s(200));return function(e,t,n){var i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:x,key:null==i?null:""+i,children:e,containerInfo:t,implementation:n}}(e,t,null,n)}Ko=function(e,t,n){var i=t.lanes;if(null!==e)if(e.memoizedProps!==t.pendingProps||fr.current)Rs=!0;else{if(0===(n&i)){switch(Rs=!1,t.tag){case 3:qs(t),Ga();break;case 5:Da(t);break;case 1:mr(t.type)&&br(t);break;case 4:La(t,t.stateNode.containerInfo);break;case 10:i=t.memoizedProps.value;var r=t.type._context;cr(Qr,r._currentValue),r._currentValue=i;break;case 13:if(null!==t.memoizedState)return 0!==(n&t.child.childLanes)?Qs(e,t,n):(cr(Na,1&Na.current),null!==(t=ro(e,t,n))?t.sibling:null);cr(Na,1&Na.current);break;case 19:if(i=0!==(n&t.childLanes),0!==(64&e.flags)){if(i)return io(e,t,n);t.flags|=64}if(null!==(r=t.memoizedState)&&(r.rendering=null,r.tail=null,r.lastEffect=null),cr(Na,Na.current),i)break;return null;case 23:case 24:return t.lanes=0,Bs(e,t,n)}return ro(e,t,n)}Rs=0!==(16384&e.flags)}else Rs=!1;switch(t.lanes=0,t.tag){case 2:if(i=t.type,null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,r=gr(t,hr.current),ra(t,n),r=as(null,t,i,e,r,n),t.flags|=1,"object"===typeof r&&null!==r&&"function"===typeof r.render&&void 0===r.$$typeof){if(t.tag=1,t.memoizedState=null,t.updateQueue=null,mr(i)){var a=!0;br(t)}else a=!1;t.memoizedState=null!==r.state&&void 0!==r.state?r.state:null,oa(t);var o=i.getDerivedStateFromProps;"function"===typeof o&&ga(t,i,o,e),r.updater=ma,t.stateNode=r,r._reactInternals=t,ba(t,i,e,n),t=Ws(null,t,i,!0,a,n)}else t.tag=0,Ns(null,t,r,n),t=t.child;return t;case 16:r=t.elementType;e:{switch(null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,r=(a=r._init)(r._payload),t.type=r,a=t.tag=function(e){if("function"===typeof e)return ql(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===I)return 11;if(e===L)return 14}return 2}(r),e=Yr(r,e),a){case 0:t=Vs(null,t,r,e,n);break e;case 1:t=Hs(null,t,r,e,n);break e;case 11:t=Us(null,t,r,e,n);break e;case 14:t=js(null,t,r,Yr(r.type,e),i,n);break e}throw Error(s(306,r,""))}return t;case 0:return i=t.type,r=t.pendingProps,Vs(e,t,i,r=t.elementType===i?r:Yr(i,r),n);case 1:return i=t.type,r=t.pendingProps,Hs(e,t,i,r=t.elementType===i?r:Yr(i,r),n);case 3:if(qs(t),i=t.updateQueue,null===e||null===i)throw Error(s(282));if(i=t.pendingProps,r=null!==(r=t.memoizedState)?r.element:null,la(e,t),ha(t,i,null,n),(i=t.memoizedState.element)===r)Ga(),t=ro(e,t,n);else{if((a=(r=t.stateNode).hydrate)&&(Fa=Xi(t.stateNode.containerInfo.firstChild),ja=t,a=Ba=!0),a){if(null!=(e=r.mutableSourceEagerHydrationData))for(r=0;r<e.length;r+=2)(a=e[r])._workInProgressVersionPrimary=e[r+1],Xa.push(a);for(n=Ea(t,null,i,n),t.child=n;n;)n.flags=-3&n.flags|1024,n=n.sibling}else Ns(e,t,i,n),Ga();t=t.child}return t;case 5:return Da(t),null===e&&Ha(t),i=t.type,r=t.pendingProps,a=null!==e?e.memoizedProps:null,o=r.children,Hi(i,r)?o=null:null!==a&&Hi(i,a)&&(t.flags|=16),zs(e,t),Ns(e,t,o,n),t.child;case 6:return null===e&&Ha(t),null;case 13:return Qs(e,t,n);case 4:return La(t,t.stateNode.containerInfo),i=t.pendingProps,null===e?t.child=wa(t,null,i,n):Ns(e,t,i,n),t.child;case 11:return i=t.type,r=t.pendingProps,Us(e,t,i,r=t.elementType===i?r:Yr(i,r),n);case 7:return Ns(e,t,t.pendingProps,n),t.child;case 8:case 12:return Ns(e,t,t.pendingProps.children,n),t.child;case 10:e:{i=t.type._context,r=t.pendingProps,o=t.memoizedProps,a=r.value;var l=t.type._context;if(cr(Qr,l._currentValue),l._currentValue=a,null!==o)if(l=o.value,0===(a=ui(l,a)?0:0|("function"===typeof i._calculateChangedBits?i._calculateChangedBits(l,a):1073741823))){if(o.children===r.children&&!fr.current){t=ro(e,t,n);break e}}else for(null!==(l=t.child)&&(l.return=t);null!==l;){var u=l.dependencies;if(null!==u){o=l.child;for(var c=u.firstContext;null!==c;){if(c.context===i&&0!==(c.observedBits&a)){1===l.tag&&((c=ua(-1,n&-n)).tag=2,ca(l,c)),l.lanes|=n,null!==(c=l.alternate)&&(c.lanes|=n),ia(l.return,n),u.lanes|=n;break}c=c.next}}else o=10===l.tag&&l.type===t.type?null:l.child;if(null!==o)o.return=l;else for(o=l;null!==o;){if(o===t){o=null;break}if(null!==(l=o.sibling)){l.return=o.return,o=l;break}o=o.return}l=o}Ns(e,t,r.children,n),t=t.child}return t;case 9:return r=t.type,i=(a=t.pendingProps).children,ra(t,n),i=i(r=aa(r,a.unstable_observedBits)),t.flags|=1,Ns(e,t,i,n),t.child;case 14:return a=Yr(r=t.type,t.pendingProps),js(e,t,r,a=Yr(r.type,a),i,n);case 15:return Fs(e,t,t.type,t.pendingProps,i,n);case 17:return i=t.type,r=t.pendingProps,r=t.elementType===i?r:Yr(i,r),null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),t.tag=1,mr(i)?(e=!0,br(t)):e=!1,ra(t,n),ya(t,i,r),ba(t,i,r,n),Ws(null,t,i,!0,e,n);case 19:return io(e,t,n);case 23:case 24:return Bs(e,t,n)}throw Error(s(156,t.tag))},iu.prototype.render=function(e){Zl(e,this._internalRoot,null,null)},iu.prototype.unmount=function(){var e=this._internalRoot,t=e.containerInfo;Zl(null,e,null,(function(){t[Zi]=null}))},et=function(e){13===e.tag&&(pl(e,4,hl()),nu(e,4))},tt=function(e){13===e.tag&&(pl(e,67108864,hl()),nu(e,67108864))},nt=function(e){if(13===e.tag){var t=hl(),n=fl(e);pl(e,n,t),nu(e,n)}},it=function(e,t){return t()},Ee=function(e,t,n){switch(t){case"input":if(ne(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var i=n[t];if(i!==e&&i.form===e.form){var r=rr(i);if(!r)throw Error(s(90));Q(i),ne(i,r)}}}break;case"textarea":ue(e,n);break;case"select":null!=(t=n.value)&&se(e,!!n.multiple,t,!1)}},Le=bl,Me=function(e,t,n,i,r){var a=Lo;Lo|=4;try{return qr(98,e.bind(null,t,n,i,r))}finally{0===(Lo=a)&&(Xo(),Xr())}},De=function(){0===(49&Lo)&&(function(){if(null!==rl){var e=rl;rl=null,e.forEach((function(e){e.expiredLanes|=24&e.pendingLanes,ml(e,Vr())}))}Xr()}(),Rl())},Re=function(e,t){var n=Lo;Lo|=2;try{return e(t)}finally{0===(Lo=n)&&(Xo(),Xr())}};var ou={Events:[nr,ir,rr,Ae,Oe,Rl,{current:!1}]},lu={findFiberByHostInstance:tr,bundleType:0,version:"17.0.2",rendererPackageName:"react-dom"},uu={bundleType:lu.bundleType,version:lu.version,rendererPackageName:lu.rendererPackageName,rendererConfig:lu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:T.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Je(e))?null:e.stateNode},findFiberByHostInstance:lu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var cu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!cu.isDisabled&&cu.supportsFiber)try{kr=cu.inject(uu),xr=cu}catch(ge){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ou,t.createPortal=su,t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(s(188));throw Error(s(268,Object.keys(e)))}return e=null===(e=Je(t))?null:e.stateNode},t.flushSync=function(e,t){var n=Lo;if(0!==(48&n))return e(t);Lo|=1;try{if(e)return qr(99,e.bind(null,t))}finally{Lo=n,Xr()}},t.hydrate=function(e,t,n){if(!ru(t))throw Error(s(200));return au(null,e,t,!0,n)},t.render=function(e,t,n){if(!ru(t))throw Error(s(200));return au(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!ru(e))throw Error(s(40));return!!e._reactRootContainer&&(Tl((function(){au(null,null,e,!1,(function(){e._reactRootContainer=null,e[Zi]=null}))})),!0)},t.unstable_batchedUpdates=bl,t.unstable_createPortal=function(e,t){return su(e,t,2<arguments.length&&void 0!==arguments[2]?arguments[2]:null)},t.unstable_renderSubtreeIntoContainer=function(e,t,n,i){if(!ru(n))throw Error(s(200));if(null==e||void 0===e._reactInternals)throw Error(s(38));return au(e,t,n,!1,i)},t.version="17.0.2"},164:function(e,t,n){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(463)},374:function(e,t,n){"use strict";n(725);var i=n(791),r=60103;if(t.Fragment=60107,"function"===typeof Symbol&&Symbol.for){var a=Symbol.for;r=a("react.element"),t.Fragment=a("react.fragment")}var s=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o=Object.prototype.hasOwnProperty,l={key:!0,ref:!0,__self:!0,__source:!0};function u(e,t,n){var i,a={},u=null,c=null;for(i in void 0!==n&&(u=""+n),void 0!==t.key&&(u=""+t.key),void 0!==t.ref&&(c=t.ref),t)o.call(t,i)&&!l.hasOwnProperty(i)&&(a[i]=t[i]);if(e&&e.defaultProps)for(i in t=e.defaultProps)void 0===a[i]&&(a[i]=t[i]);return{$$typeof:r,type:e,key:u,ref:c,props:a,_owner:s.current}}t.jsx=u,t.jsxs=u},117:function(e,t,n){"use strict";var i=n(725),r=60103,a=60106;t.Fragment=60107,t.StrictMode=60108,t.Profiler=60114;var s=60109,o=60110,l=60112;t.Suspense=60113;var u=60115,c=60116;if("function"===typeof Symbol&&Symbol.for){var d=Symbol.for;r=d("react.element"),a=d("react.portal"),t.Fragment=d("react.fragment"),t.StrictMode=d("react.strict_mode"),t.Profiler=d("react.profiler"),s=d("react.provider"),o=d("react.context"),l=d("react.forward_ref"),t.Suspense=d("react.suspense"),u=d("react.memo"),c=d("react.lazy")}var h="function"===typeof Symbol&&Symbol.iterator;function f(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g={};function m(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}function v(){}function y(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}m.prototype.isReactComponent={},m.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error(f(85));this.updater.enqueueSetState(this,e,t,"setState")},m.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},v.prototype=m.prototype;var _=y.prototype=new v;_.constructor=y,i(_,m.prototype),_.isPureReactComponent=!0;var b={current:null},T=Object.prototype.hasOwnProperty,k={key:!0,ref:!0,__self:!0,__source:!0};function x(e,t,n){var i,a={},s=null,o=null;if(null!=t)for(i in void 0!==t.ref&&(o=t.ref),void 0!==t.key&&(s=""+t.key),t)T.call(t,i)&&!k.hasOwnProperty(i)&&(a[i]=t[i]);var l=arguments.length-2;if(1===l)a.children=n;else if(1<l){for(var u=Array(l),c=0;c<l;c++)u[c]=arguments[c+2];a.children=u}if(e&&e.defaultProps)for(i in l=e.defaultProps)void 0===a[i]&&(a[i]=l[i]);return{$$typeof:r,type:e,key:s,ref:o,props:a,_owner:b.current}}function S(e){return"object"===typeof e&&null!==e&&e.$$typeof===r}var w=/\/+/g;function E(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function C(e,t,n,i,s){var o=typeof e;"undefined"!==o&&"boolean"!==o||(e=null);var l=!1;if(null===e)l=!0;else switch(o){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case r:case a:l=!0}}if(l)return s=s(l=e),e=""===i?"."+E(l,0):i,Array.isArray(s)?(n="",null!=e&&(n=e.replace(w,"$&/")+"/"),C(s,t,n,"",(function(e){return e}))):null!=s&&(S(s)&&(s=function(e,t){return{$$typeof:r,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(s,n+(!s.key||l&&l.key===s.key?"":(""+s.key).replace(w,"$&/")+"/")+e)),t.push(s)),1;if(l=0,i=""===i?".":i+":",Array.isArray(e))for(var u=0;u<e.length;u++){var c=i+E(o=e[u],u);l+=C(o,t,n,c,s)}else if(c=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=h&&e[h]||e["@@iterator"])?e:null}(e),"function"===typeof c)for(e=c.call(e),u=0;!(o=e.next()).done;)l+=C(o=o.value,t,n,c=i+E(o,u++),s);else if("object"===o)throw t=""+e,Error(f(31,"[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t));return l}function P(e,t,n){if(null==e)return e;var i=[],r=0;return C(e,i,"","",(function(e){return t.call(n,e,r++)})),i}function I(e){if(-1===e._status){var t=e._result;t=t(),e._status=0,e._result=t,t.then((function(t){0===e._status&&(t=t.default,e._status=1,e._result=t)}),(function(t){0===e._status&&(e._status=2,e._result=t)}))}if(1===e._status)return e._result;throw e._result}var A={current:null};function O(){var e=A.current;if(null===e)throw Error(f(321));return e}var L={ReactCurrentDispatcher:A,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:b,IsSomeRendererActing:{current:!1},assign:i};t.Children={map:P,forEach:function(e,t,n){P(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return P(e,(function(){t++})),t},toArray:function(e){return P(e,(function(e){return e}))||[]},only:function(e){if(!S(e))throw Error(f(143));return e}},t.Component=m,t.PureComponent=y,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=L,t.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error(f(267,e));var a=i({},e.props),s=e.key,o=e.ref,l=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,l=b.current),void 0!==t.key&&(s=""+t.key),e.type&&e.type.defaultProps)var u=e.type.defaultProps;for(c in t)T.call(t,c)&&!k.hasOwnProperty(c)&&(a[c]=void 0===t[c]&&void 0!==u?u[c]:t[c])}var c=arguments.length-2;if(1===c)a.children=n;else if(1<c){u=Array(c);for(var d=0;d<c;d++)u[d]=arguments[d+2];a.children=u}return{$$typeof:r,type:e.type,key:s,ref:o,props:a,_owner:l}},t.createContext=function(e,t){return void 0===t&&(t=null),(e={$$typeof:o,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:s,_context:e},e.Consumer=e},t.createElement=x,t.createFactory=function(e){var t=x.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:l,render:e}},t.isValidElement=S,t.lazy=function(e){return{$$typeof:c,_payload:{_status:-1,_result:e},_init:I}},t.memo=function(e,t){return{$$typeof:u,type:e,compare:void 0===t?null:t}},t.useCallback=function(e,t){return O().useCallback(e,t)},t.useContext=function(e,t){return O().useContext(e,t)},t.useDebugValue=function(){},t.useEffect=function(e,t){return O().useEffect(e,t)},t.useImperativeHandle=function(e,t,n){return O().useImperativeHandle(e,t,n)},t.useLayoutEffect=function(e,t){return O().useLayoutEffect(e,t)},t.useMemo=function(e,t){return O().useMemo(e,t)},t.useReducer=function(e,t,n){return O().useReducer(e,t,n)},t.useRef=function(e){return O().useRef(e)},t.useState=function(e){return O().useState(e)},t.version="17.0.2"},791:function(e,t,n){"use strict";e.exports=n(117)},184:function(e,t,n){"use strict";e.exports=n(374)},813:function(e,t){"use strict";var n,i,r,a;if("object"===typeof performance&&"function"===typeof performance.now){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}if("undefined"===typeof window||"function"!==typeof MessageChannel){var u=null,c=null,d=function e(){if(null!==u)try{var n=t.unstable_now();u(!0,n),u=null}catch(i){throw setTimeout(e,0),i}};n=function(e){null!==u?setTimeout(n,0,e):(u=e,setTimeout(d,0))},i=function(e,t){c=setTimeout(e,t)},r=function(){clearTimeout(c)},t.unstable_shouldYield=function(){return!1},a=t.unstable_forceFrameRate=function(){}}else{var h=window.setTimeout,f=window.clearTimeout;if("undefined"!==typeof console){var p=window.cancelAnimationFrame;"function"!==typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),"function"!==typeof p&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")}var g=!1,m=null,v=-1,y=5,_=0;t.unstable_shouldYield=function(){return t.unstable_now()>=_},a=function(){},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):y=0<e?Math.floor(1e3/e):5};var b=new MessageChannel,T=b.port2;b.port1.onmessage=function(){if(null!==m){var e=t.unstable_now();_=e+y;try{m(!0,e)?T.postMessage(null):(g=!1,m=null)}catch(n){throw T.postMessage(null),n}}else g=!1},n=function(e){m=e,g||(g=!0,T.postMessage(null))},i=function(e,n){v=h((function(){e(t.unstable_now())}),n)},r=function(){f(v),v=-1}}function k(e,t){var n=e.length;e.push(t);e:for(;;){var i=n-1>>>1,r=e[i];if(!(void 0!==r&&0<w(r,t)))break e;e[i]=t,e[n]=r,n=i}}function x(e){return void 0===(e=e[0])?null:e}function S(e){var t=e[0];if(void 0!==t){var n=e.pop();if(n!==t){e[0]=n;e:for(var i=0,r=e.length;i<r;){var a=2*(i+1)-1,s=e[a],o=a+1,l=e[o];if(void 0!==s&&0>w(s,n))void 0!==l&&0>w(l,s)?(e[i]=l,e[o]=n,i=o):(e[i]=s,e[a]=n,i=a);else{if(!(void 0!==l&&0>w(l,n)))break e;e[i]=l,e[o]=n,i=o}}}return t}return null}function w(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}var E=[],C=[],P=1,I=null,A=3,O=!1,L=!1,M=!1;function D(e){for(var t=x(C);null!==t;){if(null===t.callback)S(C);else{if(!(t.startTime<=e))break;S(C),t.sortIndex=t.expirationTime,k(E,t)}t=x(C)}}function R(e){if(M=!1,D(e),!L)if(null!==x(E))L=!0,n(N);else{var t=x(C);null!==t&&i(R,t.startTime-e)}}function N(e,n){L=!1,M&&(M=!1,r()),O=!0;var a=A;try{for(D(n),I=x(E);null!==I&&(!(I.expirationTime>n)||e&&!t.unstable_shouldYield());){var s=I.callback;if("function"===typeof s){I.callback=null,A=I.priorityLevel;var o=s(I.expirationTime<=n);n=t.unstable_now(),"function"===typeof o?I.callback=o:I===x(E)&&S(E),D(n)}else S(E);I=x(E)}if(null!==I)var l=!0;else{var u=x(C);null!==u&&i(R,u.startTime-n),l=!1}return l}finally{I=null,A=a,O=!1}}var U=a;t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){L||O||(L=!0,n(N))},t.unstable_getCurrentPriorityLevel=function(){return A},t.unstable_getFirstCallbackNode=function(){return x(E)},t.unstable_next=function(e){switch(A){case 1:case 2:case 3:var t=3;break;default:t=A}var n=A;A=t;try{return e()}finally{A=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=U,t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=A;A=e;try{return t()}finally{A=n}},t.unstable_scheduleCallback=function(e,a,s){var o=t.unstable_now();switch("object"===typeof s&&null!==s?s="number"===typeof(s=s.delay)&&0<s?o+s:o:s=o,e){case 1:var l=-1;break;case 2:l=250;break;case 5:l=1073741823;break;case 4:l=1e4;break;default:l=5e3}return e={id:P++,callback:a,priorityLevel:e,startTime:s,expirationTime:l=s+l,sortIndex:-1},s>o?(e.sortIndex=s,k(C,e),null===x(E)&&e===x(C)&&(M?r():M=!0,i(R,s-o))):(e.sortIndex=l,k(E,e),L||O||(L=!0,n(N))),e},t.unstable_wrapCallback=function(e){var t=A;return function(){var n=A;A=t;try{return e.apply(this,arguments)}finally{A=n}}}},296:function(e,t,n){"use strict";e.exports=n(813)},482:function(e,t,n){"use strict";var i=n(870);e.exports=function(e,t){return void 0===t&&(t=!1),function(n,r,a){if(n)e(n);else if(r.statusCode>=400&&r.statusCode<=599){var s=a;if(t)if(i.TextDecoder){var o=function(e){void 0===e&&(e="");return e.toLowerCase().split(";").reduce((function(e,t){var n=t.split("="),i=n[0],r=n[1];return"charset"===i.trim()?r.trim():e}),"utf-8")}(r.headers&&r.headers["content-type"]);try{s=new TextDecoder(o).decode(a)}catch(l){}}else s=String.fromCharCode.apply(null,new Uint8Array(a));e({cause:s})}else e(null,a)}}},926:function(e,t,n){"use strict";var i=n(870),r=n(415),a=n(50);l.httpHandler=n(482);var s=function(e){var t={};return e?(e.trim().split("\n").forEach((function(e){var n=e.indexOf(":"),i=e.slice(0,n).trim().toLowerCase(),r=e.slice(n+1).trim();"undefined"===typeof t[i]?t[i]=r:Array.isArray(t[i])?t[i].push(r):t[i]=[t[i],r]})),t):t};function o(e,t,n){var i=e;return a(t)?(n=t,"string"===typeof e&&(i={uri:e})):i=r({},t,{uri:e}),i.callback=n,i}function l(e,t,n){return u(t=o(e,t,n))}function u(e){if("undefined"===typeof e.callback)throw new Error("callback argument missing");var t=!1,n=function(n,i,r){t||(t=!0,e.callback(n,i,r))};function i(){var e=void 0;if(e=c.response?c.response:c.responseText||function(e){try{if("document"===e.responseType)return e.responseXML;var t=e.responseXML&&"parsererror"===e.responseXML.documentElement.nodeName;if(""===e.responseType&&!t)return e.responseXML}catch(n){}return null}(c),v)try{e=JSON.parse(e)}catch(t){}return e}function r(e){return clearTimeout(d),e instanceof Error||(e=new Error(""+(e||"Unknown XMLHttpRequest Error"))),e.statusCode=0,n(e,y)}function a(){if(!u){var t;clearTimeout(d),t=e.useXDR&&void 0===c.status?200:1223===c.status?204:c.status;var r=y,a=null;return 0!==t?(r={body:i(),statusCode:t,method:f,headers:{},url:h,rawRequest:c},c.getAllResponseHeaders&&(r.headers=s(c.getAllResponseHeaders()))):a=new Error("Internal XMLHttpRequest Error"),n(a,r,r.body)}}var o,u,c=e.xhr||null;c||(c=e.cors||e.useXDR?new l.XDomainRequest:new l.XMLHttpRequest);var d,h=c.url=e.uri||e.url,f=c.method=e.method||"GET",p=e.body||e.data,g=c.headers=e.headers||{},m=!!e.sync,v=!1,y={body:void 0,headers:{},statusCode:0,method:f,url:h,rawRequest:c};if("json"in e&&!1!==e.json&&(v=!0,g.accept||g.Accept||(g.Accept="application/json"),"GET"!==f&&"HEAD"!==f&&(g["content-type"]||g["Content-Type"]||(g["Content-Type"]="application/json"),p=JSON.stringify(!0===e.json?p:e.json))),c.onreadystatechange=function(){4===c.readyState&&setTimeout(a,0)},c.onload=a,c.onerror=r,c.onprogress=function(){},c.onabort=function(){u=!0},c.ontimeout=r,c.open(f,h,!m,e.username,e.password),m||(c.withCredentials=!!e.withCredentials),!m&&e.timeout>0&&(d=setTimeout((function(){if(!u){u=!0,c.abort("timeout");var e=new Error("XMLHttpRequest timeout");e.code="ETIMEDOUT",r(e)}}),e.timeout)),c.setRequestHeader)for(o in g)g.hasOwnProperty(o)&&c.setRequestHeader(o,g[o]);else if(e.headers&&!function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}(e.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in e&&(c.responseType=e.responseType),"beforeSend"in e&&"function"===typeof e.beforeSend&&e.beforeSend(c),c.send(p||null),c}e.exports=l,e.exports.default=l,l.XMLHttpRequest=i.XMLHttpRequest||function(){},l.XDomainRequest="withCredentials"in new l.XMLHttpRequest?l.XMLHttpRequest:i.XDomainRequest,function(e,t){for(var n=0;n<e.length;n++)t(e[n])}(["get","put","post","patch","head","delete"],(function(e){l["delete"===e?"del":e]=function(t,n,i){return(n=o(t,n,i)).method=e.toUpperCase(),u(n)}}))},903:function(e,t){"use strict";function n(e,t){return void 0===t&&(t=Object),t&&"function"===typeof t.freeze?t.freeze(e):e}var i=n({HTML:"text/html",isHTML:function(e){return e===i.HTML},XML_APPLICATION:"application/xml",XML_TEXT:"text/xml",XML_XHTML_APPLICATION:"application/xhtml+xml",XML_SVG_IMAGE:"image/svg+xml"}),r=n({HTML:"http://www.w3.org/1999/xhtml",isHTML:function(e){return e===r.HTML},SVG:"http://www.w3.org/2000/svg",XML:"http://www.w3.org/XML/1998/namespace",XMLNS:"http://www.w3.org/2000/xmlns/"});t.assign=function(e,t){if(null===e||"object"!==typeof e)throw new TypeError("target is not an object");for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},t.find=function(e,t,n){if(void 0===n&&(n=Array.prototype),e&&"function"===typeof n.find)return n.find.call(e,t);for(var i=0;i<e.length;i++)if(Object.prototype.hasOwnProperty.call(e,i)){var r=e[i];if(t.call(void 0,r,i,e))return r}},t.freeze=n,t.MIME_TYPE=i,t.NAMESPACE=r},153:function(e,t,n){var i=n(903),r=n(863),a=n(910),s=n(986),o=r.DOMImplementation,l=i.NAMESPACE,u=s.ParseError,c=s.XMLReader;function d(e){return e.replace(/\r[\n\u0085]/g,"\n").replace(/[\r\u0085\u2028]/g,"\n")}function h(e){this.options=e||{locator:{}}}function f(){this.cdata=!1}function p(e,t){t.lineNumber=e.lineNumber,t.columnNumber=e.columnNumber}function g(e){if(e)return"\n@"+(e.systemId||"")+"#[line:"+e.lineNumber+",col:"+e.columnNumber+"]"}function m(e,t,n){return"string"==typeof e?e.substr(t,n):e.length>=t+n||t?new java.lang.String(e,t,n)+"":e}function v(e,t){e.currentElement?e.currentElement.appendChild(t):e.doc.appendChild(t)}h.prototype.parseFromString=function(e,t){var n=this.options,i=new c,r=n.domBuilder||new f,s=n.errorHandler,o=n.locator,u=n.xmlns||{},h=/\/x?html?$/.test(t),p=h?a.HTML_ENTITIES:a.XML_ENTITIES;o&&r.setDocumentLocator(o),i.errorHandler=function(e,t,n){if(!e){if(t instanceof f)return t;e=t}var i={},r=e instanceof Function;function a(t){var a=e[t];!a&&r&&(a=2==e.length?function(n){e(t,n)}:e),i[t]=a&&function(e){a("[xmldom "+t+"]\t"+e+g(n))}||function(){}}return n=n||{},a("warning"),a("error"),a("fatalError"),i}(s,r,o),i.domBuilder=n.domBuilder||r,h&&(u[""]=l.HTML),u.xml=u.xml||l.XML;var m=n.normalizeLineEndings||d;return e&&"string"===typeof e?i.parse(m(e),u,p):i.errorHandler.error("invalid doc source"),r.doc},f.prototype={startDocument:function(){this.doc=(new o).createDocument(null,null,null),this.locator&&(this.doc.documentURI=this.locator.systemId)},startElement:function(e,t,n,i){var r=this.doc,a=r.createElementNS(e,n||t),s=i.length;v(this,a),this.currentElement=a,this.locator&&p(this.locator,a);for(var o=0;o<s;o++){e=i.getURI(o);var l=i.getValue(o),u=(n=i.getQName(o),r.createAttributeNS(e,n));this.locator&&p(i.getLocator(o),u),u.value=u.nodeValue=l,a.setAttributeNode(u)}},endElement:function(e,t,n){var i=this.currentElement;i.tagName;this.currentElement=i.parentNode},startPrefixMapping:function(e,t){},endPrefixMapping:function(e){},processingInstruction:function(e,t){var n=this.doc.createProcessingInstruction(e,t);this.locator&&p(this.locator,n),v(this,n)},ignorableWhitespace:function(e,t,n){},characters:function(e,t,n){if(e=m.apply(this,arguments)){if(this.cdata)var i=this.doc.createCDATASection(e);else i=this.doc.createTextNode(e);this.currentElement?this.currentElement.appendChild(i):/^\s*$/.test(e)&&this.doc.appendChild(i),this.locator&&p(this.locator,i)}},skippedEntity:function(e){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(e){(this.locator=e)&&(e.lineNumber=0)},comment:function(e,t,n){e=m.apply(this,arguments);var i=this.doc.createComment(e);this.locator&&p(this.locator,i),v(this,i)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(e,t,n){var i=this.doc.implementation;if(i&&i.createDocumentType){var r=i.createDocumentType(e,t,n);this.locator&&p(this.locator,r),v(this,r),this.doc.doctype=r}},warning:function(e){console.warn("[xmldom warning]\t"+e,g(this.locator))},error:function(e){console.error("[xmldom error]\t"+e,g(this.locator))},fatalError:function(e){throw new u(e,this.locator)}},"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,(function(e){f.prototype[e]=function(){return null}})),t.DOMParser=h},863:function(e,t,n){var i=n(903),r=i.find,a=i.NAMESPACE;function s(e){return""!==e}function o(e,t){return e.hasOwnProperty(t)||(e[t]=!0),e}function l(e){if(!e)return[];var t=function(e){return e?e.split(/[\t\n\f\r ]+/).filter(s):[]}(e);return Object.keys(t.reduce(o,{}))}function u(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}function c(e,t){var n=e.prototype;if(!(n instanceof t)){var i=function(){};i.prototype=t.prototype,u(n,i=new i),e.prototype=n=i}n.constructor!=e&&("function"!=typeof e&&console.error("unknown Class:"+e),n.constructor=e)}var d={},h=d.ELEMENT_NODE=1,f=d.ATTRIBUTE_NODE=2,p=d.TEXT_NODE=3,g=d.CDATA_SECTION_NODE=4,m=d.ENTITY_REFERENCE_NODE=5,v=d.ENTITY_NODE=6,y=d.PROCESSING_INSTRUCTION_NODE=7,_=d.COMMENT_NODE=8,b=d.DOCUMENT_NODE=9,T=d.DOCUMENT_TYPE_NODE=10,k=d.DOCUMENT_FRAGMENT_NODE=11,x=d.NOTATION_NODE=12,S={},w={},E=(S.INDEX_SIZE_ERR=(w[1]="Index size error",1),S.DOMSTRING_SIZE_ERR=(w[2]="DOMString size error",2),S.HIERARCHY_REQUEST_ERR=(w[3]="Hierarchy request error",3)),C=(S.WRONG_DOCUMENT_ERR=(w[4]="Wrong document",4),S.INVALID_CHARACTER_ERR=(w[5]="Invalid character",5),S.NO_DATA_ALLOWED_ERR=(w[6]="No data allowed",6),S.NO_MODIFICATION_ALLOWED_ERR=(w[7]="No modification allowed",7),S.NOT_FOUND_ERR=(w[8]="Not found",8)),P=(S.NOT_SUPPORTED_ERR=(w[9]="Not supported",9),S.INUSE_ATTRIBUTE_ERR=(w[10]="Attribute in use",10));S.INVALID_STATE_ERR=(w[11]="Invalid state",11),S.SYNTAX_ERR=(w[12]="Syntax error",12),S.INVALID_MODIFICATION_ERR=(w[13]="Invalid modification",13),S.NAMESPACE_ERR=(w[14]="Invalid namespace",14),S.INVALID_ACCESS_ERR=(w[15]="Invalid access",15);function I(e,t){if(t instanceof Error)var n=t;else n=this,Error.call(this,w[e]),this.message=w[e],Error.captureStackTrace&&Error.captureStackTrace(this,I);return n.code=e,t&&(this.message=this.message+": "+t),n}function A(){}function O(e,t){this._node=e,this._refresh=t,L(this)}function L(e){var t=e._node._inc||e._node.ownerDocument._inc;if(e._inc!=t){var n=e._refresh(e._node);_e(e,"length",n.length),u(n,e),e._inc=t}}function M(){}function D(e,t){for(var n=e.length;n--;)if(e[n]===t)return n}function R(e,t,n,i){if(i?t[D(t,i)]=n:t[t.length++]=n,e){n.ownerElement=e;var r=e.ownerDocument;r&&(i&&V(r,e,i),function(e,t,n){e&&e._inc++;var i=n.namespaceURI;i===a.XMLNS&&(t._nsMap[n.prefix?n.localName:""]=n.value)}(r,e,n))}}function N(e,t,n){var i=D(t,n);if(!(i>=0))throw new I(C,new Error(e.tagName+"@"+n));for(var r=t.length-1;i<r;)t[i]=t[++i];if(t.length=r,e){var a=e.ownerDocument;a&&(V(a,e,n),n.ownerElement=null)}}function U(){}function j(){}function F(e){return("<"==e?"&lt;":">"==e&&"&gt;")||"&"==e&&"&amp;"||'"'==e&&"&quot;"||"&#"+e.charCodeAt()+";"}function B(e,t){if(t(e))return!0;if(e=e.firstChild)do{if(B(e,t))return!0}while(e=e.nextSibling)}function z(){this.ownerDocument=this}function V(e,t,n,i){e&&e._inc++,n.namespaceURI===a.XMLNS&&delete t._nsMap[n.prefix?n.localName:""]}function H(e,t,n){if(e&&e._inc){e._inc++;var i=t.childNodes;if(n)i[i.length++]=n;else{for(var r=t.firstChild,a=0;r;)i[a++]=r,r=r.nextSibling;i.length=a,delete i[i.length]}}}function W(e,t){var n=t.previousSibling,i=t.nextSibling;return n?n.nextSibling=i:e.firstChild=i,i?i.previousSibling=n:e.lastChild=n,t.parentNode=null,t.previousSibling=null,t.nextSibling=null,H(e.ownerDocument,e),t}function q(e){return e&&e.nodeType===j.DOCUMENT_TYPE_NODE}function G(e){return e&&e.nodeType===j.ELEMENT_NODE}function X(e){return e&&e.nodeType===j.TEXT_NODE}function K(e,t){var n=e.childNodes||[];if(r(n,G)||q(t))return!1;var i=r(n,q);return!(t&&i&&n.indexOf(i)>n.indexOf(t))}function $(e,t){var n=e.childNodes||[];if(r(n,(function(e){return G(e)&&e!==t})))return!1;var i=r(n,q);return!(t&&i&&n.indexOf(i)>n.indexOf(t))}function Y(e,t,n){if(!function(e){return e&&(e.nodeType===j.DOCUMENT_NODE||e.nodeType===j.DOCUMENT_FRAGMENT_NODE||e.nodeType===j.ELEMENT_NODE)}(e))throw new I(E,"Unexpected parent node type "+e.nodeType);if(n&&n.parentNode!==e)throw new I(C,"child not in parent");if(!function(e){return e&&(G(e)||X(e)||q(e)||e.nodeType===j.DOCUMENT_FRAGMENT_NODE||e.nodeType===j.COMMENT_NODE||e.nodeType===j.PROCESSING_INSTRUCTION_NODE)}(t)||q(t)&&e.nodeType!==j.DOCUMENT_NODE)throw new I(E,"Unexpected node type "+t.nodeType+" for parent node type "+e.nodeType)}function Q(e,t,n){var i=e.childNodes||[],a=t.childNodes||[];if(t.nodeType===j.DOCUMENT_FRAGMENT_NODE){var s=a.filter(G);if(s.length>1||r(a,X))throw new I(E,"More than one element or text in fragment");if(1===s.length&&!K(e,n))throw new I(E,"Element in fragment can not be inserted before doctype")}if(G(t)&&!K(e,n))throw new I(E,"Only one element can be added and only after doctype");if(q(t)){if(r(i,q))throw new I(E,"Only one doctype is allowed");var o=r(i,G);if(n&&i.indexOf(o)<i.indexOf(n))throw new I(E,"Doctype can only be inserted before an element");if(!n&&o)throw new I(E,"Doctype can not be appended since element is present")}}function J(e,t,n){var i=e.childNodes||[],a=t.childNodes||[];if(t.nodeType===j.DOCUMENT_FRAGMENT_NODE){var s=a.filter(G);if(s.length>1||r(a,X))throw new I(E,"More than one element or text in fragment");if(1===s.length&&!$(e,n))throw new I(E,"Element in fragment can not be inserted before doctype")}if(G(t)&&!$(e,n))throw new I(E,"Only one element can be added and only after doctype");if(q(t)){if(r(i,(function(e){return q(e)&&e!==n})))throw new I(E,"Only one doctype is allowed");var o=r(i,G);if(n&&i.indexOf(o)<i.indexOf(n))throw new I(E,"Doctype can only be inserted before an element")}}function Z(e,t,n,i){Y(e,t,n),e.nodeType===j.DOCUMENT_NODE&&(i||Q)(e,t,n);var r=t.parentNode;if(r&&r.removeChild(t),t.nodeType===k){var a=t.firstChild;if(null==a)return t;var s=t.lastChild}else a=s=t;var o=n?n.previousSibling:e.lastChild;a.previousSibling=o,s.nextSibling=n,o?o.nextSibling=a:e.firstChild=a,null==n?e.lastChild=s:n.previousSibling=s;do{a.parentNode=e}while(a!==s&&(a=a.nextSibling));return H(e.ownerDocument||e,e),t.nodeType==k&&(t.firstChild=t.lastChild=null),t}function ee(){this._nsMap={}}function te(){}function ne(){}function ie(){}function re(){}function ae(){}function se(){}function oe(){}function le(){}function ue(){}function ce(){}function de(){}function he(){}function fe(e,t){var n=[],i=9==this.nodeType&&this.documentElement||this,r=i.prefix,a=i.namespaceURI;if(a&&null==r&&null==(r=i.lookupPrefix(a)))var s=[{namespace:a,prefix:null}];return me(this,n,e,t,s),n.join("")}function pe(e,t,n){var i=e.prefix||"",r=e.namespaceURI;if(!r)return!1;if("xml"===i&&r===a.XML||r===a.XMLNS)return!1;for(var s=n.length;s--;){var o=n[s];if(o.prefix===i)return o.namespace!==r}return!0}function ge(e,t,n){e.push(" ",t,'="',n.replace(/[<>&"\t\n\r]/g,F),'"')}function me(e,t,n,i,r){if(r||(r=[]),i){if(!(e=i(e)))return;if("string"==typeof e)return void t.push(e)}switch(e.nodeType){case h:var s=e.attributes,o=s.length,l=e.firstChild,u=e.tagName,c=u;if(!(n=a.isHTML(e.namespaceURI)||n)&&!e.prefix&&e.namespaceURI){for(var d,v=0;v<s.length;v++)if("xmlns"===s.item(v).name){d=s.item(v).value;break}if(!d)for(var x=r.length-1;x>=0;x--){if(""===(S=r[x]).prefix&&S.namespace===e.namespaceURI){d=S.namespace;break}}if(d!==e.namespaceURI)for(x=r.length-1;x>=0;x--){var S;if((S=r[x]).namespace===e.namespaceURI){S.prefix&&(c=S.prefix+":"+u);break}}}t.push("<",c);for(var w=0;w<o;w++){"xmlns"==(E=s.item(w)).prefix?r.push({prefix:E.localName,namespace:E.value}):"xmlns"==E.nodeName&&r.push({prefix:"",namespace:E.value})}for(w=0;w<o;w++){var E,C,P;if(pe(E=s.item(w),0,r))ge(t,(C=E.prefix||"")?"xmlns:"+C:"xmlns",P=E.namespaceURI),r.push({prefix:C,namespace:P});me(E,t,n,i,r)}if(u===c&&pe(e,0,r))ge(t,(C=e.prefix||"")?"xmlns:"+C:"xmlns",P=e.namespaceURI),r.push({prefix:C,namespace:P});if(l||n&&!/^(?:meta|link|img|br|hr|input)$/i.test(u)){if(t.push(">"),n&&/^script$/i.test(u))for(;l;)l.data?t.push(l.data):me(l,t,n,i,r.slice()),l=l.nextSibling;else for(;l;)me(l,t,n,i,r.slice()),l=l.nextSibling;t.push("</",c,">")}else t.push("/>");return;case b:case k:for(l=e.firstChild;l;)me(l,t,n,i,r.slice()),l=l.nextSibling;return;case f:return ge(t,e.name,e.value);case p:return t.push(e.data.replace(/[<&>]/g,F));case g:return t.push("<![CDATA[",e.data,"]]>");case _:return t.push("\x3c!--",e.data,"--\x3e");case T:var I=e.publicId,A=e.systemId;if(t.push("<!DOCTYPE ",e.name),I)t.push(" PUBLIC ",I),A&&"."!=A&&t.push(" ",A),t.push(">");else if(A&&"."!=A)t.push(" SYSTEM ",A,">");else{var O=e.internalSubset;O&&t.push(" [",O,"]"),t.push(">")}return;case y:return t.push("<?",e.target," ",e.data,"?>");case m:return t.push("&",e.nodeName,";");default:t.push("??",e.nodeName)}}function ve(e,t,n){var i;switch(t.nodeType){case h:(i=t.cloneNode(!1)).ownerDocument=e;case k:break;case f:n=!0}if(i||(i=t.cloneNode(!1)),i.ownerDocument=e,i.parentNode=null,n)for(var r=t.firstChild;r;)i.appendChild(ve(e,r,n)),r=r.nextSibling;return i}function ye(e,t,n){var i=new t.constructor;for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){var a=t[r];"object"!=typeof a&&a!=i[r]&&(i[r]=a)}switch(t.childNodes&&(i.childNodes=new A),i.ownerDocument=e,i.nodeType){case h:var s=t.attributes,o=i.attributes=new M,l=s.length;o._ownerElement=i;for(var u=0;u<l;u++)i.setAttributeNode(ye(e,s.item(u),!0));break;case f:n=!0}if(n)for(var c=t.firstChild;c;)i.appendChild(ye(e,c,n)),c=c.nextSibling;return i}function _e(e,t,n){e[t]=n}I.prototype=Error.prototype,u(S,I),A.prototype={length:0,item:function(e){return this[e]||null},toString:function(e,t){for(var n=[],i=0;i<this.length;i++)me(this[i],n,e,t);return n.join("")},filter:function(e){return Array.prototype.filter.call(this,e)},indexOf:function(e){return Array.prototype.indexOf.call(this,e)}},O.prototype.item=function(e){return L(this),this[e]},c(O,A),M.prototype={length:0,item:A.prototype.item,getNamedItem:function(e){for(var t=this.length;t--;){var n=this[t];if(n.nodeName==e)return n}},setNamedItem:function(e){var t=e.ownerElement;if(t&&t!=this._ownerElement)throw new I(P);var n=this.getNamedItem(e.nodeName);return R(this._ownerElement,this,e,n),n},setNamedItemNS:function(e){var t,n=e.ownerElement;if(n&&n!=this._ownerElement)throw new I(P);return t=this.getNamedItemNS(e.namespaceURI,e.localName),R(this._ownerElement,this,e,t),t},removeNamedItem:function(e){var t=this.getNamedItem(e);return N(this._ownerElement,this,t),t},removeNamedItemNS:function(e,t){var n=this.getNamedItemNS(e,t);return N(this._ownerElement,this,n),n},getNamedItemNS:function(e,t){for(var n=this.length;n--;){var i=this[n];if(i.localName==t&&i.namespaceURI==e)return i}return null}},U.prototype={hasFeature:function(e,t){return!0},createDocument:function(e,t,n){var i=new z;if(i.implementation=this,i.childNodes=new A,i.doctype=n||null,n&&i.appendChild(n),t){var r=i.createElementNS(e,t);i.appendChild(r)}return i},createDocumentType:function(e,t,n){var i=new se;return i.name=e,i.nodeName=e,i.publicId=t||"",i.systemId=n||"",i}},j.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(e,t){return Z(this,e,t)},replaceChild:function(e,t){Z(this,e,t,J),t&&this.removeChild(t)},removeChild:function(e){return W(this,e)},appendChild:function(e){return this.insertBefore(e,null)},hasChildNodes:function(){return null!=this.firstChild},cloneNode:function(e){return ye(this.ownerDocument||this,this,e)},normalize:function(){for(var e=this.firstChild;e;){var t=e.nextSibling;t&&t.nodeType==p&&e.nodeType==p?(this.removeChild(t),e.appendData(t.data)):(e.normalize(),e=t)}},isSupported:function(e,t){return this.ownerDocument.implementation.hasFeature(e,t)},hasAttributes:function(){return this.attributes.length>0},lookupPrefix:function(e){for(var t=this;t;){var n=t._nsMap;if(n)for(var i in n)if(Object.prototype.hasOwnProperty.call(n,i)&&n[i]===e)return i;t=t.nodeType==f?t.ownerDocument:t.parentNode}return null},lookupNamespaceURI:function(e){for(var t=this;t;){var n=t._nsMap;if(n&&Object.prototype.hasOwnProperty.call(n,e))return n[e];t=t.nodeType==f?t.ownerDocument:t.parentNode}return null},isDefaultNamespace:function(e){return null==this.lookupPrefix(e)}},u(d,j),u(d,j.prototype),z.prototype={nodeName:"#document",nodeType:b,doctype:null,documentElement:null,_inc:1,insertBefore:function(e,t){if(e.nodeType==k){for(var n=e.firstChild;n;){var i=n.nextSibling;this.insertBefore(n,t),n=i}return e}return Z(this,e,t),e.ownerDocument=this,null===this.documentElement&&e.nodeType===h&&(this.documentElement=e),e},removeChild:function(e){return this.documentElement==e&&(this.documentElement=null),W(this,e)},replaceChild:function(e,t){Z(this,e,t,J),e.ownerDocument=this,t&&this.removeChild(t),G(e)&&(this.documentElement=e)},importNode:function(e,t){return ve(this,e,t)},getElementById:function(e){var t=null;return B(this.documentElement,(function(n){if(n.nodeType==h&&n.getAttribute("id")==e)return t=n,!0})),t},getElementsByClassName:function(e){var t=l(e);return new O(this,(function(n){var i=[];return t.length>0&&B(n.documentElement,(function(r){if(r!==n&&r.nodeType===h){var a=r.getAttribute("class");if(a){var s=e===a;if(!s){var o=l(a);s=t.every((u=o,function(e){return u&&-1!==u.indexOf(e)}))}s&&i.push(r)}}var u})),i}))},createElement:function(e){var t=new ee;return t.ownerDocument=this,t.nodeName=e,t.tagName=e,t.localName=e,t.childNodes=new A,(t.attributes=new M)._ownerElement=t,t},createDocumentFragment:function(){var e=new ce;return e.ownerDocument=this,e.childNodes=new A,e},createTextNode:function(e){var t=new ie;return t.ownerDocument=this,t.appendData(e),t},createComment:function(e){var t=new re;return t.ownerDocument=this,t.appendData(e),t},createCDATASection:function(e){var t=new ae;return t.ownerDocument=this,t.appendData(e),t},createProcessingInstruction:function(e,t){var n=new de;return n.ownerDocument=this,n.tagName=n.target=e,n.nodeValue=n.data=t,n},createAttribute:function(e){var t=new te;return t.ownerDocument=this,t.name=e,t.nodeName=e,t.localName=e,t.specified=!0,t},createEntityReference:function(e){var t=new ue;return t.ownerDocument=this,t.nodeName=e,t},createElementNS:function(e,t){var n=new ee,i=t.split(":"),r=n.attributes=new M;return n.childNodes=new A,n.ownerDocument=this,n.nodeName=t,n.tagName=t,n.namespaceURI=e,2==i.length?(n.prefix=i[0],n.localName=i[1]):n.localName=t,r._ownerElement=n,n},createAttributeNS:function(e,t){var n=new te,i=t.split(":");return n.ownerDocument=this,n.nodeName=t,n.name=t,n.namespaceURI=e,n.specified=!0,2==i.length?(n.prefix=i[0],n.localName=i[1]):n.localName=t,n}},c(z,j),ee.prototype={nodeType:h,hasAttribute:function(e){return null!=this.getAttributeNode(e)},getAttribute:function(e){var t=this.getAttributeNode(e);return t&&t.value||""},getAttributeNode:function(e){return this.attributes.getNamedItem(e)},setAttribute:function(e,t){var n=this.ownerDocument.createAttribute(e);n.value=n.nodeValue=""+t,this.setAttributeNode(n)},removeAttribute:function(e){var t=this.getAttributeNode(e);t&&this.removeAttributeNode(t)},appendChild:function(e){return e.nodeType===k?this.insertBefore(e,null):function(e,t){return t.parentNode&&t.parentNode.removeChild(t),t.parentNode=e,t.previousSibling=e.lastChild,t.nextSibling=null,t.previousSibling?t.previousSibling.nextSibling=t:e.firstChild=t,e.lastChild=t,H(e.ownerDocument,e,t),t}(this,e)},setAttributeNode:function(e){return this.attributes.setNamedItem(e)},setAttributeNodeNS:function(e){return this.attributes.setNamedItemNS(e)},removeAttributeNode:function(e){return this.attributes.removeNamedItem(e.nodeName)},removeAttributeNS:function(e,t){var n=this.getAttributeNodeNS(e,t);n&&this.removeAttributeNode(n)},hasAttributeNS:function(e,t){return null!=this.getAttributeNodeNS(e,t)},getAttributeNS:function(e,t){var n=this.getAttributeNodeNS(e,t);return n&&n.value||""},setAttributeNS:function(e,t,n){var i=this.ownerDocument.createAttributeNS(e,t);i.value=i.nodeValue=""+n,this.setAttributeNode(i)},getAttributeNodeNS:function(e,t){return this.attributes.getNamedItemNS(e,t)},getElementsByTagName:function(e){return new O(this,(function(t){var n=[];return B(t,(function(i){i===t||i.nodeType!=h||"*"!==e&&i.tagName!=e||n.push(i)})),n}))},getElementsByTagNameNS:function(e,t){return new O(this,(function(n){var i=[];return B(n,(function(r){r===n||r.nodeType!==h||"*"!==e&&r.namespaceURI!==e||"*"!==t&&r.localName!=t||i.push(r)})),i}))}},z.prototype.getElementsByTagName=ee.prototype.getElementsByTagName,z.prototype.getElementsByTagNameNS=ee.prototype.getElementsByTagNameNS,c(ee,j),te.prototype.nodeType=f,c(te,j),ne.prototype={data:"",substringData:function(e,t){return this.data.substring(e,e+t)},appendData:function(e){e=this.data+e,this.nodeValue=this.data=e,this.length=e.length},insertData:function(e,t){this.replaceData(e,0,t)},appendChild:function(e){throw new Error(w[E])},deleteData:function(e,t){this.replaceData(e,t,"")},replaceData:function(e,t,n){n=this.data.substring(0,e)+n+this.data.substring(e+t),this.nodeValue=this.data=n,this.length=n.length}},c(ne,j),ie.prototype={nodeName:"#text",nodeType:p,splitText:function(e){var t=this.data,n=t.substring(e);t=t.substring(0,e),this.data=this.nodeValue=t,this.length=t.length;var i=this.ownerDocument.createTextNode(n);return this.parentNode&&this.parentNode.insertBefore(i,this.nextSibling),i}},c(ie,ne),re.prototype={nodeName:"#comment",nodeType:_},c(re,ne),ae.prototype={nodeName:"#cdata-section",nodeType:g},c(ae,ne),se.prototype.nodeType=T,c(se,j),oe.prototype.nodeType=x,c(oe,j),le.prototype.nodeType=v,c(le,j),ue.prototype.nodeType=m,c(ue,j),ce.prototype.nodeName="#document-fragment",ce.prototype.nodeType=k,c(ce,j),de.prototype.nodeType=y,c(de,j),he.prototype.serializeToString=function(e,t,n){return fe.call(e,t,n)},j.prototype.toString=fe;try{if(Object.defineProperty){var be=function e(t){switch(t.nodeType){case h:case k:var n=[];for(t=t.firstChild;t;)7!==t.nodeType&&8!==t.nodeType&&n.push(e(t)),t=t.nextSibling;return n.join("");default:return t.nodeValue}};Object.defineProperty(O.prototype,"length",{get:function(){return L(this),this.$$length}}),Object.defineProperty(j.prototype,"textContent",{get:function(){return be(this)},set:function(e){switch(this.nodeType){case h:case k:for(;this.firstChild;)this.removeChild(this.firstChild);(e||String(e))&&this.appendChild(this.ownerDocument.createTextNode(e));break;default:this.data=e,this.value=e,this.nodeValue=e}}}),_e=function(e,t,n){e["$$"+t]=n}}}catch(Te){}t.DocumentType=se,t.DOMException=I,t.DOMImplementation=U,t.Element=ee,t.Node=j,t.NodeList=A,t.XMLSerializer=he},910:function(e,t,n){var i=n(903).freeze;t.XML_ENTITIES=i({amp:"&",apos:"'",gt:">",lt:"<",quot:'"'}),t.HTML_ENTITIES=i({lt:"<",gt:">",amp:"&",quot:'"',apos:"'",Agrave:"\xc0",Aacute:"\xc1",Acirc:"\xc2",Atilde:"\xc3",Auml:"\xc4",Aring:"\xc5",AElig:"\xc6",Ccedil:"\xc7",Egrave:"\xc8",Eacute:"\xc9",Ecirc:"\xca",Euml:"\xcb",Igrave:"\xcc",Iacute:"\xcd",Icirc:"\xce",Iuml:"\xcf",ETH:"\xd0",Ntilde:"\xd1",Ograve:"\xd2",Oacute:"\xd3",Ocirc:"\xd4",Otilde:"\xd5",Ouml:"\xd6",Oslash:"\xd8",Ugrave:"\xd9",Uacute:"\xda",Ucirc:"\xdb",Uuml:"\xdc",Yacute:"\xdd",THORN:"\xde",szlig:"\xdf",agrave:"\xe0",aacute:"\xe1",acirc:"\xe2",atilde:"\xe3",auml:"\xe4",aring:"\xe5",aelig:"\xe6",ccedil:"\xe7",egrave:"\xe8",eacute:"\xe9",ecirc:"\xea",euml:"\xeb",igrave:"\xec",iacute:"\xed",icirc:"\xee",iuml:"\xef",eth:"\xf0",ntilde:"\xf1",ograve:"\xf2",oacute:"\xf3",ocirc:"\xf4",otilde:"\xf5",ouml:"\xf6",oslash:"\xf8",ugrave:"\xf9",uacute:"\xfa",ucirc:"\xfb",uuml:"\xfc",yacute:"\xfd",thorn:"\xfe",yuml:"\xff",nbsp:"\xa0",iexcl:"\xa1",cent:"\xa2",pound:"\xa3",curren:"\xa4",yen:"\xa5",brvbar:"\xa6",sect:"\xa7",uml:"\xa8",copy:"\xa9",ordf:"\xaa",laquo:"\xab",not:"\xac",shy:"\xad\xad",reg:"\xae",macr:"\xaf",deg:"\xb0",plusmn:"\xb1",sup2:"\xb2",sup3:"\xb3",acute:"\xb4",micro:"\xb5",para:"\xb6",middot:"\xb7",cedil:"\xb8",sup1:"\xb9",ordm:"\xba",raquo:"\xbb",frac14:"\xbc",frac12:"\xbd",frac34:"\xbe",iquest:"\xbf",times:"\xd7",divide:"\xf7",forall:"\u2200",part:"\u2202",exist:"\u2203",empty:"\u2205",nabla:"\u2207",isin:"\u2208",notin:"\u2209",ni:"\u220b",prod:"\u220f",sum:"\u2211",minus:"\u2212",lowast:"\u2217",radic:"\u221a",prop:"\u221d",infin:"\u221e",ang:"\u2220",and:"\u2227",or:"\u2228",cap:"\u2229",cup:"\u222a",int:"\u222b",there4:"\u2234",sim:"\u223c",cong:"\u2245",asymp:"\u2248",ne:"\u2260",equiv:"\u2261",le:"\u2264",ge:"\u2265",sub:"\u2282",sup:"\u2283",nsub:"\u2284",sube:"\u2286",supe:"\u2287",oplus:"\u2295",otimes:"\u2297",perp:"\u22a5",sdot:"\u22c5",Alpha:"\u0391",Beta:"\u0392",Gamma:"\u0393",Delta:"\u0394",Epsilon:"\u0395",Zeta:"\u0396",Eta:"\u0397",Theta:"\u0398",Iota:"\u0399",Kappa:"\u039a",Lambda:"\u039b",Mu:"\u039c",Nu:"\u039d",Xi:"\u039e",Omicron:"\u039f",Pi:"\u03a0",Rho:"\u03a1",Sigma:"\u03a3",Tau:"\u03a4",Upsilon:"\u03a5",Phi:"\u03a6",Chi:"\u03a7",Psi:"\u03a8",Omega:"\u03a9",alpha:"\u03b1",beta:"\u03b2",gamma:"\u03b3",delta:"\u03b4",epsilon:"\u03b5",zeta:"\u03b6",eta:"\u03b7",theta:"\u03b8",iota:"\u03b9",kappa:"\u03ba",lambda:"\u03bb",mu:"\u03bc",nu:"\u03bd",xi:"\u03be",omicron:"\u03bf",pi:"\u03c0",rho:"\u03c1",sigmaf:"\u03c2",sigma:"\u03c3",tau:"\u03c4",upsilon:"\u03c5",phi:"\u03c6",chi:"\u03c7",psi:"\u03c8",omega:"\u03c9",thetasym:"\u03d1",upsih:"\u03d2",piv:"\u03d6",OElig:"\u0152",oelig:"\u0153",Scaron:"\u0160",scaron:"\u0161",Yuml:"\u0178",fnof:"\u0192",circ:"\u02c6",tilde:"\u02dc",ensp:"\u2002",emsp:"\u2003",thinsp:"\u2009",zwnj:"\u200c",zwj:"\u200d",lrm:"\u200e",rlm:"\u200f",ndash:"\u2013",mdash:"\u2014",lsquo:"\u2018",rsquo:"\u2019",sbquo:"\u201a",ldquo:"\u201c",rdquo:"\u201d",bdquo:"\u201e",dagger:"\u2020",Dagger:"\u2021",bull:"\u2022",hellip:"\u2026",permil:"\u2030",prime:"\u2032",Prime:"\u2033",lsaquo:"\u2039",rsaquo:"\u203a",oline:"\u203e",euro:"\u20ac",trade:"\u2122",larr:"\u2190",uarr:"\u2191",rarr:"\u2192",darr:"\u2193",harr:"\u2194",crarr:"\u21b5",lceil:"\u2308",rceil:"\u2309",lfloor:"\u230a",rfloor:"\u230b",loz:"\u25ca",spades:"\u2660",clubs:"\u2663",hearts:"\u2665",diams:"\u2666"}),t.entityMap=t.HTML_ENTITIES},854:function(e,t,n){var i=n(863);i.DOMImplementation,i.XMLSerializer,t.DOMParser=n(153).DOMParser},986:function(e,t,n){var i=n(903).NAMESPACE,r=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,a=new RegExp("[\\-\\.0-9"+r.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]"),s=new RegExp("^"+r.source+a.source+"*(?::"+r.source+a.source+"*)?$"),o=0,l=1,u=2,c=3,d=4,h=5,f=6,p=7;function g(e,t){this.message=e,this.locator=t,Error.captureStackTrace&&Error.captureStackTrace(this,g)}function m(){}function v(e,t){return t.lineNumber=e.lineNumber,t.columnNumber=e.columnNumber,t}function y(e,t,n,r,a,s){function g(e,t,i){n.attributeNames.hasOwnProperty(e)&&s.fatalError("Attribute "+e+" redefined"),n.addValue(e,t.replace(/[\t\n\r]/g," ").replace(/&#?\w+;/g,a),i)}for(var m,v=++t,y=o;;){var _=e.charAt(v);switch(_){case"=":if(y===l)m=e.slice(t,v),y=c;else{if(y!==u)throw new Error("attribute equal must after attrName");y=c}break;case"'":case'"':if(y===c||y===l){if(y===l&&(s.warning('attribute value must after "="'),m=e.slice(t,v)),t=v+1,!((v=e.indexOf(_,t))>0))throw new Error("attribute value no end '"+_+"' match");g(m,b=e.slice(t,v),t-1),y=h}else{if(y!=d)throw new Error('attribute value must after "="');g(m,b=e.slice(t,v),t),s.warning('attribute "'+m+'" missed start quot('+_+")!!"),t=v+1,y=h}break;case"/":switch(y){case o:n.setTagName(e.slice(t,v));case h:case f:case p:y=p,n.closed=!0;case d:case l:case u:break;default:throw new Error("attribute invalid close char('/')")}break;case"":return s.error("unexpected end of input"),y==o&&n.setTagName(e.slice(t,v)),v;case">":switch(y){case o:n.setTagName(e.slice(t,v));case h:case f:case p:break;case d:case l:"/"===(b=e.slice(t,v)).slice(-1)&&(n.closed=!0,b=b.slice(0,-1));case u:y===u&&(b=m),y==d?(s.warning('attribute "'+b+'" missed quot(")!'),g(m,b,t)):(i.isHTML(r[""])&&b.match(/^(?:disabled|checked|selected)$/i)||s.warning('attribute "'+b+'" missed value!! "'+b+'" instead!!'),g(b,b,t));break;case c:throw new Error("attribute value missed!!")}return v;case"\x80":_=" ";default:if(_<=" ")switch(y){case o:n.setTagName(e.slice(t,v)),y=f;break;case l:m=e.slice(t,v),y=u;break;case d:var b=e.slice(t,v);s.warning('attribute "'+b+'" missed quot(")!!'),g(m,b,t);case h:y=f}else switch(y){case u:n.tagName;i.isHTML(r[""])&&m.match(/^(?:disabled|checked|selected)$/i)||s.warning('attribute "'+m+'" missed value!! "'+m+'" instead2!!'),g(m,m,t),t=v,y=l;break;case h:s.warning('attribute space is required"'+m+'"!!');case f:y=l,t=v;break;case c:y=d,t=v;break;case p:throw new Error("elements closed character '/' and '>' must be connected to")}}v++}}function _(e,t,n){for(var r=e.tagName,a=null,s=e.length;s--;){var o=e[s],l=o.qName,u=o.value;if((f=l.indexOf(":"))>0)var c=o.prefix=l.slice(0,f),d=l.slice(f+1),h="xmlns"===c&&d;else d=l,c=null,h="xmlns"===l&&"";o.localName=d,!1!==h&&(null==a&&(a={},k(n,n={})),n[h]=a[h]=u,o.uri=i.XMLNS,t.startPrefixMapping(h,u))}for(s=e.length;s--;){(c=(o=e[s]).prefix)&&("xml"===c&&(o.uri=i.XML),"xmlns"!==c&&(o.uri=n[c||""]))}var f;(f=r.indexOf(":"))>0?(c=e.prefix=r.slice(0,f),d=e.localName=r.slice(f+1)):(c=null,d=e.localName=r);var p=e.uri=n[c||""];if(t.startElement(p,d,r,e),!e.closed)return e.currentNSMap=n,e.localNSMap=a,!0;if(t.endElement(p,d,r),a)for(c in a)Object.prototype.hasOwnProperty.call(a,c)&&t.endPrefixMapping(c)}function b(e,t,n,i,r){if(/^(?:script|textarea)$/i.test(n)){var a=e.indexOf("</"+n+">",t),s=e.substring(t+1,a);if(/[&<]/.test(s))return/^script$/i.test(n)?(r.characters(s,0,s.length),a):(s=s.replace(/&#?\w+;/g,i),r.characters(s,0,s.length),a)}return t+1}function T(e,t,n,i){var r=i[n];return null==r&&((r=e.lastIndexOf("</"+n+">"))<t&&(r=e.lastIndexOf("</"+n)),i[n]=r),r<t}function k(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}function x(e,t,n,i){if("-"===e.charAt(t+2))return"-"===e.charAt(t+3)?(r=e.indexOf("--\x3e",t+4))>t?(n.comment(e,t+4,r-t-4),r+3):(i.error("Unclosed comment"),-1):-1;if("CDATA["==e.substr(t+3,6)){var r=e.indexOf("]]>",t+9);return n.startCDATA(),n.characters(e,t+9,r-t-9),n.endCDATA(),r+3}var a=function(e,t){var n,i=[],r=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;r.lastIndex=t,r.exec(e);for(;n=r.exec(e);)if(i.push(n),n[1])return i}(e,t),s=a.length;if(s>1&&/!doctype/i.test(a[0][0])){var o=a[1][0],l=!1,u=!1;s>3&&(/^public$/i.test(a[2][0])?(l=a[3][0],u=s>4&&a[4][0]):/^system$/i.test(a[2][0])&&(u=a[3][0]));var c=a[s-1];return n.startDTD(o,l,u),n.endDTD(),c.index+c[0].length}return-1}function S(e,t,n){var i=e.indexOf("?>",t);if(i){var r=e.substring(t,i).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);if(r){r[0].length;return n.processingInstruction(r[1],r[2]),i+2}return-1}return-1}function w(){this.attributeNames={}}g.prototype=new Error,g.prototype.name=g.name,m.prototype={parse:function(e,t,n){var r=this.domBuilder;r.startDocument(),k(t,t={}),function(e,t,n,r,a){function s(e){if(e>65535){var t=55296+((e-=65536)>>10),n=56320+(1023&e);return String.fromCharCode(t,n)}return String.fromCharCode(e)}function o(e){var t=e.slice(1,-1);return Object.hasOwnProperty.call(n,t)?n[t]:"#"===t.charAt(0)?s(parseInt(t.substr(1).replace("x","0x"))):(a.error("entity not found:"+e),e)}function l(t){if(t>k){var n=e.substring(k,t).replace(/&#?\w+;/g,o);f&&u(k),r.characters(n,0,t-k),k=t}}function u(t,n){for(;t>=d&&(n=h.exec(e));)c=n.index,d=c+n[0].length,f.lineNumber++;f.columnNumber=t-c+1}var c=0,d=0,h=/.*(?:\r\n?|\n)|.*$/g,f=r.locator,p=[{currentNSMap:t}],m={},k=0;for(;;){try{var E=e.indexOf("<",k);if(E<0){if(!e.substr(k).match(/^\s*$/)){var C=r.doc,P=C.createTextNode(e.substr(k));C.appendChild(P),r.currentElement=P}return}switch(E>k&&l(E),e.charAt(E+1)){case"/":var I=e.indexOf(">",E+3),A=e.substring(E+2,I).replace(/[ \t\n\r]+$/g,""),O=p.pop();I<0?(A=e.substring(E+2).replace(/[\s<].*/,""),a.error("end tag name: "+A+" is not complete:"+O.tagName),I=E+1+A.length):A.match(/\s</)&&(A=A.replace(/[\s<].*/,""),a.error("end tag name: "+A+" maybe not complete"),I=E+1+A.length);var L=O.localNSMap,M=O.tagName==A;if(M||O.tagName&&O.tagName.toLowerCase()==A.toLowerCase()){if(r.endElement(O.uri,O.localName,A),L)for(var D in L)Object.prototype.hasOwnProperty.call(L,D)&&r.endPrefixMapping(D);M||a.fatalError("end tag name: "+A+" is not match the current start tagName:"+O.tagName)}else p.push(O);I++;break;case"?":f&&u(E),I=S(e,E,r);break;case"!":f&&u(E),I=x(e,E,r,a);break;default:f&&u(E);var R=new w,N=p[p.length-1].currentNSMap,U=(I=y(e,E,R,N,o,a),R.length);if(!R.closed&&T(e,I,R.tagName,m)&&(R.closed=!0,n.nbsp||a.warning("unclosed xml attribute")),f&&U){for(var j=v(f,{}),F=0;F<U;F++){var B=R[F];u(B.offset),B.locator=v(f,{})}r.locator=j,_(R,r,N)&&p.push(R),r.locator=f}else _(R,r,N)&&p.push(R);i.isHTML(R.uri)&&!R.closed?I=b(e,I,R.tagName,o,r):I++}}catch(z){if(z instanceof g)throw z;a.error("element parse error: "+z),I=-1}I>k?k=I:l(Math.max(E,k)+1)}}(e,t,n,r,this.errorHandler),r.endDocument()}},w.prototype={setTagName:function(e){if(!s.test(e))throw new Error("invalid tagName:"+e);this.tagName=e},addValue:function(e,t,n){if(!s.test(e))throw new Error("invalid attribute:"+e);this.attributeNames[e]=this.length,this[this.length++]={qName:e,value:t,offset:n}},length:0,getLocalName:function(e){return this[e].localName},getLocator:function(e){return this[e].locator},getQName:function(e){return this[e].qName},getURI:function(e){return this[e].uri},getValue:function(e){return this[e].value}},t.XMLReader=m,t.ParseError=g},558:function(e,t,n){var i,r="undefined"!==typeof n.g?n.g:"undefined"!==typeof window?window:{},a=n(706);"undefined"!==typeof document?i=document:(i=r["__GLOBAL_DOCUMENT_CACHE@4"])||(i=r["__GLOBAL_DOCUMENT_CACHE@4"]=a),e.exports=i},870:function(e,t,n){var i;i="undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:{},e.exports=i},50:function(e){e.exports=function(e){if(!e)return!1;var n=t.call(e);return"[object Function]"===n||"function"===typeof e&&"[object RegExp]"!==n||"undefined"!==typeof window&&(e===window.setTimeout||e===window.alert||e===window.confirm||e===window.prompt)};var t=Object.prototype.toString},775:function(e,t){function n(e){if(e&&"object"===typeof e){var t=e.which||e.keyCode||e.charCode;t&&(e=t)}if("number"===typeof e)return s[e];var n,a=String(e);return(n=i[a.toLowerCase()])?n:(n=r[a.toLowerCase()])||(1===a.length?a.charCodeAt(0):void 0)}n.isEventKey=function(e,t){if(e&&"object"===typeof e){var n=e.which||e.keyCode||e.charCode;if(null===n||void 0===n)return!1;if("string"===typeof t){var a;if(a=i[t.toLowerCase()])return a===n;if(a=r[t.toLowerCase()])return a===n}else if("number"===typeof t)return t===n;return!1}};var i=(t=e.exports=n).code=t.codes={backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,"pause/break":19,"caps lock":20,esc:27,space:32,"page up":33,"page down":34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,delete:46,command:91,"left command":91,"right command":93,"numpad *":106,"numpad +":107,"numpad -":109,"numpad .":110,"numpad /":111,"num lock":144,"scroll lock":145,"my computer":182,"my calculator":183,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222},r=t.aliases={windows:91,"\u21e7":16,"\u2325":18,"\u2303":17,"\u2318":91,ctl:17,control:17,option:18,pause:19,break:19,caps:20,return:13,escape:27,spc:32,spacebar:32,pgup:33,pgdn:34,ins:45,del:46,cmd:91};for(a=97;a<123;a++)i[String.fromCharCode(a)]=a-32;for(var a=48;a<58;a++)i[a-48]=a;for(a=1;a<13;a++)i["f"+a]=a+111;for(a=0;a<10;a++)i["numpad "+a]=a+96;var s=t.names=t.title={};for(a in i)s[i[a]]=a;for(var o in r)i[o]=r[o]},526:function(e,t,n){var i=n(227).getUint64;e.exports=function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength),n={version:e[0],flags:new Uint8Array(e.subarray(1,4)),references:[],referenceId:t.getUint32(4),timescale:t.getUint32(8)},r=12;0===n.version?(n.earliestPresentationTime=t.getUint32(r),n.firstOffset=t.getUint32(r+4),r+=8):(n.earliestPresentationTime=i(e.subarray(r)),n.firstOffset=i(e.subarray(r+8)),r+=16),r+=2;var a=t.getUint16(r);for(r+=2;a>0;r+=12,a--)n.references.push({referenceType:(128&e[r])>>>7,referencedSize:2147483647&t.getUint32(r),subsegmentDuration:t.getUint32(r+4),startsWithSap:!!(128&e[r+8]),sapType:(112&e[r+8])>>>4,sapDeltaTime:268435455&t.getUint32(r+8)});return n}},764:function(e){var t,n,i,r,a,s,o,l=9e4;t=function(e){return e*l},n=function(e,t){return e*t},i=function(e){return e/l},r=function(e,t){return e/t},a=function(e,n){return t(r(e,n))},s=function(e,t){return n(i(e),t)},o=function(e,t,n){return i(n?e:e-t)},e.exports={ONE_SECOND_IN_TS:l,secondsToVideoTs:t,secondsToAudioTs:n,videoTsToSeconds:i,audioTsToSeconds:r,audioTsToVideoTs:a,videoTsToAudioTs:s,metadataTsToSeconds:o}},227:function(e){var t=Math.pow(2,32);e.exports={getUint64:function(e){var n,i=new DataView(e.buffer,e.byteOffset,e.byteLength);return i.getBigUint64?(n=i.getBigUint64(0))<Number.MAX_SAFE_INTEGER?Number(n):n:i.getUint32(0)*t+i.getUint32(4)},MAX_UINT32:t}},147:function(e){e.exports=function(e,t){var n,i=null;try{n=JSON.parse(e,t)}catch(r){i=r}return[i,n]}},851:function(e){!function(t){var n=/^(?=((?:[a-zA-Z0-9+\-.]+:)?))\1(?=((?:\/\/[^\/?#]*)?))\2(?=((?:(?:[^?#\/]*\/)*[^;?#\/]*)?))\3((?:;[^?#]*)?)(\?[^#]*)?(#[^]*)?$/,i=/^(?=([^\/?#]*))\1([^]*)$/,r=/(?:\/|^)\.(?=\/)/g,a=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,s={buildAbsoluteURL:function(e,t,n){if(n=n||{},e=e.trim(),!(t=t.trim())){if(!n.alwaysNormalize)return e;var r=s.parseURL(e);if(!r)throw new Error("Error trying to parse base URL.");return r.path=s.normalizePath(r.path),s.buildURLFromParts(r)}var a=s.parseURL(t);if(!a)throw new Error("Error trying to parse relative URL.");if(a.scheme)return n.alwaysNormalize?(a.path=s.normalizePath(a.path),s.buildURLFromParts(a)):t;var o=s.parseURL(e);if(!o)throw new Error("Error trying to parse base URL.");if(!o.netLoc&&o.path&&"/"!==o.path[0]){var l=i.exec(o.path);o.netLoc=l[1],o.path=l[2]}o.netLoc&&!o.path&&(o.path="/");var u={scheme:o.scheme,netLoc:a.netLoc,path:null,params:a.params,query:a.query,fragment:a.fragment};if(!a.netLoc&&(u.netLoc=o.netLoc,"/"!==a.path[0]))if(a.path){var c=o.path,d=c.substring(0,c.lastIndexOf("/")+1)+a.path;u.path=s.normalizePath(d)}else u.path=o.path,a.params||(u.params=o.params,a.query||(u.query=o.query));return null===u.path&&(u.path=n.alwaysNormalize?s.normalizePath(a.path):a.path),s.buildURLFromParts(u)},parseURL:function(e){var t=n.exec(e);return t?{scheme:t[1]||"",netLoc:t[2]||"",path:t[3]||"",params:t[4]||"",query:t[5]||"",fragment:t[6]||""}:null},normalizePath:function(e){for(e=e.split("").reverse().join("").replace(r,"");e.length!==(e=e.replace(a,"")).length;);return e.split("").reverse().join("")},buildURLFromParts:function(e){return e.scheme+e.netLoc+e.path+e.params+e.query+e.fragment}};e.exports=s}()},297:function(e,t,n){var i=n(870),r=e.exports={WebVTT:n(425),VTTCue:n(700),VTTRegion:n(446)};i.vttjs=r,i.WebVTT=r.WebVTT;var a=r.VTTCue,s=r.VTTRegion,o=i.VTTCue,l=i.VTTRegion;r.shim=function(){i.VTTCue=a,i.VTTRegion=s},r.restore=function(){i.VTTCue=o,i.VTTRegion=l},i.VTTCue||r.shim()},425:function(e,t,n){var i=n(558),r=Object.create||function(){function e(){}return function(t){if(1!==arguments.length)throw new Error("Object.create shim only accepts one parameter.");return e.prototype=t,new e}}();function a(e,t){this.name="ParsingError",this.code=e.code,this.message=t||e.message}function s(e){function t(e,t,n,i){return 3600*(0|e)+60*(0|t)+(0|n)+(0|i)/1e3}var n=e.match(/^(\d+):(\d{1,2})(:\d{1,2})?\.(\d{3})/);return n?n[3]?t(n[1],n[2],n[3].replace(":",""),n[4]):n[1]>59?t(n[1],n[2],0,n[4]):t(0,n[1],n[2],n[4]):null}function o(){this.values=r(null)}function l(e,t,n,i){var r=i?e.split(i):[e];for(var a in r)if("string"===typeof r[a]){var s=r[a].split(n);if(2===s.length)t(s[0].trim(),s[1].trim())}}function u(e,t,n){var i=e;function r(){var t=s(e);if(null===t)throw new a(a.Errors.BadTimeStamp,"Malformed timestamp: "+i);return e=e.replace(/^[^\sa-zA-Z-]+/,""),t}function u(){e=e.replace(/^\s+/,"")}if(u(),t.startTime=r(),u(),"--\x3e"!==e.substr(0,3))throw new a(a.Errors.BadTimeStamp,"Malformed time stamp (time stamps must be separated by '--\x3e'): "+i);e=e.substr(3),u(),t.endTime=r(),u(),function(e,t){var i=new o;l(e,(function(e,t){switch(e){case"region":for(var r=n.length-1;r>=0;r--)if(n[r].id===t){i.set(e,n[r].region);break}break;case"vertical":i.alt(e,t,["rl","lr"]);break;case"line":var a=t.split(","),s=a[0];i.integer(e,s),i.percent(e,s)&&i.set("snapToLines",!1),i.alt(e,s,["auto"]),2===a.length&&i.alt("lineAlign",a[1],["start","center","end"]);break;case"position":a=t.split(","),i.percent(e,a[0]),2===a.length&&i.alt("positionAlign",a[1],["start","center","end"]);break;case"size":i.percent(e,t);break;case"align":i.alt(e,t,["start","center","end","left","right"])}}),/:/,/\s/),t.region=i.get("region",null),t.vertical=i.get("vertical","");try{t.line=i.get("line","auto")}catch(r){}t.lineAlign=i.get("lineAlign","start"),t.snapToLines=i.get("snapToLines",!0),t.size=i.get("size",100);try{t.align=i.get("align","center")}catch(r){t.align=i.get("align","middle")}try{t.position=i.get("position","auto")}catch(r){t.position=i.get("position",{start:0,left:0,center:50,middle:50,end:100,right:100},t.align)}t.positionAlign=i.get("positionAlign",{start:"start",left:"start",center:"center",middle:"center",end:"end",right:"end"},t.align)}(e,t)}a.prototype=r(Error.prototype),a.prototype.constructor=a,a.Errors={BadSignature:{code:0,message:"Malformed WebVTT signature."},BadTimeStamp:{code:1,message:"Malformed time stamp."}},o.prototype={set:function(e,t){this.get(e)||""===t||(this.values[e]=t)},get:function(e,t,n){return n?this.has(e)?this.values[e]:t[n]:this.has(e)?this.values[e]:t},has:function(e){return e in this.values},alt:function(e,t,n){for(var i=0;i<n.length;++i)if(t===n[i]){this.set(e,t);break}},integer:function(e,t){/^-?\d+$/.test(t)&&this.set(e,parseInt(t,10))},percent:function(e,t){return!!(t.match(/^([\d]{1,3})(\.[\d]*)?%$/)&&(t=parseFloat(t))>=0&&t<=100)&&(this.set(e,t),!0)}};var c=i.createElement&&i.createElement("textarea"),d={c:"span",i:"i",b:"b",u:"u",ruby:"ruby",rt:"rt",v:"span",lang:"span"},h={white:"rgba(255,255,255,1)",lime:"rgba(0,255,0,1)",cyan:"rgba(0,255,255,1)",red:"rgba(255,0,0,1)",yellow:"rgba(255,255,0,1)",magenta:"rgba(255,0,255,1)",blue:"rgba(0,0,255,1)",black:"rgba(0,0,0,1)"},f={v:"title",lang:"lang"},p={rt:"ruby"};function g(e,t){function n(){if(!t)return null;var e,n=t.match(/^([^<]*)(<[^>]*>?)?/);return e=n[1]?n[1]:n[2],t=t.substr(e.length),e}function i(e,t){return!p[t.localName]||p[t.localName]===e.localName}function r(t,n){var i=d[t];if(!i)return null;var r=e.document.createElement(i),a=f[t];return a&&n&&(r[a]=n.trim()),r}for(var a,o,l=e.document.createElement("div"),u=l,g=[];null!==(a=n());)if("<"!==a[0])u.appendChild(e.document.createTextNode((o=a,c.innerHTML=o,o=c.textContent,c.textContent="",o)));else{if("/"===a[1]){g.length&&g[g.length-1]===a.substr(2).replace(">","")&&(g.pop(),u=u.parentNode);continue}var m,v=s(a.substr(1,a.length-2));if(v){m=e.document.createProcessingInstruction("timestamp",v),u.appendChild(m);continue}var y=a.match(/^<([^.\s/0-9>]+)(\.[^\s\\>]+)?([^>\\]+)?(\\?)>?$/);if(!y)continue;if(!(m=r(y[1],y[3])))continue;if(!i(u,m))continue;if(y[2]){var _=y[2].split(".");_.forEach((function(e){var t=/^bg_/.test(e),n=t?e.slice(3):e;if(h.hasOwnProperty(n)){var i=t?"background-color":"color",r=h[n];m.style[i]=r}})),m.className=_.join(" ")}g.push(y[1]),u.appendChild(m),u=m}return l}var m=[[1470,1470],[1472,1472],[1475,1475],[1478,1478],[1488,1514],[1520,1524],[1544,1544],[1547,1547],[1549,1549],[1563,1563],[1566,1610],[1645,1647],[1649,1749],[1765,1766],[1774,1775],[1786,1805],[1807,1808],[1810,1839],[1869,1957],[1969,1969],[1984,2026],[2036,2037],[2042,2042],[2048,2069],[2074,2074],[2084,2084],[2088,2088],[2096,2110],[2112,2136],[2142,2142],[2208,2208],[2210,2220],[8207,8207],[64285,64285],[64287,64296],[64298,64310],[64312,64316],[64318,64318],[64320,64321],[64323,64324],[64326,64449],[64467,64829],[64848,64911],[64914,64967],[65008,65020],[65136,65140],[65142,65276],[67584,67589],[67592,67592],[67594,67637],[67639,67640],[67644,67644],[67647,67669],[67671,67679],[67840,67867],[67872,67897],[67903,67903],[67968,68023],[68030,68031],[68096,68096],[68112,68115],[68117,68119],[68121,68147],[68160,68167],[68176,68184],[68192,68223],[68352,68405],[68416,68437],[68440,68466],[68472,68479],[68608,68680],[126464,126467],[126469,126495],[126497,126498],[126500,126500],[126503,126503],[126505,126514],[126516,126519],[126521,126521],[126523,126523],[126530,126530],[126535,126535],[126537,126537],[126539,126539],[126541,126543],[126545,126546],[126548,126548],[126551,126551],[126553,126553],[126555,126555],[126557,126557],[126559,126559],[126561,126562],[126564,126564],[126567,126570],[126572,126578],[126580,126583],[126585,126588],[126590,126590],[126592,126601],[126603,126619],[126625,126627],[126629,126633],[126635,126651],[1114109,1114109]];function v(e){for(var t=0;t<m.length;t++){var n=m[t];if(e>=n[0]&&e<=n[1])return!0}return!1}function y(e){var t=[],n="";if(!e||!e.childNodes)return"ltr";function i(e,t){for(var n=t.childNodes.length-1;n>=0;n--)e.push(t.childNodes[n])}function r(e){if(!e||!e.length)return null;var t=e.pop(),n=t.textContent||t.innerText;if(n){var a=n.match(/^.*(\n|\r)/);return a?(e.length=0,a[0]):n}return"ruby"===t.tagName?r(e):t.childNodes?(i(e,t),r(e)):void 0}for(i(t,e);n=r(t);)for(var a=0;a<n.length;a++)if(v(n.charCodeAt(a)))return"rtl";return"ltr"}function _(){}function b(e,t,n){_.call(this),this.cue=t,this.cueDiv=g(e,t.text);var i={color:"rgba(255, 255, 255, 1)",backgroundColor:"rgba(0, 0, 0, 0.8)",position:"relative",left:0,right:0,top:0,bottom:0,display:"inline",writingMode:""===t.vertical?"horizontal-tb":"lr"===t.vertical?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext"};this.applyStyles(i,this.cueDiv),this.div=e.document.createElement("div"),i={direction:y(this.cueDiv),writingMode:""===t.vertical?"horizontal-tb":"lr"===t.vertical?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext",textAlign:"middle"===t.align?"center":t.align,font:n.font,whiteSpace:"pre-line",position:"absolute"},this.applyStyles(i),this.div.appendChild(this.cueDiv);var r=0;switch(t.positionAlign){case"start":r=t.position;break;case"center":r=t.position-t.size/2;break;case"end":r=t.position-t.size}""===t.vertical?this.applyStyles({left:this.formatStyle(r,"%"),width:this.formatStyle(t.size,"%")}):this.applyStyles({top:this.formatStyle(r,"%"),height:this.formatStyle(t.size,"%")}),this.move=function(e){this.applyStyles({top:this.formatStyle(e.top,"px"),bottom:this.formatStyle(e.bottom,"px"),left:this.formatStyle(e.left,"px"),right:this.formatStyle(e.right,"px"),height:this.formatStyle(e.height,"px"),width:this.formatStyle(e.width,"px")})}}function T(e){var t,n,i,r;if(e.div){n=e.div.offsetHeight,i=e.div.offsetWidth,r=e.div.offsetTop;var a=(a=e.div.childNodes)&&(a=a[0])&&a.getClientRects&&a.getClientRects();e=e.div.getBoundingClientRect(),t=a?Math.max(a[0]&&a[0].height||0,e.height/a.length):0}this.left=e.left,this.right=e.right,this.top=e.top||r,this.height=e.height||n,this.bottom=e.bottom||r+(e.height||n),this.width=e.width||i,this.lineHeight=void 0!==t?t:e.lineHeight}function k(e,t,n,i){var r=new T(t),a=t.cue,s=function(e){if("number"===typeof e.line&&(e.snapToLines||e.line>=0&&e.line<=100))return e.line;if(!e.track||!e.track.textTrackList||!e.track.textTrackList.mediaElement)return-1;for(var t=e.track,n=t.textTrackList,i=0,r=0;r<n.length&&n[r]!==t;r++)"showing"===n[r].mode&&i++;return-1*++i}(a),o=[];if(a.snapToLines){var l;switch(a.vertical){case"":o=["+y","-y"],l="height";break;case"rl":o=["+x","-x"],l="width";break;case"lr":o=["-x","+x"],l="width"}var u=r.lineHeight,c=u*Math.round(s),d=n[l]+u,h=o[0];Math.abs(c)>d&&(c=c<0?-1:1,c*=Math.ceil(d/u)*u),s<0&&(c+=""===a.vertical?n.height:n.width,o=o.reverse()),r.move(h,c)}else{var f=r.lineHeight/n.height*100;switch(a.lineAlign){case"center":s-=f/2;break;case"end":s-=f}switch(a.vertical){case"":t.applyStyles({top:t.formatStyle(s,"%")});break;case"rl":t.applyStyles({left:t.formatStyle(s,"%")});break;case"lr":t.applyStyles({right:t.formatStyle(s,"%")})}o=["+y","-x","+x","-y"],r=new T(t)}var p=function(e,t){for(var r,a=new T(e),s=1,o=0;o<t.length;o++){for(;e.overlapsOppositeAxis(n,t[o])||e.within(n)&&e.overlapsAny(i);)e.move(t[o]);if(e.within(n))return e;var l=e.intersectPercentage(n);s>l&&(r=new T(e),s=l),e=new T(a)}return r||a}(r,o);t.move(p.toCSSCompatValues(n))}function x(){}_.prototype.applyStyles=function(e,t){for(var n in t=t||this.div,e)e.hasOwnProperty(n)&&(t.style[n]=e[n])},_.prototype.formatStyle=function(e,t){return 0===e?0:e+t},b.prototype=r(_.prototype),b.prototype.constructor=b,T.prototype.move=function(e,t){switch(t=void 0!==t?t:this.lineHeight,e){case"+x":this.left+=t,this.right+=t;break;case"-x":this.left-=t,this.right-=t;break;case"+y":this.top+=t,this.bottom+=t;break;case"-y":this.top-=t,this.bottom-=t}},T.prototype.overlaps=function(e){return this.left<e.right&&this.right>e.left&&this.top<e.bottom&&this.bottom>e.top},T.prototype.overlapsAny=function(e){for(var t=0;t<e.length;t++)if(this.overlaps(e[t]))return!0;return!1},T.prototype.within=function(e){return this.top>=e.top&&this.bottom<=e.bottom&&this.left>=e.left&&this.right<=e.right},T.prototype.overlapsOppositeAxis=function(e,t){switch(t){case"+x":return this.left<e.left;case"-x":return this.right>e.right;case"+y":return this.top<e.top;case"-y":return this.bottom>e.bottom}},T.prototype.intersectPercentage=function(e){return Math.max(0,Math.min(this.right,e.right)-Math.max(this.left,e.left))*Math.max(0,Math.min(this.bottom,e.bottom)-Math.max(this.top,e.top))/(this.height*this.width)},T.prototype.toCSSCompatValues=function(e){return{top:this.top-e.top,bottom:e.bottom-this.bottom,left:this.left-e.left,right:e.right-this.right,height:this.height,width:this.width}},T.getSimpleBoxPosition=function(e){var t=e.div?e.div.offsetHeight:e.tagName?e.offsetHeight:0,n=e.div?e.div.offsetWidth:e.tagName?e.offsetWidth:0,i=e.div?e.div.offsetTop:e.tagName?e.offsetTop:0;return{left:(e=e.div?e.div.getBoundingClientRect():e.tagName?e.getBoundingClientRect():e).left,right:e.right,top:e.top||i,height:e.height||t,bottom:e.bottom||i+(e.height||t),width:e.width||n}},x.StringDecoder=function(){return{decode:function(e){if(!e)return"";if("string"!==typeof e)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(e))}}},x.convertCueToDOMTree=function(e,t){return e&&t?g(e,t):null};x.processCues=function(e,t,n){if(!e||!t||!n)return null;for(;n.firstChild;)n.removeChild(n.firstChild);var i=e.document.createElement("div");if(i.style.position="absolute",i.style.left="0",i.style.right="0",i.style.top="0",i.style.bottom="0",i.style.margin="1.5%",n.appendChild(i),function(e){for(var t=0;t<e.length;t++)if(e[t].hasBeenReset||!e[t].displayState)return!0;return!1}(t)){var r=[],a=T.getSimpleBoxPosition(i),s={font:Math.round(.05*a.height*100)/100+"px sans-serif"};!function(){for(var n,o,l=0;l<t.length;l++)o=t[l],n=new b(e,o,s),i.appendChild(n.div),k(0,n,a,r),o.displayState=n.div,r.push(T.getSimpleBoxPosition(n))}()}else for(var o=0;o<t.length;o++)i.appendChild(t[o].displayState)},x.Parser=function(e,t,n){n||(n=t,t={}),t||(t={}),this.window=e,this.vttjs=t,this.state="INITIAL",this.buffer="",this.decoder=n||new TextDecoder("utf8"),this.regionList=[]},x.Parser.prototype={reportOrThrowError:function(e){if(!(e instanceof a))throw e;this.onparsingerror&&this.onparsingerror(e)},parse:function(e){var t=this;function n(){for(var e=t.buffer,n=0;n<e.length&&"\r"!==e[n]&&"\n"!==e[n];)++n;var i=e.substr(0,n);return"\r"===e[n]&&++n,"\n"===e[n]&&++n,t.buffer=e.substr(n),i}function i(e){e.match(/X-TIMESTAMP-MAP/)?l(e,(function(e,n){if("X-TIMESTAMP-MAP"===e)!function(e){var n=new o;l(e,(function(e,t){switch(e){case"MPEGT":n.integer(e+"S",t);break;case"LOCA":n.set(e+"L",s(t))}}),/[^\d]:/,/,/),t.ontimestampmap&&t.ontimestampmap({MPEGTS:n.get("MPEGTS"),LOCAL:n.get("LOCAL")})}(n)}),/=/):l(e,(function(e,n){if("Region"===e)!function(e){var n=new o;if(l(e,(function(e,t){switch(e){case"id":n.set(e,t);break;case"width":n.percent(e,t);break;case"lines":n.integer(e,t);break;case"regionanchor":case"viewportanchor":var i=t.split(",");if(2!==i.length)break;var r=new o;if(r.percent("x",i[0]),r.percent("y",i[1]),!r.has("x")||!r.has("y"))break;n.set(e+"X",r.get("x")),n.set(e+"Y",r.get("y"));break;case"scroll":n.alt(e,t,["up"])}}),/=/,/\s/),n.has("id")){var i=new(t.vttjs.VTTRegion||t.window.VTTRegion);i.width=n.get("width",100),i.lines=n.get("lines",3),i.regionAnchorX=n.get("regionanchorX",0),i.regionAnchorY=n.get("regionanchorY",100),i.viewportAnchorX=n.get("viewportanchorX",0),i.viewportAnchorY=n.get("viewportanchorY",100),i.scroll=n.get("scroll",""),t.onregion&&t.onregion(i),t.regionList.push({id:n.get("id"),region:i})}}(n)}),/:/)}e&&(t.buffer+=t.decoder.decode(e,{stream:!0}));try{var r;if("INITIAL"===t.state){if(!/\r\n|\n/.test(t.buffer))return this;var c=(r=n()).match(/^WEBVTT([ \t].*)?$/);if(!c||!c[0])throw new a(a.Errors.BadSignature);t.state="HEADER"}for(var d=!1;t.buffer;){if(!/\r\n|\n/.test(t.buffer))return this;switch(d?d=!1:r=n(),t.state){case"HEADER":/:/.test(r)?i(r):r||(t.state="ID");continue;case"NOTE":r||(t.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(r)){t.state="NOTE";break}if(!r)continue;t.cue=new(t.vttjs.VTTCue||t.window.VTTCue)(0,0,"");try{t.cue.align="center"}catch(f){t.cue.align="middle"}if(t.state="CUE",-1===r.indexOf("--\x3e")){t.cue.id=r;continue}case"CUE":try{u(r,t.cue,t.regionList)}catch(f){t.reportOrThrowError(f),t.cue=null,t.state="BADCUE";continue}t.state="CUETEXT";continue;case"CUETEXT":var h=-1!==r.indexOf("--\x3e");if(!r||h&&(d=!0)){t.oncue&&t.oncue(t.cue),t.cue=null,t.state="ID";continue}t.cue.text&&(t.cue.text+="\n"),t.cue.text+=r.replace(/\u2028/g,"\n").replace(/u2029/g,"\n");continue;case"BADCUE":r||(t.state="ID");continue}}}catch(f){t.reportOrThrowError(f),"CUETEXT"===t.state&&t.cue&&t.oncue&&t.oncue(t.cue),t.cue=null,t.state="INITIAL"===t.state?"BADWEBVTT":"BADCUE"}return this},flush:function(){var e=this;try{if(e.buffer+=e.decoder.decode(),(e.cue||"HEADER"===e.state)&&(e.buffer+="\n\n",e.parse()),"INITIAL"===e.state)throw new a(a.Errors.BadSignature)}catch(t){e.reportOrThrowError(t)}return e.onflush&&e.onflush(),this}},e.exports=x},700:function(e){var t="auto",n={"":1,lr:1,rl:1},i={start:1,center:1,end:1,left:1,right:1,auto:1,"line-left":1,"line-right":1};function r(e){return"string"===typeof e&&(!!i[e.toLowerCase()]&&e.toLowerCase())}function a(e,i,a){this.hasBeenReset=!1;var s="",o=!1,l=e,u=i,c=a,d=null,h="",f=!0,p="auto",g="start",m="auto",v="auto",y=100,_="center";Object.defineProperties(this,{id:{enumerable:!0,get:function(){return s},set:function(e){s=""+e}},pauseOnExit:{enumerable:!0,get:function(){return o},set:function(e){o=!!e}},startTime:{enumerable:!0,get:function(){return l},set:function(e){if("number"!==typeof e)throw new TypeError("Start time must be set to a number.");l=e,this.hasBeenReset=!0}},endTime:{enumerable:!0,get:function(){return u},set:function(e){if("number"!==typeof e)throw new TypeError("End time must be set to a number.");u=e,this.hasBeenReset=!0}},text:{enumerable:!0,get:function(){return c},set:function(e){c=""+e,this.hasBeenReset=!0}},region:{enumerable:!0,get:function(){return d},set:function(e){d=e,this.hasBeenReset=!0}},vertical:{enumerable:!0,get:function(){return h},set:function(e){var t=function(e){return"string"===typeof e&&!!n[e.toLowerCase()]&&e.toLowerCase()}(e);if(!1===t)throw new SyntaxError("Vertical: an invalid or illegal direction string was specified.");h=t,this.hasBeenReset=!0}},snapToLines:{enumerable:!0,get:function(){return f},set:function(e){f=!!e,this.hasBeenReset=!0}},line:{enumerable:!0,get:function(){return p},set:function(e){if("number"!==typeof e&&e!==t)throw new SyntaxError("Line: an invalid number or illegal string was specified.");p=e,this.hasBeenReset=!0}},lineAlign:{enumerable:!0,get:function(){return g},set:function(e){var t=r(e);t?(g=t,this.hasBeenReset=!0):console.warn("lineAlign: an invalid or illegal string was specified.")}},position:{enumerable:!0,get:function(){return m},set:function(e){if(e<0||e>100)throw new Error("Position must be between 0 and 100.");m=e,this.hasBeenReset=!0}},positionAlign:{enumerable:!0,get:function(){return v},set:function(e){var t=r(e);t?(v=t,this.hasBeenReset=!0):console.warn("positionAlign: an invalid or illegal string was specified.")}},size:{enumerable:!0,get:function(){return y},set:function(e){if(e<0||e>100)throw new Error("Size must be between 0 and 100.");y=e,this.hasBeenReset=!0}},align:{enumerable:!0,get:function(){return _},set:function(e){var t=r(e);if(!t)throw new SyntaxError("align: an invalid or illegal alignment string was specified.");_=t,this.hasBeenReset=!0}}}),this.displayState=void 0}a.prototype.getCueAsHTML=function(){return WebVTT.convertCueToDOMTree(window,this.text)},e.exports=a},446:function(e){var t={"":!0,up:!0};function n(e){return"number"===typeof e&&e>=0&&e<=100}e.exports=function(){var e=100,i=3,r=0,a=100,s=0,o=100,l="";Object.defineProperties(this,{width:{enumerable:!0,get:function(){return e},set:function(t){if(!n(t))throw new Error("Width must be between 0 and 100.");e=t}},lines:{enumerable:!0,get:function(){return i},set:function(e){if("number"!==typeof e)throw new TypeError("Lines must be set to a number.");i=e}},regionAnchorY:{enumerable:!0,get:function(){return a},set:function(e){if(!n(e))throw new Error("RegionAnchorX must be between 0 and 100.");a=e}},regionAnchorX:{enumerable:!0,get:function(){return r},set:function(e){if(!n(e))throw new Error("RegionAnchorY must be between 0 and 100.");r=e}},viewportAnchorY:{enumerable:!0,get:function(){return o},set:function(e){if(!n(e))throw new Error("ViewportAnchorY must be between 0 and 100.");o=e}},viewportAnchorX:{enumerable:!0,get:function(){return s},set:function(e){if(!n(e))throw new Error("ViewportAnchorX must be between 0 and 100.");s=e}},scroll:{enumerable:!0,get:function(){return l},set:function(e){var n=function(e){return"string"===typeof e&&!!t[e.toLowerCase()]&&e.toLowerCase()}(e);!1===n?console.warn("Scroll: an invalid or illegal string was specified."):l=n}}})}},706:function(){},415:function(e){function t(){return e.exports=t=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},e.exports.__esModule=!0,e.exports.default=e.exports,t.apply(this,arguments)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}},t={};function n(i){var r=t[i];if(void 0!==r)return r.exports;var a=t[i]={exports:{}};return e[i].call(a.exports,a,a.exports,n),a.exports}n.m=e,n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},function(){var e,t=Object.getPrototypeOf?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__};n.t=function(i,r){if(1&r&&(i=this(i)),8&r)return i;if("object"===typeof i&&i){if(4&r&&i.__esModule)return i;if(16&r&&"function"===typeof i.then)return i}var a=Object.create(null);n.r(a);var s={};e=e||[null,t({}),t([]),t(t)];for(var o=2&r&&i;"object"==typeof o&&!~e.indexOf(o);o=t(o))Object.getOwnPropertyNames(o).forEach((function(e){s[e]=function(){return i[e]}}));return s.default=function(){return i},n.d(a,s),a}}(),n.d=function(e,t){for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.f={},n.e=function(e){return Promise.all(Object.keys(n.f).reduce((function(t,i){return n.f[i](e,t),t}),[]))},n.u=function(e){return"static/js/"+e+".90a28643.chunk.js"},n.miniCssF=function(e){},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){var e={},t="mareator:";n.l=function(i,r,a,s){if(e[i])e[i].push(r);else{var o,l;if(void 0!==a)for(var u=document.getElementsByTagName("script"),c=0;c<u.length;c++){var d=u[c];if(d.getAttribute("src")==i||d.getAttribute("data-webpack")==t+a){o=d;break}}o||(l=!0,(o=document.createElement("script")).charset="utf-8",o.timeout=120,n.nc&&o.setAttribute("nonce",n.nc),o.setAttribute("data-webpack",t+a),o.src=i),e[i]=[r];var h=function(t,n){o.onerror=o.onload=null,clearTimeout(f);var r=e[i];if(delete e[i],o.parentNode&&o.parentNode.removeChild(o),r&&r.forEach((function(e){return e(n)})),t)return t(n)},f=setTimeout(h.bind(null,void 0,{type:"timeout",target:o}),12e4);o.onerror=h.bind(null,o.onerror),o.onload=h.bind(null,o.onload),l&&document.head.appendChild(o)}}}(),n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/",function(){var e={179:0};n.f.j=function(t,i){var r=n.o(e,t)?e[t]:void 0;if(0!==r)if(r)i.push(r[2]);else{var a=new Promise((function(n,i){r=e[t]=[n,i]}));i.push(r[2]=a);var s=n.p+n.u(t),o=new Error;n.l(s,(function(i){if(n.o(e,t)&&(0!==(r=e[t])&&(e[t]=void 0),r)){var a=i&&("load"===i.type?"missing":i.type),s=i&&i.target&&i.target.src;o.message="Loading chunk "+t+" failed.\n("+a+": "+s+")",o.name="ChunkLoadError",o.type=a,o.request=s,r[1](o)}}),"chunk-"+t,t)}};var t=function(t,i){var r,a,s=i[0],o=i[1],l=i[2],u=0;if(s.some((function(t){return 0!==e[t]}))){for(r in o)n.o(o,r)&&(n.m[r]=o[r]);if(l)l(n)}for(t&&t(i);u<s.length;u++)a=s[u],n.o(e,a)&&e[a]&&e[a][0](),e[a]=0},i=self.webpackChunkmareator=self.webpackChunkmareator||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))}(),function(){"use strict";var e=n(791),t=n(164),i=n(870),r=n.n(i),a=n(558),s=n.n(a);function o(){return o=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},o.apply(this,arguments)}var l=n(775),u=n.n(l);function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(e,t){return d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},d(e,t)}function h(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,d(e,t)}var f=n(147),p=n.n(f),g=n(926),m=n.n(g),v=n(297),y=n.n(v);function _(e,t,n){return _=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}()?Reflect.construct.bind():function(e,t,n){var i=[null];i.push.apply(i,t);var r=new(Function.bind.apply(e,i));return n&&d(r,n.prototype),r},_.apply(null,arguments)}var b=n(851),T=n.n(b),k="http://example.com",x=function(e,t){if(/^[a-z]+:/i.test(t))return t;/^data:/.test(e)&&(e=r().location&&r().location.href||"");var n="function"===typeof r().URL,i=/^\/\//.test(e),a=!r().location&&!/\/\//i.test(e);if(n?e=new(r().URL)(e,r().location||k):/\/\//i.test(e)||(e=T().buildAbsoluteURL(r().location&&r().location.href||"",e)),n){var s=new URL(t,e);return a?s.href.slice(k.length):i?s.href.slice(s.protocol.length):s.href}return T().buildAbsoluteURL(e,t)},S=function(){function e(){this.listeners={}}var t=e.prototype;return t.on=function(e,t){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(t)},t.off=function(e,t){if(!this.listeners[e])return!1;var n=this.listeners[e].indexOf(t);return this.listeners[e]=this.listeners[e].slice(0),this.listeners[e].splice(n,1),n>-1},t.trigger=function(e){var t=this.listeners[e];if(t)if(2===arguments.length)for(var n=t.length,i=0;i<n;++i)t[i].call(this,arguments[1]);else for(var r=Array.prototype.slice.call(arguments,1),a=t.length,s=0;s<a;++s)t[s].apply(this,r)},t.dispose=function(){this.listeners={}},t.pipe=function(e){this.on("data",(function(t){e.push(t)}))},e}(),w=function(e){return r().atob?r().atob(e):Buffer.from(e,"base64").toString("binary")};function E(e){for(var t=w(e),n=new Uint8Array(t.length),i=0;i<t.length;i++)n[i]=t.charCodeAt(i);return n}var C,P=function(e){function t(){var t;return(t=e.call(this)||this).buffer="",t}return h(t,e),t.prototype.push=function(e){var t;for(this.buffer+=e,t=this.buffer.indexOf("\n");t>-1;t=this.buffer.indexOf("\n"))this.trigger("data",this.buffer.substring(0,t)),this.buffer=this.buffer.substring(t+1)},t}(S),I=String.fromCharCode(9),A=function(e){var t=/([0-9.]*)?@?([0-9.]*)?/.exec(e||""),n={};return t[1]&&(n.length=parseInt(t[1],10)),t[2]&&(n.offset=parseInt(t[2],10)),n},O=function(e){for(var t,n=e.split(new RegExp('(?:^|,)((?:[^=]*)=(?:"[^"]*"|[^,]*))')),i={},r=n.length;r--;)""!==n[r]&&((t=/([^=]*)=(.*)/.exec(n[r]).slice(1))[0]=t[0].replace(/^\s+|\s+$/g,""),t[1]=t[1].replace(/^\s+|\s+$/g,""),t[1]=t[1].replace(/^['"](.*)['"]$/g,"$1"),i[t[0]]=t[1]);return i},L=function(e){function t(){var t;return(t=e.call(this)||this).customParsers=[],t.tagMappers=[],t}h(t,e);var n=t.prototype;return n.push=function(e){var t,n,i=this;0!==(e=e.trim()).length&&("#"===e[0]?this.tagMappers.reduce((function(t,n){var i=n(e);return i===e?t:t.concat([i])}),[e]).forEach((function(e){for(var r=0;r<i.customParsers.length;r++)if(i.customParsers[r].call(i,e))return;if(0===e.indexOf("#EXT"))if(e=e.replace("\r",""),t=/^#EXTM3U/.exec(e))i.trigger("data",{type:"tag",tagType:"m3u"});else{if(t=/^#EXTINF:?([0-9\.]*)?,?(.*)?$/.exec(e))return n={type:"tag",tagType:"inf"},t[1]&&(n.duration=parseFloat(t[1])),t[2]&&(n.title=t[2]),void i.trigger("data",n);if(t=/^#EXT-X-TARGETDURATION:?([0-9.]*)?/.exec(e))return n={type:"tag",tagType:"targetduration"},t[1]&&(n.duration=parseInt(t[1],10)),void i.trigger("data",n);if(t=/^#EXT-X-VERSION:?([0-9.]*)?/.exec(e))return n={type:"tag",tagType:"version"},t[1]&&(n.version=parseInt(t[1],10)),void i.trigger("data",n);if(t=/^#EXT-X-MEDIA-SEQUENCE:?(\-?[0-9.]*)?/.exec(e))return n={type:"tag",tagType:"media-sequence"},t[1]&&(n.number=parseInt(t[1],10)),void i.trigger("data",n);if(t=/^#EXT-X-DISCONTINUITY-SEQUENCE:?(\-?[0-9.]*)?/.exec(e))return n={type:"tag",tagType:"discontinuity-sequence"},t[1]&&(n.number=parseInt(t[1],10)),void i.trigger("data",n);if(t=/^#EXT-X-PLAYLIST-TYPE:?(.*)?$/.exec(e))return n={type:"tag",tagType:"playlist-type"},t[1]&&(n.playlistType=t[1]),void i.trigger("data",n);if(t=/^#EXT-X-BYTERANGE:?(.*)?$/.exec(e))return n=o(A(t[1]),{type:"tag",tagType:"byterange"}),void i.trigger("data",n);if(t=/^#EXT-X-ALLOW-CACHE:?(YES|NO)?/.exec(e))return n={type:"tag",tagType:"allow-cache"},t[1]&&(n.allowed=!/NO/.test(t[1])),void i.trigger("data",n);if(t=/^#EXT-X-MAP:?(.*)$/.exec(e)){if(n={type:"tag",tagType:"map"},t[1]){var a=O(t[1]);a.URI&&(n.uri=a.URI),a.BYTERANGE&&(n.byterange=A(a.BYTERANGE))}i.trigger("data",n)}else if(t=/^#EXT-X-STREAM-INF:?(.*)$/.exec(e)){if(n={type:"tag",tagType:"stream-inf"},t[1]){if(n.attributes=O(t[1]),n.attributes.RESOLUTION){var s=n.attributes.RESOLUTION.split("x"),l={};s[0]&&(l.width=parseInt(s[0],10)),s[1]&&(l.height=parseInt(s[1],10)),n.attributes.RESOLUTION=l}n.attributes.BANDWIDTH&&(n.attributes.BANDWIDTH=parseInt(n.attributes.BANDWIDTH,10)),n.attributes["FRAME-RATE"]&&(n.attributes["FRAME-RATE"]=parseFloat(n.attributes["FRAME-RATE"])),n.attributes["PROGRAM-ID"]&&(n.attributes["PROGRAM-ID"]=parseInt(n.attributes["PROGRAM-ID"],10))}i.trigger("data",n)}else{if(t=/^#EXT-X-MEDIA:?(.*)$/.exec(e))return n={type:"tag",tagType:"media"},t[1]&&(n.attributes=O(t[1])),void i.trigger("data",n);if(t=/^#EXT-X-ENDLIST/.exec(e))i.trigger("data",{type:"tag",tagType:"endlist"});else if(t=/^#EXT-X-DISCONTINUITY/.exec(e))i.trigger("data",{type:"tag",tagType:"discontinuity"});else{if(t=/^#EXT-X-PROGRAM-DATE-TIME:?(.*)$/.exec(e))return n={type:"tag",tagType:"program-date-time"},t[1]&&(n.dateTimeString=t[1],n.dateTimeObject=new Date(t[1])),void i.trigger("data",n);if(t=/^#EXT-X-KEY:?(.*)$/.exec(e))return n={type:"tag",tagType:"key"},t[1]&&(n.attributes=O(t[1]),n.attributes.IV&&("0x"===n.attributes.IV.substring(0,2).toLowerCase()&&(n.attributes.IV=n.attributes.IV.substring(2)),n.attributes.IV=n.attributes.IV.match(/.{8}/g),n.attributes.IV[0]=parseInt(n.attributes.IV[0],16),n.attributes.IV[1]=parseInt(n.attributes.IV[1],16),n.attributes.IV[2]=parseInt(n.attributes.IV[2],16),n.attributes.IV[3]=parseInt(n.attributes.IV[3],16),n.attributes.IV=new Uint32Array(n.attributes.IV))),void i.trigger("data",n);if(t=/^#EXT-X-START:?(.*)$/.exec(e))return n={type:"tag",tagType:"start"},t[1]&&(n.attributes=O(t[1]),n.attributes["TIME-OFFSET"]=parseFloat(n.attributes["TIME-OFFSET"]),n.attributes.PRECISE=/YES/.test(n.attributes.PRECISE)),void i.trigger("data",n);if(t=/^#EXT-X-CUE-OUT-CONT:?(.*)?$/.exec(e))return n={type:"tag",tagType:"cue-out-cont"},t[1]?n.data=t[1]:n.data="",void i.trigger("data",n);if(t=/^#EXT-X-CUE-OUT:?(.*)?$/.exec(e))return n={type:"tag",tagType:"cue-out"},t[1]?n.data=t[1]:n.data="",void i.trigger("data",n);if(t=/^#EXT-X-CUE-IN:?(.*)?$/.exec(e))return n={type:"tag",tagType:"cue-in"},t[1]?n.data=t[1]:n.data="",void i.trigger("data",n);if((t=/^#EXT-X-SKIP:(.*)$/.exec(e))&&t[1])return(n={type:"tag",tagType:"skip"}).attributes=O(t[1]),n.attributes.hasOwnProperty("SKIPPED-SEGMENTS")&&(n.attributes["SKIPPED-SEGMENTS"]=parseInt(n.attributes["SKIPPED-SEGMENTS"],10)),n.attributes.hasOwnProperty("RECENTLY-REMOVED-DATERANGES")&&(n.attributes["RECENTLY-REMOVED-DATERANGES"]=n.attributes["RECENTLY-REMOVED-DATERANGES"].split(I)),void i.trigger("data",n);if((t=/^#EXT-X-PART:(.*)$/.exec(e))&&t[1])return(n={type:"tag",tagType:"part"}).attributes=O(t[1]),["DURATION"].forEach((function(e){n.attributes.hasOwnProperty(e)&&(n.attributes[e]=parseFloat(n.attributes[e]))})),["INDEPENDENT","GAP"].forEach((function(e){n.attributes.hasOwnProperty(e)&&(n.attributes[e]=/YES/.test(n.attributes[e]))})),n.attributes.hasOwnProperty("BYTERANGE")&&(n.attributes.byterange=A(n.attributes.BYTERANGE)),void i.trigger("data",n);if((t=/^#EXT-X-SERVER-CONTROL:(.*)$/.exec(e))&&t[1])return(n={type:"tag",tagType:"server-control"}).attributes=O(t[1]),["CAN-SKIP-UNTIL","PART-HOLD-BACK","HOLD-BACK"].forEach((function(e){n.attributes.hasOwnProperty(e)&&(n.attributes[e]=parseFloat(n.attributes[e]))})),["CAN-SKIP-DATERANGES","CAN-BLOCK-RELOAD"].forEach((function(e){n.attributes.hasOwnProperty(e)&&(n.attributes[e]=/YES/.test(n.attributes[e]))})),void i.trigger("data",n);if((t=/^#EXT-X-PART-INF:(.*)$/.exec(e))&&t[1])return(n={type:"tag",tagType:"part-inf"}).attributes=O(t[1]),["PART-TARGET"].forEach((function(e){n.attributes.hasOwnProperty(e)&&(n.attributes[e]=parseFloat(n.attributes[e]))})),void i.trigger("data",n);if((t=/^#EXT-X-PRELOAD-HINT:(.*)$/.exec(e))&&t[1])return(n={type:"tag",tagType:"preload-hint"}).attributes=O(t[1]),["BYTERANGE-START","BYTERANGE-LENGTH"].forEach((function(e){if(n.attributes.hasOwnProperty(e)){n.attributes[e]=parseInt(n.attributes[e],10);var t="BYTERANGE-LENGTH"===e?"length":"offset";n.attributes.byterange=n.attributes.byterange||{},n.attributes.byterange[t]=n.attributes[e],delete n.attributes[e]}})),void i.trigger("data",n);if((t=/^#EXT-X-RENDITION-REPORT:(.*)$/.exec(e))&&t[1])return(n={type:"tag",tagType:"rendition-report"}).attributes=O(t[1]),["LAST-MSN","LAST-PART"].forEach((function(e){n.attributes.hasOwnProperty(e)&&(n.attributes[e]=parseInt(n.attributes[e],10))})),void i.trigger("data",n);i.trigger("data",{type:"tag",data:e.slice(4)})}}}else i.trigger("data",{type:"comment",text:e.slice(1)})})):this.trigger("data",{type:"uri",uri:e}))},n.addParser=function(e){var t=this,n=e.expression,i=e.customType,r=e.dataParser,a=e.segment;"function"!==typeof r&&(r=function(e){return e}),this.customParsers.push((function(e){if(n.exec(e))return t.trigger("data",{type:"custom",data:r(e),customType:i,segment:a}),!0}))},n.addTagMapper=function(e){var t=e.expression,n=e.map;this.tagMappers.push((function(e){return t.test(e)?n(e):e}))},t}(S),M=function(e){var t={};return Object.keys(e).forEach((function(n){var i;t[(i=n,i.toLowerCase().replace(/-(\w)/g,(function(e){return e[1].toUpperCase()})))]=e[n]})),t},D=function(e){var t=e.serverControl,n=e.targetDuration,i=e.partTargetDuration;if(t){var r="#EXT-X-SERVER-CONTROL",a="holdBack",s="partHoldBack",o=n&&3*n,l=i&&2*i;n&&!t.hasOwnProperty(a)&&(t[a]=o,this.trigger("info",{message:r+" defaulting HOLD-BACK to targetDuration * 3 ("+o+")."})),o&&t[a]<o&&(this.trigger("warn",{message:r+" clamping HOLD-BACK ("+t[a]+") to targetDuration * 3 ("+o+")"}),t[a]=o),i&&!t.hasOwnProperty(s)&&(t[s]=3*i,this.trigger("info",{message:r+" defaulting PART-HOLD-BACK to partTargetDuration * 3 ("+t[s]+")."})),i&&t[s]<l&&(this.trigger("warn",{message:r+" clamping PART-HOLD-BACK ("+t[s]+") to partTargetDuration * 2 ("+l+")."}),t[s]=l)}},R=function(e){function t(){var t;(t=e.call(this)||this).lineStream=new P,t.parseStream=new L,t.lineStream.pipe(t.parseStream);var n,i,r=c(t),a=[],s={},l=!1,u=function(){},d={AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},h=0;t.manifest={allowCache:!0,discontinuityStarts:[],segments:[]};var f=0,p=0;return t.on("end",(function(){s.uri||!s.parts&&!s.preloadHints||(!s.map&&n&&(s.map=n),!s.key&&i&&(s.key=i),s.timeline||"number"!==typeof h||(s.timeline=h),t.manifest.preloadSegment=s)})),t.parseStream.on("data",(function(e){var t,c;({tag:function(){({version:function(){e.version&&(this.manifest.version=e.version)},"allow-cache":function(){this.manifest.allowCache=e.allowed,"allowed"in e||(this.trigger("info",{message:"defaulting allowCache to YES"}),this.manifest.allowCache=!0)},byterange:function(){var t={};"length"in e&&(s.byterange=t,t.length=e.length,"offset"in e||(e.offset=f)),"offset"in e&&(s.byterange=t,t.offset=e.offset),f=t.offset+t.length},endlist:function(){this.manifest.endList=!0},inf:function(){"mediaSequence"in this.manifest||(this.manifest.mediaSequence=0,this.trigger("info",{message:"defaulting media sequence to zero"})),"discontinuitySequence"in this.manifest||(this.manifest.discontinuitySequence=0,this.trigger("info",{message:"defaulting discontinuity sequence to zero"})),e.duration>0&&(s.duration=e.duration),0===e.duration&&(s.duration=.01,this.trigger("info",{message:"updating zero segment duration to a small value"})),this.manifest.segments=a},key:function(){if(e.attributes)if("NONE"!==e.attributes.METHOD)if(e.attributes.URI){if("com.apple.streamingkeydelivery"===e.attributes.KEYFORMAT)return this.manifest.contentProtection=this.manifest.contentProtection||{},void(this.manifest.contentProtection["com.apple.fps.1_0"]={attributes:e.attributes});if("com.microsoft.playready"===e.attributes.KEYFORMAT)return this.manifest.contentProtection=this.manifest.contentProtection||{},void(this.manifest.contentProtection["com.microsoft.playready"]={uri:e.attributes.URI});if("urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed"===e.attributes.KEYFORMAT){return-1===["SAMPLE-AES","SAMPLE-AES-CTR","SAMPLE-AES-CENC"].indexOf(e.attributes.METHOD)?void this.trigger("warn",{message:"invalid key method provided for Widevine"}):("SAMPLE-AES-CENC"===e.attributes.METHOD&&this.trigger("warn",{message:"SAMPLE-AES-CENC is deprecated, please use SAMPLE-AES-CTR instead"}),"data:text/plain;base64,"!==e.attributes.URI.substring(0,23)?void this.trigger("warn",{message:"invalid key URI provided for Widevine"}):e.attributes.KEYID&&"0x"===e.attributes.KEYID.substring(0,2)?(this.manifest.contentProtection=this.manifest.contentProtection||{},void(this.manifest.contentProtection["com.widevine.alpha"]={attributes:{schemeIdUri:e.attributes.KEYFORMAT,keyId:e.attributes.KEYID.substring(2)},pssh:E(e.attributes.URI.split(",")[1])})):void this.trigger("warn",{message:"invalid key ID provided for Widevine"}))}e.attributes.METHOD||this.trigger("warn",{message:"defaulting key method to AES-128"}),i={method:e.attributes.METHOD||"AES-128",uri:e.attributes.URI},"undefined"!==typeof e.attributes.IV&&(i.iv=e.attributes.IV)}else this.trigger("warn",{message:"ignoring key declaration without URI"});else i=null;else this.trigger("warn",{message:"ignoring key declaration without attribute list"})},"media-sequence":function(){isFinite(e.number)?this.manifest.mediaSequence=e.number:this.trigger("warn",{message:"ignoring invalid media sequence: "+e.number})},"discontinuity-sequence":function(){isFinite(e.number)?(this.manifest.discontinuitySequence=e.number,h=e.number):this.trigger("warn",{message:"ignoring invalid discontinuity sequence: "+e.number})},"playlist-type":function(){/VOD|EVENT/.test(e.playlistType)?this.manifest.playlistType=e.playlistType:this.trigger("warn",{message:"ignoring unknown playlist type: "+e.playlist})},map:function(){n={},e.uri&&(n.uri=e.uri),e.byterange&&(n.byterange=e.byterange),i&&(n.key=i)},"stream-inf":function(){this.manifest.playlists=a,this.manifest.mediaGroups=this.manifest.mediaGroups||d,e.attributes?(s.attributes||(s.attributes={}),o(s.attributes,e.attributes)):this.trigger("warn",{message:"ignoring empty stream-inf attributes"})},media:function(){if(this.manifest.mediaGroups=this.manifest.mediaGroups||d,e.attributes&&e.attributes.TYPE&&e.attributes["GROUP-ID"]&&e.attributes.NAME){var n=this.manifest.mediaGroups[e.attributes.TYPE];n[e.attributes["GROUP-ID"]]=n[e.attributes["GROUP-ID"]]||{},t=n[e.attributes["GROUP-ID"]],(c={default:/yes/i.test(e.attributes.DEFAULT)}).default?c.autoselect=!0:c.autoselect=/yes/i.test(e.attributes.AUTOSELECT),e.attributes.LANGUAGE&&(c.language=e.attributes.LANGUAGE),e.attributes.URI&&(c.uri=e.attributes.URI),e.attributes["INSTREAM-ID"]&&(c.instreamId=e.attributes["INSTREAM-ID"]),e.attributes.CHARACTERISTICS&&(c.characteristics=e.attributes.CHARACTERISTICS),e.attributes.FORCED&&(c.forced=/yes/i.test(e.attributes.FORCED)),t[e.attributes.NAME]=c}else this.trigger("warn",{message:"ignoring incomplete or missing media group"})},discontinuity:function(){h+=1,s.discontinuity=!0,this.manifest.discontinuityStarts.push(a.length)},"program-date-time":function(){"undefined"===typeof this.manifest.dateTimeString&&(this.manifest.dateTimeString=e.dateTimeString,this.manifest.dateTimeObject=e.dateTimeObject),s.dateTimeString=e.dateTimeString,s.dateTimeObject=e.dateTimeObject},targetduration:function(){!isFinite(e.duration)||e.duration<0?this.trigger("warn",{message:"ignoring invalid target duration: "+e.duration}):(this.manifest.targetDuration=e.duration,D.call(this,this.manifest))},start:function(){e.attributes&&!isNaN(e.attributes["TIME-OFFSET"])?this.manifest.start={timeOffset:e.attributes["TIME-OFFSET"],precise:e.attributes.PRECISE}:this.trigger("warn",{message:"ignoring start declaration without appropriate attribute list"})},"cue-out":function(){s.cueOut=e.data},"cue-out-cont":function(){s.cueOutCont=e.data},"cue-in":function(){s.cueIn=e.data},skip:function(){this.manifest.skip=M(e.attributes),this.warnOnMissingAttributes_("#EXT-X-SKIP",e.attributes,["SKIPPED-SEGMENTS"])},part:function(){var t=this;l=!0;var n=this.manifest.segments.length,i=M(e.attributes);s.parts=s.parts||[],s.parts.push(i),i.byterange&&(i.byterange.hasOwnProperty("offset")||(i.byterange.offset=p),p=i.byterange.offset+i.byterange.length);var r=s.parts.length-1;this.warnOnMissingAttributes_("#EXT-X-PART #"+r+" for segment #"+n,e.attributes,["URI","DURATION"]),this.manifest.renditionReports&&this.manifest.renditionReports.forEach((function(e,n){e.hasOwnProperty("lastPart")||t.trigger("warn",{message:"#EXT-X-RENDITION-REPORT #"+n+" lacks required attribute(s): LAST-PART"})}))},"server-control":function(){var t=this.manifest.serverControl=M(e.attributes);t.hasOwnProperty("canBlockReload")||(t.canBlockReload=!1,this.trigger("info",{message:"#EXT-X-SERVER-CONTROL defaulting CAN-BLOCK-RELOAD to false"})),D.call(this,this.manifest),t.canSkipDateranges&&!t.hasOwnProperty("canSkipUntil")&&this.trigger("warn",{message:"#EXT-X-SERVER-CONTROL lacks required attribute CAN-SKIP-UNTIL which is required when CAN-SKIP-DATERANGES is set"})},"preload-hint":function(){var t=this.manifest.segments.length,n=M(e.attributes),i=n.type&&"PART"===n.type;s.preloadHints=s.preloadHints||[],s.preloadHints.push(n),n.byterange&&(n.byterange.hasOwnProperty("offset")||(n.byterange.offset=i?p:0,i&&(p=n.byterange.offset+n.byterange.length)));var r=s.preloadHints.length-1;if(this.warnOnMissingAttributes_("#EXT-X-PRELOAD-HINT #"+r+" for segment #"+t,e.attributes,["TYPE","URI"]),n.type)for(var a=0;a<s.preloadHints.length-1;a++){var o=s.preloadHints[a];o.type&&(o.type===n.type&&this.trigger("warn",{message:"#EXT-X-PRELOAD-HINT #"+r+" for segment #"+t+" has the same TYPE "+n.type+" as preload hint #"+a}))}},"rendition-report":function(){var t=M(e.attributes);this.manifest.renditionReports=this.manifest.renditionReports||[],this.manifest.renditionReports.push(t);var n=this.manifest.renditionReports.length-1,i=["LAST-MSN","URI"];l&&i.push("LAST-PART"),this.warnOnMissingAttributes_("#EXT-X-RENDITION-REPORT #"+n,e.attributes,i)},"part-inf":function(){this.manifest.partInf=M(e.attributes),this.warnOnMissingAttributes_("#EXT-X-PART-INF",e.attributes,["PART-TARGET"]),this.manifest.partInf.partTarget&&(this.manifest.partTargetDuration=this.manifest.partInf.partTarget),D.call(this,this.manifest)}}[e.tagType]||u).call(r)},uri:function(){s.uri=e.uri,a.push(s),this.manifest.targetDuration&&!("duration"in s)&&(this.trigger("warn",{message:"defaulting segment duration to the target duration"}),s.duration=this.manifest.targetDuration),i&&(s.key=i),s.timeline=h,n&&(s.map=n),p=0,s={}},comment:function(){},custom:function(){e.segment?(s.custom=s.custom||{},s.custom[e.customType]=e.data):(this.manifest.custom=this.manifest.custom||{},this.manifest.custom[e.customType]=e.data)}})[e.type].call(r)})),t}h(t,e);var n=t.prototype;return n.warnOnMissingAttributes_=function(e,t,n){var i=[];n.forEach((function(e){t.hasOwnProperty(e)||i.push(e)})),i.length&&this.trigger("warn",{message:e+" lacks required attribute(s): "+i.join(", ")})},n.push=function(e){this.lineStream.push(e)},n.end=function(){this.lineStream.push("\n"),this.trigger("end")},n.addParser=function(e){this.parseStream.addParser(e)},n.addTagMapper=function(e){this.parseStream.addTagMapper(e)},t}(S),N={mp4:/^(av0?1|avc0?[1234]|vp0?9|flac|opus|mp3|mp4a|mp4v|stpp.ttml.im1t)/,webm:/^(vp0?[89]|av0?1|opus|vorbis)/,ogg:/^(vp0?[89]|theora|flac|opus|vorbis)/,video:/^(av0?1|avc0?[1234]|vp0?[89]|hvc1|hev1|theora|mp4v)/,audio:/^(mp4a|flac|vorbis|opus|ac-[34]|ec-3|alac|mp3|speex|aac)/,text:/^(stpp.ttml.im1t)/,muxerVideo:/^(avc0?1)/,muxerAudio:/^(mp4a)/,muxerText:/a^/},U=["video","audio","text"],j=["Video","Audio","Text"],F=function(e){return e?e.replace(/avc1\.(\d+)\.(\d+)/i,(function(e,t,n){return"avc1."+("00"+Number(t).toString(16)).slice(-2)+"00"+("00"+Number(n).toString(16)).slice(-2)})):e},B=function(e){void 0===e&&(e="");var t=e.split(","),n=[];return t.forEach((function(e){var t;e=e.trim(),U.forEach((function(i){var r=N[i].exec(e.toLowerCase());if(r&&!(r.length<=1)){t=i;var a=e.substring(0,r[1].length),s=e.replace(a,"");n.push({type:a,details:s,mediaType:i})}})),t||n.push({type:e,details:"",mediaType:"unknown"})})),n},z=function(e){return void 0===e&&(e=""),N.audio.test(e.trim().toLowerCase())},V=function(e){if(e&&"string"===typeof e){var t,n=e.toLowerCase().split(",").map((function(e){return F(e.trim())})),i="video";1===n.length&&z(n[0])?i="audio":1===n.length&&(void 0===(t=n[0])&&(t=""),N.text.test(t.trim().toLowerCase()))&&(i="application");var r="mp4";return n.every((function(e){return N.mp4.test(e)}))?r="mp4":n.every((function(e){return N.webm.test(e)}))?r="webm":n.every((function(e){return N.ogg.test(e)}))&&(r="ogg"),i+"/"+r+';codecs="'+e+'"'}},H=function(e){return void 0===e&&(e=""),r().MediaSource&&r().MediaSource.isTypeSupported&&r().MediaSource.isTypeSupported(V(e))||!1},W=function(e){return void 0===e&&(e=""),e.toLowerCase().split(",").every((function(e){e=e.trim();for(var t=0;t<j.length;t++){if(N["muxer"+j[t]].test(e))return!0}return!1}))},q="mp4a.40.2",G=/^(audio|video|application)\/(x-|vnd\.apple\.)?mpegurl/i,X=/^application\/dash\+xml/i,K=function(e){return G.test(e)?"hls":X.test(e)?"dash":"application/vnd.videojs.vhs+json"===e?"vhs-json":null},$=function(e){return"function"===ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer},Y=function(e){return e instanceof Uint8Array?e:(Array.isArray(e)||$(e)||e instanceof ArrayBuffer||(e="number"!==typeof e||"number"===typeof e&&e!==e?0:[e]),new Uint8Array(e&&e.buffer||e,e&&e.byteOffset||0,e&&e.byteLength||0))},Q=r().BigInt||Number,J=[Q("0x1"),Q("0x100"),Q("0x10000"),Q("0x1000000"),Q("0x100000000"),Q("0x10000000000"),Q("0x1000000000000"),Q("0x100000000000000"),Q("0x10000000000000000")],Z=(function(){var e=new Uint16Array([65484]),t=new Uint8Array(e.buffer,e.byteOffset,e.byteLength);255===t[0]||t[0]}(),function(e,t){var n=void 0===t?{}:t,i=n.signed,r=void 0!==i&&i,a=n.le,s=void 0!==a&&a;e=Y(e);var o=s?"reduce":"reduceRight",l=(e[o]?e[o]:Array.prototype[o]).call(e,(function(t,n,i){var r=s?i:Math.abs(i+1-e.length);return t+Q(n)*J[r]}),Q(0));if(r){var u=J[e.length]/Q(2)-Q(1);(l=Q(l))>u&&(l-=u,l-=u,l-=Q(2))}return Number(l)}),ee=function(e,t){var n=(void 0===t?{}:t).le,i=void 0!==n&&n;("bigint"!==typeof e&&"number"!==typeof e||"number"===typeof e&&e!==e)&&(e=0),e=Q(e);for(var r,a=(r=e,Math.ceil(function(e){return e.toString(2).length}(r)/8)),s=new Uint8Array(new ArrayBuffer(a)),o=0;o<a;o++){var l=i?o:Math.abs(o+1-s.length);s[l]=Number(e/J[o]&Q(255)),e<0&&(s[l]=Math.abs(~s[l]),s[l]-=0===o?1:2)}return s},te=function(e,t){if("string"!==typeof e&&e&&"function"===typeof e.toString&&(e=e.toString()),"string"!==typeof e)return new Uint8Array;t||(e=unescape(encodeURIComponent(e)));for(var n=new Uint8Array(e.length),i=0;i<e.length;i++)n[i]=e.charCodeAt(i);return n},ne=function(e,t,n){var i=void 0===n?{}:n,r=i.offset,a=void 0===r?0:r,s=i.mask,o=void 0===s?[]:s;e=Y(e);var l=(t=Y(t)).every?t.every:Array.prototype.every;return t.length&&e.length-a>=t.length&&l.call(t,(function(t,n){return t===(o[n]?o[n]&e[a+n]:e[a+n])}))},ie=n(854),re=function(e){return!!e&&"object"===typeof e},ae=function e(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return n.reduce((function(t,n){return"object"!==typeof n||Object.keys(n).forEach((function(i){Array.isArray(t[i])&&Array.isArray(n[i])?t[i]=t[i].concat(n[i]):re(t[i])&&re(n[i])?t[i]=e(t[i],n[i]):t[i]=n[i]})),t}),{})},se=function(e){return Object.keys(e).map((function(t){return e[t]}))},oe=function(e){return e.reduce((function(e,t){return e.concat(t)}),[])},le=function(e){if(!e.length)return[];for(var t=[],n=0;n<e.length;n++)t.push(e[n]);return t},ue=function(e,t){for(var n=0;n<e.length;n++)if(t(e[n]))return n;return-1},ce="INVALID_NUMBER_OF_PERIOD",de="DASH_EMPTY_MANIFEST",he="DASH_INVALID_XML",fe="NO_BASE_URL",pe="SEGMENT_TIME_UNSPECIFIED",ge="UNSUPPORTED_UTC_TIMING_SCHEME",me=function(e){var t=e.baseUrl,n=void 0===t?"":t,i=e.source,a=void 0===i?"":i,s=e.range,o=void 0===s?"":s,l=e.indexRange,u=void 0===l?"":l,c={uri:a,resolvedUri:x(n||"",a)};if(o||u){var d,h=(o||u).split("-"),f=r().BigInt?r().BigInt(h[0]):parseInt(h[0],10),p=r().BigInt?r().BigInt(h[1]):parseInt(h[1],10);f<Number.MAX_SAFE_INTEGER&&"bigint"===typeof f&&(f=Number(f)),p<Number.MAX_SAFE_INTEGER&&"bigint"===typeof p&&(p=Number(p)),"bigint"===typeof(d="bigint"===typeof p||"bigint"===typeof f?r().BigInt(p)-r().BigInt(f)+r().BigInt(1):p-f+1)&&d<Number.MAX_SAFE_INTEGER&&(d=Number(d)),c.byterange={length:d,offset:f}}return c},ve=function(e){return e&&"number"!==typeof e&&(e=parseInt(e,10)),isNaN(e)?null:e},ye={static:function(e){var t=e.duration,n=e.timescale,i=void 0===n?1:n,r=e.sourceDuration,a=e.periodDuration,s=ve(e.endNumber),o=t/i;return"number"===typeof s?{start:0,end:s}:"number"===typeof a?{start:0,end:a/o}:{start:0,end:r/o}},dynamic:function(e){var t=e.NOW,n=e.clientOffset,i=e.availabilityStartTime,r=e.timescale,a=void 0===r?1:r,s=e.duration,o=e.periodStart,l=void 0===o?0:o,u=e.minimumUpdatePeriod,c=void 0===u?0:u,d=e.timeShiftBufferDepth,h=void 0===d?1/0:d,f=ve(e.endNumber),p=(t+n)/1e3,g=i+l,m=p+c-g,v=Math.ceil(m*a/s),y=Math.floor((p-g-h)*a/s),_=Math.floor((p-g)*a/s);return{start:Math.max(0,y),end:"number"===typeof f?f:Math.min(v,_)}}},_e=function(e){var t=e.type,n=e.duration,i=e.timescale,r=void 0===i?1:i,a=e.periodDuration,s=e.sourceDuration,o=ye[t](e),l=function(e,t){for(var n=[],i=e;i<t;i++)n.push(i);return n}(o.start,o.end).map(function(e){return function(t){var n=e.duration,i=e.timescale,r=void 0===i?1:i,a=e.periodStart,s=e.startNumber;return{number:(void 0===s?1:s)+t,duration:n/r,timeline:a,time:t*n}}}(e));if("static"===t){var u=l.length-1,c="number"===typeof a?a:s;l[u].duration=c-n/r*u}return l},be=function(e){var t=e.baseUrl,n=e.initialization,i=void 0===n?{}:n,r=e.sourceDuration,a=e.indexRange,s=void 0===a?"":a,o=e.periodStart,l=e.presentationTime,u=e.number,c=void 0===u?0:u,d=e.duration;if(!t)throw new Error(fe);var h=me({baseUrl:t,source:i.sourceURL,range:i.range}),f=me({baseUrl:t,source:t,indexRange:s});if(f.map=h,d){var p=_e(e);p.length&&(f.duration=p[0].duration,f.timeline=p[0].timeline)}else r&&(f.duration=r,f.timeline=o);return f.presentationTime=l||o,f.number=c,[f]},Te=function(e,t,n){var i,a=e.sidx.map?e.sidx.map:null,s=e.sidx.duration,o=e.timeline||0,l=e.sidx.byterange,u=l.offset+l.length,c=t.timescale,d=t.references.filter((function(e){return 1!==e.referenceType})),h=[],f=e.endList?"static":"dynamic",p=e.sidx.timeline,g=p,m=e.mediaSequence||0;i="bigint"===typeof t.firstOffset?r().BigInt(u)+t.firstOffset:u+t.firstOffset;for(var v=0;v<d.length;v++){var y=t.references[v],_=y.referencedSize,b=y.subsegmentDuration,T=void 0;T="bigint"===typeof i?i+r().BigInt(_)-r().BigInt(1):i+_-1;var k=be({baseUrl:n,timescale:c,timeline:o,periodStart:p,presentationTime:g,number:m,duration:b,sourceDuration:s,indexRange:i+"-"+T,type:f})[0];a&&(k.map=a),h.push(k),i+="bigint"===typeof i?r().BigInt(_):_,g+=b/c,m++}return e.segments=h,e},ke=["AUDIO","SUBTITLES"],xe=function(e){return(t=e,n=function(e){return e.timeline},se(t.reduce((function(e,t){return t.forEach((function(t){e[n(t)]=t})),e}),{}))).sort((function(e,t){return e.timeline>t.timeline?1:-1}));var t,n},Se=function(e){var t=[];return function(e,t,n){t.forEach((function(t){for(var i in e.mediaGroups[t])for(var r in e.mediaGroups[t][i]){var a=e.mediaGroups[t][i][r];n(a,t,i,r)}}))}(e,ke,(function(e,n,i,r){t=t.concat(e.playlists||[])})),t},we=function(e){var t=e.playlist,n=e.mediaSequence;t.mediaSequence=n,t.segments.forEach((function(e,n){e.number=t.mediaSequence+n}))},Ee=function(e){var t=e.oldManifest,n=e.newManifest,i=t.playlists.concat(Se(t)),r=n.playlists.concat(Se(n));return n.timelineStarts=xe([t.timelineStarts,n.timelineStarts]),function(e){var t=e.oldPlaylists,n=e.newPlaylists,i=e.timelineStarts;n.forEach((function(e){e.discontinuitySequence=ue(i,(function(t){return t.timeline===e.timeline}));var n=function(e,t){for(var n=0;n<e.length;n++)if(e[n].attributes.NAME===t)return e[n];return null}(t,e.attributes.NAME);if(n&&!e.sidx){var r=e.segments[0],a=ue(n.segments,(function(e){return Math.abs(e.presentationTime-r.presentationTime)<.016666666666666666}));if(-1===a)return we({playlist:e,mediaSequence:n.mediaSequence+n.segments.length}),e.segments[0].discontinuity=!0,e.discontinuityStarts.unshift(0),void((!n.segments.length&&e.timeline>n.timeline||n.segments.length&&e.timeline>n.segments[n.segments.length-1].timeline)&&e.discontinuitySequence--);n.segments[a].discontinuity&&!r.discontinuity&&(r.discontinuity=!0,e.discontinuityStarts.unshift(0),e.discontinuitySequence--),we({playlist:e,mediaSequence:n.segments[a].number})}}))}({oldPlaylists:i,newPlaylists:r,timelineStarts:n.timelineStarts}),n},Ce=function(e){return e&&e.uri+"-"+function(e){var t;return t="bigint"===typeof e.offset||"bigint"===typeof e.length?r().BigInt(e.offset)+r().BigInt(e.length)-r().BigInt(1):e.offset+e.length-1,e.offset+"-"+t}(e.byterange)},Pe=function(e){return se(e.reduce((function(e,t){var n=t.attributes.id+(t.attributes.lang||"");if(e[n]){var i;if(t.segments)t.segments[0]&&(t.segments[0].discontinuity=!0),(i=e[n].segments).push.apply(i,t.segments);t.attributes.contentProtection&&(e[n].attributes.contentProtection=t.attributes.contentProtection)}else e[n]=t,e[n].attributes.timelineStarts=[];return e[n].attributes.timelineStarts.push({start:t.attributes.periodStart,timeline:t.attributes.periodStart}),e}),{})).map((function(e){var t,n;return e.discontinuityStarts=(t=e.segments||[],n="discontinuity",t.reduce((function(e,t,i){return t[n]&&e.push(i),e}),[])),e}))},Ie=function(e,t){var n=Ce(e.sidx),i=n&&t[n]&&t[n].sidx;return i&&Te(e,i,e.sidx.resolvedUri),e},Ae=function(e,t){if(void 0===t&&(t={}),!Object.keys(t).length)return e;for(var n in e)e[n]=Ie(e[n],t);return e},Oe=function(e){var t,n=e.attributes,i=e.segments,r=e.sidx,a=e.discontinuityStarts,s={attributes:(t={NAME:n.id,AUDIO:"audio",SUBTITLES:"subs",RESOLUTION:{width:n.width,height:n.height},CODECS:n.codecs,BANDWIDTH:n.bandwidth},t["PROGRAM-ID"]=1,t),uri:"",endList:"static"===n.type,timeline:n.periodStart,resolvedUri:"",targetDuration:n.duration,discontinuityStarts:a,timelineStarts:n.timelineStarts,segments:i};return n.frameRate&&(s.attributes["FRAME-RATE"]=n.frameRate),n.contentProtection&&(s.contentProtection=n.contentProtection),r&&(s.sidx=r),s},Le=function(e){var t=e.attributes;return"video/mp4"===t.mimeType||"video/webm"===t.mimeType||"video"===t.contentType},Me=function(e){var t=e.attributes;return"audio/mp4"===t.mimeType||"audio/webm"===t.mimeType||"audio"===t.contentType},De=function(e){var t=e.attributes;return"text/vtt"===t.mimeType||"text"===t.contentType},Re=function(e){return e?Object.keys(e).reduce((function(t,n){var i=e[n];return t.concat(i.playlists)}),[]):[]},Ne=function(e){var t,n=e.dashPlaylists,i=e.locations,r=e.sidxMapping,a=void 0===r?{}:r,s=e.previousManifest;if(!n.length)return{};var o=n[0].attributes,l=o.sourceDuration,u=o.type,c=o.suggestedPresentationDelay,d=o.minimumUpdatePeriod,h=Pe(n.filter(Le)).map(Oe),f=Pe(n.filter(Me)),p=Pe(n.filter(De)),g=n.map((function(e){return e.attributes.captionServices})).filter(Boolean),m={allowCache:!0,discontinuityStarts:[],segments:[],endList:!0,mediaGroups:(t={AUDIO:{},VIDEO:{}},t["CLOSED-CAPTIONS"]={},t.SUBTITLES={},t),uri:"",duration:l,playlists:Ae(h,a)};d>=0&&(m.minimumUpdatePeriod=1e3*d),i&&(m.locations=i),"dynamic"===u&&(m.suggestedPresentationDelay=c);var v,y,_=0===m.playlists.length,b=f.length?function(e,t,n){var i;void 0===t&&(t={}),void 0===n&&(n=!1);var r=e.reduce((function(e,r){var a=r.attributes.role&&r.attributes.role.value||"",s=r.attributes.lang||"",o=r.attributes.label||"main";if(s&&!r.attributes.label){var l=a?" ("+a+")":"";o=""+r.attributes.lang+l}e[o]||(e[o]={language:s,autoselect:!0,default:"main"===a,playlists:[],uri:""});var u=Ie(function(e,t){var n,i=e.attributes,r=e.segments,a=e.sidx,s=e.mediaSequence,o=e.discontinuitySequence,l=e.discontinuityStarts,u={attributes:(n={NAME:i.id,BANDWIDTH:i.bandwidth,CODECS:i.codecs},n["PROGRAM-ID"]=1,n),uri:"",endList:"static"===i.type,timeline:i.periodStart,resolvedUri:"",targetDuration:i.duration,discontinuitySequence:o,discontinuityStarts:l,timelineStarts:i.timelineStarts,mediaSequence:s,segments:r};return i.contentProtection&&(u.contentProtection=i.contentProtection),a&&(u.sidx=a),t&&(u.attributes.AUDIO="audio",u.attributes.SUBTITLES="subs"),u}(r,n),t);return e[o].playlists.push(u),"undefined"===typeof i&&"main"===a&&((i=r).default=!0),e}),{});return i||(r[Object.keys(r)[0]].default=!0),r}(f,a,_):null,T=p.length?function(e,t){return void 0===t&&(t={}),e.reduce((function(e,n){var i=n.attributes.lang||"text";return e[i]||(e[i]={language:i,default:!1,autoselect:!1,playlists:[],uri:""}),e[i].playlists.push(Ie(function(e){var t,n=e.attributes,i=e.segments,r=e.mediaSequence,a=e.discontinuityStarts,s=e.discontinuitySequence;"undefined"===typeof i&&(i=[{uri:n.baseUrl,timeline:n.periodStart,resolvedUri:n.baseUrl||"",duration:n.sourceDuration,number:0}],n.duration=n.sourceDuration);var o=((t={NAME:n.id,BANDWIDTH:n.bandwidth})["PROGRAM-ID"]=1,t);return n.codecs&&(o.CODECS=n.codecs),{attributes:o,uri:"",endList:"static"===n.type,timeline:n.periodStart,resolvedUri:n.baseUrl||"",targetDuration:n.duration,timelineStarts:n.timelineStarts,discontinuityStarts:a,discontinuitySequence:s,mediaSequence:r,segments:i}}(n),t)),e}),{})}(p,a):null,k=h.concat(Re(b),Re(T)),x=k.map((function(e){return e.timelineStarts}));return m.timelineStarts=xe(x),v=k,y=m.timelineStarts,v.forEach((function(e){e.mediaSequence=0,e.discontinuitySequence=ue(y,(function(t){return t.timeline===e.timeline})),e.segments&&e.segments.forEach((function(e,t){e.number=t}))})),b&&(m.mediaGroups.AUDIO.audio=b),T&&(m.mediaGroups.SUBTITLES.subs=T),g.length&&(m.mediaGroups["CLOSED-CAPTIONS"].cc=g.reduce((function(e,t){return t?(t.forEach((function(t){var n=t.channel,i=t.language;e[i]={autoselect:!1,default:!1,instreamId:n,language:i},t.hasOwnProperty("aspectRatio")&&(e[i].aspectRatio=t.aspectRatio),t.hasOwnProperty("easyReader")&&(e[i].easyReader=t.easyReader),t.hasOwnProperty("3D")&&(e[i]["3D"]=t["3D"])})),e):e}),{})),s?Ee({oldManifest:s,newManifest:m}):m},Ue=function(e,t,n){var i=e.NOW,r=e.clientOffset,a=e.availabilityStartTime,s=e.timescale,o=void 0===s?1:s,l=e.periodStart,u=void 0===l?0:l,c=e.minimumUpdatePeriod,d=(i+r)/1e3+(void 0===c?0:c)-(a+u);return Math.ceil((d*o-t)/n)},je=function(e,t){for(var n=e.type,i=e.minimumUpdatePeriod,r=void 0===i?0:i,a=e.media,s=void 0===a?"":a,o=e.sourceDuration,l=e.timescale,u=void 0===l?1:l,c=e.startNumber,d=void 0===c?1:c,h=e.periodStart,f=[],p=-1,g=0;g<t.length;g++){var m=t[g],v=m.d,y=m.r||0,_=m.t||0;p<0&&(p=_),_&&_>p&&(p=_);var b=void 0;if(y<0){var T=g+1;b=T===t.length?"dynamic"===n&&r>0&&s.indexOf("$Number$")>0?Ue(e,p,v):(o*u-p)/v:(t[T].t-p)/v}else b=y+1;for(var k=d+f.length+b,x=d+f.length;x<k;)f.push({number:x,duration:v/u,time:p,timeline:h}),p+=v,x++}return f},Fe=/\$([A-z]*)(?:(%0)([0-9]+)d)?\$/g,Be=function(e,t){return e.replace(Fe,function(e){return function(t,n,i,r){if("$$"===t)return"$";if("undefined"===typeof e[n])return t;var a=""+e[n];return"RepresentationID"===n?a:(r=i?parseInt(r,10):1,a.length>=r?a:""+new Array(r-a.length+1).join("0")+a)}}(t))},ze=function(e,t){var n={RepresentationID:e.id,Bandwidth:e.bandwidth||0},i=e.initialization,r=void 0===i?{sourceURL:"",range:""}:i,a=me({baseUrl:e.baseUrl,source:Be(r.sourceURL,n),range:r.range}),s=function(e,t){return e.duration||t?e.duration?_e(e):je(e,t):[{number:e.startNumber||1,duration:e.sourceDuration,time:0,timeline:e.periodStart}]}(e,t);return s.map((function(t){n.Number=t.number,n.Time=t.time;var i=Be(e.media||"",n),r=e.timescale||1,s=e.presentationTimeOffset||0,o=e.periodStart+(t.time-s)/r;return{uri:i,timeline:t.timeline,duration:t.duration,resolvedUri:x(e.baseUrl||"",i),map:a,number:t.number,presentationTime:o}}))},Ve=function(e,t){var n=e.duration,i=e.segmentUrls,r=void 0===i?[]:i,a=e.periodStart;if(!n&&!t||n&&t)throw new Error(pe);var s,o=r.map((function(t){return function(e,t){var n=e.baseUrl,i=e.initialization,r=void 0===i?{}:i,a=me({baseUrl:n,source:r.sourceURL,range:r.range}),s=me({baseUrl:n,source:t.media,range:t.mediaRange});return s.map=a,s}(e,t)}));n&&(s=_e(e)),t&&(s=je(e,t));var l=s.map((function(t,n){if(o[n]){var i=o[n],r=e.timescale||1,s=e.presentationTimeOffset||0;return i.timeline=t.timeline,i.duration=t.duration,i.number=t.number,i.presentationTime=a+(t.time-s)/r,i}})).filter((function(e){return e}));return l},He=function(e){var t,n,i=e.attributes,r=e.segmentInfo;r.template?(n=ze,t=ae(i,r.template)):r.base?(n=be,t=ae(i,r.base)):r.list&&(n=Ve,t=ae(i,r.list));var a={attributes:i};if(!n)return a;var s=n(t,r.segmentTimeline);if(t.duration){var o=t,l=o.duration,u=o.timescale,c=void 0===u?1:u;t.duration=l/c}else s.length?t.duration=s.reduce((function(e,t){return Math.max(e,Math.ceil(t.duration))}),0):t.duration=0;return a.attributes=t,a.segments=s,r.base&&t.indexRange&&(a.sidx=s[0],a.segments=[]),a},We=function(e,t){return le(e.childNodes).filter((function(e){return e.tagName===t}))},qe=function(e){return e.textContent.trim()},Ge=function(e){var t=/P(?:(\d*)Y)?(?:(\d*)M)?(?:(\d*)D)?(?:T(?:(\d*)H)?(?:(\d*)M)?(?:([\d.]*)S)?)?/.exec(e);if(!t)return 0;var n=t.slice(1),i=n[0],r=n[1],a=n[2],s=n[3],o=n[4],l=n[5];return 31536e3*parseFloat(i||0)+2592e3*parseFloat(r||0)+86400*parseFloat(a||0)+3600*parseFloat(s||0)+60*parseFloat(o||0)+parseFloat(l||0)},Xe={mediaPresentationDuration:function(e){return Ge(e)},availabilityStartTime:function(e){return/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/.test(t=e)&&(t+="Z"),Date.parse(t)/1e3;var t},minimumUpdatePeriod:function(e){return Ge(e)},suggestedPresentationDelay:function(e){return Ge(e)},type:function(e){return e},timeShiftBufferDepth:function(e){return Ge(e)},start:function(e){return Ge(e)},width:function(e){return parseInt(e,10)},height:function(e){return parseInt(e,10)},bandwidth:function(e){return parseInt(e,10)},frameRate:function(e){return function(e){return parseFloat(e.split("/").reduce((function(e,t){return e/t})))}(e)},startNumber:function(e){return parseInt(e,10)},timescale:function(e){return parseInt(e,10)},presentationTimeOffset:function(e){return parseInt(e,10)},duration:function(e){var t=parseInt(e,10);return isNaN(t)?Ge(e):t},d:function(e){return parseInt(e,10)},t:function(e){return parseInt(e,10)},r:function(e){return parseInt(e,10)},DEFAULT:function(e){return e}},Ke=function(e){return e&&e.attributes?le(e.attributes).reduce((function(e,t){var n=Xe[t.name]||Xe.DEFAULT;return e[t.name]=n(t.value),e}),{}):{}},$e={"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":"org.w3.clearkey","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":"com.widevine.alpha","urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb":"com.adobe.primetime"},Ye=function(e,t){return t.length?oe(e.map((function(e){return t.map((function(t){return x(e,qe(t))}))}))):e},Qe=function(e){var t=We(e,"SegmentTemplate")[0],n=We(e,"SegmentList")[0],i=n&&We(n,"SegmentURL").map((function(e){return ae({tag:"SegmentURL"},Ke(e))})),r=We(e,"SegmentBase")[0],a=n||t,s=a&&We(a,"SegmentTimeline")[0],o=n||r||t,l=o&&We(o,"Initialization")[0],u=t&&Ke(t);u&&l?u.initialization=l&&Ke(l):u&&u.initialization&&(u.initialization={sourceURL:u.initialization});var c={template:u,segmentTimeline:s&&We(s,"S").map((function(e){return Ke(e)})),list:n&&ae(Ke(n),{segmentUrls:i,initialization:Ke(l)}),base:r&&ae(Ke(r),{initialization:Ke(l)})};return Object.keys(c).forEach((function(e){c[e]||delete c[e]})),c},Je=function(e,t,n){return function(i){var r,a=Ke(i),s=Ye(t,We(i,"BaseURL")),o=We(i,"Role")[0],l={role:Ke(o)},u=ae(e,a,l),c=We(i,"Accessibility")[0],d="urn:scte:dash:cc:cea-608:2015"===(r=Ke(c)).schemeIdUri?("string"!==typeof r.value?[]:r.value.split(";")).map((function(e){var t,n;if(n=e,/^CC\d=/.test(e)){var i=e.split("=");t=i[0],n=i[1]}else/^CC\d$/.test(e)&&(t=e);return{channel:t,language:n}})):"urn:scte:dash:cc:cea-708:2015"===r.schemeIdUri?("string"!==typeof r.value?[]:r.value.split(";")).map((function(e){var t={channel:void 0,language:void 0,aspectRatio:1,easyReader:0,"3D":0};if(/=/.test(e)){var n=e.split("="),i=n[0],r=n[1],a=void 0===r?"":r;t.channel=i,t.language=e,a.split(",").forEach((function(e){var n=e.split(":"),i=n[0],r=n[1];"lang"===i?t.language=r:"er"===i?t.easyReader=Number(r):"war"===i?t.aspectRatio=Number(r):"3D"===i&&(t["3D"]=Number(r))}))}else t.language=e;return t.channel&&(t.channel="SERVICE"+t.channel),t})):void 0;d&&(u=ae(u,{captionServices:d}));var h=We(i,"Label")[0];if(h&&h.childNodes.length){var f=h.childNodes[0].nodeValue.trim();u=ae(u,{label:f})}var p=We(i,"ContentProtection").reduce((function(e,t){var n=Ke(t);n.schemeIdUri&&(n.schemeIdUri=n.schemeIdUri.toLowerCase());var i=$e[n.schemeIdUri];if(i){e[i]={attributes:n};var r=We(t,"cenc:pssh")[0];if(r){var a=qe(r);e[i].pssh=a&&E(a)}}return e}),{});Object.keys(p).length&&(u=ae(u,{contentProtection:p}));var g=Qe(i),m=We(i,"Representation"),v=ae(n,g);return oe(m.map(function(e,t,n){return function(i){var r=We(i,"BaseURL"),a=Ye(t,r),s=ae(e,Ke(i)),o=Qe(i);return a.map((function(e){return{segmentInfo:ae(n,o),attributes:ae(s,{baseUrl:e})}}))}}(u,s,v)))}},Ze=function(e,t){return function(n,i){var r=Ye(t,We(n.node,"BaseURL")),a=ae(e,{periodStart:n.attributes.start});"number"===typeof n.attributes.duration&&(a.periodDuration=n.attributes.duration);var s=We(n.node,"AdaptationSet"),o=Qe(n.node);return oe(s.map(Je(a,r,o)))}},et=function(e){if(""===e)throw new Error(de);var t,n,i=new ie.DOMParser;try{n=(t=i.parseFromString(e,"application/xml"))&&"MPD"===t.documentElement.tagName?t.documentElement:null}catch(r){}if(!n||n&&n.getElementsByTagName("parsererror").length>0)throw new Error(he);return n},tt=function(e,t){void 0===t&&(t={});var n=function(e,t){void 0===t&&(t={});var n=t,i=n.manifestUri,r=void 0===i?"":i,a=n.NOW,s=void 0===a?Date.now():a,o=n.clientOffset,l=void 0===o?0:o,u=We(e,"Period");if(!u.length)throw new Error(ce);var c=We(e,"Location"),d=Ke(e),h=Ye([r],We(e,"BaseURL"));d.type=d.type||"static",d.sourceDuration=d.mediaPresentationDuration||0,d.NOW=s,d.clientOffset=l,c.length&&(d.locations=c.map(qe));var f=[];return u.forEach((function(e,t){var n=Ke(e),i=f[t-1];n.start=function(e){var t=e.attributes,n=e.priorPeriodAttributes,i=e.mpdType;return"number"===typeof t.start?t.start:n&&"number"===typeof n.start&&"number"===typeof n.duration?n.start+n.duration:n||"static"!==i?null:0}({attributes:n,priorPeriodAttributes:i?i.attributes:null,mpdType:d.type}),f.push({node:e,attributes:n})})),{locations:d.locations,representationInfo:oe(f.map(Ze(d,h)))}}(et(e),t),i=n.representationInfo.map(He);return Ne({dashPlaylists:i,locations:n.locations,sidxMapping:t.sidxMapping,previousManifest:t.previousManifest})},nt=function(e){return function(e){var t=We(e,"UTCTiming")[0];if(!t)return null;var n=Ke(t);switch(n.schemeIdUri){case"urn:mpeg:dash:utc:http-head:2014":case"urn:mpeg:dash:utc:http-head:2012":n.method="HEAD";break;case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2014":case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-iso:2012":n.method="GET";break;case"urn:mpeg:dash:utc:direct:2014":case"urn:mpeg:dash:utc:direct:2012":n.method="DIRECT",n.value=Date.parse(n.value);break;default:throw new Error(ge)}return n}(et(e))},it=n(526),rt=n.n(it),at=Y([73,68,51]),st=function e(t,n){return void 0===n&&(n=0),(t=Y(t)).length-n<10||!ne(t,at,{offset:n})?n:(n+=function(e,t){void 0===t&&(t=0);var n=(e=Y(e))[t+5],i=e[t+6]<<21|e[t+7]<<14|e[t+8]<<7|e[t+9];return(16&n)>>4?i+20:i+10}(t,n),e(t,n))},ot=(new Uint8Array([79,112,117,115,72,101,97,100]),function(e){return"string"===typeof e?te(e):e}),lt=function(e){e=Y(e);for(var t=[],n=0;e.length>n;){var i=e[n],r=0,a=0,s=e[++a];for(a++;128&s;)r=(127&s)<<7,s=e[a],a++;r+=127&s;for(var o=0;o<C.length;o++){var l=C[o],u=l.id,c=l.parser;if(i===u){t.push(c(e.subarray(a,a+r)));break}}n+=r+a}return t};C=[{id:3,parser:function(e){var t={tag:3,id:e[0]<<8|e[1],flags:e[2],size:3,dependsOnEsId:0,ocrEsId:0,descriptors:[],url:""};if(128&t.flags&&(t.dependsOnEsId=e[t.size]<<8|e[t.size+1],t.size+=2),64&t.flags){var n=e[t.size];t.url=function(e){if(!e)return"";e=Array.prototype.slice.call(e);var t=String.fromCharCode.apply(null,Y(e));try{return decodeURIComponent(escape(t))}catch(n){}return t}(e.subarray(t.size+1,t.size+1+n)),t.size+=n}return 32&t.flags&&(t.ocrEsId=e[t.size]<<8|e[t.size+1],t.size+=2),t.descriptors=lt(e.subarray(t.size))||[],t}},{id:4,parser:function(e){return{tag:4,oti:e[0],streamType:e[1],bufferSize:e[2]<<16|e[3]<<8|e[4],maxBitrate:e[5]<<24|e[6]<<16|e[7]<<8|e[8],avgBitrate:e[9]<<24|e[10]<<16|e[11]<<8|e[12],descriptors:lt(e.subarray(13))}}},{id:5,parser:function(e){return{tag:5,bytes:e}}},{id:6,parser:function(e){return{tag:6,bytes:e}}}];var ut=function e(t,n,i){void 0===i&&(i=!1),n=function(e){return Array.isArray(e)?e.map((function(e){return ot(e)})):[ot(e)]}(n),t=Y(t);var r=[];if(!n.length)return r;for(var a=0;a<t.length;){var s=(t[a]<<24|t[a+1]<<16|t[a+2]<<8|t[a+3])>>>0,o=t.subarray(a+4,a+8);if(0===s)break;var l=a+s;if(l>t.length){if(i)break;l=t.length}var u=t.subarray(a+8,l);ne(o,n[0])&&(1===n.length?r.push(u):r.push.apply(r,e(u,n.slice(1),i))),a=l}return r},ct={EBML:Y([26,69,223,163]),DocType:Y([66,130]),Segment:Y([24,83,128,103]),SegmentInfo:Y([21,73,169,102]),Tracks:Y([22,84,174,107]),Track:Y([174]),TrackNumber:Y([215]),DefaultDuration:Y([35,227,131]),TrackEntry:Y([174]),TrackType:Y([131]),FlagDefault:Y([136]),CodecID:Y([134]),CodecPrivate:Y([99,162]),VideoTrack:Y([224]),AudioTrack:Y([225]),Cluster:Y([31,67,182,117]),Timestamp:Y([231]),TimestampScale:Y([42,215,177]),BlockGroup:Y([160]),BlockDuration:Y([155]),Block:Y([161]),SimpleBlock:Y([163])},dt=[128,64,32,16,8,4,2,1],ht=function(e,t,n,i){void 0===n&&(n=!0),void 0===i&&(i=!1);var r=function(e){for(var t=1,n=0;n<dt.length&&!(e&dt[n]);n++)t++;return t}(e[t]),a=e.subarray(t,t+r);return n&&((a=Array.prototype.slice.call(e,t,t+r))[0]^=dt[r-1]),{length:r,value:Z(a,{signed:i}),bytes:a}},ft=function e(t){return"string"===typeof t?t.match(/.{1,2}/g).map((function(t){return e(t)})):"number"===typeof t?ee(t):t},pt=function e(t,n,i){if(i>=n.length)return n.length;var r=ht(n,i,!1);if(ne(t.bytes,r.bytes))return i;var a=ht(n,i+r.length);return e(t,n,i+a.length+a.value+r.length)},gt=function e(t,n){n=function(e){return Array.isArray(e)?e.map((function(e){return ft(e)})):[ft(e)]}(n),t=Y(t);var i=[];if(!n.length)return i;for(var r=0;r<t.length;){var a=ht(t,r,!1),s=ht(t,r+a.length),o=r+a.length+s.length;127===s.value&&(s.value=pt(a,t,o),s.value!==t.length&&(s.value-=o));var l=o+s.value>t.length?t.length:o+s.value,u=t.subarray(o,l);ne(n[0],a.bytes)&&(1===n.length?i.push(u):i=i.concat(e(u,n.slice(1)))),r+=a.length+s.length+u.length}return i},mt=Y([0,0,0,1]),vt=Y([0,0,1]),yt=Y([0,0,3]),_t=function(e){for(var t=[],n=1;n<e.length-2;)ne(e.subarray(n,n+3),yt)&&(t.push(n+2),n++),n++;if(0===t.length)return e;var i=e.length-t.length,r=new Uint8Array(i),a=0;for(n=0;n<i;a++,n++)a===t[0]&&(a++,t.shift()),r[n]=e[a];return r},bt=function(e,t,n,i){void 0===i&&(i=1/0),e=Y(e),n=[].concat(n);for(var r,a=0,s=0;a<e.length&&(s<i||r);){var o=void 0;if(ne(e.subarray(a),mt)?o=4:ne(e.subarray(a),vt)&&(o=3),o){if(s++,r)return _t(e.subarray(r,a));var l=void 0;"h264"===t?l=31&e[a+o]:"h265"===t&&(l=e[a+o]>>1&63),-1!==n.indexOf(l)&&(r=a+o),a+=o+("h264"===t?1:2)}else a++}return e.subarray(0,0)},Tt={webm:Y([119,101,98,109]),matroska:Y([109,97,116,114,111,115,107,97]),flac:Y([102,76,97,67]),ogg:Y([79,103,103,83]),ac3:Y([11,119]),riff:Y([82,73,70,70]),avi:Y([65,86,73]),wav:Y([87,65,86,69]),"3gp":Y([102,116,121,112,51,103]),mp4:Y([102,116,121,112]),fmp4:Y([115,116,121,112]),mov:Y([102,116,121,112,113,116]),moov:Y([109,111,111,118]),moof:Y([109,111,111,102])},kt={aac:function(e){var t=st(e);return ne(e,[255,16],{offset:t,mask:[255,22]})},mp3:function(e){var t=st(e);return ne(e,[255,2],{offset:t,mask:[255,6]})},webm:function(e){var t=gt(e,[ct.EBML,ct.DocType])[0];return ne(t,Tt.webm)},mkv:function(e){var t=gt(e,[ct.EBML,ct.DocType])[0];return ne(t,Tt.matroska)},mp4:function(e){return!kt["3gp"](e)&&!kt.mov(e)&&(!(!ne(e,Tt.mp4,{offset:4})&&!ne(e,Tt.fmp4,{offset:4}))||(!(!ne(e,Tt.moof,{offset:4})&&!ne(e,Tt.moov,{offset:4}))||void 0))},mov:function(e){return ne(e,Tt.mov,{offset:4})},"3gp":function(e){return ne(e,Tt["3gp"],{offset:4})},ac3:function(e){var t=st(e);return ne(e,Tt.ac3,{offset:t})},ts:function(e){if(e.length<189&&e.length>=1)return 71===e[0];for(var t=0;t+188<e.length&&t<188;){if(71===e[t]&&71===e[t+188])return!0;t+=1}return!1},flac:function(e){var t=st(e);return ne(e,Tt.flac,{offset:t})},ogg:function(e){return ne(e,Tt.ogg)},avi:function(e){return ne(e,Tt.riff)&&ne(e,Tt.avi,{offset:8})},wav:function(e){return ne(e,Tt.riff)&&ne(e,Tt.wav,{offset:8})},h264:function(e){return function(e,t,n){return bt(e,"h264",t,n)}(e,7,3).length},h265:function(e){return function(e,t,n){return bt(e,"h265",t,n)}(e,[32,33],3).length}},xt=Object.keys(kt).filter((function(e){return"ts"!==e&&"h264"!==e&&"h265"!==e})).concat(["ts","h264","h265"]);xt.forEach((function(e){var t=kt[e];kt[e]=function(e){return t(Y(e))}}));var St=kt,wt=function(e){e=Y(e);for(var t=0;t<xt.length;t++){var n=xt[t];if(St[n](e))return n}return""},Et=n(764);function Ct(e){return Ct=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ct(e)}function Pt(e){var t="function"===typeof Map?new Map:void 0;return Pt=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,i)}function i(){return _(e,arguments,Ct(this).constructor)}return i.prototype=Object.create(e.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),d(i,e)},Pt(e)}for(var It,At="7.21.4",Ot={},Lt=function(e,t){return Ot[e]=Ot[e]||[],t&&(Ot[e]=Ot[e].concat(t)),Ot[e]},Mt=function(e,t){var n=Lt(e).indexOf(t);return!(n<=-1)&&(Ot[e]=Ot[e].slice(),Ot[e].splice(n,1),!0)},Dt={prefixed:!0},Rt=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror","fullscreen"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror","-webkit-full-screen"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror","-moz-full-screen"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError","-ms-fullscreen"]],Nt=Rt[0],Ut=0;Ut<Rt.length;Ut++)if(Rt[Ut][1]in s()){It=Rt[Ut];break}if(It){for(var jt=0;jt<It.length;jt++)Dt[Nt[jt]]=It[jt];Dt.prefixed=It[0]!==Nt[0]}var Ft=[],Bt=function(e,t){return function(n,i,a){var s=t.levels[i],o=new RegExp("^("+s+")$");if("log"!==n&&a.unshift(n.toUpperCase()+":"),a.unshift(e+":"),Ft){Ft.push([].concat(a));var l=Ft.length-1e3;Ft.splice(0,l>0?l:0)}if(r().console){var u=r().console[n];u||"debug"!==n||(u=r().console.info||r().console.log),u&&s&&o.test(n)&&u[Array.isArray(a)?"apply":"call"](r().console,a)}}};var zt=function e(t){var n,i="info",r=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];n("log",i,t)};return n=Bt(t,r),r.createLogger=function(n){return e(t+": "+n)},r.levels={all:"debug|log|warn|error",off:"",debug:"debug|log|warn|error",info:"log|warn|error",warn:"warn|error",error:"error",DEFAULT:i},r.level=function(e){if("string"===typeof e){if(!r.levels.hasOwnProperty(e))throw new Error('"'+e+'" in not a valid log level');i=e}return i},(r.history=function(){return Ft?[].concat(Ft):[]}).filter=function(e){return(Ft||[]).filter((function(t){return new RegExp(".*"+e+".*").test(t[0])}))},r.history.clear=function(){Ft&&(Ft.length=0)},r.history.disable=function(){null!==Ft&&(Ft.length=0,Ft=null)},r.history.enable=function(){null===Ft&&(Ft=[])},r.error=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return n("error",i,t)},r.warn=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return n("warn",i,t)},r.debug=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return n("debug",i,t)},r}("VIDEOJS"),Vt=zt.createLogger,Ht=Object.prototype.toString,Wt=function(e){return Xt(e)?Object.keys(e):[]};function qt(e,t){Wt(e).forEach((function(n){return t(e[n],n)}))}function Gt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return Object.assign?o.apply(void 0,[e].concat(n)):(n.forEach((function(t){t&&qt(t,(function(t,n){e[n]=t}))})),e)}function Xt(e){return!!e&&"object"===typeof e}function Kt(e){return Xt(e)&&"[object Object]"===Ht.call(e)&&e.constructor===Object}function $t(e,t){if(!e||!t)return"";if("function"===typeof r().getComputedStyle){var n;try{n=r().getComputedStyle(e)}catch(i){return""}return n?n.getPropertyValue(t)||n[t]:""}return""}var Yt=r().navigator&&r().navigator.userAgent||"",Qt=/AppleWebKit\/([\d.]+)/i.exec(Yt),Jt=Qt?parseFloat(Qt.pop()):null,Zt=/iPod/i.test(Yt),en=function(){var e=Yt.match(/OS (\d+)_/i);return e&&e[1]?e[1]:null}(),tn=/Android/i.test(Yt),nn=function(){var e=Yt.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i);if(!e)return null;var t=e[1]&&parseFloat(e[1]),n=e[2]&&parseFloat(e[2]);return t&&n?parseFloat(e[1]+"."+e[2]):t||null}(),rn=tn&&nn<5&&Jt<537,an=/Firefox/i.test(Yt),sn=/Edg/i.test(Yt),on=!sn&&(/Chrome/i.test(Yt)||/CriOS/i.test(Yt)),ln=function(){var e=Yt.match(/(Chrome|CriOS)\/(\d+)/);return e&&e[2]?parseFloat(e[2]):null}(),un=function(){var e=/MSIE\s(\d+)\.\d/.exec(Yt),t=e&&parseFloat(e[1]);return!t&&/Trident\/7.0/i.test(Yt)&&/rv:11.0/.test(Yt)&&(t=11),t}(),cn=/Safari/i.test(Yt)&&!on&&!tn&&!sn,dn=/Windows/i.test(Yt),hn=Boolean(bn()&&("ontouchstart"in r()||r().navigator.maxTouchPoints||r().DocumentTouch&&r().document instanceof r().DocumentTouch)),fn=/iPad/i.test(Yt)||cn&&hn&&!/iPhone/i.test(Yt),pn=/iPhone/i.test(Yt)&&!fn,gn=pn||fn||Zt,mn=(cn||gn)&&!on,vn=Object.freeze({__proto__:null,IS_IPOD:Zt,IOS_VERSION:en,IS_ANDROID:tn,ANDROID_VERSION:nn,IS_NATIVE_ANDROID:rn,IS_FIREFOX:an,IS_EDGE:sn,IS_CHROME:on,CHROME_VERSION:ln,IE_VERSION:un,IS_SAFARI:cn,IS_WINDOWS:dn,TOUCH_ENABLED:hn,IS_IPAD:fn,IS_IPHONE:pn,IS_IOS:gn,IS_ANY_SAFARI:mn});function yn(e){return"string"===typeof e&&Boolean(e.trim())}function _n(e){if(e.indexOf(" ")>=0)throw new Error("class has illegal whitespace characters")}function bn(){return s()===r().document}function Tn(e){return Xt(e)&&1===e.nodeType}function kn(){try{return r().parent!==r().self}catch(e){return!0}}function xn(e){return function(t,n){if(!yn(t))return s()[e](null);yn(n)&&(n=s().querySelector(n));var i=Tn(n)?n:s();return i[e]&&i[e](t)}}function Sn(e,t,n,i){void 0===e&&(e="div"),void 0===t&&(t={}),void 0===n&&(n={});var r=s().createElement(e);return Object.getOwnPropertyNames(t).forEach((function(e){var n=t[e];-1!==e.indexOf("aria-")||"role"===e||"type"===e?(zt.warn("Setting attributes in the second argument of createEl()\nhas been deprecated. Use the third argument instead.\ncreateEl(type, properties, attributes). Attempting to set "+e+" to "+n+"."),r.setAttribute(e,n)):"textContent"===e?wn(r,n):r[e]===n&&"tabIndex"!==e||(r[e]=n)})),Object.getOwnPropertyNames(n).forEach((function(e){r.setAttribute(e,n[e])})),i&&Wn(r,i),r}function wn(e,t){return"undefined"===typeof e.textContent?e.innerText=t:e.textContent=t,e}function En(e,t){t.firstChild?t.insertBefore(e,t.firstChild):t.appendChild(e)}function Cn(e,t){return _n(t),e.classList?e.classList.contains(t):(n=t,new RegExp("(^|\\s)"+n+"($|\\s)")).test(e.className);var n}function Pn(e,t){return e.classList?e.classList.add(t):Cn(e,t)||(e.className=(e.className+" "+t).trim()),e}function In(e,t){return e?(e.classList?e.classList.remove(t):(_n(t),e.className=e.className.split(/\s+/).filter((function(e){return e!==t})).join(" ")),e):(zt.warn("removeClass was called with an element that doesn't exist"),null)}function An(e,t,n){var i=Cn(e,t);if("function"===typeof n&&(n=n(e,t)),"boolean"!==typeof n&&(n=!i),n!==i)return n?Pn(e,t):In(e,t),e}function On(e,t){Object.getOwnPropertyNames(t).forEach((function(n){var i=t[n];null===i||"undefined"===typeof i||!1===i?e.removeAttribute(n):e.setAttribute(n,!0===i?"":i)}))}function Ln(e){var t={},n=",autoplay,controls,playsinline,loop,muted,default,defaultMuted,";if(e&&e.attributes&&e.attributes.length>0)for(var i=e.attributes,r=i.length-1;r>=0;r--){var a=i[r].name,s=i[r].value;"boolean"!==typeof e[a]&&-1===n.indexOf(","+a+",")||(s=null!==s),t[a]=s}return t}function Mn(e,t){return e.getAttribute(t)}function Dn(e,t,n){e.setAttribute(t,n)}function Rn(e,t){e.removeAttribute(t)}function Nn(){s().body.focus(),s().onselectstart=function(){return!1}}function Un(){s().onselectstart=function(){return!0}}function jn(e){if(e&&e.getBoundingClientRect&&e.parentNode){var t=e.getBoundingClientRect(),n={};return["bottom","height","left","right","top","width"].forEach((function(e){void 0!==t[e]&&(n[e]=t[e])})),n.height||(n.height=parseFloat($t(e,"height"))),n.width||(n.width=parseFloat($t(e,"width"))),n}}function Fn(e){if(!e||e&&!e.offsetParent)return{left:0,top:0,width:0,height:0};for(var t=e.offsetWidth,n=e.offsetHeight,i=0,r=0;e.offsetParent&&e!==s()[Dt.fullscreenElement];)i+=e.offsetLeft,r+=e.offsetTop,e=e.offsetParent;return{left:i,top:r,width:t,height:n}}function Bn(e,t){var n={x:0,y:0};if(gn)for(var i=e;i&&"html"!==i.nodeName.toLowerCase();){var r=$t(i,"transform");if(/^matrix/.test(r)){var a=r.slice(7,-1).split(/,\s/).map(Number);n.x+=a[4],n.y+=a[5]}else if(/^matrix3d/.test(r)){var s=r.slice(9,-1).split(/,\s/).map(Number);n.x+=s[12],n.y+=s[13]}i=i.parentNode}var o={},l=Fn(t.target),u=Fn(e),c=u.width,d=u.height,h=t.offsetY-(u.top-l.top),f=t.offsetX-(u.left-l.left);return t.changedTouches&&(f=t.changedTouches[0].pageX-u.left,h=t.changedTouches[0].pageY+u.top,gn&&(f-=n.x,h-=n.y)),o.y=1-Math.max(0,Math.min(1,h/d)),o.x=Math.max(0,Math.min(1,f/c)),o}function zn(e){return Xt(e)&&3===e.nodeType}function Vn(e){for(;e.firstChild;)e.removeChild(e.firstChild);return e}function Hn(e){return"function"===typeof e&&(e=e()),(Array.isArray(e)?e:[e]).map((function(e){return"function"===typeof e&&(e=e()),Tn(e)||zn(e)?e:"string"===typeof e&&/\S/.test(e)?s().createTextNode(e):void 0})).filter((function(e){return e}))}function Wn(e,t){return Hn(t).forEach((function(t){return e.appendChild(t)})),e}function qn(e,t){return Wn(Vn(e),t)}function Gn(e){return void 0===e.button&&void 0===e.buttons||(0===e.button&&void 0===e.buttons||("mouseup"===e.type&&0===e.button&&0===e.buttons||0===e.button&&1===e.buttons))}var Xn,Kn=xn("querySelector"),$n=xn("querySelectorAll"),Yn=Object.freeze({__proto__:null,isReal:bn,isEl:Tn,isInFrame:kn,createEl:Sn,textContent:wn,prependTo:En,hasClass:Cn,addClass:Pn,removeClass:In,toggleClass:An,setAttributes:On,getAttributes:Ln,getAttribute:Mn,setAttribute:Dn,removeAttribute:Rn,blockTextSelection:Nn,unblockTextSelection:Un,getBoundingClientRect:jn,findPosition:Fn,getPointerPosition:Bn,isTextNode:zn,emptyEl:Vn,normalizeContent:Hn,appendContent:Wn,insertContent:qn,isSingleLeftClick:Gn,$:Kn,$$:$n}),Qn=!1,Jn=function(){if(!1!==Xn.options.autoSetup){var e=Array.prototype.slice.call(s().getElementsByTagName("video")),t=Array.prototype.slice.call(s().getElementsByTagName("audio")),n=Array.prototype.slice.call(s().getElementsByTagName("video-js")),i=e.concat(t,n);if(i&&i.length>0)for(var r=0,a=i.length;r<a;r++){var o=i[r];if(!o||!o.getAttribute){Zn(1);break}void 0===o.player&&null!==o.getAttribute("data-setup")&&Xn(o)}else Qn||Zn(1)}};function Zn(e,t){bn()&&(t&&(Xn=t),r().setTimeout(Jn,e))}function ei(){Qn=!0,r().removeEventListener("load",ei)}bn()&&("complete"===s().readyState?ei():r().addEventListener("load",ei));var ti,ni=function(e){var t=s().createElement("style");return t.className=e,t},ii=function(e,t){e.styleSheet?e.styleSheet.cssText=t:e.textContent=t},ri=3;function ai(){return ri++}r().WeakMap||(ti=function(){function e(){this.vdata="vdata"+Math.floor(r().performance&&r().performance.now()||Date.now()),this.data={}}var t=e.prototype;return t.set=function(e,t){var n=e[this.vdata]||ai();return e[this.vdata]||(e[this.vdata]=n),this.data[n]=t,this},t.get=function(e){var t=e[this.vdata];if(t)return this.data[t];zt("We have no data for this element",e)},t.has=function(e){return e[this.vdata]in this.data},t.delete=function(e){var t=e[this.vdata];t&&(delete this.data[t],delete e[this.vdata])},e}());var si,oi=r().WeakMap?new WeakMap:new ti;function li(e,t){if(oi.has(e)){var n=oi.get(e);0===n.handlers[t].length&&(delete n.handlers[t],e.removeEventListener?e.removeEventListener(t,n.dispatcher,!1):e.detachEvent&&e.detachEvent("on"+t,n.dispatcher)),Object.getOwnPropertyNames(n.handlers).length<=0&&(delete n.handlers,delete n.dispatcher,delete n.disabled),0===Object.getOwnPropertyNames(n).length&&oi.delete(e)}}function ui(e,t,n,i){n.forEach((function(n){e(t,n,i)}))}function ci(e){if(e.fixed_)return e;function t(){return!0}function n(){return!1}if(!e||!e.isPropagationStopped||!e.isImmediatePropagationStopped){var i=e||r().event;for(var a in e={},i)"layerX"!==a&&"layerY"!==a&&"keyLocation"!==a&&"webkitMovementX"!==a&&"webkitMovementY"!==a&&"path"!==a&&("returnValue"===a&&i.preventDefault||(e[a]=i[a]));if(e.target||(e.target=e.srcElement||s()),e.relatedTarget||(e.relatedTarget=e.fromElement===e.target?e.toElement:e.fromElement),e.preventDefault=function(){i.preventDefault&&i.preventDefault(),e.returnValue=!1,i.returnValue=!1,e.defaultPrevented=!0},e.defaultPrevented=!1,e.stopPropagation=function(){i.stopPropagation&&i.stopPropagation(),e.cancelBubble=!0,i.cancelBubble=!0,e.isPropagationStopped=t},e.isPropagationStopped=n,e.stopImmediatePropagation=function(){i.stopImmediatePropagation&&i.stopImmediatePropagation(),e.isImmediatePropagationStopped=t,e.stopPropagation()},e.isImmediatePropagationStopped=n,null!==e.clientX&&void 0!==e.clientX){var o=s().documentElement,l=s().body;e.pageX=e.clientX+(o&&o.scrollLeft||l&&l.scrollLeft||0)-(o&&o.clientLeft||l&&l.clientLeft||0),e.pageY=e.clientY+(o&&o.scrollTop||l&&l.scrollTop||0)-(o&&o.clientTop||l&&l.clientTop||0)}e.which=e.charCode||e.keyCode,null!==e.button&&void 0!==e.button&&(e.button=1&e.button?0:4&e.button?1:2&e.button?2:0)}return e.fixed_=!0,e}var di=function(){if("boolean"!==typeof si){si=!1;try{var e=Object.defineProperty({},"passive",{get:function(){si=!0}});r().addEventListener("test",null,e),r().removeEventListener("test",null,e)}catch(t){}}return si},hi=["touchstart","touchmove"];function fi(e,t,n){if(Array.isArray(t))return ui(fi,e,t,n);oi.has(e)||oi.set(e,{});var i=oi.get(e);if(i.handlers||(i.handlers={}),i.handlers[t]||(i.handlers[t]=[]),n.guid||(n.guid=ai()),i.handlers[t].push(n),i.dispatcher||(i.disabled=!1,i.dispatcher=function(t,n){if(!i.disabled){t=ci(t);var r=i.handlers[t.type];if(r)for(var a=r.slice(0),s=0,o=a.length;s<o&&!t.isImmediatePropagationStopped();s++)try{a[s].call(e,t,n)}catch(l){zt.error(l)}}}),1===i.handlers[t].length)if(e.addEventListener){var r=!1;di()&&hi.indexOf(t)>-1&&(r={passive:!0}),e.addEventListener(t,i.dispatcher,r)}else e.attachEvent&&e.attachEvent("on"+t,i.dispatcher)}function pi(e,t,n){if(oi.has(e)){var i=oi.get(e);if(i.handlers){if(Array.isArray(t))return ui(pi,e,t,n);var r=function(e,t){i.handlers[t]=[],li(e,t)};if(void 0!==t){var a=i.handlers[t];if(a)if(n){if(n.guid)for(var s=0;s<a.length;s++)a[s].guid===n.guid&&a.splice(s--,1);li(e,t)}else r(e,t)}else for(var o in i.handlers)Object.prototype.hasOwnProperty.call(i.handlers||{},o)&&r(e,o)}}}function gi(e,t,n){var i=oi.has(e)?oi.get(e):{},r=e.parentNode||e.ownerDocument;if("string"===typeof t?t={type:t,target:e}:t.target||(t.target=e),t=ci(t),i.dispatcher&&i.dispatcher.call(e,t,n),r&&!t.isPropagationStopped()&&!0===t.bubbles)gi.call(null,r,t,n);else if(!r&&!t.defaultPrevented&&t.target&&t.target[t.type]){oi.has(t.target)||oi.set(t.target,{});var a=oi.get(t.target);t.target[t.type]&&(a.disabled=!0,"function"===typeof t.target[t.type]&&t.target[t.type](),a.disabled=!1)}return!t.defaultPrevented}function mi(e,t,n){if(Array.isArray(t))return ui(mi,e,t,n);var i=function i(){pi(e,t,i),n.apply(this,arguments)};i.guid=n.guid=n.guid||ai(),fi(e,t,i)}function vi(e,t,n){var i=function i(){pi(e,t,i),n.apply(this,arguments)};i.guid=n.guid=n.guid||ai(),fi(e,t,i)}var yi,_i=Object.freeze({__proto__:null,fixEvent:ci,on:fi,off:pi,trigger:gi,one:mi,any:vi}),bi=30,Ti=function(e,t,n){t.guid||(t.guid=ai());var i=t.bind(e);return i.guid=n?n+"_"+t.guid:t.guid,i},ki=function(e,t){var n=r().performance.now();return function(){var i=r().performance.now();i-n>=t&&(e.apply(void 0,arguments),n=i)}},xi=function(e,t,n,i){var a;void 0===i&&(i=r());var s=function(){var r=this,s=arguments,o=function(){a=null,o=null,n||e.apply(r,s)};!a&&n&&e.apply(r,s),i.clearTimeout(a),a=i.setTimeout(o,t)};return s.cancel=function(){i.clearTimeout(a),a=null},s},Si=function(){};Si.prototype.allowedEvents_={},Si.prototype.on=function(e,t){var n=this.addEventListener;this.addEventListener=function(){},fi(this,e,t),this.addEventListener=n},Si.prototype.addEventListener=Si.prototype.on,Si.prototype.off=function(e,t){pi(this,e,t)},Si.prototype.removeEventListener=Si.prototype.off,Si.prototype.one=function(e,t){var n=this.addEventListener;this.addEventListener=function(){},mi(this,e,t),this.addEventListener=n},Si.prototype.any=function(e,t){var n=this.addEventListener;this.addEventListener=function(){},vi(this,e,t),this.addEventListener=n},Si.prototype.trigger=function(e){var t=e.type||e;"string"===typeof e&&(e={type:t}),e=ci(e),this.allowedEvents_[t]&&this["on"+t]&&this["on"+t](e),gi(this,e)},Si.prototype.dispatchEvent=Si.prototype.trigger,Si.prototype.queueTrigger=function(e){var t=this;yi||(yi=new Map);var n=e.type||e,i=yi.get(this);i||(i=new Map,yi.set(this,i));var a=i.get(n);i.delete(n),r().clearTimeout(a);var s=r().setTimeout((function(){i.delete(n),0===i.size&&(i=null,yi.delete(t)),t.trigger(e)}),0);i.set(n,s)};var wi=function(e){return"function"===typeof e.name?e.name():"string"===typeof e.name?e.name:e.name_?e.name_:e.constructor&&e.constructor.name?e.constructor.name:typeof e},Ei=function(e){return e instanceof Si||!!e.eventBusEl_&&["on","one","off","trigger"].every((function(t){return"function"===typeof e[t]}))},Ci=function(e){return"string"===typeof e&&/\S/.test(e)||Array.isArray(e)&&!!e.length},Pi=function(e,t,n){if(!e||!e.nodeName&&!Ei(e))throw new Error("Invalid target for "+wi(t)+"#"+n+"; must be a DOM node or evented object.")},Ii=function(e,t,n){if(!Ci(e))throw new Error("Invalid event type for "+wi(t)+"#"+n+"; must be a non-empty string or array.")},Ai=function(e,t,n){if("function"!==typeof e)throw new Error("Invalid listener for "+wi(t)+"#"+n+"; must be a function.")},Oi=function(e,t,n){var i,r,a,s=t.length<3||t[0]===e||t[0]===e.eventBusEl_;return s?(i=e.eventBusEl_,t.length>=3&&t.shift(),r=t[0],a=t[1]):(i=t[0],r=t[1],a=t[2]),Pi(i,e,n),Ii(r,e,n),Ai(a,e,n),{isTargetingSelf:s,target:i,type:r,listener:a=Ti(e,a)}},Li=function(e,t,n,i){Pi(e,e,t),e.nodeName?_i[t](e,n,i):e[t](n,i)},Mi={on:function(){for(var e=this,t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];var r=Oi(this,n,"on"),a=r.isTargetingSelf,s=r.target,o=r.type,l=r.listener;if(Li(s,"on",o,l),!a){var u=function(){return e.off(s,o,l)};u.guid=l.guid;var c=function(){return e.off("dispose",u)};c.guid=l.guid,Li(this,"on","dispose",u),Li(s,"on","dispose",c)}},one:function(){for(var e=this,t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];var r=Oi(this,n,"one"),a=r.isTargetingSelf,s=r.target,o=r.type,l=r.listener;if(a)Li(s,"one",o,l);else{var u=function t(){e.off(s,o,t);for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];l.apply(null,i)};u.guid=l.guid,Li(s,"one",o,u)}},any:function(){for(var e=this,t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];var r=Oi(this,n,"any"),a=r.isTargetingSelf,s=r.target,o=r.type,l=r.listener;if(a)Li(s,"any",o,l);else{var u=function t(){e.off(s,o,t);for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];l.apply(null,i)};u.guid=l.guid,Li(s,"any",o,u)}},off:function(e,t,n){if(!e||Ci(e))pi(this.eventBusEl_,e,t);else{var i=e,r=t;Pi(i,this,"off"),Ii(r,this,"off"),Ai(n,this,"off"),n=Ti(this,n),this.off("dispose",n),i.nodeName?(pi(i,r,n),pi(i,"dispose",n)):Ei(i)&&(i.off(r,n),i.off("dispose",n))}},trigger:function(e,t){Pi(this.eventBusEl_,this,"trigger");var n=e&&"string"!==typeof e?e.type:e;if(!Ci(n)){var i="Invalid event type for "+wi(this)+"#trigger; must be a non-empty string or object with a type key that has a non-empty value.";if(!e)throw new Error(i);(this.log||zt).error(i)}return gi(this.eventBusEl_,e,t)}};function Di(e,t){void 0===t&&(t={});var n=t.eventBusKey;if(n){if(!e[n].nodeName)throw new Error('The eventBusKey "'+n+'" does not refer to an element.');e.eventBusEl_=e[n]}else e.eventBusEl_=Sn("span",{className:"vjs-event-bus"});return Gt(e,Mi),e.eventedCallbacks&&e.eventedCallbacks.forEach((function(e){e()})),e.on("dispose",(function(){e.off(),[e,e.el_,e.eventBusEl_].forEach((function(e){e&&oi.has(e)&&oi.delete(e)})),r().setTimeout((function(){e.eventBusEl_=null}),0)})),e}var Ri={state:{},setState:function(e){var t,n=this;return"function"===typeof e&&(e=e()),qt(e,(function(e,i){n.state[i]!==e&&((t=t||{})[i]={from:n.state[i],to:e}),n.state[i]=e})),t&&Ei(this)&&this.trigger({changes:t,type:"statechanged"}),t}};function Ni(e,t){return Gt(e,Ri),e.state=Gt({},e.state,t),"function"===typeof e.handleStateChanged&&Ei(e)&&e.on("statechanged",e.handleStateChanged),e}var Ui=function(e){return"string"!==typeof e?e:e.replace(/./,(function(e){return e.toLowerCase()}))},ji=function(e){return"string"!==typeof e?e:e.replace(/./,(function(e){return e.toUpperCase()}))};function Fi(){for(var e={},t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return n.forEach((function(t){t&&qt(t,(function(t,n){Kt(t)?(Kt(e[n])||(e[n]={}),e[n]=Fi(e[n],t)):e[n]=t}))})),e}var Bi=function(){function e(){this.map_={}}var t=e.prototype;return t.has=function(e){return e in this.map_},t.delete=function(e){var t=this.has(e);return delete this.map_[e],t},t.set=function(e,t){return this.map_[e]=t,this},t.forEach=function(e,t){for(var n in this.map_)e.call(t,this.map_[n],n,this)},e}(),zi=r().Map?r().Map:Bi,Vi=function(){function e(){this.set_={}}var t=e.prototype;return t.has=function(e){return e in this.set_},t.delete=function(e){var t=this.has(e);return delete this.set_[e],t},t.add=function(e){return this.set_[e]=1,this},t.forEach=function(e,t){for(var n in this.set_)e.call(t,n,n,this)},e}(),Hi=r().Set?r().Set:Vi,Wi=function(){function e(e,t,n){var i=this;if(!e&&this.play?this.player_=e=this:this.player_=e,this.isDisposed_=!1,this.parentComponent_=null,this.options_=Fi({},this.options_),t=this.options_=Fi(this.options_,t),this.id_=t.id||t.el&&t.el.id,!this.id_){var r=e&&e.id&&e.id()||"no_player";this.id_=r+"_component_"+ai()}this.name_=t.name||null,t.el?this.el_=t.el:!1!==t.createEl&&(this.el_=this.createEl()),t.className&&this.el_&&t.className.split(" ").forEach((function(e){return i.addClass(e)})),!1!==t.evented&&(Di(this,{eventBusKey:this.el_?"el_":null}),this.handleLanguagechange=this.handleLanguagechange.bind(this),this.on(this.player_,"languagechange",this.handleLanguagechange)),Ni(this,this.constructor.defaultState),this.children_=[],this.childIndex_={},this.childNameIndex_={},this.setTimeoutIds_=new Hi,this.setIntervalIds_=new Hi,this.rafIds_=new Hi,this.namedRafs_=new zi,this.clearingTimersOnDispose_=!1,!1!==t.initChildren&&this.initChildren(),this.ready(n),!1!==t.reportTouchActivity&&this.enableTouchActivity()}var t=e.prototype;return t.dispose=function(e){if(void 0===e&&(e={}),!this.isDisposed_){if(this.readyQueue_&&(this.readyQueue_.length=0),this.trigger({type:"dispose",bubbles:!1}),this.isDisposed_=!0,this.children_)for(var t=this.children_.length-1;t>=0;t--)this.children_[t].dispose&&this.children_[t].dispose();this.children_=null,this.childIndex_=null,this.childNameIndex_=null,this.parentComponent_=null,this.el_&&(this.el_.parentNode&&(e.restoreEl?this.el_.parentNode.replaceChild(e.restoreEl,this.el_):this.el_.parentNode.removeChild(this.el_)),this.el_=null),this.player_=null}},t.isDisposed=function(){return Boolean(this.isDisposed_)},t.player=function(){return this.player_},t.options=function(e){return e?(this.options_=Fi(this.options_,e),this.options_):this.options_},t.el=function(){return this.el_},t.createEl=function(e,t,n){return Sn(e,t,n)},t.localize=function(e,t,n){void 0===n&&(n=e);var i=this.player_.language&&this.player_.language(),r=this.player_.languages&&this.player_.languages(),a=r&&r[i],s=i&&i.split("-")[0],o=r&&r[s],l=n;return a&&a[e]?l=a[e]:o&&o[e]&&(l=o[e]),t&&(l=l.replace(/\{(\d+)\}/g,(function(e,n){var i=t[n-1],r=i;return"undefined"===typeof i&&(r=e),r}))),l},t.handleLanguagechange=function(){},t.contentEl=function(){return this.contentEl_||this.el_},t.id=function(){return this.id_},t.name=function(){return this.name_},t.children=function(){return this.children_},t.getChildById=function(e){return this.childIndex_[e]},t.getChild=function(e){if(e)return this.childNameIndex_[e]},t.getDescendant=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t=t.reduce((function(e,t){return e.concat(t)}),[]);for(var i=this,r=0;r<t.length;r++)if(!(i=i.getChild(t[r]))||!i.getChild)return;return i},t.addChild=function(t,n,i){var r,a;if(void 0===n&&(n={}),void 0===i&&(i=this.children_.length),"string"===typeof t){a=ji(t);var s=n.componentClass||a;n.name=a;var o=e.getComponent(s);if(!o)throw new Error("Component "+s+" does not exist");if("function"!==typeof o)return null;r=new o(this.player_||this,n)}else r=t;if(r.parentComponent_&&r.parentComponent_.removeChild(r),this.children_.splice(i,0,r),r.parentComponent_=this,"function"===typeof r.id&&(this.childIndex_[r.id()]=r),(a=a||r.name&&ji(r.name()))&&(this.childNameIndex_[a]=r,this.childNameIndex_[Ui(a)]=r),"function"===typeof r.el&&r.el()){var l=null;this.children_[i+1]&&(this.children_[i+1].el_?l=this.children_[i+1].el_:Tn(this.children_[i+1])&&(l=this.children_[i+1])),this.contentEl().insertBefore(r.el(),l)}return r},t.removeChild=function(e){if("string"===typeof e&&(e=this.getChild(e)),e&&this.children_){for(var t=!1,n=this.children_.length-1;n>=0;n--)if(this.children_[n]===e){t=!0,this.children_.splice(n,1);break}if(t){e.parentComponent_=null,this.childIndex_[e.id()]=null,this.childNameIndex_[ji(e.name())]=null,this.childNameIndex_[Ui(e.name())]=null;var i=e.el();i&&i.parentNode===this.contentEl()&&this.contentEl().removeChild(e.el())}}},t.initChildren=function(){var t=this,n=this.options_.children;if(n){var i,r=this.options_,a=e.getComponent("Tech");(i=Array.isArray(n)?n:Object.keys(n)).concat(Object.keys(this.options_).filter((function(e){return!i.some((function(t){return"string"===typeof t?e===t:e===t.name}))}))).map((function(e){var i,r;return"string"===typeof e?r=n[i=e]||t.options_[i]||{}:(i=e.name,r=e),{name:i,opts:r}})).filter((function(t){var n=e.getComponent(t.opts.componentClass||ji(t.name));return n&&!a.isTech(n)})).forEach((function(e){var n=e.name,i=e.opts;if(void 0!==r[n]&&(i=r[n]),!1!==i){!0===i&&(i={}),i.playerOptions=t.options_.playerOptions;var a=t.addChild(n,i);a&&(t[n]=a)}}))}},t.buildCSSClass=function(){return""},t.ready=function(e,t){if(void 0===t&&(t=!1),e)return this.isReady_?void(t?e.call(this):this.setTimeout(e,1)):(this.readyQueue_=this.readyQueue_||[],void this.readyQueue_.push(e))},t.triggerReady=function(){this.isReady_=!0,this.setTimeout((function(){var e=this.readyQueue_;this.readyQueue_=[],e&&e.length>0&&e.forEach((function(e){e.call(this)}),this),this.trigger("ready")}),1)},t.$=function(e,t){return Kn(e,t||this.contentEl())},t.$$=function(e,t){return $n(e,t||this.contentEl())},t.hasClass=function(e){return Cn(this.el_,e)},t.addClass=function(e){Pn(this.el_,e)},t.removeClass=function(e){In(this.el_,e)},t.toggleClass=function(e,t){An(this.el_,e,t)},t.show=function(){this.removeClass("vjs-hidden")},t.hide=function(){this.addClass("vjs-hidden")},t.lockShowing=function(){this.addClass("vjs-lock-showing")},t.unlockShowing=function(){this.removeClass("vjs-lock-showing")},t.getAttribute=function(e){return Mn(this.el_,e)},t.setAttribute=function(e,t){Dn(this.el_,e,t)},t.removeAttribute=function(e){Rn(this.el_,e)},t.width=function(e,t){return this.dimension("width",e,t)},t.height=function(e,t){return this.dimension("height",e,t)},t.dimensions=function(e,t){this.width(e,!0),this.height(t)},t.dimension=function(e,t,n){if(void 0!==t)return null!==t&&t===t||(t=0),-1!==(""+t).indexOf("%")||-1!==(""+t).indexOf("px")?this.el_.style[e]=t:this.el_.style[e]="auto"===t?"":t+"px",void(n||this.trigger("componentresize"));if(!this.el_)return 0;var i=this.el_.style[e],r=i.indexOf("px");return-1!==r?parseInt(i.slice(0,r),10):parseInt(this.el_["offset"+ji(e)],10)},t.currentDimension=function(e){var t=0;if("width"!==e&&"height"!==e)throw new Error("currentDimension only accepts width or height value");if(t=$t(this.el_,e),0===(t=parseFloat(t))||isNaN(t)){var n="offset"+ji(e);t=this.el_[n]}return t},t.currentDimensions=function(){return{width:this.currentDimension("width"),height:this.currentDimension("height")}},t.currentWidth=function(){return this.currentDimension("width")},t.currentHeight=function(){return this.currentDimension("height")},t.focus=function(){this.el_.focus()},t.blur=function(){this.el_.blur()},t.handleKeyDown=function(e){this.player_&&(u().isEventKey(e,"Tab")||e.stopPropagation(),this.player_.handleKeyDown(e))},t.handleKeyPress=function(e){this.handleKeyDown(e)},t.emitTapEvents=function(){var e,t=0,n=null;this.on("touchstart",(function(i){1===i.touches.length&&(n={pageX:i.touches[0].pageX,pageY:i.touches[0].pageY},t=r().performance.now(),e=!0)})),this.on("touchmove",(function(t){if(t.touches.length>1)e=!1;else if(n){var i=t.touches[0].pageX-n.pageX,r=t.touches[0].pageY-n.pageY;Math.sqrt(i*i+r*r)>10&&(e=!1)}}));var i=function(){e=!1};this.on("touchleave",i),this.on("touchcancel",i),this.on("touchend",(function(i){(n=null,!0===e)&&(r().performance.now()-t<200&&(i.preventDefault(),this.trigger("tap")))}))},t.enableTouchActivity=function(){if(this.player()&&this.player().reportUserActivity){var e,t=Ti(this.player(),this.player().reportUserActivity);this.on("touchstart",(function(){t(),this.clearInterval(e),e=this.setInterval(t,250)}));var n=function(n){t(),this.clearInterval(e)};this.on("touchmove",t),this.on("touchend",n),this.on("touchcancel",n)}},t.setTimeout=function(e,t){var n,i=this;return e=Ti(this,e),this.clearTimersOnDispose_(),n=r().setTimeout((function(){i.setTimeoutIds_.has(n)&&i.setTimeoutIds_.delete(n),e()}),t),this.setTimeoutIds_.add(n),n},t.clearTimeout=function(e){return this.setTimeoutIds_.has(e)&&(this.setTimeoutIds_.delete(e),r().clearTimeout(e)),e},t.setInterval=function(e,t){e=Ti(this,e),this.clearTimersOnDispose_();var n=r().setInterval(e,t);return this.setIntervalIds_.add(n),n},t.clearInterval=function(e){return this.setIntervalIds_.has(e)&&(this.setIntervalIds_.delete(e),r().clearInterval(e)),e},t.requestAnimationFrame=function(e){var t,n=this;return this.supportsRaf_?(this.clearTimersOnDispose_(),e=Ti(this,e),t=r().requestAnimationFrame((function(){n.rafIds_.has(t)&&n.rafIds_.delete(t),e()})),this.rafIds_.add(t),t):this.setTimeout(e,1e3/60)},t.requestNamedAnimationFrame=function(e,t){var n=this;if(!this.namedRafs_.has(e)){this.clearTimersOnDispose_(),t=Ti(this,t);var i=this.requestAnimationFrame((function(){t(),n.namedRafs_.has(e)&&n.namedRafs_.delete(e)}));return this.namedRafs_.set(e,i),e}},t.cancelNamedAnimationFrame=function(e){this.namedRafs_.has(e)&&(this.cancelAnimationFrame(this.namedRafs_.get(e)),this.namedRafs_.delete(e))},t.cancelAnimationFrame=function(e){return this.supportsRaf_?(this.rafIds_.has(e)&&(this.rafIds_.delete(e),r().cancelAnimationFrame(e)),e):this.clearTimeout(e)},t.clearTimersOnDispose_=function(){var e=this;this.clearingTimersOnDispose_||(this.clearingTimersOnDispose_=!0,this.one("dispose",(function(){[["namedRafs_","cancelNamedAnimationFrame"],["rafIds_","cancelAnimationFrame"],["setTimeoutIds_","clearTimeout"],["setIntervalIds_","clearInterval"]].forEach((function(t){var n=t[0],i=t[1];e[n].forEach((function(t,n){return e[i](n)}))})),e.clearingTimersOnDispose_=!1})))},e.registerComponent=function(t,n){if("string"!==typeof t||!t)throw new Error('Illegal component name, "'+t+'"; must be a non-empty string.');var i,r=e.getComponent("Tech"),a=r&&r.isTech(n),s=e===n||e.prototype.isPrototypeOf(n.prototype);if(a||!s)throw i=a?"techs must be registered using Tech.registerTech()":"must be a Component subclass",new Error('Illegal component, "'+t+'"; '+i+".");t=ji(t),e.components_||(e.components_={});var o=e.getComponent("Player");if("Player"===t&&o&&o.players){var l=o.players,u=Object.keys(l);if(l&&u.length>0&&u.map((function(e){return l[e]})).every(Boolean))throw new Error("Can not register Player component after player has been created.")}return e.components_[t]=n,e.components_[Ui(t)]=n,n},e.getComponent=function(t){if(t&&e.components_)return e.components_[t]},e}();function qi(e,t,n,i){return function(e,t,n){if("number"!==typeof t||t<0||t>n)throw new Error("Failed to execute '"+e+"' on 'TimeRanges': The index provided ("+t+") is non-numeric or out of bounds (0-"+n+").")}(e,i,n.length-1),n[i][t]}function Gi(e){var t;return t=void 0===e||0===e.length?{length:0,start:function(){throw new Error("This TimeRanges object is empty")},end:function(){throw new Error("This TimeRanges object is empty")}}:{length:e.length,start:qi.bind(null,"start",0,e),end:qi.bind(null,"end",1,e)},r().Symbol&&r().Symbol.iterator&&(t[r().Symbol.iterator]=function(){return(e||[]).values()}),t}function Xi(e,t){return Array.isArray(e)?Gi(e):void 0===e||void 0===t?Gi():Gi([[e,t]])}function Ki(e,t){var n,i,r=0;if(!t)return 0;e&&e.length||(e=Xi(0,0));for(var a=0;a<e.length;a++)n=e.start(a),(i=e.end(a))>t&&(i=t),r+=i-n;return r/t}function $i(e){if(e instanceof $i)return e;"number"===typeof e?this.code=e:"string"===typeof e?this.message=e:Xt(e)&&("number"===typeof e.code&&(this.code=e.code),Gt(this,e)),this.message||(this.message=$i.defaultMessages[this.code]||"")}Wi.prototype.supportsRaf_="function"===typeof r().requestAnimationFrame&&"function"===typeof r().cancelAnimationFrame,Wi.registerComponent("Component",Wi),$i.prototype.code=0,$i.prototype.message="",$i.prototype.status=null,$i.errorTypes=["MEDIA_ERR_CUSTOM","MEDIA_ERR_ABORTED","MEDIA_ERR_NETWORK","MEDIA_ERR_DECODE","MEDIA_ERR_SRC_NOT_SUPPORTED","MEDIA_ERR_ENCRYPTED"],$i.defaultMessages={1:"You aborted the media playback",2:"A network error caused the media download to fail part-way.",3:"The media playback was aborted due to a corruption problem or because the media used features your browser did not support.",4:"The media could not be loaded, either because the server or network failed or because the format is not supported.",5:"The media is encrypted and we do not have the keys to decrypt it."};for(var Yi=0;Yi<$i.errorTypes.length;Yi++)$i[$i.errorTypes[Yi]]=Yi,$i.prototype[$i.errorTypes[Yi]]=Yi;function Qi(e){return void 0!==e&&null!==e&&"function"===typeof e.then}function Ji(e){Qi(e)&&e.then(null,(function(e){}))}var Zi=function(e){return["kind","label","language","id","inBandMetadataTrackDispatchType","mode","src"].reduce((function(t,n,i){return e[n]&&(t[n]=e[n]),t}),{cues:e.cues&&Array.prototype.map.call(e.cues,(function(e){return{startTime:e.startTime,endTime:e.endTime,text:e.text,id:e.id}}))})},er=function(e){var t=e.$$("track"),n=Array.prototype.map.call(t,(function(e){return e.track})),i=Array.prototype.map.call(t,(function(e){var t=Zi(e.track);return e.src&&(t.src=e.src),t}));return i.concat(Array.prototype.filter.call(e.textTracks(),(function(e){return-1===n.indexOf(e)})).map(Zi))},tr=function(e,t){return e.forEach((function(e){var n=t.addRemoteTextTrack(e).track;!e.src&&e.cues&&e.cues.forEach((function(e){return n.addCue(e)}))})),t.textTracks()},nr="vjs-modal-dialog",ir=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).handleKeyDown_=function(e){return i.handleKeyDown(e)},i.close_=function(e){return i.close(e)},i.opened_=i.hasBeenOpened_=i.hasBeenFilled_=!1,i.closeable(!i.options_.uncloseable),i.content(i.options_.content),i.contentEl_=Sn("div",{className:nr+"-content"},{role:"document"}),i.descEl_=Sn("p",{className:nr+"-description vjs-control-text",id:i.el().getAttribute("aria-describedby")}),wn(i.descEl_,i.description()),i.el_.appendChild(i.descEl_),i.el_.appendChild(i.contentEl_),i}h(t,e);var n=t.prototype;return n.createEl=function(){return e.prototype.createEl.call(this,"div",{className:this.buildCSSClass(),tabIndex:-1},{"aria-describedby":this.id()+"_description","aria-hidden":"true","aria-label":this.label(),role:"dialog"})},n.dispose=function(){this.contentEl_=null,this.descEl_=null,this.previouslyActiveEl_=null,e.prototype.dispose.call(this)},n.buildCSSClass=function(){return nr+" vjs-hidden "+e.prototype.buildCSSClass.call(this)},n.label=function(){return this.localize(this.options_.label||"Modal Window")},n.description=function(){var e=this.options_.description||this.localize("This is a modal window.");return this.closeable()&&(e+=" "+this.localize("This modal can be closed by pressing the Escape key or activating the close button.")),e},n.open=function(){if(!this.opened_){var e=this.player();this.trigger("beforemodalopen"),this.opened_=!0,(this.options_.fillAlways||!this.hasBeenOpened_&&!this.hasBeenFilled_)&&this.fill(),this.wasPlaying_=!e.paused(),this.options_.pauseOnOpen&&this.wasPlaying_&&e.pause(),this.on("keydown",this.handleKeyDown_),this.hadControls_=e.controls(),e.controls(!1),this.show(),this.conditionalFocus_(),this.el().setAttribute("aria-hidden","false"),this.trigger("modalopen"),this.hasBeenOpened_=!0}},n.opened=function(e){return"boolean"===typeof e&&this[e?"open":"close"](),this.opened_},n.close=function(){if(this.opened_){var e=this.player();this.trigger("beforemodalclose"),this.opened_=!1,this.wasPlaying_&&this.options_.pauseOnOpen&&e.play(),this.off("keydown",this.handleKeyDown_),this.hadControls_&&e.controls(!0),this.hide(),this.el().setAttribute("aria-hidden","true"),this.trigger("modalclose"),this.conditionalBlur_(),this.options_.temporary&&this.dispose()}},n.closeable=function(e){if("boolean"===typeof e){var t=this.closeable_=!!e,n=this.getChild("closeButton");if(t&&!n){var i=this.contentEl_;this.contentEl_=this.el_,n=this.addChild("closeButton",{controlText:"Close Modal Dialog"}),this.contentEl_=i,this.on(n,"close",this.close_)}!t&&n&&(this.off(n,"close",this.close_),this.removeChild(n),n.dispose())}return this.closeable_},n.fill=function(){this.fillWith(this.content())},n.fillWith=function(e){var t=this.contentEl(),n=t.parentNode,i=t.nextSibling;this.trigger("beforemodalfill"),this.hasBeenFilled_=!0,n.removeChild(t),this.empty(),qn(t,e),this.trigger("modalfill"),i?n.insertBefore(t,i):n.appendChild(t);var r=this.getChild("closeButton");r&&n.appendChild(r.el_)},n.empty=function(){this.trigger("beforemodalempty"),Vn(this.contentEl()),this.trigger("modalempty")},n.content=function(e){return"undefined"!==typeof e&&(this.content_=e),this.content_},n.conditionalFocus_=function(){var e=s().activeElement,t=this.player_.el_;this.previouslyActiveEl_=null,(t.contains(e)||t===e)&&(this.previouslyActiveEl_=e,this.focus())},n.conditionalBlur_=function(){this.previouslyActiveEl_&&(this.previouslyActiveEl_.focus(),this.previouslyActiveEl_=null)},n.handleKeyDown=function(e){if(e.stopPropagation(),u().isEventKey(e,"Escape")&&this.closeable())return e.preventDefault(),void this.close();if(u().isEventKey(e,"Tab")){for(var t,n=this.focusableEls_(),i=this.el_.querySelector(":focus"),r=0;r<n.length;r++)if(i===n[r]){t=r;break}s().activeElement===this.el_&&(t=0),e.shiftKey&&0===t?(n[n.length-1].focus(),e.preventDefault()):e.shiftKey||t!==n.length-1||(n[0].focus(),e.preventDefault())}},n.focusableEls_=function(){var e=this.el_.querySelectorAll("*");return Array.prototype.filter.call(e,(function(e){return(e instanceof r().HTMLAnchorElement||e instanceof r().HTMLAreaElement)&&e.hasAttribute("href")||(e instanceof r().HTMLInputElement||e instanceof r().HTMLSelectElement||e instanceof r().HTMLTextAreaElement||e instanceof r().HTMLButtonElement)&&!e.hasAttribute("disabled")||e instanceof r().HTMLIFrameElement||e instanceof r().HTMLObjectElement||e instanceof r().HTMLEmbedElement||e.hasAttribute("tabindex")&&-1!==e.getAttribute("tabindex")||e.hasAttribute("contenteditable")}))},t}(Wi);ir.prototype.options_={pauseOnOpen:!0,temporary:!0},Wi.registerComponent("ModalDialog",ir);var rr=function(e){function t(t){var n;void 0===t&&(t=[]),(n=e.call(this)||this).tracks_=[],Object.defineProperty(c(n),"length",{get:function(){return this.tracks_.length}});for(var i=0;i<t.length;i++)n.addTrack(t[i]);return n}h(t,e);var n=t.prototype;return n.addTrack=function(e){var t=this,n=this.tracks_.length;""+n in this||Object.defineProperty(this,n,{get:function(){return this.tracks_[n]}}),-1===this.tracks_.indexOf(e)&&(this.tracks_.push(e),this.trigger({track:e,type:"addtrack",target:this})),e.labelchange_=function(){t.trigger({track:e,type:"labelchange",target:t})},Ei(e)&&e.addEventListener("labelchange",e.labelchange_)},n.removeTrack=function(e){for(var t,n=0,i=this.length;n<i;n++)if(this[n]===e){(t=this[n]).off&&t.off(),this.tracks_.splice(n,1);break}t&&this.trigger({track:t,type:"removetrack",target:this})},n.getTrackById=function(e){for(var t=null,n=0,i=this.length;n<i;n++){var r=this[n];if(r.id===e){t=r;break}}return t},t}(Si);for(var ar in rr.prototype.allowedEvents_={change:"change",addtrack:"addtrack",removetrack:"removetrack",labelchange:"labelchange"},rr.prototype.allowedEvents_)rr.prototype["on"+ar]=null;var sr=function(e,t){for(var n=0;n<e.length;n++)Object.keys(e[n]).length&&t.id!==e[n].id&&(e[n].enabled=!1)},or=function(e){function t(t){var n;void 0===t&&(t=[]);for(var i=t.length-1;i>=0;i--)if(t[i].enabled){sr(t,t[i]);break}return(n=e.call(this,t)||this).changing_=!1,n}h(t,e);var n=t.prototype;return n.addTrack=function(t){var n=this;t.enabled&&sr(this,t),e.prototype.addTrack.call(this,t),t.addEventListener&&(t.enabledChange_=function(){n.changing_||(n.changing_=!0,sr(n,t),n.changing_=!1,n.trigger("change"))},t.addEventListener("enabledchange",t.enabledChange_))},n.removeTrack=function(t){e.prototype.removeTrack.call(this,t),t.removeEventListener&&t.enabledChange_&&(t.removeEventListener("enabledchange",t.enabledChange_),t.enabledChange_=null)},t}(rr),lr=function(e,t){for(var n=0;n<e.length;n++)Object.keys(e[n]).length&&t.id!==e[n].id&&(e[n].selected=!1)},ur=function(e){function t(t){var n;void 0===t&&(t=[]);for(var i=t.length-1;i>=0;i--)if(t[i].selected){lr(t,t[i]);break}return(n=e.call(this,t)||this).changing_=!1,Object.defineProperty(c(n),"selectedIndex",{get:function(){for(var e=0;e<this.length;e++)if(this[e].selected)return e;return-1},set:function(){}}),n}h(t,e);var n=t.prototype;return n.addTrack=function(t){var n=this;t.selected&&lr(this,t),e.prototype.addTrack.call(this,t),t.addEventListener&&(t.selectedChange_=function(){n.changing_||(n.changing_=!0,lr(n,t),n.changing_=!1,n.trigger("change"))},t.addEventListener("selectedchange",t.selectedChange_))},n.removeTrack=function(t){e.prototype.removeTrack.call(this,t),t.removeEventListener&&t.selectedChange_&&(t.removeEventListener("selectedchange",t.selectedChange_),t.selectedChange_=null)},t}(rr),cr=function(e){function t(){return e.apply(this,arguments)||this}h(t,e);var n=t.prototype;return n.addTrack=function(t){var n=this;e.prototype.addTrack.call(this,t),this.queueChange_||(this.queueChange_=function(){return n.queueTrigger("change")}),this.triggerSelectedlanguagechange||(this.triggerSelectedlanguagechange_=function(){return n.trigger("selectedlanguagechange")}),t.addEventListener("modechange",this.queueChange_);-1===["metadata","chapters"].indexOf(t.kind)&&t.addEventListener("modechange",this.triggerSelectedlanguagechange_)},n.removeTrack=function(t){e.prototype.removeTrack.call(this,t),t.removeEventListener&&(this.queueChange_&&t.removeEventListener("modechange",this.queueChange_),this.selectedlanguagechange_&&t.removeEventListener("modechange",this.triggerSelectedlanguagechange_))},t}(rr),dr=function(){function e(e){void 0===e&&(e=[]),this.trackElements_=[],Object.defineProperty(this,"length",{get:function(){return this.trackElements_.length}});for(var t=0,n=e.length;t<n;t++)this.addTrackElement_(e[t])}var t=e.prototype;return t.addTrackElement_=function(e){var t=this.trackElements_.length;""+t in this||Object.defineProperty(this,t,{get:function(){return this.trackElements_[t]}}),-1===this.trackElements_.indexOf(e)&&this.trackElements_.push(e)},t.getTrackElementByTrack_=function(e){for(var t,n=0,i=this.trackElements_.length;n<i;n++)if(e===this.trackElements_[n].track){t=this.trackElements_[n];break}return t},t.removeTrackElement_=function(e){for(var t=0,n=this.trackElements_.length;t<n;t++)if(e===this.trackElements_[t]){this.trackElements_[t].track&&"function"===typeof this.trackElements_[t].track.off&&this.trackElements_[t].track.off(),"function"===typeof this.trackElements_[t].off&&this.trackElements_[t].off(),this.trackElements_.splice(t,1);break}},e}(),hr=function(){function e(t){e.prototype.setCues_.call(this,t),Object.defineProperty(this,"length",{get:function(){return this.length_}})}var t=e.prototype;return t.setCues_=function(e){var t=this.length||0,n=0,i=e.length;this.cues_=e,this.length_=e.length;var r=function(e){""+e in this||Object.defineProperty(this,""+e,{get:function(){return this.cues_[e]}})};if(t<i)for(n=t;n<i;n++)r.call(this,n)},t.getCueById=function(e){for(var t=null,n=0,i=this.length;n<i;n++){var r=this[n];if(r.id===e){t=r;break}}return t},e}(),fr={alternative:"alternative",captions:"captions",main:"main",sign:"sign",subtitles:"subtitles",commentary:"commentary"},pr={alternative:"alternative",descriptions:"descriptions",main:"main","main-desc":"main-desc",translation:"translation",commentary:"commentary"},gr={subtitles:"subtitles",captions:"captions",descriptions:"descriptions",chapters:"chapters",metadata:"metadata"},mr={disabled:"disabled",hidden:"hidden",showing:"showing"},vr=function(e){function t(t){var n;void 0===t&&(t={}),n=e.call(this)||this;var i={id:t.id||"vjs_track_"+ai(),kind:t.kind||"",language:t.language||""},r=t.label||"",a=function(e){Object.defineProperty(c(n),e,{get:function(){return i[e]},set:function(){}})};for(var s in i)a(s);return Object.defineProperty(c(n),"label",{get:function(){return r},set:function(e){e!==r&&(r=e,this.trigger("labelchange"))}}),n}return h(t,e),t}(Si),yr=function(e){var t=["protocol","hostname","port","pathname","search","hash","host"],n=s().createElement("a");n.href=e;for(var i={},a=0;a<t.length;a++)i[t[a]]=n[t[a]];return"http:"===i.protocol&&(i.host=i.host.replace(/:80$/,"")),"https:"===i.protocol&&(i.host=i.host.replace(/:443$/,"")),i.protocol||(i.protocol=r().location.protocol),i.host||(i.host=r().location.host),i},_r=function(e){if(!e.match(/^https?:\/\//)){var t=s().createElement("a");t.href=e,e=t.href}return e},br=function(e){if("string"===typeof e){var t=/^(\/?)([\s\S]*?)((?:\.{1,2}|[^\/]+?)(\.([^\.\/\?]+)))(?:[\/]*|[\?].*)$/.exec(e);if(t)return t.pop().toLowerCase()}return""},Tr=function(e,t){void 0===t&&(t=r().location);var n=yr(e);return(":"===n.protocol?t.protocol:n.protocol)+n.host!==t.protocol+t.host},kr=Object.freeze({__proto__:null,parseUrl:yr,getAbsoluteURL:_r,getFileExtension:br,isCrossOrigin:Tr}),xr=function(e,t){var n=new(r().WebVTT.Parser)(r(),r().vttjs,r().WebVTT.StringDecoder()),i=[];n.oncue=function(e){t.addCue(e)},n.onparsingerror=function(e){i.push(e)},n.onflush=function(){t.trigger({type:"loadeddata",target:t})},n.parse(e),i.length>0&&(r().console&&r().console.groupCollapsed&&r().console.groupCollapsed("Text Track parsing errors for "+t.src),i.forEach((function(e){return zt.error(e)})),r().console&&r().console.groupEnd&&r().console.groupEnd()),n.flush()},Sr=function(e,t){var n={uri:e},i=Tr(e);i&&(n.cors=i);var a="use-credentials"===t.tech_.crossOrigin();a&&(n.withCredentials=a),m()(n,Ti(this,(function(e,n,i){if(e)return zt.error(e,n);t.loaded_=!0,"function"!==typeof r().WebVTT?t.tech_&&t.tech_.any(["vttjsloaded","vttjserror"],(function(e){if("vttjserror"!==e.type)return xr(i,t);zt.error("vttjs failed to load, stopping trying to process "+t.src)})):xr(i,t)})))},wr=function(e){function t(t){var n;if(void 0===t&&(t={}),!t.tech)throw new Error("A tech was not provided.");var i=Fi(t,{kind:gr[t.kind]||"subtitles",language:t.language||t.srclang||""}),r=mr[i.mode]||"disabled",a=i.default;"metadata"!==i.kind&&"chapters"!==i.kind||(r="hidden"),(n=e.call(this,i)||this).tech_=i.tech,n.cues_=[],n.activeCues_=[],n.preload_=!1!==n.tech_.preloadTextTracks;var s=new hr(n.cues_),o=new hr(n.activeCues_),l=!1;n.timeupdateHandler=Ti(c(n),(function(e){void 0===e&&(e={}),this.tech_.isDisposed()||(this.tech_.isReady_?(this.activeCues=this.activeCues,l&&(this.trigger("cuechange"),l=!1),"timeupdate"!==e.type&&(this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler))):"timeupdate"!==e.type&&(this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler)))}));return n.tech_.one("dispose",(function(){n.stopTracking()})),"disabled"!==r&&n.startTracking(),Object.defineProperties(c(n),{default:{get:function(){return a},set:function(){}},mode:{get:function(){return r},set:function(e){mr[e]&&r!==e&&(r=e,this.preload_||"disabled"===r||0!==this.cues.length||Sr(this.src,this),this.stopTracking(),"disabled"!==r&&this.startTracking(),this.trigger("modechange"))}},cues:{get:function(){return this.loaded_?s:null},set:function(){}},activeCues:{get:function(){if(!this.loaded_)return null;if(0===this.cues.length)return o;for(var e=this.tech_.currentTime(),t=[],n=0,i=this.cues.length;n<i;n++){var r=this.cues[n];(r.startTime<=e&&r.endTime>=e||r.startTime===r.endTime&&r.startTime<=e&&r.startTime+.5>=e)&&t.push(r)}if(l=!1,t.length!==this.activeCues_.length)l=!0;else for(var a=0;a<t.length;a++)-1===this.activeCues_.indexOf(t[a])&&(l=!0);return this.activeCues_=t,o.setCues_(this.activeCues_),o},set:function(){}}}),i.src?(n.src=i.src,n.preload_||(n.loaded_=!0),(n.preload_||"subtitles"!==i.kind&&"captions"!==i.kind)&&Sr(n.src,c(n))):n.loaded_=!0,n}h(t,e);var n=t.prototype;return n.startTracking=function(){this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler),this.tech_.on("timeupdate",this.timeupdateHandler)},n.stopTracking=function(){this.rvf_&&(this.tech_.cancelVideoFrameCallback(this.rvf_),this.rvf_=void 0),this.tech_.off("timeupdate",this.timeupdateHandler)},n.addCue=function(e){var t=e;if(r().vttjs&&!(e instanceof r().vttjs.VTTCue)){for(var n in t=new(r().vttjs.VTTCue)(e.startTime,e.endTime,e.text),e)n in t||(t[n]=e[n]);t.id=e.id,t.originalCue_=e}for(var i=this.tech_.textTracks(),a=0;a<i.length;a++)i[a]!==this&&i[a].removeCue(t);this.cues_.push(t),this.cues.setCues_(this.cues_)},n.removeCue=function(e){for(var t=this.cues_.length;t--;){var n=this.cues_[t];if(n===e||n.originalCue_&&n.originalCue_===e){this.cues_.splice(t,1),this.cues.setCues_(this.cues_);break}}},t}(vr);wr.prototype.allowedEvents_={cuechange:"cuechange"};var Er=function(e){function t(t){var n;void 0===t&&(t={});var i=Fi(t,{kind:pr[t.kind]||""});n=e.call(this,i)||this;var r=!1;return Object.defineProperty(c(n),"enabled",{get:function(){return r},set:function(e){"boolean"===typeof e&&e!==r&&(r=e,this.trigger("enabledchange"))}}),i.enabled&&(n.enabled=i.enabled),n.loaded_=!0,n}return h(t,e),t}(vr),Cr=function(e){function t(t){var n;void 0===t&&(t={});var i=Fi(t,{kind:fr[t.kind]||""});n=e.call(this,i)||this;var r=!1;return Object.defineProperty(c(n),"selected",{get:function(){return r},set:function(e){"boolean"===typeof e&&e!==r&&(r=e,this.trigger("selectedchange"))}}),i.selected&&(n.selected=i.selected),n}return h(t,e),t}(vr),Pr=0,Ir=2,Ar=function(e){function t(t){var n,i;void 0===t&&(t={}),n=e.call(this)||this;var r=new wr(t);return n.kind=r.kind,n.src=r.src,n.srclang=r.language,n.label=r.label,n.default=r.default,Object.defineProperties(c(n),{readyState:{get:function(){return i}},track:{get:function(){return r}}}),i=Pr,r.addEventListener("loadeddata",(function(){i=Ir,n.trigger({type:"load",target:c(n)})})),n}return h(t,e),t}(Si);Ar.prototype.allowedEvents_={load:"load"},Ar.NONE=Pr,Ar.LOADING=1,Ar.LOADED=Ir,Ar.ERROR=3;var Or={audio:{ListClass:or,TrackClass:Er,capitalName:"Audio"},video:{ListClass:ur,TrackClass:Cr,capitalName:"Video"},text:{ListClass:cr,TrackClass:wr,capitalName:"Text"}};Object.keys(Or).forEach((function(e){Or[e].getterName=e+"Tracks",Or[e].privateName=e+"Tracks_"}));var Lr={remoteText:{ListClass:cr,TrackClass:wr,capitalName:"RemoteText",getterName:"remoteTextTracks",privateName:"remoteTextTracks_"},remoteTextEl:{ListClass:dr,TrackClass:Ar,capitalName:"RemoteTextTrackEls",getterName:"remoteTextTrackEls",privateName:"remoteTextTrackEls_"}},Mr=o({},Or,Lr);Lr.names=Object.keys(Lr),Or.names=Object.keys(Or),Mr.names=[].concat(Lr.names).concat(Or.names);var Dr=function(e){function t(t,n){var i;return void 0===t&&(t={}),void 0===n&&(n=function(){}),t.reportTouchActivity=!1,(i=e.call(this,null,t,n)||this).onDurationChange_=function(e){return i.onDurationChange(e)},i.trackProgress_=function(e){return i.trackProgress(e)},i.trackCurrentTime_=function(e){return i.trackCurrentTime(e)},i.stopTrackingCurrentTime_=function(e){return i.stopTrackingCurrentTime(e)},i.disposeSourceHandler_=function(e){return i.disposeSourceHandler(e)},i.queuedHanders_=new Set,i.hasStarted_=!1,i.on("playing",(function(){this.hasStarted_=!0})),i.on("loadstart",(function(){this.hasStarted_=!1})),Mr.names.forEach((function(e){var n=Mr[e];t&&t[n.getterName]&&(i[n.privateName]=t[n.getterName])})),i.featuresProgressEvents||i.manualProgressOn(),i.featuresTimeupdateEvents||i.manualTimeUpdatesOn(),["Text","Audio","Video"].forEach((function(e){!1===t["native"+e+"Tracks"]&&(i["featuresNative"+e+"Tracks"]=!1)})),!1===t.nativeCaptions||!1===t.nativeTextTracks?i.featuresNativeTextTracks=!1:!0!==t.nativeCaptions&&!0!==t.nativeTextTracks||(i.featuresNativeTextTracks=!0),i.featuresNativeTextTracks||i.emulateTextTracks(),i.preloadTextTracks=!1!==t.preloadTextTracks,i.autoRemoteTextTracks_=new Mr.text.ListClass,i.initTrackListeners(),t.nativeControlsForTouch||i.emitTapEvents(),i.constructor&&(i.name_=i.constructor.name||"Unknown Tech"),i}h(t,e);var n=t.prototype;return n.triggerSourceset=function(e){var t=this;this.isReady_||this.one("ready",(function(){return t.setTimeout((function(){return t.triggerSourceset(e)}),1)})),this.trigger({src:e,type:"sourceset"})},n.manualProgressOn=function(){this.on("durationchange",this.onDurationChange_),this.manualProgress=!0,this.one("ready",this.trackProgress_)},n.manualProgressOff=function(){this.manualProgress=!1,this.stopTrackingProgress(),this.off("durationchange",this.onDurationChange_)},n.trackProgress=function(e){this.stopTrackingProgress(),this.progressInterval=this.setInterval(Ti(this,(function(){var e=this.bufferedPercent();this.bufferedPercent_!==e&&this.trigger("progress"),this.bufferedPercent_=e,1===e&&this.stopTrackingProgress()})),500)},n.onDurationChange=function(e){this.duration_=this.duration()},n.buffered=function(){return Xi(0,0)},n.bufferedPercent=function(){return Ki(this.buffered(),this.duration_)},n.stopTrackingProgress=function(){this.clearInterval(this.progressInterval)},n.manualTimeUpdatesOn=function(){this.manualTimeUpdates=!0,this.on("play",this.trackCurrentTime_),this.on("pause",this.stopTrackingCurrentTime_)},n.manualTimeUpdatesOff=function(){this.manualTimeUpdates=!1,this.stopTrackingCurrentTime(),this.off("play",this.trackCurrentTime_),this.off("pause",this.stopTrackingCurrentTime_)},n.trackCurrentTime=function(){this.currentTimeInterval&&this.stopTrackingCurrentTime(),this.currentTimeInterval=this.setInterval((function(){this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})}),250)},n.stopTrackingCurrentTime=function(){this.clearInterval(this.currentTimeInterval),this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},n.dispose=function(){this.clearTracks(Or.names),this.manualProgress&&this.manualProgressOff(),this.manualTimeUpdates&&this.manualTimeUpdatesOff(),e.prototype.dispose.call(this)},n.clearTracks=function(e){var t=this;(e=[].concat(e)).forEach((function(e){for(var n=t[e+"Tracks"]()||[],i=n.length;i--;){var r=n[i];"text"===e&&t.removeRemoteTextTrack(r),n.removeTrack(r)}}))},n.cleanupAutoTextTracks=function(){for(var e=this.autoRemoteTextTracks_||[],t=e.length;t--;){var n=e[t];this.removeRemoteTextTrack(n)}},n.reset=function(){},n.crossOrigin=function(){},n.setCrossOrigin=function(){},n.error=function(e){return void 0!==e&&(this.error_=new $i(e),this.trigger("error")),this.error_},n.played=function(){return this.hasStarted_?Xi(0,0):Xi()},n.play=function(){},n.setScrubbing=function(){},n.scrubbing=function(){},n.setCurrentTime=function(){this.manualTimeUpdates&&this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},n.initTrackListeners=function(){var e=this;Or.names.forEach((function(t){var n=Or[t],i=function(){e.trigger(t+"trackchange")},r=e[n.getterName]();r.addEventListener("removetrack",i),r.addEventListener("addtrack",i),e.on("dispose",(function(){r.removeEventListener("removetrack",i),r.removeEventListener("addtrack",i)}))}))},n.addWebVttScript_=function(){var e=this;if(!r().WebVTT)if(s().body.contains(this.el())){if(!this.options_["vtt.js"]&&Kt(y())&&Object.keys(y()).length>0)return void this.trigger("vttjsloaded");var t=s().createElement("script");t.src=this.options_["vtt.js"]||"https://vjs.zencdn.net/vttjs/0.14.1/vtt.min.js",t.onload=function(){e.trigger("vttjsloaded")},t.onerror=function(){e.trigger("vttjserror")},this.on("dispose",(function(){t.onload=null,t.onerror=null})),r().WebVTT=!0,this.el().parentNode.appendChild(t)}else this.ready(this.addWebVttScript_)},n.emulateTextTracks=function(){var e=this,t=this.textTracks(),n=this.remoteTextTracks(),i=function(e){return t.addTrack(e.track)},r=function(e){return t.removeTrack(e.track)};n.on("addtrack",i),n.on("removetrack",r),this.addWebVttScript_();var a=function(){return e.trigger("texttrackchange")},s=function(){a();for(var e=0;e<t.length;e++){var n=t[e];n.removeEventListener("cuechange",a),"showing"===n.mode&&n.addEventListener("cuechange",a)}};s(),t.addEventListener("change",s),t.addEventListener("addtrack",s),t.addEventListener("removetrack",s),this.on("dispose",(function(){n.off("addtrack",i),n.off("removetrack",r),t.removeEventListener("change",s),t.removeEventListener("addtrack",s),t.removeEventListener("removetrack",s);for(var e=0;e<t.length;e++){t[e].removeEventListener("cuechange",a)}}))},n.addTextTrack=function(e,t,n){if(!e)throw new Error("TextTrack kind is required but was not provided");return function(e,t,n,i,r){void 0===r&&(r={});var a=e.textTracks();r.kind=t,n&&(r.label=n),i&&(r.language=i),r.tech=e;var s=new Mr.text.TrackClass(r);return a.addTrack(s),s}(this,e,t,n)},n.createRemoteTextTrack=function(e){var t=Fi(e,{tech:this});return new Lr.remoteTextEl.TrackClass(t)},n.addRemoteTextTrack=function(e,t){var n=this;void 0===e&&(e={});var i=this.createRemoteTextTrack(e);return!0!==t&&!1!==t&&(zt.warn('Calling addRemoteTextTrack without explicitly setting the "manualCleanup" parameter to `true` is deprecated and default to `false` in future version of video.js'),t=!0),this.remoteTextTrackEls().addTrackElement_(i),this.remoteTextTracks().addTrack(i.track),!0!==t&&this.ready((function(){return n.autoRemoteTextTracks_.addTrack(i.track)})),i},n.removeRemoteTextTrack=function(e){var t=this.remoteTextTrackEls().getTrackElementByTrack_(e);this.remoteTextTrackEls().removeTrackElement_(t),this.remoteTextTracks().removeTrack(e),this.autoRemoteTextTracks_.removeTrack(e)},n.getVideoPlaybackQuality=function(){return{}},n.requestPictureInPicture=function(){var e=this.options_.Promise||r().Promise;if(e)return e.reject()},n.disablePictureInPicture=function(){return!0},n.setDisablePictureInPicture=function(){},n.requestVideoFrameCallback=function(e){var t=this,n=ai();return!this.isReady_||this.paused()?(this.queuedHanders_.add(n),this.one("playing",(function(){t.queuedHanders_.has(n)&&(t.queuedHanders_.delete(n),e())}))):this.requestNamedAnimationFrame(n,e),n},n.cancelVideoFrameCallback=function(e){this.queuedHanders_.has(e)?this.queuedHanders_.delete(e):this.cancelNamedAnimationFrame(e)},n.setPoster=function(){},n.playsinline=function(){},n.setPlaysinline=function(){},n.overrideNativeAudioTracks=function(){},n.overrideNativeVideoTracks=function(){},n.canPlayType=function(){return""},t.canPlayType=function(){return""},t.canPlaySource=function(e,n){return t.canPlayType(e.type)},t.isTech=function(e){return e.prototype instanceof t||e instanceof t||e===t},t.registerTech=function(e,n){if(t.techs_||(t.techs_={}),!t.isTech(n))throw new Error("Tech "+e+" must be a Tech");if(!t.canPlayType)throw new Error("Techs must have a static canPlayType method on them");if(!t.canPlaySource)throw new Error("Techs must have a static canPlaySource method on them");return e=ji(e),t.techs_[e]=n,t.techs_[Ui(e)]=n,"Tech"!==e&&t.defaultTechOrder_.push(e),n},t.getTech=function(e){if(e)return t.techs_&&t.techs_[e]?t.techs_[e]:(e=ji(e),r()&&r().videojs&&r().videojs[e]?(zt.warn("The "+e+" tech was added to the videojs object when it should be registered using videojs.registerTech(name, tech)"),r().videojs[e]):void 0)},t}(Wi);Mr.names.forEach((function(e){var t=Mr[e];Dr.prototype[t.getterName]=function(){return this[t.privateName]=this[t.privateName]||new t.ListClass,this[t.privateName]}})),Dr.prototype.featuresVolumeControl=!0,Dr.prototype.featuresMuteControl=!0,Dr.prototype.featuresFullscreenResize=!1,Dr.prototype.featuresPlaybackRate=!1,Dr.prototype.featuresProgressEvents=!1,Dr.prototype.featuresSourceset=!1,Dr.prototype.featuresTimeupdateEvents=!1,Dr.prototype.featuresNativeTextTracks=!1,Dr.prototype.featuresVideoFrameCallback=!1,Dr.withSourceHandlers=function(e){e.registerSourceHandler=function(t,n){var i=e.sourceHandlers;i||(i=e.sourceHandlers=[]),void 0===n&&(n=i.length),i.splice(n,0,t)},e.canPlayType=function(t){for(var n,i=e.sourceHandlers||[],r=0;r<i.length;r++)if(n=i[r].canPlayType(t))return n;return""},e.selectSourceHandler=function(t,n){for(var i=e.sourceHandlers||[],r=0;r<i.length;r++)if(i[r].canHandleSource(t,n))return i[r];return null},e.canPlaySource=function(t,n){var i=e.selectSourceHandler(t,n);return i?i.canHandleSource(t,n):""};["seekable","seeking","duration"].forEach((function(e){var t=this[e];"function"===typeof t&&(this[e]=function(){return this.sourceHandler_&&this.sourceHandler_[e]?this.sourceHandler_[e].apply(this.sourceHandler_,arguments):t.apply(this,arguments)})}),e.prototype),e.prototype.setSource=function(t){var n=e.selectSourceHandler(t,this.options_);n||(e.nativeSourceHandler?n=e.nativeSourceHandler:zt.error("No source handler found for the current source.")),this.disposeSourceHandler(),this.off("dispose",this.disposeSourceHandler_),n!==e.nativeSourceHandler&&(this.currentSource_=t),this.sourceHandler_=n.handleSource(t,this,this.options_),this.one("dispose",this.disposeSourceHandler_)},e.prototype.disposeSourceHandler=function(){this.currentSource_&&(this.clearTracks(["audio","video"]),this.currentSource_=null),this.cleanupAutoTextTracks(),this.sourceHandler_&&(this.sourceHandler_.dispose&&this.sourceHandler_.dispose(),this.sourceHandler_=null)}},Wi.registerComponent("Tech",Dr),Dr.registerTech("Tech",Dr),Dr.defaultTechOrder_=[];var Rr={},Nr={},Ur={};function jr(e,t,n){e.setTimeout((function(){return Wr(t,Rr[t.type],n,e)}),1)}function Fr(e,t,n,i){void 0===i&&(i=null);var r="call"+ji(n),a=e.reduce(Hr(r),i),s=a===Ur,o=s?null:t[n](a);return function(e,t,n,i){for(var r=e.length-1;r>=0;r--){var a=e[r];a[t]&&a[t](i,n)}}(e,n,o,s),o}var Br={buffered:1,currentTime:1,duration:1,muted:1,played:1,paused:1,seekable:1,volume:1,ended:1},zr={setCurrentTime:1,setMuted:1,setVolume:1},Vr={play:1,pause:1};function Hr(e){return function(t,n){return t===Ur?Ur:n[e]?n[e](t):t}}function Wr(e,t,n,i,r,a){void 0===e&&(e={}),void 0===t&&(t=[]),void 0===r&&(r=[]),void 0===a&&(a=!1);var s=t,o=s[0],l=s.slice(1);if("string"===typeof o)Wr(e,Rr[o],n,i,r,a);else if(o){var u=function(e,t){var n=Nr[e.id()],i=null;if(void 0===n||null===n)return i=t(e),Nr[e.id()]=[[t,i]],i;for(var r=0;r<n.length;r++){var a=n[r],s=a[0],o=a[1];s===t&&(i=o)}return null===i&&(i=t(e),n.push([t,i])),i}(i,o);if(!u.setSource)return r.push(u),Wr(e,l,n,i,r,a);u.setSource(Gt({},e),(function(t,s){if(t)return Wr(e,l,n,i,r,a);r.push(u),Wr(s,e.type===s.type?l:Rr[s.type],n,i,r,a)}))}else l.length?Wr(e,l,n,i,r,a):a?n(e,r):Wr(e,Rr["*"],n,i,r,!0)}var qr={opus:"video/ogg",ogv:"video/ogg",mp4:"video/mp4",mov:"video/mp4",m4v:"video/mp4",mkv:"video/x-matroska",m4a:"audio/mp4",mp3:"audio/mpeg",aac:"audio/aac",caf:"audio/x-caf",flac:"audio/flac",oga:"audio/ogg",wav:"audio/wav",m3u8:"application/x-mpegURL",mpd:"application/dash+xml",jpg:"image/jpeg",jpeg:"image/jpeg",gif:"image/gif",png:"image/png",svg:"image/svg+xml",webp:"image/webp"},Gr=function(e){void 0===e&&(e="");var t=br(e);return qr[t.toLowerCase()]||""},Xr=function e(t){if(Array.isArray(t)){var n=[];t.forEach((function(t){t=e(t),Array.isArray(t)?n=n.concat(t):Xt(t)&&n.push(t)})),t=n}else t="string"===typeof t&&t.trim()?[Kr({src:t})]:Xt(t)&&"string"===typeof t.src&&t.src&&t.src.trim()?[Kr(t)]:[];return t};function Kr(e){if(!e.type){var t=Gr(e.src);t&&(e.type=t)}return e}var $r=function(e){function t(t,n,i){var r,a=Fi({createEl:!1},n);if(r=e.call(this,t,a,i)||this,n.playerOptions.sources&&0!==n.playerOptions.sources.length)t.src(n.playerOptions.sources);else for(var s=0,o=n.playerOptions.techOrder;s<o.length;s++){var l=ji(o[s]),u=Dr.getTech(l);if(l||(u=Wi.getComponent(l)),u&&u.isSupported()){t.loadTech_(l);break}}return r}return h(t,e),t}(Wi);Wi.registerComponent("MediaLoader",$r);var Yr=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).options_.controlText&&i.controlText(i.options_.controlText),i.handleMouseOver_=function(e){return i.handleMouseOver(e)},i.handleMouseOut_=function(e){return i.handleMouseOut(e)},i.handleClick_=function(e){return i.handleClick(e)},i.handleKeyDown_=function(e){return i.handleKeyDown(e)},i.emitTapEvents(),i.enable(),i}h(t,e);var n=t.prototype;return n.createEl=function(e,t,n){void 0===e&&(e="div"),void 0===t&&(t={}),void 0===n&&(n={}),t=Gt({className:this.buildCSSClass(),tabIndex:0},t),"button"===e&&zt.error("Creating a ClickableComponent with an HTML element of "+e+" is not supported; use a Button instead."),n=Gt({role:"button"},n),this.tabIndex_=t.tabIndex;var i=Sn(e,t,n);return i.appendChild(Sn("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),this.createControlTextEl(i),i},n.dispose=function(){this.controlTextEl_=null,e.prototype.dispose.call(this)},n.createControlTextEl=function(e){return this.controlTextEl_=Sn("span",{className:"vjs-control-text"},{"aria-live":"polite"}),e&&e.appendChild(this.controlTextEl_),this.controlText(this.controlText_,e),this.controlTextEl_},n.controlText=function(e,t){if(void 0===t&&(t=this.el()),void 0===e)return this.controlText_||"Need Text";var n=this.localize(e);this.controlText_=e,wn(this.controlTextEl_,n),this.nonIconControl||this.player_.options_.noUITitleAttributes||t.setAttribute("title",n)},n.buildCSSClass=function(){return"vjs-control vjs-button "+e.prototype.buildCSSClass.call(this)},n.enable=function(){this.enabled_||(this.enabled_=!0,this.removeClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","false"),"undefined"!==typeof this.tabIndex_&&this.el_.setAttribute("tabIndex",this.tabIndex_),this.on(["tap","click"],this.handleClick_),this.on("keydown",this.handleKeyDown_))},n.disable=function(){this.enabled_=!1,this.addClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","true"),"undefined"!==typeof this.tabIndex_&&this.el_.removeAttribute("tabIndex"),this.off("mouseover",this.handleMouseOver_),this.off("mouseout",this.handleMouseOut_),this.off(["tap","click"],this.handleClick_),this.off("keydown",this.handleKeyDown_)},n.handleLanguagechange=function(){this.controlText(this.controlText_)},n.handleClick=function(e){this.options_.clickHandler&&this.options_.clickHandler.call(this,arguments)},n.handleKeyDown=function(t){u().isEventKey(t,"Space")||u().isEventKey(t,"Enter")?(t.preventDefault(),t.stopPropagation(),this.trigger("click")):e.prototype.handleKeyDown.call(this,t)},t}(Wi);Wi.registerComponent("ClickableComponent",Yr);var Qr=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).update(),i.update_=function(e){return i.update(e)},t.on("posterchange",i.update_),i}h(t,e);var n=t.prototype;return n.dispose=function(){this.player().off("posterchange",this.update_),e.prototype.dispose.call(this)},n.createEl=function(){return Sn("div",{className:"vjs-poster",tabIndex:-1})},n.update=function(e){var t=this.player().poster();this.setSrc(t),t?this.show():this.hide()},n.setSrc=function(e){var t="";e&&(t='url("'+e+'")'),this.el_.style.backgroundImage=t},n.handleClick=function(e){if(this.player_.controls()){var t=this.player_.usingPlugin("eme")&&this.player_.eme.sessions&&this.player_.eme.sessions.length>0;!this.player_.tech(!0)||(un||sn)&&t||this.player_.tech(!0).focus(),this.player_.paused()?Ji(this.player_.play()):this.player_.pause()}},t}(Yr);Wi.registerComponent("PosterImage",Qr);var Jr="#222",Zr={monospace:"monospace",sansSerif:"sans-serif",serif:"serif",monospaceSansSerif:'"Andale Mono", "Lucida Console", monospace',monospaceSerif:'"Courier New", monospace',proportionalSansSerif:"sans-serif",proportionalSerif:"serif",casual:'"Comic Sans MS", Impact, fantasy',script:'"Monotype Corsiva", cursive',smallcaps:'"Andale Mono", "Lucida Console", monospace, sans-serif'};function ea(e,t){var n;if(4===e.length)n=e[1]+e[1]+e[2]+e[2]+e[3]+e[3];else{if(7!==e.length)throw new Error("Invalid color code provided, "+e+"; must be formatted as e.g. #f0e or #f604e2.");n=e.slice(1)}return"rgba("+parseInt(n.slice(0,2),16)+","+parseInt(n.slice(2,4),16)+","+parseInt(n.slice(4,6),16)+","+t+")"}function ta(e,t,n){try{e.style[t]=n}catch(i){return}}var na=function(e){function t(t,n,i){var a;a=e.call(this,t,n,i)||this;var s=function(e){return a.updateDisplay(e)};return t.on("loadstart",(function(e){return a.toggleDisplay(e)})),t.on("texttrackchange",s),t.on("loadedmetadata",(function(e){return a.preselectTrack(e)})),t.ready(Ti(c(a),(function(){if(t.tech_&&t.tech_.featuresNativeTextTracks)this.hide();else{t.on("fullscreenchange",s),t.on("playerresize",s),r().addEventListener("orientationchange",s),t.on("dispose",(function(){return r().removeEventListener("orientationchange",s)}));for(var e=this.options_.playerOptions.tracks||[],n=0;n<e.length;n++)this.player_.addRemoteTextTrack(e[n],!0);this.preselectTrack()}}))),a}h(t,e);var n=t.prototype;return n.preselectTrack=function(){for(var e,t,n,i={captions:1,subtitles:1},r=this.player_.textTracks(),a=this.player_.cache_.selectedLanguage,s=0;s<r.length;s++){var o=r[s];a&&a.enabled&&a.language&&a.language===o.language&&o.kind in i?o.kind===a.kind?n=o:n||(n=o):a&&!a.enabled?(n=null,e=null,t=null):o.default&&("descriptions"!==o.kind||e?o.kind in i&&!t&&(t=o):e=o)}n?n.mode="showing":t?t.mode="showing":e&&(e.mode="showing")},n.toggleDisplay=function(){this.player_.tech_&&this.player_.tech_.featuresNativeTextTracks?this.hide():this.show()},n.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-text-track-display"},{translate:"yes","aria-live":"off","aria-atomic":"true"})},n.clearDisplay=function(){"function"===typeof r().WebVTT&&r().WebVTT.processCues(r(),[],this.el_)},n.updateDisplay=function(){var e=this.player_.textTracks(),t=this.options_.allowMultipleShowingTracks;if(this.clearDisplay(),t){for(var n=[],i=0;i<e.length;++i){var r=e[i];"showing"===r.mode&&n.push(r)}this.updateForTrack(n)}else{for(var a=null,s=null,o=e.length;o--;){var l=e[o];"showing"===l.mode&&("descriptions"===l.kind?a=l:s=l)}s?("off"!==this.getAttribute("aria-live")&&this.setAttribute("aria-live","off"),this.updateForTrack(s)):a&&("assertive"!==this.getAttribute("aria-live")&&this.setAttribute("aria-live","assertive"),this.updateForTrack(a))}},n.updateDisplayState=function(e){for(var t=this.player_.textTrackSettings.getValues(),n=e.activeCues,i=n.length;i--;){var a=n[i];if(a){var s=a.displayState;if(t.color&&(s.firstChild.style.color=t.color),t.textOpacity&&ta(s.firstChild,"color",ea(t.color||"#fff",t.textOpacity)),t.backgroundColor&&(s.firstChild.style.backgroundColor=t.backgroundColor),t.backgroundOpacity&&ta(s.firstChild,"backgroundColor",ea(t.backgroundColor||"#000",t.backgroundOpacity)),t.windowColor&&(t.windowOpacity?ta(s,"backgroundColor",ea(t.windowColor,t.windowOpacity)):s.style.backgroundColor=t.windowColor),t.edgeStyle&&("dropshadow"===t.edgeStyle?s.firstChild.style.textShadow="2px 2px 3px #222, 2px 2px 4px #222, 2px 2px 5px "+Jr:"raised"===t.edgeStyle?s.firstChild.style.textShadow="1px 1px #222, 2px 2px #222, 3px 3px "+Jr:"depressed"===t.edgeStyle?s.firstChild.style.textShadow="1px 1px #ccc, 0 1px #ccc, -1px -1px #222, 0 -1px "+Jr:"uniform"===t.edgeStyle&&(s.firstChild.style.textShadow="0 0 4px #222, 0 0 4px #222, 0 0 4px #222, 0 0 4px "+Jr)),t.fontPercent&&1!==t.fontPercent){var o=r().parseFloat(s.style.fontSize);s.style.fontSize=o*t.fontPercent+"px",s.style.height="auto",s.style.top="auto"}t.fontFamily&&"default"!==t.fontFamily&&("small-caps"===t.fontFamily?s.firstChild.style.fontVariant="small-caps":s.firstChild.style.fontFamily=Zr[t.fontFamily])}}},n.updateForTrack=function(e){if(Array.isArray(e)||(e=[e]),"function"===typeof r().WebVTT&&!e.every((function(e){return!e.activeCues}))){for(var t=[],n=0;n<e.length;++n)for(var i=e[n],a=0;a<i.activeCues.length;++a)t.push(i.activeCues[a]);r().WebVTT.processCues(r(),t,this.el_);for(var s=0;s<e.length;++s){for(var o=e[s],l=0;l<o.activeCues.length;++l){var u=o.activeCues[l].displayState;Pn(u,"vjs-text-track-cue"),Pn(u,"vjs-text-track-cue-"+(o.language?o.language:s)),o.language&&Dn(u,"lang",o.language)}this.player_.textTrackSettings&&this.updateDisplayState(o)}}},t}(Wi);Wi.registerComponent("TextTrackDisplay",na);var ia=function(e){function t(){return e.apply(this,arguments)||this}return h(t,e),t.prototype.createEl=function(){var t=this.player_.isAudio(),n=this.localize(t?"Audio Player":"Video Player"),i=Sn("span",{className:"vjs-control-text",textContent:this.localize("{1} is loading.",[n])}),r=e.prototype.createEl.call(this,"div",{className:"vjs-loading-spinner",dir:"ltr"});return r.appendChild(i),r},t}(Wi);Wi.registerComponent("LoadingSpinner",ia);var ra=function(e){function t(){return e.apply(this,arguments)||this}h(t,e);var n=t.prototype;return n.createEl=function(e,t,n){void 0===t&&(t={}),void 0===n&&(n={});var i=Sn("button",t=Gt({className:this.buildCSSClass()},t),n=Gt({type:"button"},n));return i.appendChild(Sn("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),this.createControlTextEl(i),i},n.addChild=function(e,t){void 0===t&&(t={});var n=this.constructor.name;return zt.warn("Adding an actionable (user controllable) child to a Button ("+n+") is not supported; use a ClickableComponent instead."),Wi.prototype.addChild.call(this,e,t)},n.enable=function(){e.prototype.enable.call(this),this.el_.removeAttribute("disabled")},n.disable=function(){e.prototype.disable.call(this),this.el_.setAttribute("disabled","disabled")},n.handleKeyDown=function(t){u().isEventKey(t,"Space")||u().isEventKey(t,"Enter")?t.stopPropagation():e.prototype.handleKeyDown.call(this,t)},t}(Yr);Wi.registerComponent("Button",ra);var aa=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).mouseused_=!1,i.on("mousedown",(function(e){return i.handleMouseDown(e)})),i}h(t,e);var n=t.prototype;return n.buildCSSClass=function(){return"vjs-big-play-button"},n.handleClick=function(e){var t=this.player_.play();if(this.mouseused_&&e.clientX&&e.clientY){var n=this.player_.usingPlugin("eme")&&this.player_.eme.sessions&&this.player_.eme.sessions.length>0;return Ji(t),void(!this.player_.tech(!0)||(un||sn)&&n||this.player_.tech(!0).focus())}var i=this.player_.getChild("controlBar"),r=i&&i.getChild("playToggle");if(r){var a=function(){return r.focus()};Qi(t)?t.then(a,(function(){})):this.setTimeout(a,1)}else this.player_.tech(!0).focus()},n.handleKeyDown=function(t){this.mouseused_=!1,e.prototype.handleKeyDown.call(this,t)},n.handleMouseDown=function(e){this.mouseused_=!0},t}(ra);aa.prototype.controlText_="Play Video",Wi.registerComponent("BigPlayButton",aa);var sa=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).controlText(n&&n.controlText||i.localize("Close")),i}h(t,e);var n=t.prototype;return n.buildCSSClass=function(){return"vjs-close-button "+e.prototype.buildCSSClass.call(this)},n.handleClick=function(e){this.trigger({type:"close",bubbles:!1})},n.handleKeyDown=function(t){u().isEventKey(t,"Esc")?(t.preventDefault(),t.stopPropagation(),this.trigger("click")):e.prototype.handleKeyDown.call(this,t)},t}(ra);Wi.registerComponent("CloseButton",sa);var oa=function(e){function t(t,n){var i;return void 0===n&&(n={}),i=e.call(this,t,n)||this,n.replay=void 0===n.replay||n.replay,i.on(t,"play",(function(e){return i.handlePlay(e)})),i.on(t,"pause",(function(e){return i.handlePause(e)})),n.replay&&i.on(t,"ended",(function(e){return i.handleEnded(e)})),i}h(t,e);var n=t.prototype;return n.buildCSSClass=function(){return"vjs-play-control "+e.prototype.buildCSSClass.call(this)},n.handleClick=function(e){this.player_.paused()?Ji(this.player_.play()):this.player_.pause()},n.handleSeeked=function(e){this.removeClass("vjs-ended"),this.player_.paused()?this.handlePause(e):this.handlePlay(e)},n.handlePlay=function(e){this.removeClass("vjs-ended"),this.removeClass("vjs-paused"),this.addClass("vjs-playing"),this.controlText("Pause")},n.handlePause=function(e){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.controlText("Play")},n.handleEnded=function(e){var t=this;this.removeClass("vjs-playing"),this.addClass("vjs-ended"),this.controlText("Replay"),this.one(this.player_,"seeked",(function(e){return t.handleSeeked(e)}))},t}(ra);oa.prototype.controlText_="Play",Wi.registerComponent("PlayToggle",oa);var la=function(e,t){e=e<0?0:e;var n=Math.floor(e%60),i=Math.floor(e/60%60),r=Math.floor(e/3600),a=Math.floor(t/60%60),s=Math.floor(t/3600);return(isNaN(e)||e===1/0)&&(r=i=n="-"),(r=r>0||s>0?r+":":"")+(i=((r||a>=10)&&i<10?"0"+i:i)+":")+(n=n<10?"0"+n:n)},ua=la;function ca(e,t){return void 0===t&&(t=e),ua(e,t)}var da=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).on(t,["timeupdate","ended"],(function(e){return i.updateContent(e)})),i.updateTextNode_(),i}h(t,e);var n=t.prototype;return n.createEl=function(){var t=this.buildCSSClass(),n=e.prototype.createEl.call(this,"div",{className:t+" vjs-time-control vjs-control"}),i=Sn("span",{className:"vjs-control-text",textContent:this.localize(this.labelText_)+"\xa0"},{role:"presentation"});return n.appendChild(i),this.contentEl_=Sn("span",{className:t+"-display"},{"aria-live":"off",role:"presentation"}),n.appendChild(this.contentEl_),n},n.dispose=function(){this.contentEl_=null,this.textNode_=null,e.prototype.dispose.call(this)},n.updateTextNode_=function(e){var t=this;void 0===e&&(e=0),e=ca(e),this.formattedTime_!==e&&(this.formattedTime_=e,this.requestNamedAnimationFrame("TimeDisplay#updateTextNode_",(function(){if(t.contentEl_){var e=t.textNode_;e&&t.contentEl_.firstChild!==e&&(e=null,zt.warn("TimeDisplay#updateTextnode_: Prevented replacement of text node element since it was no longer a child of this node. Appending a new node instead.")),t.textNode_=s().createTextNode(t.formattedTime_),t.textNode_&&(e?t.contentEl_.replaceChild(t.textNode_,e):t.contentEl_.appendChild(t.textNode_))}})))},n.updateContent=function(e){},t}(Wi);da.prototype.labelText_="Time",da.prototype.controlText_="Time",Wi.registerComponent("TimeDisplay",da);var ha=function(e){function t(){return e.apply(this,arguments)||this}h(t,e);var n=t.prototype;return n.buildCSSClass=function(){return"vjs-current-time"},n.updateContent=function(e){var t;t=this.player_.ended()?this.player_.duration():this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime(),this.updateTextNode_(t)},t}(da);ha.prototype.labelText_="Current Time",ha.prototype.controlText_="Current Time",Wi.registerComponent("CurrentTimeDisplay",ha);var fa=function(e){function t(t,n){var i,r=function(e){return i.updateContent(e)};return(i=e.call(this,t,n)||this).on(t,"durationchange",r),i.on(t,"loadstart",r),i.on(t,"loadedmetadata",r),i}h(t,e);var n=t.prototype;return n.buildCSSClass=function(){return"vjs-duration"},n.updateContent=function(e){var t=this.player_.duration();this.updateTextNode_(t)},t}(da);fa.prototype.labelText_="Duration",fa.prototype.controlText_="Duration",Wi.registerComponent("DurationDisplay",fa);var pa=function(e){function t(){return e.apply(this,arguments)||this}return h(t,e),t.prototype.createEl=function(){var t=e.prototype.createEl.call(this,"div",{className:"vjs-time-control vjs-time-divider"},{"aria-hidden":!0}),n=e.prototype.createEl.call(this,"div"),i=e.prototype.createEl.call(this,"span",{textContent:"/"});return n.appendChild(i),t.appendChild(n),t},t}(Wi);Wi.registerComponent("TimeDivider",pa);var ga=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).on(t,"durationchange",(function(e){return i.updateContent(e)})),i}h(t,e);var n=t.prototype;return n.buildCSSClass=function(){return"vjs-remaining-time"},n.createEl=function(){var t=e.prototype.createEl.call(this);return!1!==this.options_.displayNegative&&t.insertBefore(Sn("span",{},{"aria-hidden":!0},"-"),this.contentEl_),t},n.updateContent=function(e){var t;"number"===typeof this.player_.duration()&&(t=this.player_.ended()?0:this.player_.remainingTimeDisplay?this.player_.remainingTimeDisplay():this.player_.remainingTime(),this.updateTextNode_(t))},t}(da);ga.prototype.labelText_="Remaining Time",ga.prototype.controlText_="Remaining Time",Wi.registerComponent("RemainingTimeDisplay",ga);var ma=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).updateShowing(),i.on(i.player(),"durationchange",(function(e){return i.updateShowing(e)})),i}h(t,e);var n=t.prototype;return n.createEl=function(){var t=e.prototype.createEl.call(this,"div",{className:"vjs-live-control vjs-control"});return this.contentEl_=Sn("div",{className:"vjs-live-display"},{"aria-live":"off"}),this.contentEl_.appendChild(Sn("span",{className:"vjs-control-text",textContent:this.localize("Stream Type")+"\xa0"})),this.contentEl_.appendChild(s().createTextNode(this.localize("LIVE"))),t.appendChild(this.contentEl_),t},n.dispose=function(){this.contentEl_=null,e.prototype.dispose.call(this)},n.updateShowing=function(e){this.player().duration()===1/0?this.show():this.hide()},t}(Wi);Wi.registerComponent("LiveDisplay",ma);var va=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).updateLiveEdgeStatus(),i.player_.liveTracker&&(i.updateLiveEdgeStatusHandler_=function(e){return i.updateLiveEdgeStatus(e)},i.on(i.player_.liveTracker,"liveedgechange",i.updateLiveEdgeStatusHandler_)),i}h(t,e);var n=t.prototype;return n.createEl=function(){var t=e.prototype.createEl.call(this,"button",{className:"vjs-seek-to-live-control vjs-control"});return this.textEl_=Sn("span",{className:"vjs-seek-to-live-text",textContent:this.localize("LIVE")},{"aria-hidden":"true"}),t.appendChild(this.textEl_),t},n.updateLiveEdgeStatus=function(){!this.player_.liveTracker||this.player_.liveTracker.atLiveEdge()?(this.setAttribute("aria-disabled",!0),this.addClass("vjs-at-live-edge"),this.controlText("Seek to live, currently playing live")):(this.setAttribute("aria-disabled",!1),this.removeClass("vjs-at-live-edge"),this.controlText("Seek to live, currently behind live"))},n.handleClick=function(){this.player_.liveTracker.seekToLiveEdge()},n.dispose=function(){this.player_.liveTracker&&this.off(this.player_.liveTracker,"liveedgechange",this.updateLiveEdgeStatusHandler_),this.textEl_=null,e.prototype.dispose.call(this)},t}(ra);va.prototype.controlText_="Seek to live, currently playing live",Wi.registerComponent("SeekToLive",va);var ya=function(e,t,n){return e=Number(e),Math.min(n,Math.max(t,isNaN(e)?t:e))},_a=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).handleMouseDown_=function(e){return i.handleMouseDown(e)},i.handleMouseUp_=function(e){return i.handleMouseUp(e)},i.handleKeyDown_=function(e){return i.handleKeyDown(e)},i.handleClick_=function(e){return i.handleClick(e)},i.handleMouseMove_=function(e){return i.handleMouseMove(e)},i.update_=function(e){return i.update(e)},i.bar=i.getChild(i.options_.barName),i.vertical(!!i.options_.vertical),i.enable(),i}h(t,e);var n=t.prototype;return n.enabled=function(){return this.enabled_},n.enable=function(){this.enabled()||(this.on("mousedown",this.handleMouseDown_),this.on("touchstart",this.handleMouseDown_),this.on("keydown",this.handleKeyDown_),this.on("click",this.handleClick_),this.on(this.player_,"controlsvisible",this.update),this.playerEvent&&this.on(this.player_,this.playerEvent,this.update),this.removeClass("disabled"),this.setAttribute("tabindex",0),this.enabled_=!0)},n.disable=function(){if(this.enabled()){var e=this.bar.el_.ownerDocument;this.off("mousedown",this.handleMouseDown_),this.off("touchstart",this.handleMouseDown_),this.off("keydown",this.handleKeyDown_),this.off("click",this.handleClick_),this.off(this.player_,"controlsvisible",this.update_),this.off(e,"mousemove",this.handleMouseMove_),this.off(e,"mouseup",this.handleMouseUp_),this.off(e,"touchmove",this.handleMouseMove_),this.off(e,"touchend",this.handleMouseUp_),this.removeAttribute("tabindex"),this.addClass("disabled"),this.playerEvent&&this.off(this.player_,this.playerEvent,this.update),this.enabled_=!1}},n.createEl=function(t,n,i){return void 0===n&&(n={}),void 0===i&&(i={}),n.className=n.className+" vjs-slider",n=Gt({tabIndex:0},n),i=Gt({role:"slider","aria-valuenow":0,"aria-valuemin":0,"aria-valuemax":100,tabIndex:0},i),e.prototype.createEl.call(this,t,n,i)},n.handleMouseDown=function(e){var t=this.bar.el_.ownerDocument;"mousedown"===e.type&&e.preventDefault(),"touchstart"!==e.type||on||e.preventDefault(),Nn(),this.addClass("vjs-sliding"),this.trigger("slideractive"),this.on(t,"mousemove",this.handleMouseMove_),this.on(t,"mouseup",this.handleMouseUp_),this.on(t,"touchmove",this.handleMouseMove_),this.on(t,"touchend",this.handleMouseUp_),this.handleMouseMove(e,!0)},n.handleMouseMove=function(e){},n.handleMouseUp=function(){var e=this.bar.el_.ownerDocument;Un(),this.removeClass("vjs-sliding"),this.trigger("sliderinactive"),this.off(e,"mousemove",this.handleMouseMove_),this.off(e,"mouseup",this.handleMouseUp_),this.off(e,"touchmove",this.handleMouseMove_),this.off(e,"touchend",this.handleMouseUp_),this.update()},n.update=function(){var e=this;if(this.el_&&this.bar){var t=this.getProgress();return t===this.progress_||(this.progress_=t,this.requestNamedAnimationFrame("Slider#update",(function(){var n=e.vertical()?"height":"width";e.bar.el().style[n]=(100*t).toFixed(2)+"%"}))),t}},n.getProgress=function(){return Number(ya(this.getPercent(),0,1).toFixed(4))},n.calculateDistance=function(e){var t=Bn(this.el_,e);return this.vertical()?t.y:t.x},n.handleKeyDown=function(t){u().isEventKey(t,"Left")||u().isEventKey(t,"Down")?(t.preventDefault(),t.stopPropagation(),this.stepBack()):u().isEventKey(t,"Right")||u().isEventKey(t,"Up")?(t.preventDefault(),t.stopPropagation(),this.stepForward()):e.prototype.handleKeyDown.call(this,t)},n.handleClick=function(e){e.stopPropagation(),e.preventDefault()},n.vertical=function(e){if(void 0===e)return this.vertical_||!1;this.vertical_=!!e,this.vertical_?this.addClass("vjs-slider-vertical"):this.addClass("vjs-slider-horizontal")},t}(Wi);Wi.registerComponent("Slider",_a);var ba=function(e,t){return ya(e/t*100,0,100).toFixed(2)+"%"},Ta=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).partEls_=[],i.on(t,"progress",(function(e){return i.update(e)})),i}h(t,e);var n=t.prototype;return n.createEl=function(){var t=e.prototype.createEl.call(this,"div",{className:"vjs-load-progress"}),n=Sn("span",{className:"vjs-control-text"}),i=Sn("span",{textContent:this.localize("Loaded")}),r=s().createTextNode(": ");return this.percentageEl_=Sn("span",{className:"vjs-control-text-loaded-percentage",textContent:"0%"}),t.appendChild(n),n.appendChild(i),n.appendChild(r),n.appendChild(this.percentageEl_),t},n.dispose=function(){this.partEls_=null,this.percentageEl_=null,e.prototype.dispose.call(this)},n.update=function(e){var t=this;this.requestNamedAnimationFrame("LoadProgressBar#update",(function(){var e=t.player_.liveTracker,n=t.player_.buffered(),i=e&&e.isLive()?e.seekableEnd():t.player_.duration(),r=t.player_.bufferedEnd(),a=t.partEls_,s=ba(r,i);t.percent_!==s&&(t.el_.style.width=s,wn(t.percentageEl_,s),t.percent_=s);for(var o=0;o<n.length;o++){var l=n.start(o),u=n.end(o),c=a[o];c||(c=t.el_.appendChild(Sn()),a[o]=c),c.dataset.start===l&&c.dataset.end===u||(c.dataset.start=l,c.dataset.end=u,c.style.left=ba(l,r),c.style.width=ba(u-l,r))}for(var d=a.length;d>n.length;d--)t.el_.removeChild(a[d-1]);a.length=n.length}))},t}(Wi);Wi.registerComponent("LoadProgressBar",Ta);var ka=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).update=ki(Ti(c(i),i.update),bi),i}h(t,e);var n=t.prototype;return n.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-time-tooltip"},{"aria-hidden":"true"})},n.update=function(e,t,n){var i=Fn(this.el_),r=jn(this.player_.el()),a=e.width*t;if(r&&i){var s=e.left-r.left+a,o=e.width-a+(r.right-e.right),l=i.width/2;s<l?l+=l-s:o<l&&(l=o),l<0?l=0:l>i.width&&(l=i.width),l=Math.round(l),this.el_.style.right="-"+l+"px",this.write(n)}},n.write=function(e){wn(this.el_,e)},n.updateTime=function(e,t,n,i){var r=this;this.requestNamedAnimationFrame("TimeTooltip#updateTime",(function(){var a,s=r.player_.duration();if(r.player_.liveTracker&&r.player_.liveTracker.isLive()){var o=r.player_.liveTracker.liveWindow(),l=o-t*o;a=(l<1?"":"-")+ca(l,o)}else a=ca(n,s);r.update(e,t,a),i&&i()}))},t}(Wi);Wi.registerComponent("TimeTooltip",ka);var xa=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).update=ki(Ti(c(i),i.update),bi),i}h(t,e);var n=t.prototype;return n.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-play-progress vjs-slider-bar"},{"aria-hidden":"true"})},n.update=function(e,t){var n=this.getChild("timeTooltip");if(n){var i=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime();n.updateTime(e,t,i)}},t}(Wi);xa.prototype.options_={children:[]},gn||tn||xa.prototype.options_.children.push("timeTooltip"),Wi.registerComponent("PlayProgressBar",xa);var Sa=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).update=ki(Ti(c(i),i.update),bi),i}h(t,e);var n=t.prototype;return n.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-mouse-display"})},n.update=function(e,t){var n=this,i=t*this.player_.duration();this.getChild("timeTooltip").updateTime(e,t,i,(function(){n.el_.style.left=e.width*t+"px"}))},t}(Wi);Sa.prototype.options_={children:["timeTooltip"]},Wi.registerComponent("MouseTimeDisplay",Sa);var wa=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).setEventHandlers_(),i}h(t,e);var n=t.prototype;return n.setEventHandlers_=function(){var e=this;this.update_=Ti(this,this.update),this.update=ki(this.update_,bi),this.on(this.player_,["ended","durationchange","timeupdate"],this.update),this.player_.liveTracker&&this.on(this.player_.liveTracker,"liveedgechange",this.update),this.updateInterval=null,this.enableIntervalHandler_=function(t){return e.enableInterval_(t)},this.disableIntervalHandler_=function(t){return e.disableInterval_(t)},this.on(this.player_,["playing"],this.enableIntervalHandler_),this.on(this.player_,["ended","pause","waiting"],this.disableIntervalHandler_),"hidden"in s()&&"visibilityState"in s()&&this.on(s(),"visibilitychange",this.toggleVisibility_)},n.toggleVisibility_=function(e){"hidden"===s().visibilityState?(this.cancelNamedAnimationFrame("SeekBar#update"),this.cancelNamedAnimationFrame("Slider#update"),this.disableInterval_(e)):(this.player_.ended()||this.player_.paused()||this.enableInterval_(),this.update())},n.enableInterval_=function(){this.updateInterval||(this.updateInterval=this.setInterval(this.update,bi))},n.disableInterval_=function(e){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&e&&"ended"!==e.type||this.updateInterval&&(this.clearInterval(this.updateInterval),this.updateInterval=null)},n.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-progress-holder"},{"aria-label":this.localize("Progress Bar")})},n.update=function(t){var n=this;if("hidden"!==s().visibilityState){var i=e.prototype.update.call(this);return this.requestNamedAnimationFrame("SeekBar#update",(function(){var e=n.player_.ended()?n.player_.duration():n.getCurrentTime_(),t=n.player_.liveTracker,r=n.player_.duration();t&&t.isLive()&&(r=n.player_.liveTracker.liveCurrentTime()),n.percent_!==i&&(n.el_.setAttribute("aria-valuenow",(100*i).toFixed(2)),n.percent_=i),n.currentTime_===e&&n.duration_===r||(n.el_.setAttribute("aria-valuetext",n.localize("progress bar timing: currentTime={1} duration={2}",[ca(e,r),ca(r,r)],"{1} of {2}")),n.currentTime_=e,n.duration_=r),n.bar&&n.bar.update(jn(n.el()),n.getProgress())})),i}},n.userSeek_=function(e){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&this.player_.liveTracker.nextSeekedFromUser(),this.player_.currentTime(e)},n.getCurrentTime_=function(){return this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime()},n.getPercent=function(){var e,t=this.getCurrentTime_(),n=this.player_.liveTracker;return n&&n.isLive()?(e=(t-n.seekableStart())/n.liveWindow(),n.atLiveEdge()&&(e=1)):e=t/this.player_.duration(),e},n.handleMouseDown=function(t){Gn(t)&&(t.stopPropagation(),this.videoWasPlaying=!this.player_.paused(),this.player_.pause(),e.prototype.handleMouseDown.call(this,t))},n.handleMouseMove=function(e,t){if(void 0===t&&(t=!1),Gn(e)){var n;t||this.player_.scrubbing()||this.player_.scrubbing(!0);var i=this.calculateDistance(e),r=this.player_.liveTracker;if(r&&r.isLive()){if(i>=.99)return void r.seekToLiveEdge();var a=r.seekableStart(),s=r.liveCurrentTime();if((n=a+i*r.liveWindow())>=s&&(n=s),n<=a&&(n=a+.1),n===1/0)return}else(n=i*this.player_.duration())===this.player_.duration()&&(n-=.1);this.userSeek_(n)}},n.enable=function(){e.prototype.enable.call(this);var t=this.getChild("mouseTimeDisplay");t&&t.show()},n.disable=function(){e.prototype.disable.call(this);var t=this.getChild("mouseTimeDisplay");t&&t.hide()},n.handleMouseUp=function(t){e.prototype.handleMouseUp.call(this,t),t&&t.stopPropagation(),this.player_.scrubbing(!1),this.player_.trigger({type:"timeupdate",target:this,manuallyTriggered:!0}),this.videoWasPlaying?Ji(this.player_.play()):this.update_()},n.stepForward=function(){this.userSeek_(this.player_.currentTime()+5)},n.stepBack=function(){this.userSeek_(this.player_.currentTime()-5)},n.handleAction=function(e){this.player_.paused()?this.player_.play():this.player_.pause()},n.handleKeyDown=function(t){var n=this.player_.liveTracker;if(u().isEventKey(t,"Space")||u().isEventKey(t,"Enter"))t.preventDefault(),t.stopPropagation(),this.handleAction(t);else if(u().isEventKey(t,"Home"))t.preventDefault(),t.stopPropagation(),this.userSeek_(0);else if(u().isEventKey(t,"End"))t.preventDefault(),t.stopPropagation(),n&&n.isLive()?this.userSeek_(n.liveCurrentTime()):this.userSeek_(this.player_.duration());else if(/^[0-9]$/.test(u()(t))){t.preventDefault(),t.stopPropagation();var i=10*(u().codes[u()(t)]-u().codes[0])/100;n&&n.isLive()?this.userSeek_(n.seekableStart()+n.liveWindow()*i):this.userSeek_(this.player_.duration()*i)}else u().isEventKey(t,"PgDn")?(t.preventDefault(),t.stopPropagation(),this.userSeek_(this.player_.currentTime()-60)):u().isEventKey(t,"PgUp")?(t.preventDefault(),t.stopPropagation(),this.userSeek_(this.player_.currentTime()+60)):e.prototype.handleKeyDown.call(this,t)},n.dispose=function(){this.disableInterval_(),this.off(this.player_,["ended","durationchange","timeupdate"],this.update),this.player_.liveTracker&&this.off(this.player_.liveTracker,"liveedgechange",this.update),this.off(this.player_,["playing"],this.enableIntervalHandler_),this.off(this.player_,["ended","pause","waiting"],this.disableIntervalHandler_),"hidden"in s()&&"visibilityState"in s()&&this.off(s(),"visibilitychange",this.toggleVisibility_),e.prototype.dispose.call(this)},t}(_a);wa.prototype.options_={children:["loadProgressBar","playProgressBar"],barName:"playProgressBar"},gn||tn||wa.prototype.options_.children.splice(1,0,"mouseTimeDisplay"),Wi.registerComponent("SeekBar",wa);var Ea=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).handleMouseMove=ki(Ti(c(i),i.handleMouseMove),bi),i.throttledHandleMouseSeek=ki(Ti(c(i),i.handleMouseSeek),bi),i.handleMouseUpHandler_=function(e){return i.handleMouseUp(e)},i.handleMouseDownHandler_=function(e){return i.handleMouseDown(e)},i.enable(),i}h(t,e);var n=t.prototype;return n.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-progress-control vjs-control"})},n.handleMouseMove=function(e){var t=this.getChild("seekBar");if(t){var n=t.getChild("playProgressBar"),i=t.getChild("mouseTimeDisplay");if(n||i){var r=t.el(),a=Fn(r),s=Bn(r,e).x;s=ya(s,0,1),i&&i.update(a,s),n&&n.update(a,t.getProgress())}}},n.handleMouseSeek=function(e){var t=this.getChild("seekBar");t&&t.handleMouseMove(e)},n.enabled=function(){return this.enabled_},n.disable=function(){if(this.children().forEach((function(e){return e.disable&&e.disable()})),this.enabled()&&(this.off(["mousedown","touchstart"],this.handleMouseDownHandler_),this.off(this.el_,"mousemove",this.handleMouseMove),this.removeListenersAddedOnMousedownAndTouchstart(),this.addClass("disabled"),this.enabled_=!1,this.player_.scrubbing())){var e=this.getChild("seekBar");this.player_.scrubbing(!1),e.videoWasPlaying&&Ji(this.player_.play())}},n.enable=function(){this.children().forEach((function(e){return e.enable&&e.enable()})),this.enabled()||(this.on(["mousedown","touchstart"],this.handleMouseDownHandler_),this.on(this.el_,"mousemove",this.handleMouseMove),this.removeClass("disabled"),this.enabled_=!0)},n.removeListenersAddedOnMousedownAndTouchstart=function(){var e=this.el_.ownerDocument;this.off(e,"mousemove",this.throttledHandleMouseSeek),this.off(e,"touchmove",this.throttledHandleMouseSeek),this.off(e,"mouseup",this.handleMouseUpHandler_),this.off(e,"touchend",this.handleMouseUpHandler_)},n.handleMouseDown=function(e){var t=this.el_.ownerDocument,n=this.getChild("seekBar");n&&n.handleMouseDown(e),this.on(t,"mousemove",this.throttledHandleMouseSeek),this.on(t,"touchmove",this.throttledHandleMouseSeek),this.on(t,"mouseup",this.handleMouseUpHandler_),this.on(t,"touchend",this.handleMouseUpHandler_)},n.handleMouseUp=function(e){var t=this.getChild("seekBar");t&&t.handleMouseUp(e),this.removeListenersAddedOnMousedownAndTouchstart()},t}(Wi);Ea.prototype.options_={children:["seekBar"]},Wi.registerComponent("ProgressControl",Ea);var Ca=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).on(t,["enterpictureinpicture","leavepictureinpicture"],(function(e){return i.handlePictureInPictureChange(e)})),i.on(t,["disablepictureinpicturechanged","loadedmetadata"],(function(e){return i.handlePictureInPictureEnabledChange(e)})),i.on(t,["loadedmetadata","audioonlymodechange","audiopostermodechange"],(function(){"audio"===t.currentType().substring(0,5)||t.audioPosterMode()||t.audioOnlyMode()?(t.isInPictureInPicture()&&t.exitPictureInPicture(),i.hide()):i.show()})),i.disable(),i}h(t,e);var n=t.prototype;return n.buildCSSClass=function(){return"vjs-picture-in-picture-control "+e.prototype.buildCSSClass.call(this)},n.handlePictureInPictureEnabledChange=function(){s().pictureInPictureEnabled&&!1===this.player_.disablePictureInPicture()?this.enable():this.disable()},n.handlePictureInPictureChange=function(e){this.player_.isInPictureInPicture()?this.controlText("Exit Picture-in-Picture"):this.controlText("Picture-in-Picture"),this.handlePictureInPictureEnabledChange()},n.handleClick=function(e){this.player_.isInPictureInPicture()?this.player_.exitPictureInPicture():this.player_.requestPictureInPicture()},t}(ra);Ca.prototype.controlText_="Picture-in-Picture",Wi.registerComponent("PictureInPictureToggle",Ca);var Pa=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).on(t,"fullscreenchange",(function(e){return i.handleFullscreenChange(e)})),!1===s()[t.fsApi_.fullscreenEnabled]&&i.disable(),i}h(t,e);var n=t.prototype;return n.buildCSSClass=function(){return"vjs-fullscreen-control "+e.prototype.buildCSSClass.call(this)},n.handleFullscreenChange=function(e){this.player_.isFullscreen()?this.controlText("Non-Fullscreen"):this.controlText("Fullscreen")},n.handleClick=function(e){this.player_.isFullscreen()?this.player_.exitFullscreen():this.player_.requestFullscreen()},t}(ra);Pa.prototype.controlText_="Fullscreen",Wi.registerComponent("FullscreenToggle",Pa);var Ia=function(e,t){t.tech_&&!t.tech_.featuresVolumeControl&&e.addClass("vjs-hidden"),e.on(t,"loadstart",(function(){t.tech_.featuresVolumeControl?e.removeClass("vjs-hidden"):e.addClass("vjs-hidden")}))},Aa=function(e){function t(){return e.apply(this,arguments)||this}return h(t,e),t.prototype.createEl=function(){var t=e.prototype.createEl.call(this,"div",{className:"vjs-volume-level"});return t.appendChild(e.prototype.createEl.call(this,"span",{className:"vjs-control-text"})),t},t}(Wi);Wi.registerComponent("VolumeLevel",Aa);var Oa=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).update=ki(Ti(c(i),i.update),bi),i}h(t,e);var n=t.prototype;return n.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-volume-tooltip"},{"aria-hidden":"true"})},n.update=function(e,t,n,i){if(!n){var r=jn(this.el_),a=jn(this.player_.el()),s=e.width*t;if(!a||!r)return;var o=e.left-a.left+s,l=e.width-s+(a.right-e.right),u=r.width/2;o<u?u+=u-o:l<u&&(u=l),u<0?u=0:u>r.width&&(u=r.width),this.el_.style.right="-"+u+"px"}this.write(i+"%")},n.write=function(e){wn(this.el_,e)},n.updateVolume=function(e,t,n,i,r){var a=this;this.requestNamedAnimationFrame("VolumeLevelTooltip#updateVolume",(function(){a.update(e,t,n,i.toFixed(0)),r&&r()}))},t}(Wi);Wi.registerComponent("VolumeLevelTooltip",Oa);var La=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).update=ki(Ti(c(i),i.update),bi),i}h(t,e);var n=t.prototype;return n.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-mouse-display"})},n.update=function(e,t,n){var i=this,r=100*t;this.getChild("volumeLevelTooltip").updateVolume(e,t,n,r,(function(){n?i.el_.style.bottom=e.height*t+"px":i.el_.style.left=e.width*t+"px"}))},t}(Wi);La.prototype.options_={children:["volumeLevelTooltip"]},Wi.registerComponent("MouseVolumeLevelDisplay",La);var Ma=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).on("slideractive",(function(e){return i.updateLastVolume_(e)})),i.on(t,"volumechange",(function(e){return i.updateARIAAttributes(e)})),t.ready((function(){return i.updateARIAAttributes()})),i}h(t,e);var n=t.prototype;return n.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-volume-bar vjs-slider-bar"},{"aria-label":this.localize("Volume Level"),"aria-live":"polite"})},n.handleMouseDown=function(t){Gn(t)&&e.prototype.handleMouseDown.call(this,t)},n.handleMouseMove=function(e){var t=this.getChild("mouseVolumeLevelDisplay");if(t){var n=this.el(),i=jn(n),r=this.vertical(),a=Bn(n,e);a=r?a.y:a.x,a=ya(a,0,1),t.update(i,a,r)}Gn(e)&&(this.checkMuted(),this.player_.volume(this.calculateDistance(e)))},n.checkMuted=function(){this.player_.muted()&&this.player_.muted(!1)},n.getPercent=function(){return this.player_.muted()?0:this.player_.volume()},n.stepForward=function(){this.checkMuted(),this.player_.volume(this.player_.volume()+.1)},n.stepBack=function(){this.checkMuted(),this.player_.volume(this.player_.volume()-.1)},n.updateARIAAttributes=function(e){var t=this.player_.muted()?0:this.volumeAsPercentage_();this.el_.setAttribute("aria-valuenow",t),this.el_.setAttribute("aria-valuetext",t+"%")},n.volumeAsPercentage_=function(){return Math.round(100*this.player_.volume())},n.updateLastVolume_=function(){var e=this,t=this.player_.volume();this.one("sliderinactive",(function(){0===e.player_.volume()&&e.player_.lastVolume_(t)}))},t}(_a);Ma.prototype.options_={children:["volumeLevel"],barName:"volumeLevel"},gn||tn||Ma.prototype.options_.children.splice(0,0,"mouseVolumeLevelDisplay"),Ma.prototype.playerEvent="volumechange",Wi.registerComponent("VolumeBar",Ma);var Da=function(e){function t(t,n){var i;return void 0===n&&(n={}),n.vertical=n.vertical||!1,("undefined"===typeof n.volumeBar||Kt(n.volumeBar))&&(n.volumeBar=n.volumeBar||{},n.volumeBar.vertical=n.vertical),i=e.call(this,t,n)||this,Ia(c(i),t),i.throttledHandleMouseMove=ki(Ti(c(i),i.handleMouseMove),bi),i.handleMouseUpHandler_=function(e){return i.handleMouseUp(e)},i.on("mousedown",(function(e){return i.handleMouseDown(e)})),i.on("touchstart",(function(e){return i.handleMouseDown(e)})),i.on("mousemove",(function(e){return i.handleMouseMove(e)})),i.on(i.volumeBar,["focus","slideractive"],(function(){i.volumeBar.addClass("vjs-slider-active"),i.addClass("vjs-slider-active"),i.trigger("slideractive")})),i.on(i.volumeBar,["blur","sliderinactive"],(function(){i.volumeBar.removeClass("vjs-slider-active"),i.removeClass("vjs-slider-active"),i.trigger("sliderinactive")})),i}h(t,e);var n=t.prototype;return n.createEl=function(){var t="vjs-volume-horizontal";return this.options_.vertical&&(t="vjs-volume-vertical"),e.prototype.createEl.call(this,"div",{className:"vjs-volume-control vjs-control "+t})},n.handleMouseDown=function(e){var t=this.el_.ownerDocument;this.on(t,"mousemove",this.throttledHandleMouseMove),this.on(t,"touchmove",this.throttledHandleMouseMove),this.on(t,"mouseup",this.handleMouseUpHandler_),this.on(t,"touchend",this.handleMouseUpHandler_)},n.handleMouseUp=function(e){var t=this.el_.ownerDocument;this.off(t,"mousemove",this.throttledHandleMouseMove),this.off(t,"touchmove",this.throttledHandleMouseMove),this.off(t,"mouseup",this.handleMouseUpHandler_),this.off(t,"touchend",this.handleMouseUpHandler_)},n.handleMouseMove=function(e){this.volumeBar.handleMouseMove(e)},t}(Wi);Da.prototype.options_={children:["volumeBar"]},Wi.registerComponent("VolumeControl",Da);var Ra=function(e,t){t.tech_&&!t.tech_.featuresMuteControl&&e.addClass("vjs-hidden"),e.on(t,"loadstart",(function(){t.tech_.featuresMuteControl?e.removeClass("vjs-hidden"):e.addClass("vjs-hidden")}))},Na=function(e){function t(t,n){var i;return i=e.call(this,t,n)||this,Ra(c(i),t),i.on(t,["loadstart","volumechange"],(function(e){return i.update(e)})),i}h(t,e);var n=t.prototype;return n.buildCSSClass=function(){return"vjs-mute-control "+e.prototype.buildCSSClass.call(this)},n.handleClick=function(e){var t=this.player_.volume(),n=this.player_.lastVolume_();if(0===t){var i=n<.1?.1:n;this.player_.volume(i),this.player_.muted(!1)}else this.player_.muted(!this.player_.muted())},n.update=function(e){this.updateIcon_(),this.updateControlText_()},n.updateIcon_=function(){var e=this.player_.volume(),t=3;gn&&this.player_.tech_&&this.player_.tech_.el_&&this.player_.muted(this.player_.tech_.el_.muted),0===e||this.player_.muted()?t=0:e<.33?t=1:e<.67&&(t=2);for(var n=0;n<4;n++)In(this.el_,"vjs-vol-"+n);Pn(this.el_,"vjs-vol-"+t)},n.updateControlText_=function(){var e=this.player_.muted()||0===this.player_.volume()?"Unmute":"Mute";this.controlText()!==e&&this.controlText(e)},t}(ra);Na.prototype.controlText_="Mute",Wi.registerComponent("MuteToggle",Na);var Ua=function(e){function t(t,n){var i;return void 0===n&&(n={}),"undefined"!==typeof n.inline?n.inline=n.inline:n.inline=!0,("undefined"===typeof n.volumeControl||Kt(n.volumeControl))&&(n.volumeControl=n.volumeControl||{},n.volumeControl.vertical=!n.inline),(i=e.call(this,t,n)||this).handleKeyPressHandler_=function(e){return i.handleKeyPress(e)},i.on(t,["loadstart"],(function(e){return i.volumePanelState_(e)})),i.on(i.muteToggle,"keyup",(function(e){return i.handleKeyPress(e)})),i.on(i.volumeControl,"keyup",(function(e){return i.handleVolumeControlKeyUp(e)})),i.on("keydown",(function(e){return i.handleKeyPress(e)})),i.on("mouseover",(function(e){return i.handleMouseOver(e)})),i.on("mouseout",(function(e){return i.handleMouseOut(e)})),i.on(i.volumeControl,["slideractive"],i.sliderActive_),i.on(i.volumeControl,["sliderinactive"],i.sliderInactive_),i}h(t,e);var n=t.prototype;return n.sliderActive_=function(){this.addClass("vjs-slider-active")},n.sliderInactive_=function(){this.removeClass("vjs-slider-active")},n.volumePanelState_=function(){this.volumeControl.hasClass("vjs-hidden")&&this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-hidden"),this.volumeControl.hasClass("vjs-hidden")&&!this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-mute-toggle-only")},n.createEl=function(){var t="vjs-volume-panel-horizontal";return this.options_.inline||(t="vjs-volume-panel-vertical"),e.prototype.createEl.call(this,"div",{className:"vjs-volume-panel vjs-control "+t})},n.dispose=function(){this.handleMouseOut(),e.prototype.dispose.call(this)},n.handleVolumeControlKeyUp=function(e){u().isEventKey(e,"Esc")&&this.muteToggle.focus()},n.handleMouseOver=function(e){this.addClass("vjs-hover"),fi(s(),"keyup",this.handleKeyPressHandler_)},n.handleMouseOut=function(e){this.removeClass("vjs-hover"),pi(s(),"keyup",this.handleKeyPressHandler_)},n.handleKeyPress=function(e){u().isEventKey(e,"Esc")&&this.handleMouseOut()},t}(Wi);Ua.prototype.options_={children:["muteToggle","volumeControl"]},Wi.registerComponent("VolumePanel",Ua);var ja=function(e){function t(t,n){var i;return i=e.call(this,t,n)||this,n&&(i.menuButton_=n.menuButton),i.focusedChild_=-1,i.on("keydown",(function(e){return i.handleKeyDown(e)})),i.boundHandleBlur_=function(e){return i.handleBlur(e)},i.boundHandleTapClick_=function(e){return i.handleTapClick(e)},i}h(t,e);var n=t.prototype;return n.addEventListenerForItem=function(e){e instanceof Wi&&(this.on(e,"blur",this.boundHandleBlur_),this.on(e,["tap","click"],this.boundHandleTapClick_))},n.removeEventListenerForItem=function(e){e instanceof Wi&&(this.off(e,"blur",this.boundHandleBlur_),this.off(e,["tap","click"],this.boundHandleTapClick_))},n.removeChild=function(t){"string"===typeof t&&(t=this.getChild(t)),this.removeEventListenerForItem(t),e.prototype.removeChild.call(this,t)},n.addItem=function(e){var t=this.addChild(e);t&&this.addEventListenerForItem(t)},n.createEl=function(){var t=this.options_.contentElType||"ul";this.contentEl_=Sn(t,{className:"vjs-menu-content"}),this.contentEl_.setAttribute("role","menu");var n=e.prototype.createEl.call(this,"div",{append:this.contentEl_,className:"vjs-menu"});return n.appendChild(this.contentEl_),fi(n,"click",(function(e){e.preventDefault(),e.stopImmediatePropagation()})),n},n.dispose=function(){this.contentEl_=null,this.boundHandleBlur_=null,this.boundHandleTapClick_=null,e.prototype.dispose.call(this)},n.handleBlur=function(e){var t=e.relatedTarget||s().activeElement;if(!this.children().some((function(e){return e.el()===t}))){var n=this.menuButton_;n&&n.buttonPressed_&&t!==n.el().firstChild&&n.unpressButton()}},n.handleTapClick=function(e){if(this.menuButton_){this.menuButton_.unpressButton();var t=this.children();if(!Array.isArray(t))return;var n=t.filter((function(t){return t.el()===e.target}))[0];if(!n)return;"CaptionSettingsMenuItem"!==n.name()&&this.menuButton_.focus()}},n.handleKeyDown=function(e){u().isEventKey(e,"Left")||u().isEventKey(e,"Down")?(e.preventDefault(),e.stopPropagation(),this.stepForward()):(u().isEventKey(e,"Right")||u().isEventKey(e,"Up"))&&(e.preventDefault(),e.stopPropagation(),this.stepBack())},n.stepForward=function(){var e=0;void 0!==this.focusedChild_&&(e=this.focusedChild_+1),this.focus(e)},n.stepBack=function(){var e=0;void 0!==this.focusedChild_&&(e=this.focusedChild_-1),this.focus(e)},n.focus=function(e){void 0===e&&(e=0);var t=this.children().slice();t.length&&t[0].hasClass("vjs-menu-title")&&t.shift(),t.length>0&&(e<0?e=0:e>=t.length&&(e=t.length-1),this.focusedChild_=e,t[e].el_.focus())},t}(Wi);Wi.registerComponent("Menu",ja);var Fa=function(e){function t(t,n){var i;void 0===n&&(n={}),(i=e.call(this,t,n)||this).menuButton_=new ra(t,n),i.menuButton_.controlText(i.controlText_),i.menuButton_.el_.setAttribute("aria-haspopup","true");var r=ra.prototype.buildCSSClass();i.menuButton_.el_.className=i.buildCSSClass()+" "+r,i.menuButton_.removeClass("vjs-control"),i.addChild(i.menuButton_),i.update(),i.enabled_=!0;var a=function(e){return i.handleClick(e)};return i.handleMenuKeyUp_=function(e){return i.handleMenuKeyUp(e)},i.on(i.menuButton_,"tap",a),i.on(i.menuButton_,"click",a),i.on(i.menuButton_,"keydown",(function(e){return i.handleKeyDown(e)})),i.on(i.menuButton_,"mouseenter",(function(){i.addClass("vjs-hover"),i.menu.show(),fi(s(),"keyup",i.handleMenuKeyUp_)})),i.on("mouseleave",(function(e){return i.handleMouseLeave(e)})),i.on("keydown",(function(e){return i.handleSubmenuKeyDown(e)})),i}h(t,e);var n=t.prototype;return n.update=function(){var e=this.createMenu();this.menu&&(this.menu.dispose(),this.removeChild(this.menu)),this.menu=e,this.addChild(e),this.buttonPressed_=!1,this.menuButton_.el_.setAttribute("aria-expanded","false"),this.items&&this.items.length<=this.hideThreshold_?(this.hide(),this.menu.contentEl_.removeAttribute("role")):(this.show(),this.menu.contentEl_.setAttribute("role","menu"))},n.createMenu=function(){var e=new ja(this.player_,{menuButton:this});if(this.hideThreshold_=0,this.options_.title){var t=Sn("li",{className:"vjs-menu-title",textContent:ji(this.options_.title),tabIndex:-1}),n=new Wi(this.player_,{el:t});e.addItem(n)}if(this.items=this.createItems(),this.items)for(var i=0;i<this.items.length;i++)e.addItem(this.items[i]);return e},n.createItems=function(){},n.createEl=function(){return e.prototype.createEl.call(this,"div",{className:this.buildWrapperCSSClass()},{})},n.buildWrapperCSSClass=function(){var t="vjs-menu-button";return!0===this.options_.inline?t+="-inline":t+="-popup","vjs-menu-button "+t+" "+ra.prototype.buildCSSClass()+" "+e.prototype.buildCSSClass.call(this)},n.buildCSSClass=function(){var t="vjs-menu-button";return!0===this.options_.inline?t+="-inline":t+="-popup","vjs-menu-button "+t+" "+e.prototype.buildCSSClass.call(this)},n.controlText=function(e,t){return void 0===t&&(t=this.menuButton_.el()),this.menuButton_.controlText(e,t)},n.dispose=function(){this.handleMouseLeave(),e.prototype.dispose.call(this)},n.handleClick=function(e){this.buttonPressed_?this.unpressButton():this.pressButton()},n.handleMouseLeave=function(e){this.removeClass("vjs-hover"),pi(s(),"keyup",this.handleMenuKeyUp_)},n.focus=function(){this.menuButton_.focus()},n.blur=function(){this.menuButton_.blur()},n.handleKeyDown=function(e){u().isEventKey(e,"Esc")||u().isEventKey(e,"Tab")?(this.buttonPressed_&&this.unpressButton(),u().isEventKey(e,"Tab")||(e.preventDefault(),this.menuButton_.focus())):(u().isEventKey(e,"Up")||u().isEventKey(e,"Down"))&&(this.buttonPressed_||(e.preventDefault(),this.pressButton()))},n.handleMenuKeyUp=function(e){(u().isEventKey(e,"Esc")||u().isEventKey(e,"Tab"))&&this.removeClass("vjs-hover")},n.handleSubmenuKeyPress=function(e){this.handleSubmenuKeyDown(e)},n.handleSubmenuKeyDown=function(e){(u().isEventKey(e,"Esc")||u().isEventKey(e,"Tab"))&&(this.buttonPressed_&&this.unpressButton(),u().isEventKey(e,"Tab")||(e.preventDefault(),this.menuButton_.focus()))},n.pressButton=function(){if(this.enabled_){if(this.buttonPressed_=!0,this.menu.show(),this.menu.lockShowing(),this.menuButton_.el_.setAttribute("aria-expanded","true"),gn&&kn())return;this.menu.focus()}},n.unpressButton=function(){this.enabled_&&(this.buttonPressed_=!1,this.menu.unlockShowing(),this.menu.hide(),this.menuButton_.el_.setAttribute("aria-expanded","false"))},n.disable=function(){this.unpressButton(),this.enabled_=!1,this.addClass("vjs-disabled"),this.menuButton_.disable()},n.enable=function(){this.enabled_=!0,this.removeClass("vjs-disabled"),this.menuButton_.enable()},t}(Wi);Wi.registerComponent("MenuButton",Fa);var Ba=function(e){function t(t,n){var i,r=n.tracks;if((i=e.call(this,t,n)||this).items.length<=1&&i.hide(),!r)return c(i);var a=Ti(c(i),i.update);return r.addEventListener("removetrack",a),r.addEventListener("addtrack",a),r.addEventListener("labelchange",a),i.player_.on("ready",a),i.player_.on("dispose",(function(){r.removeEventListener("removetrack",a),r.removeEventListener("addtrack",a),r.removeEventListener("labelchange",a)})),i}return h(t,e),t}(Fa);Wi.registerComponent("TrackButton",Ba);var za=["Tab","Esc","Up","Down","Right","Left"],Va=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).selectable=n.selectable,i.isSelected_=n.selected||!1,i.multiSelectable=n.multiSelectable,i.selected(i.isSelected_),i.selectable?i.multiSelectable?i.el_.setAttribute("role","menuitemcheckbox"):i.el_.setAttribute("role","menuitemradio"):i.el_.setAttribute("role","menuitem"),i}h(t,e);var n=t.prototype;return n.createEl=function(t,n,i){this.nonIconControl=!0;var r=e.prototype.createEl.call(this,"li",Gt({className:"vjs-menu-item",tabIndex:-1},n),i);return r.replaceChild(Sn("span",{className:"vjs-menu-item-text",textContent:this.localize(this.options_.label)}),r.querySelector(".vjs-icon-placeholder")),r},n.handleKeyDown=function(t){za.some((function(e){return u().isEventKey(t,e)}))||e.prototype.handleKeyDown.call(this,t)},n.handleClick=function(e){this.selected(!0)},n.selected=function(e){this.selectable&&(e?(this.addClass("vjs-selected"),this.el_.setAttribute("aria-checked","true"),this.controlText(", selected"),this.isSelected_=!0):(this.removeClass("vjs-selected"),this.el_.setAttribute("aria-checked","false"),this.controlText(""),this.isSelected_=!1))},t}(Yr);Wi.registerComponent("MenuItem",Va);var Ha=function(e){function t(t,n){var i,a=n.track,o=t.textTracks();n.label=a.label||a.language||"Unknown",n.selected="showing"===a.mode,(i=e.call(this,t,n)||this).track=a,i.kinds=(n.kinds||[n.kind||i.track.kind]).filter(Boolean);var l,u=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];i.handleTracksChange.apply(c(i),t)},d=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];i.handleSelectedLanguageChange.apply(c(i),t)};(t.on(["loadstart","texttrackchange"],u),o.addEventListener("change",u),o.addEventListener("selectedlanguagechange",d),i.on("dispose",(function(){t.off(["loadstart","texttrackchange"],u),o.removeEventListener("change",u),o.removeEventListener("selectedlanguagechange",d)})),void 0===o.onchange)&&i.on(["tap","click"],(function(){if("object"!==typeof r().Event)try{l=new(r().Event)("change")}catch(e){}l||(l=s().createEvent("Event")).initEvent("change",!0,!0),o.dispatchEvent(l)}));return i.handleTracksChange(),i}h(t,e);var n=t.prototype;return n.handleClick=function(t){var n=this.track,i=this.player_.textTracks();if(e.prototype.handleClick.call(this,t),i)for(var r=0;r<i.length;r++){var a=i[r];-1!==this.kinds.indexOf(a.kind)&&(a===n?"showing"!==a.mode&&(a.mode="showing"):"disabled"!==a.mode&&(a.mode="disabled"))}},n.handleTracksChange=function(e){var t="showing"===this.track.mode;t!==this.isSelected_&&this.selected(t)},n.handleSelectedLanguageChange=function(e){if("showing"===this.track.mode){var t=this.player_.cache_.selectedLanguage;if(t&&t.enabled&&t.language===this.track.language&&t.kind!==this.track.kind)return;this.player_.cache_.selectedLanguage={enabled:!0,language:this.track.language,kind:this.track.kind}}},n.dispose=function(){this.track=null,e.prototype.dispose.call(this)},t}(Va);Wi.registerComponent("TextTrackMenuItem",Ha);var Wa=function(e){function t(t,n){return n.track={player:t,kind:n.kind,kinds:n.kinds,default:!1,mode:"disabled"},n.kinds||(n.kinds=[n.kind]),n.label?n.track.label=n.label:n.track.label=n.kinds.join(" and ")+" off",n.selectable=!0,n.multiSelectable=!1,e.call(this,t,n)||this}h(t,e);var n=t.prototype;return n.handleTracksChange=function(e){for(var t=this.player().textTracks(),n=!0,i=0,r=t.length;i<r;i++){var a=t[i];if(this.options_.kinds.indexOf(a.kind)>-1&&"showing"===a.mode){n=!1;break}}n!==this.isSelected_&&this.selected(n)},n.handleSelectedLanguageChange=function(e){for(var t=this.player().textTracks(),n=!0,i=0,r=t.length;i<r;i++){var a=t[i];if(["captions","descriptions","subtitles"].indexOf(a.kind)>-1&&"showing"===a.mode){n=!1;break}}n&&(this.player_.cache_.selectedLanguage={enabled:!1})},t}(Ha);Wi.registerComponent("OffTextTrackMenuItem",Wa);var qa=function(e){function t(t,n){return void 0===n&&(n={}),n.tracks=t.textTracks(),e.call(this,t,n)||this}return h(t,e),t.prototype.createItems=function(e,t){var n;void 0===e&&(e=[]),void 0===t&&(t=Ha),this.label_&&(n=this.label_+" off"),e.push(new Wa(this.player_,{kinds:this.kinds_,kind:this.kind_,label:n})),this.hideThreshold_+=1;var i=this.player_.textTracks();Array.isArray(this.kinds_)||(this.kinds_=[this.kind_]);for(var r=0;r<i.length;r++){var a=i[r];if(this.kinds_.indexOf(a.kind)>-1){var s=new t(this.player_,{track:a,kinds:this.kinds_,kind:this.kind_,selectable:!0,multiSelectable:!1});s.addClass("vjs-"+a.kind+"-menu-item"),e.push(s)}}return e},t}(Ba);Wi.registerComponent("TextTrackButton",qa);var Ga=function(e){function t(t,n){var i,r=n.track,a=n.cue,s=t.currentTime();return n.selectable=!0,n.multiSelectable=!1,n.label=a.text,n.selected=a.startTime<=s&&s<a.endTime,(i=e.call(this,t,n)||this).track=r,i.cue=a,i}return h(t,e),t.prototype.handleClick=function(t){e.prototype.handleClick.call(this),this.player_.currentTime(this.cue.startTime)},t}(Va);Wi.registerComponent("ChaptersTrackMenuItem",Ga);var Xa=function(e){function t(t,n,i){var r;return(r=e.call(this,t,n,i)||this).selectCurrentItem_=function(){r.items.forEach((function(e){e.selected(r.track_.activeCues[0]===e.cue)}))},r}h(t,e);var n=t.prototype;return n.buildCSSClass=function(){return"vjs-chapters-button "+e.prototype.buildCSSClass.call(this)},n.buildWrapperCSSClass=function(){return"vjs-chapters-button "+e.prototype.buildWrapperCSSClass.call(this)},n.update=function(t){if(!t||!t.track||"chapters"===t.track.kind){var n=this.findChaptersTrack();n!==this.track_?(this.setTrack(n),e.prototype.update.call(this)):(!this.items||n&&n.cues&&n.cues.length!==this.items.length)&&e.prototype.update.call(this)}},n.setTrack=function(e){if(this.track_!==e){if(this.updateHandler_||(this.updateHandler_=this.update.bind(this)),this.track_){var t=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);t&&t.removeEventListener("load",this.updateHandler_),this.track_.removeEventListener("cuechange",this.selectCurrentItem_),this.track_=null}if(this.track_=e,this.track_){this.track_.mode="hidden";var n=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);n&&n.addEventListener("load",this.updateHandler_),this.track_.addEventListener("cuechange",this.selectCurrentItem_)}}},n.findChaptersTrack=function(){for(var e=this.player_.textTracks()||[],t=e.length-1;t>=0;t--){var n=e[t];if(n.kind===this.kind_)return n}},n.getMenuCaption=function(){return this.track_&&this.track_.label?this.track_.label:this.localize(ji(this.kind_))},n.createMenu=function(){return this.options_.title=this.getMenuCaption(),e.prototype.createMenu.call(this)},n.createItems=function(){var e=[];if(!this.track_)return e;var t=this.track_.cues;if(!t)return e;for(var n=0,i=t.length;n<i;n++){var r=t[n],a=new Ga(this.player_,{track:this.track_,cue:r});e.push(a)}return e},t}(qa);Xa.prototype.kind_="chapters",Xa.prototype.controlText_="Chapters",Wi.registerComponent("ChaptersButton",Xa);var Ka=function(e){function t(t,n,i){var r;r=e.call(this,t,n,i)||this;var a=t.textTracks(),s=Ti(c(r),r.handleTracksChange);return a.addEventListener("change",s),r.on("dispose",(function(){a.removeEventListener("change",s)})),r}h(t,e);var n=t.prototype;return n.handleTracksChange=function(e){for(var t=this.player().textTracks(),n=!1,i=0,r=t.length;i<r;i++){var a=t[i];if(a.kind!==this.kind_&&"showing"===a.mode){n=!0;break}}n?this.disable():this.enable()},n.buildCSSClass=function(){return"vjs-descriptions-button "+e.prototype.buildCSSClass.call(this)},n.buildWrapperCSSClass=function(){return"vjs-descriptions-button "+e.prototype.buildWrapperCSSClass.call(this)},t}(qa);Ka.prototype.kind_="descriptions",Ka.prototype.controlText_="Descriptions",Wi.registerComponent("DescriptionsButton",Ka);var $a=function(e){function t(t,n,i){return e.call(this,t,n,i)||this}h(t,e);var n=t.prototype;return n.buildCSSClass=function(){return"vjs-subtitles-button "+e.prototype.buildCSSClass.call(this)},n.buildWrapperCSSClass=function(){return"vjs-subtitles-button "+e.prototype.buildWrapperCSSClass.call(this)},t}(qa);$a.prototype.kind_="subtitles",$a.prototype.controlText_="Subtitles",Wi.registerComponent("SubtitlesButton",$a);var Ya=function(e){function t(t,n){var i;return n.track={player:t,kind:n.kind,label:n.kind+" settings",selectable:!1,default:!1,mode:"disabled"},n.selectable=!1,n.name="CaptionSettingsMenuItem",(i=e.call(this,t,n)||this).addClass("vjs-texttrack-settings"),i.controlText(", opens "+n.kind+" settings dialog"),i}return h(t,e),t.prototype.handleClick=function(e){this.player().getChild("textTrackSettings").open()},t}(Ha);Wi.registerComponent("CaptionSettingsMenuItem",Ya);var Qa=function(e){function t(t,n,i){return e.call(this,t,n,i)||this}h(t,e);var n=t.prototype;return n.buildCSSClass=function(){return"vjs-captions-button "+e.prototype.buildCSSClass.call(this)},n.buildWrapperCSSClass=function(){return"vjs-captions-button "+e.prototype.buildWrapperCSSClass.call(this)},n.createItems=function(){var t=[];return this.player().tech_&&this.player().tech_.featuresNativeTextTracks||!this.player().getChild("textTrackSettings")||(t.push(new Ya(this.player_,{kind:this.kind_})),this.hideThreshold_+=1),e.prototype.createItems.call(this,t)},t}(qa);Qa.prototype.kind_="captions",Qa.prototype.controlText_="Captions",Wi.registerComponent("CaptionsButton",Qa);var Ja=function(e){function t(){return e.apply(this,arguments)||this}return h(t,e),t.prototype.createEl=function(t,n,i){var r=e.prototype.createEl.call(this,t,n,i),a=r.querySelector(".vjs-menu-item-text");return"captions"===this.options_.track.kind&&(a.appendChild(Sn("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),a.appendChild(Sn("span",{className:"vjs-control-text",textContent:" "+this.localize("Captions")}))),r},t}(Ha);Wi.registerComponent("SubsCapsMenuItem",Ja);var Za=function(e){function t(t,n){var i;return void 0===n&&(n={}),(i=e.call(this,t,n)||this).label_="subtitles",["en","en-us","en-ca","fr-ca"].indexOf(i.player_.language_)>-1&&(i.label_="captions"),i.menuButton_.controlText(ji(i.label_)),i}h(t,e);var n=t.prototype;return n.buildCSSClass=function(){return"vjs-subs-caps-button "+e.prototype.buildCSSClass.call(this)},n.buildWrapperCSSClass=function(){return"vjs-subs-caps-button "+e.prototype.buildWrapperCSSClass.call(this)},n.createItems=function(){var t=[];return this.player().tech_&&this.player().tech_.featuresNativeTextTracks||!this.player().getChild("textTrackSettings")||(t.push(new Ya(this.player_,{kind:this.label_})),this.hideThreshold_+=1),t=e.prototype.createItems.call(this,t,Ja)},t}(qa);Za.prototype.kinds_=["captions","subtitles"],Za.prototype.controlText_="Subtitles",Wi.registerComponent("SubsCapsButton",Za);var es=function(e){function t(t,n){var i,r=n.track,a=t.audioTracks();n.label=r.label||r.language||"Unknown",n.selected=r.enabled,(i=e.call(this,t,n)||this).track=r,i.addClass("vjs-"+r.kind+"-menu-item");var s=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];i.handleTracksChange.apply(c(i),t)};return a.addEventListener("change",s),i.on("dispose",(function(){a.removeEventListener("change",s)})),i}h(t,e);var n=t.prototype;return n.createEl=function(t,n,i){var r=e.prototype.createEl.call(this,t,n,i),a=r.querySelector(".vjs-menu-item-text");return"main-desc"===this.options_.track.kind&&(a.appendChild(Sn("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),a.appendChild(Sn("span",{className:"vjs-control-text",textContent:" "+this.localize("Descriptions")}))),r},n.handleClick=function(t){if(e.prototype.handleClick.call(this,t),this.track.enabled=!0,this.player_.tech_.featuresNativeAudioTracks)for(var n=this.player_.audioTracks(),i=0;i<n.length;i++){var r=n[i];r!==this.track&&(r.enabled=r===this.track)}},n.handleTracksChange=function(e){this.selected(this.track.enabled)},t}(Va);Wi.registerComponent("AudioTrackMenuItem",es);var ts=function(e){function t(t,n){return void 0===n&&(n={}),n.tracks=t.audioTracks(),e.call(this,t,n)||this}h(t,e);var n=t.prototype;return n.buildCSSClass=function(){return"vjs-audio-button "+e.prototype.buildCSSClass.call(this)},n.buildWrapperCSSClass=function(){return"vjs-audio-button "+e.prototype.buildWrapperCSSClass.call(this)},n.createItems=function(e){void 0===e&&(e=[]),this.hideThreshold_=1;for(var t=this.player_.audioTracks(),n=0;n<t.length;n++){var i=t[n];e.push(new es(this.player_,{track:i,selectable:!0,multiSelectable:!1}))}return e},t}(Ba);ts.prototype.controlText_="Audio Track",Wi.registerComponent("AudioTrackButton",ts);var ns=function(e){function t(t,n){var i,r=n.rate,a=parseFloat(r,10);return n.label=r,n.selected=a===t.playbackRate(),n.selectable=!0,n.multiSelectable=!1,(i=e.call(this,t,n)||this).label=r,i.rate=a,i.on(t,"ratechange",(function(e){return i.update(e)})),i}h(t,e);var n=t.prototype;return n.handleClick=function(t){e.prototype.handleClick.call(this),this.player().playbackRate(this.rate)},n.update=function(e){this.selected(this.player().playbackRate()===this.rate)},t}(Va);ns.prototype.contentElType="button",Wi.registerComponent("PlaybackRateMenuItem",ns);var is=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).menuButton_.el_.setAttribute("aria-describedby",i.labelElId_),i.updateVisibility(),i.updateLabel(),i.on(t,"loadstart",(function(e){return i.updateVisibility(e)})),i.on(t,"ratechange",(function(e){return i.updateLabel(e)})),i.on(t,"playbackrateschange",(function(e){return i.handlePlaybackRateschange(e)})),i}h(t,e);var n=t.prototype;return n.createEl=function(){var t=e.prototype.createEl.call(this);return this.labelElId_="vjs-playback-rate-value-label-"+this.id_,this.labelEl_=Sn("div",{className:"vjs-playback-rate-value",id:this.labelElId_,textContent:"1x"}),t.appendChild(this.labelEl_),t},n.dispose=function(){this.labelEl_=null,e.prototype.dispose.call(this)},n.buildCSSClass=function(){return"vjs-playback-rate "+e.prototype.buildCSSClass.call(this)},n.buildWrapperCSSClass=function(){return"vjs-playback-rate "+e.prototype.buildWrapperCSSClass.call(this)},n.createItems=function(){for(var e=this.playbackRates(),t=[],n=e.length-1;n>=0;n--)t.push(new ns(this.player(),{rate:e[n]+"x"}));return t},n.updateARIAAttributes=function(){this.el().setAttribute("aria-valuenow",this.player().playbackRate())},n.handleClick=function(e){var t=this.player().playbackRate(),n=this.playbackRates(),i=(n.indexOf(t)+1)%n.length;this.player().playbackRate(n[i])},n.handlePlaybackRateschange=function(e){this.update()},n.playbackRates=function(){var e=this.player();return e.playbackRates&&e.playbackRates()||[]},n.playbackRateSupported=function(){return this.player().tech_&&this.player().tech_.featuresPlaybackRate&&this.playbackRates()&&this.playbackRates().length>0},n.updateVisibility=function(e){this.playbackRateSupported()?this.removeClass("vjs-hidden"):this.addClass("vjs-hidden")},n.updateLabel=function(e){this.playbackRateSupported()&&(this.labelEl_.textContent=this.player().playbackRate()+"x")},t}(Fa);is.prototype.controlText_="Playback Rate",Wi.registerComponent("PlaybackRateMenuButton",is);var rs=function(e){function t(){return e.apply(this,arguments)||this}h(t,e);var n=t.prototype;return n.buildCSSClass=function(){return"vjs-spacer "+e.prototype.buildCSSClass.call(this)},n.createEl=function(t,n,i){return void 0===t&&(t="div"),void 0===n&&(n={}),void 0===i&&(i={}),n.className||(n.className=this.buildCSSClass()),e.prototype.createEl.call(this,t,n,i)},t}(Wi);Wi.registerComponent("Spacer",rs);var as=function(e){function t(){return e.apply(this,arguments)||this}h(t,e);var n=t.prototype;return n.buildCSSClass=function(){return"vjs-custom-control-spacer "+e.prototype.buildCSSClass.call(this)},n.createEl=function(){return e.prototype.createEl.call(this,"div",{className:this.buildCSSClass(),textContent:"\xa0"})},t}(rs);Wi.registerComponent("CustomControlSpacer",as);var ss=function(e){function t(){return e.apply(this,arguments)||this}return h(t,e),t.prototype.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-control-bar",dir:"ltr"})},t}(Wi);ss.prototype.options_={children:["playToggle","volumePanel","currentTimeDisplay","timeDivider","durationDisplay","progressControl","liveDisplay","seekToLive","remainingTimeDisplay","customControlSpacer","playbackRateMenuButton","chaptersButton","descriptionsButton","subsCapsButton","audioTrackButton","fullscreenToggle"]},"exitPictureInPicture"in s()&&ss.prototype.options_.children.splice(ss.prototype.options_.children.length-1,0,"pictureInPictureToggle"),Wi.registerComponent("ControlBar",ss);var os=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).on(t,"error",(function(e){return i.open(e)})),i}h(t,e);var n=t.prototype;return n.buildCSSClass=function(){return"vjs-error-display "+e.prototype.buildCSSClass.call(this)},n.content=function(){var e=this.player().error();return e?this.localize(e.message):""},t}(ir);os.prototype.options_=o({},ir.prototype.options_,{pauseOnOpen:!1,fillAlways:!0,temporary:!1,uncloseable:!0}),Wi.registerComponent("ErrorDisplay",os);var ls="vjs-text-track-settings",us=["#000","Black"],cs=["#00F","Blue"],ds=["#0FF","Cyan"],hs=["#0F0","Green"],fs=["#F0F","Magenta"],ps=["#F00","Red"],gs=["#FFF","White"],ms=["#FF0","Yellow"],vs=["1","Opaque"],ys=["0.5","Semi-Transparent"],_s=["0","Transparent"],bs={backgroundColor:{selector:".vjs-bg-color > select",id:"captions-background-color-%s",label:"Color",options:[us,gs,ps,hs,cs,ms,fs,ds]},backgroundOpacity:{selector:".vjs-bg-opacity > select",id:"captions-background-opacity-%s",label:"Transparency",options:[vs,ys,_s]},color:{selector:".vjs-fg-color > select",id:"captions-foreground-color-%s",label:"Color",options:[gs,us,ps,hs,cs,ms,fs,ds]},edgeStyle:{selector:".vjs-edge-style > select",id:"%s",label:"Text Edge Style",options:[["none","None"],["raised","Raised"],["depressed","Depressed"],["uniform","Uniform"],["dropshadow","Dropshadow"]]},fontFamily:{selector:".vjs-font-family > select",id:"captions-font-family-%s",label:"Font Family",options:[["proportionalSansSerif","Proportional Sans-Serif"],["monospaceSansSerif","Monospace Sans-Serif"],["proportionalSerif","Proportional Serif"],["monospaceSerif","Monospace Serif"],["casual","Casual"],["script","Script"],["small-caps","Small Caps"]]},fontPercent:{selector:".vjs-font-percent > select",id:"captions-font-size-%s",label:"Font Size",options:[["0.50","50%"],["0.75","75%"],["1.00","100%"],["1.25","125%"],["1.50","150%"],["1.75","175%"],["2.00","200%"],["3.00","300%"],["4.00","400%"]],default:2,parser:function(e){return"1.00"===e?null:Number(e)}},textOpacity:{selector:".vjs-text-opacity > select",id:"captions-foreground-opacity-%s",label:"Transparency",options:[vs,ys]},windowColor:{selector:".vjs-window-color > select",id:"captions-window-color-%s",label:"Color"},windowOpacity:{selector:".vjs-window-opacity > select",id:"captions-window-opacity-%s",label:"Transparency",options:[_s,ys,vs]}};function Ts(e,t){if(t&&(e=t(e)),e&&"none"!==e)return e}bs.windowColor.options=bs.backgroundColor.options;var ks=function(e){function t(t,n){var i;return n.temporary=!1,(i=e.call(this,t,n)||this).updateDisplay=i.updateDisplay.bind(c(i)),i.fill(),i.hasBeenOpened_=i.hasBeenFilled_=!0,i.endDialog=Sn("p",{className:"vjs-control-text",textContent:i.localize("End of dialog window.")}),i.el().appendChild(i.endDialog),i.setDefaults(),void 0===n.persistTextTrackSettings&&(i.options_.persistTextTrackSettings=i.options_.playerOptions.persistTextTrackSettings),i.on(i.$(".vjs-done-button"),"click",(function(){i.saveSettings(),i.close()})),i.on(i.$(".vjs-default-button"),"click",(function(){i.setDefaults(),i.updateDisplay()})),qt(bs,(function(e){i.on(i.$(e.selector),"change",i.updateDisplay)})),i.options_.persistTextTrackSettings&&i.restoreSettings(),i}h(t,e);var n=t.prototype;return n.dispose=function(){this.endDialog=null,e.prototype.dispose.call(this)},n.createElSelect_=function(e,t,n){var i=this;void 0===t&&(t=""),void 0===n&&(n="label");var r=bs[e],a=r.id.replace("%s",this.id_),s=[t,a].join(" ").trim();return["<"+n+' id="'+a+'" class="'+("label"===n?"vjs-label":"")+'">',this.localize(r.label),"</"+n+">",'<select aria-labelledby="'+s+'">'].concat(r.options.map((function(e){var t=a+"-"+e[1].replace(/\W+/g,"");return['<option id="'+t+'" value="'+e[0]+'" ','aria-labelledby="'+s+" "+t+'">',i.localize(e[1]),"</option>"].join("")}))).concat("</select>").join("")},n.createElFgColor_=function(){var e="captions-text-legend-"+this.id_;return['<fieldset class="vjs-fg-color vjs-track-setting">','<legend id="'+e+'">',this.localize("Text"),"</legend>",this.createElSelect_("color",e),'<span class="vjs-text-opacity vjs-opacity">',this.createElSelect_("textOpacity",e),"</span>","</fieldset>"].join("")},n.createElBgColor_=function(){var e="captions-background-"+this.id_;return['<fieldset class="vjs-bg-color vjs-track-setting">','<legend id="'+e+'">',this.localize("Background"),"</legend>",this.createElSelect_("backgroundColor",e),'<span class="vjs-bg-opacity vjs-opacity">',this.createElSelect_("backgroundOpacity",e),"</span>","</fieldset>"].join("")},n.createElWinColor_=function(){var e="captions-window-"+this.id_;return['<fieldset class="vjs-window-color vjs-track-setting">','<legend id="'+e+'">',this.localize("Window"),"</legend>",this.createElSelect_("windowColor",e),'<span class="vjs-window-opacity vjs-opacity">',this.createElSelect_("windowOpacity",e),"</span>","</fieldset>"].join("")},n.createElColors_=function(){return Sn("div",{className:"vjs-track-settings-colors",innerHTML:[this.createElFgColor_(),this.createElBgColor_(),this.createElWinColor_()].join("")})},n.createElFont_=function(){return Sn("div",{className:"vjs-track-settings-font",innerHTML:['<fieldset class="vjs-font-percent vjs-track-setting">',this.createElSelect_("fontPercent","","legend"),"</fieldset>",'<fieldset class="vjs-edge-style vjs-track-setting">',this.createElSelect_("edgeStyle","","legend"),"</fieldset>",'<fieldset class="vjs-font-family vjs-track-setting">',this.createElSelect_("fontFamily","","legend"),"</fieldset>"].join("")})},n.createElControls_=function(){var e=this.localize("restore all settings to the default values");return Sn("div",{className:"vjs-track-settings-controls",innerHTML:['<button type="button" class="vjs-default-button" title="'+e+'">',this.localize("Reset"),'<span class="vjs-control-text"> '+e+"</span>","</button>",'<button type="button" class="vjs-done-button">'+this.localize("Done")+"</button>"].join("")})},n.content=function(){return[this.createElColors_(),this.createElFont_(),this.createElControls_()]},n.label=function(){return this.localize("Caption Settings Dialog")},n.description=function(){return this.localize("Beginning of dialog window. Escape will cancel and close the window.")},n.buildCSSClass=function(){return e.prototype.buildCSSClass.call(this)+" vjs-text-track-settings"},n.getValues=function(){var e,t,n,i=this;return t=function(e,t,n){var r,a,s=(r=i.$(t.selector),a=t.parser,Ts(r.options[r.options.selectedIndex].value,a));return void 0!==s&&(e[n]=s),e},void 0===(n={})&&(n=0),Wt(e=bs).reduce((function(n,i){return t(n,e[i],i)}),n)},n.setValues=function(e){var t=this;qt(bs,(function(n,i){!function(e,t,n){if(t)for(var i=0;i<e.options.length;i++)if(Ts(e.options[i].value,n)===t){e.selectedIndex=i;break}}(t.$(n.selector),e[i],n.parser)}))},n.setDefaults=function(){var e=this;qt(bs,(function(t){var n=t.hasOwnProperty("default")?t.default:0;e.$(t.selector).selectedIndex=n}))},n.restoreSettings=function(){var e;try{e=JSON.parse(r().localStorage.getItem(ls))}catch(t){zt.warn(t)}e&&this.setValues(e)},n.saveSettings=function(){if(this.options_.persistTextTrackSettings){var e=this.getValues();try{Object.keys(e).length?r().localStorage.setItem(ls,JSON.stringify(e)):r().localStorage.removeItem(ls)}catch(t){zt.warn(t)}}},n.updateDisplay=function(){var e=this.player_.getChild("textTrackDisplay");e&&e.updateDisplay()},n.conditionalBlur_=function(){this.previouslyActiveEl_=null;var e=this.player_.controlBar,t=e&&e.subsCapsButton,n=e&&e.captionsButton;t?t.focus():n&&n.focus()},t}(ir);Wi.registerComponent("TextTrackSettings",ks);var xs=function(e){function t(t,n){var i,a=n.ResizeObserver||r().ResizeObserver;null===n.ResizeObserver&&(a=!1);var s=Fi({createEl:!a,reportTouchActivity:!1},n);return(i=e.call(this,t,s)||this).ResizeObserver=n.ResizeObserver||r().ResizeObserver,i.loadListener_=null,i.resizeObserver_=null,i.debouncedHandler_=xi((function(){i.resizeHandler()}),100,!1,c(i)),a?(i.resizeObserver_=new i.ResizeObserver(i.debouncedHandler_),i.resizeObserver_.observe(t.el())):(i.loadListener_=function(){if(i.el_&&i.el_.contentWindow){var e=i.debouncedHandler_,t=i.unloadListener_=function(){pi(this,"resize",e),pi(this,"unload",t),t=null};fi(i.el_.contentWindow,"unload",t),fi(i.el_.contentWindow,"resize",e)}},i.one("load",i.loadListener_)),i}h(t,e);var n=t.prototype;return n.createEl=function(){return e.prototype.createEl.call(this,"iframe",{className:"vjs-resize-manager",tabIndex:-1,title:this.localize("No content")},{"aria-hidden":"true"})},n.resizeHandler=function(){this.player_&&this.player_.trigger&&this.player_.trigger("playerresize")},n.dispose=function(){this.debouncedHandler_&&this.debouncedHandler_.cancel(),this.resizeObserver_&&(this.player_.el()&&this.resizeObserver_.unobserve(this.player_.el()),this.resizeObserver_.disconnect()),this.loadListener_&&this.off("load",this.loadListener_),this.el_&&this.el_.contentWindow&&this.unloadListener_&&this.unloadListener_.call(this.el_.contentWindow),this.ResizeObserver=null,this.resizeObserver=null,this.debouncedHandler_=null,this.loadListener_=null,e.prototype.dispose.call(this)},t}(Wi);Wi.registerComponent("ResizeManager",xs);var Ss={trackingThreshold:20,liveTolerance:15},ws=function(e){function t(t,n){var i,r=Fi(Ss,n,{createEl:!1});return(i=e.call(this,t,r)||this).handleVisibilityChange_=function(e){return i.handleVisibilityChange(e)},i.trackLiveHandler_=function(){return i.trackLive_()},i.handlePlay_=function(e){return i.handlePlay(e)},i.handleFirstTimeupdate_=function(e){return i.handleFirstTimeupdate(e)},i.handleSeeked_=function(e){return i.handleSeeked(e)},i.seekToLiveEdge_=function(e){return i.seekToLiveEdge(e)},i.reset_(),i.on(i.player_,"durationchange",(function(e){return i.handleDurationchange(e)})),i.on(i.player_,"canplay",(function(){return i.toggleTracking()})),un&&"hidden"in s()&&"visibilityState"in s()&&i.on(s(),"visibilitychange",i.handleVisibilityChange_),i}h(t,e);var n=t.prototype;return n.handleVisibilityChange=function(){this.player_.duration()===1/0&&(s().hidden?this.stopTracking():this.startTracking())},n.trackLive_=function(){var e=this.player_.seekable();if(e&&e.length){var t=Number(r().performance.now().toFixed(4)),n=-1===this.lastTime_?0:(t-this.lastTime_)/1e3;this.lastTime_=t,this.pastSeekEnd_=this.pastSeekEnd()+n;var i=this.liveCurrentTime(),a=this.player_.currentTime(),s=this.player_.paused()||this.seekedBehindLive_||Math.abs(i-a)>this.options_.liveTolerance;this.timeupdateSeen_&&i!==1/0||(s=!1),s!==this.behindLiveEdge_&&(this.behindLiveEdge_=s,this.trigger("liveedgechange"))}},n.handleDurationchange=function(){this.toggleTracking()},n.toggleTracking=function(){this.player_.duration()===1/0&&this.liveWindow()>=this.options_.trackingThreshold?(this.player_.options_.liveui&&this.player_.addClass("vjs-liveui"),this.startTracking()):(this.player_.removeClass("vjs-liveui"),this.stopTracking())},n.startTracking=function(){this.isTracking()||(this.timeupdateSeen_||(this.timeupdateSeen_=this.player_.hasStarted()),this.trackingInterval_=this.setInterval(this.trackLiveHandler_,bi),this.trackLive_(),this.on(this.player_,["play","pause"],this.trackLiveHandler_),this.timeupdateSeen_?this.on(this.player_,"seeked",this.handleSeeked_):(this.one(this.player_,"play",this.handlePlay_),this.one(this.player_,"timeupdate",this.handleFirstTimeupdate_)))},n.handleFirstTimeupdate=function(){this.timeupdateSeen_=!0,this.on(this.player_,"seeked",this.handleSeeked_)},n.handleSeeked=function(){var e=Math.abs(this.liveCurrentTime()-this.player_.currentTime());this.seekedBehindLive_=this.nextSeekedFromUser_&&e>2,this.nextSeekedFromUser_=!1,this.trackLive_()},n.handlePlay=function(){this.one(this.player_,"timeupdate",this.seekToLiveEdge_)},n.reset_=function(){this.lastTime_=-1,this.pastSeekEnd_=0,this.lastSeekEnd_=-1,this.behindLiveEdge_=!0,this.timeupdateSeen_=!1,this.seekedBehindLive_=!1,this.nextSeekedFromUser_=!1,this.clearInterval(this.trackingInterval_),this.trackingInterval_=null,this.off(this.player_,["play","pause"],this.trackLiveHandler_),this.off(this.player_,"seeked",this.handleSeeked_),this.off(this.player_,"play",this.handlePlay_),this.off(this.player_,"timeupdate",this.handleFirstTimeupdate_),this.off(this.player_,"timeupdate",this.seekToLiveEdge_)},n.nextSeekedFromUser=function(){this.nextSeekedFromUser_=!0},n.stopTracking=function(){this.isTracking()&&(this.reset_(),this.trigger("liveedgechange"))},n.seekableEnd=function(){for(var e=this.player_.seekable(),t=[],n=e?e.length:0;n--;)t.push(e.end(n));return t.length?t.sort()[t.length-1]:1/0},n.seekableStart=function(){for(var e=this.player_.seekable(),t=[],n=e?e.length:0;n--;)t.push(e.start(n));return t.length?t.sort()[0]:0},n.liveWindow=function(){var e=this.liveCurrentTime();return e===1/0?0:e-this.seekableStart()},n.isLive=function(){return this.isTracking()},n.atLiveEdge=function(){return!this.behindLiveEdge()},n.liveCurrentTime=function(){return this.pastSeekEnd()+this.seekableEnd()},n.pastSeekEnd=function(){var e=this.seekableEnd();return-1!==this.lastSeekEnd_&&e!==this.lastSeekEnd_&&(this.pastSeekEnd_=0),this.lastSeekEnd_=e,this.pastSeekEnd_},n.behindLiveEdge=function(){return this.behindLiveEdge_},n.isTracking=function(){return"number"===typeof this.trackingInterval_},n.seekToLiveEdge=function(){this.seekedBehindLive_=!1,this.atLiveEdge()||(this.nextSeekedFromUser_=!1,this.player_.currentTime(this.liveCurrentTime()))},n.dispose=function(){this.off(s(),"visibilitychange",this.handleVisibilityChange_),this.stopTracking(),e.prototype.dispose.call(this)},t}(Wi);Wi.registerComponent("LiveTracker",ws);var Es,Cs=function(e){var t=e.el();if(t.hasAttribute("src"))return e.triggerSourceset(t.src),!0;var n=e.$$("source"),i=[],r="";if(!n.length)return!1;for(var a=0;a<n.length;a++){var s=n[a].src;s&&-1===i.indexOf(s)&&i.push(s)}return!!i.length&&(1===i.length&&(r=i[0]),e.triggerSourceset(r),!0)},Ps=Object.defineProperty({},"innerHTML",{get:function(){return this.cloneNode(!0).innerHTML},set:function(e){var t=s().createElement(this.nodeName.toLowerCase());t.innerHTML=e;for(var n=s().createDocumentFragment();t.childNodes.length;)n.appendChild(t.childNodes[0]);return this.innerText="",r().Element.prototype.appendChild.call(this,n),this.innerHTML}}),Is=function(e,t){for(var n={},i=0;i<e.length&&!((n=Object.getOwnPropertyDescriptor(e[i],t))&&n.set&&n.get);i++);return n.enumerable=!0,n.configurable=!0,n},As=function(e){var t=e.el();if(!t.resetSourceWatch_){var n={},i=function(e){return Is([e.el(),r().HTMLMediaElement.prototype,r().Element.prototype,Ps],"innerHTML")}(e),a=function(n){return function(){for(var i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];var s=n.apply(t,r);return Cs(e),s}};["append","appendChild","insertAdjacentHTML"].forEach((function(e){t[e]&&(n[e]=t[e],t[e]=a(n[e]))})),Object.defineProperty(t,"innerHTML",Fi(i,{set:a(i.set)})),t.resetSourceWatch_=function(){t.resetSourceWatch_=null,Object.keys(n).forEach((function(e){t[e]=n[e]})),Object.defineProperty(t,"innerHTML",i)},e.one("sourceset",t.resetSourceWatch_)}},Os=Object.defineProperty({},"src",{get:function(){return this.hasAttribute("src")?_r(r().Element.prototype.getAttribute.call(this,"src")):""},set:function(e){return r().Element.prototype.setAttribute.call(this,"src",e),e}}),Ls=function(e){if(e.featuresSourceset){var t=e.el();if(!t.resetSourceset_){var n=function(e){return Is([e.el(),r().HTMLMediaElement.prototype,Os],"src")}(e),i=t.setAttribute,a=t.load;Object.defineProperty(t,"src",Fi(n,{set:function(i){var r=n.set.call(t,i);return e.triggerSourceset(t.src),r}})),t.setAttribute=function(n,r){var a=i.call(t,n,r);return/src/i.test(n)&&e.triggerSourceset(t.src),a},t.load=function(){var n=a.call(t);return Cs(e)||(e.triggerSourceset(""),As(e)),n},t.currentSrc?e.triggerSourceset(t.currentSrc):Cs(e)||As(e),t.resetSourceset_=function(){t.resetSourceset_=null,t.load=a,t.setAttribute=i,Object.defineProperty(t,"src",n),t.resetSourceWatch_&&t.resetSourceWatch_()}}}},Ms=function(e,t,n,i){void 0===i&&(i=!0);var r=function(n){return Object.defineProperty(e,t,{value:n,enumerable:!0,writable:!0})},a={configurable:!0,enumerable:!0,get:function(){var e=n();return r(e),e}};return i&&(a.set=r),Object.defineProperty(e,t,a)},Ds=function(e){function t(t,n){var i;i=e.call(this,t,n)||this;var r=t.source,a=!1;if(i.featuresVideoFrameCallback=i.featuresVideoFrameCallback&&"VIDEO"===i.el_.tagName,r&&(i.el_.currentSrc!==r.src||t.tag&&3===t.tag.initNetworkState_)?i.setSource(r):i.handleLateInit_(i.el_),t.enableSourceset&&i.setupSourcesetHandling_(),i.isScrubbing_=!1,i.el_.hasChildNodes()){for(var s=i.el_.childNodes,o=s.length,l=[];o--;){var u=s[o];"track"===u.nodeName.toLowerCase()&&(i.featuresNativeTextTracks?(i.remoteTextTrackEls().addTrackElement_(u),i.remoteTextTracks().addTrack(u.track),i.textTracks().addTrack(u.track),a||i.el_.hasAttribute("crossorigin")||!Tr(u.src)||(a=!0)):l.push(u))}for(var c=0;c<l.length;c++)i.el_.removeChild(l[c])}return i.proxyNativeTracks_(),i.featuresNativeTextTracks&&a&&zt.warn("Text Tracks are being loaded from another origin but the crossorigin attribute isn't used.\nThis may prevent text tracks from loading."),i.restoreMetadataTracksInIOSNativePlayer_(),(hn||pn||rn)&&!0===t.nativeControlsForTouch&&i.setControls(!0),i.proxyWebkitFullscreen_(),i.triggerReady(),i}h(t,e);var n=t.prototype;return n.dispose=function(){this.el_&&this.el_.resetSourceset_&&this.el_.resetSourceset_(),t.disposeMediaElement(this.el_),this.options_=null,e.prototype.dispose.call(this)},n.setupSourcesetHandling_=function(){Ls(this)},n.restoreMetadataTracksInIOSNativePlayer_=function(){var e,t=this.textTracks(),n=function(){e=[];for(var n=0;n<t.length;n++){var i=t[n];"metadata"===i.kind&&e.push({track:i,storedMode:i.mode})}};n(),t.addEventListener("change",n),this.on("dispose",(function(){return t.removeEventListener("change",n)}));var i=function n(){for(var i=0;i<e.length;i++){var r=e[i];"disabled"===r.track.mode&&r.track.mode!==r.storedMode&&(r.track.mode=r.storedMode)}t.removeEventListener("change",n)};this.on("webkitbeginfullscreen",(function(){t.removeEventListener("change",n),t.removeEventListener("change",i),t.addEventListener("change",i)})),this.on("webkitendfullscreen",(function(){t.removeEventListener("change",n),t.addEventListener("change",n),t.removeEventListener("change",i)}))},n.overrideNative_=function(e,t){var n=this;if(t===this["featuresNative"+e+"Tracks"]){var i=e.toLowerCase();this[i+"TracksListeners_"]&&Object.keys(this[i+"TracksListeners_"]).forEach((function(e){n.el()[i+"Tracks"].removeEventListener(e,n[i+"TracksListeners_"][e])})),this["featuresNative"+e+"Tracks"]=!t,this[i+"TracksListeners_"]=null,this.proxyNativeTracksForType_(i)}},n.overrideNativeAudioTracks=function(e){this.overrideNative_("Audio",e)},n.overrideNativeVideoTracks=function(e){this.overrideNative_("Video",e)},n.proxyNativeTracksForType_=function(e){var t=this,n=Or[e],i=this.el()[n.getterName],r=this[n.getterName]();if(this["featuresNative"+n.capitalName+"Tracks"]&&i&&i.addEventListener){var a={change:function(n){var i={type:"change",target:r,currentTarget:r,srcElement:r};r.trigger(i),"text"===e&&t[Lr.remoteText.getterName]().trigger(i)},addtrack:function(e){r.addTrack(e.track)},removetrack:function(e){r.removeTrack(e.track)}},s=function(){for(var e=[],t=0;t<r.length;t++){for(var n=!1,a=0;a<i.length;a++)if(i[a]===r[t]){n=!0;break}n||e.push(r[t])}for(;e.length;)r.removeTrack(e.shift())};this[n.getterName+"Listeners_"]=a,Object.keys(a).forEach((function(e){var n=a[e];i.addEventListener(e,n),t.on("dispose",(function(t){return i.removeEventListener(e,n)}))})),this.on("loadstart",s),this.on("dispose",(function(e){return t.off("loadstart",s)}))}},n.proxyNativeTracks_=function(){var e=this;Or.names.forEach((function(t){e.proxyNativeTracksForType_(t)}))},n.createEl=function(){var e=this.options_.tag;if(!e||!this.options_.playerElIngest&&!this.movingMediaElementInDOM){if(e){var n=e.cloneNode(!0);e.parentNode&&e.parentNode.insertBefore(n,e),t.disposeMediaElement(e),e=n}else{e=s().createElement("video");var i=Fi({},this.options_.tag&&Ln(this.options_.tag));hn&&!0===this.options_.nativeControlsForTouch||delete i.controls,On(e,Gt(i,{id:this.options_.techId,class:"vjs-tech"}))}e.playerId=this.options_.playerId}"undefined"!==typeof this.options_.preload&&Dn(e,"preload",this.options_.preload),void 0!==this.options_.disablePictureInPicture&&(e.disablePictureInPicture=this.options_.disablePictureInPicture);for(var r=["loop","muted","playsinline","autoplay"],a=0;a<r.length;a++){var o=r[a],l=this.options_[o];"undefined"!==typeof l&&(l?Dn(e,o,o):Rn(e,o),e[o]=l)}return e},n.handleLateInit_=function(e){if(0!==e.networkState&&3!==e.networkState){if(0===e.readyState){var t=!1,n=function(){t=!0};this.on("loadstart",n);var i=function(){t||this.trigger("loadstart")};return this.on("loadedmetadata",i),void this.ready((function(){this.off("loadstart",n),this.off("loadedmetadata",i),t||this.trigger("loadstart")}))}var r=["loadstart"];r.push("loadedmetadata"),e.readyState>=2&&r.push("loadeddata"),e.readyState>=3&&r.push("canplay"),e.readyState>=4&&r.push("canplaythrough"),this.ready((function(){r.forEach((function(e){this.trigger(e)}),this)}))}},n.setScrubbing=function(e){this.isScrubbing_=e},n.scrubbing=function(){return this.isScrubbing_},n.setCurrentTime=function(e){try{this.isScrubbing_&&this.el_.fastSeek&&mn?this.el_.fastSeek(e):this.el_.currentTime=e}catch(t){zt(t,"Video is not ready. (Video.js)")}},n.duration=function(){var e=this;if(this.el_.duration===1/0&&tn&&on&&0===this.el_.currentTime){return this.on("timeupdate",(function t(){e.el_.currentTime>0&&(e.el_.duration===1/0&&e.trigger("durationchange"),e.off("timeupdate",t))})),NaN}return this.el_.duration||NaN},n.width=function(){return this.el_.offsetWidth},n.height=function(){return this.el_.offsetHeight},n.proxyWebkitFullscreen_=function(){var e=this;if("webkitDisplayingFullscreen"in this.el_){var t=function(){this.trigger("fullscreenchange",{isFullscreen:!1}),this.el_.controls&&!this.options_.nativeControlsForTouch&&this.controls()&&(this.el_.controls=!1)},n=function(){"webkitPresentationMode"in this.el_&&"picture-in-picture"!==this.el_.webkitPresentationMode&&(this.one("webkitendfullscreen",t),this.trigger("fullscreenchange",{isFullscreen:!0,nativeIOSFullscreen:!0}))};this.on("webkitbeginfullscreen",n),this.on("dispose",(function(){e.off("webkitbeginfullscreen",n),e.off("webkitendfullscreen",t)}))}},n.supportsFullScreen=function(){if("function"===typeof this.el_.webkitEnterFullScreen){var e=r().navigator&&r().navigator.userAgent||"";if(/Android/.test(e)||!/Chrome|Mac OS X 10.5/.test(e))return!0}return!1},n.enterFullScreen=function(){var e=this.el_;if(e.paused&&e.networkState<=e.HAVE_METADATA)Ji(this.el_.play()),this.setTimeout((function(){e.pause();try{e.webkitEnterFullScreen()}catch(t){this.trigger("fullscreenerror",t)}}),0);else try{e.webkitEnterFullScreen()}catch(t){this.trigger("fullscreenerror",t)}},n.exitFullScreen=function(){this.el_.webkitDisplayingFullscreen?this.el_.webkitExitFullScreen():this.trigger("fullscreenerror",new Error("The video is not fullscreen"))},n.requestPictureInPicture=function(){return this.el_.requestPictureInPicture()},n.requestVideoFrameCallback=function(t){return this.featuresVideoFrameCallback&&!this.el_.webkitKeys?this.el_.requestVideoFrameCallback(t):e.prototype.requestVideoFrameCallback.call(this,t)},n.cancelVideoFrameCallback=function(t){this.featuresVideoFrameCallback&&!this.el_.webkitKeys?this.el_.cancelVideoFrameCallback(t):e.prototype.cancelVideoFrameCallback.call(this,t)},n.src=function(e){if(void 0===e)return this.el_.src;this.setSrc(e)},n.reset=function(){t.resetMediaElement(this.el_)},n.currentSrc=function(){return this.currentSource_?this.currentSource_.src:this.el_.currentSrc},n.setControls=function(e){this.el_.controls=!!e},n.addTextTrack=function(t,n,i){return this.featuresNativeTextTracks?this.el_.addTextTrack(t,n,i):e.prototype.addTextTrack.call(this,t,n,i)},n.createRemoteTextTrack=function(t){if(!this.featuresNativeTextTracks)return e.prototype.createRemoteTextTrack.call(this,t);var n=s().createElement("track");return t.kind&&(n.kind=t.kind),t.label&&(n.label=t.label),(t.language||t.srclang)&&(n.srclang=t.language||t.srclang),t.default&&(n.default=t.default),t.id&&(n.id=t.id),t.src&&(n.src=t.src),n},n.addRemoteTextTrack=function(t,n){var i=e.prototype.addRemoteTextTrack.call(this,t,n);return this.featuresNativeTextTracks&&this.el().appendChild(i),i},n.removeRemoteTextTrack=function(t){if(e.prototype.removeRemoteTextTrack.call(this,t),this.featuresNativeTextTracks)for(var n=this.$$("track"),i=n.length;i--;)t!==n[i]&&t!==n[i].track||this.el().removeChild(n[i])},n.getVideoPlaybackQuality=function(){if("function"===typeof this.el().getVideoPlaybackQuality)return this.el().getVideoPlaybackQuality();var e={};return"undefined"!==typeof this.el().webkitDroppedFrameCount&&"undefined"!==typeof this.el().webkitDecodedFrameCount&&(e.droppedVideoFrames=this.el().webkitDroppedFrameCount,e.totalVideoFrames=this.el().webkitDecodedFrameCount),r().performance&&"function"===typeof r().performance.now?e.creationTime=r().performance.now():r().performance&&r().performance.timing&&"number"===typeof r().performance.timing.navigationStart&&(e.creationTime=r().Date.now()-r().performance.timing.navigationStart),e},t}(Dr);Ms(Ds,"TEST_VID",(function(){if(bn()){var e=s().createElement("video"),t=s().createElement("track");return t.kind="captions",t.srclang="en",t.label="English",e.appendChild(t),e}})),Ds.isSupported=function(){try{Ds.TEST_VID.volume=.5}catch(e){return!1}return!(!Ds.TEST_VID||!Ds.TEST_VID.canPlayType)},Ds.canPlayType=function(e){return Ds.TEST_VID.canPlayType(e)},Ds.canPlaySource=function(e,t){return Ds.canPlayType(e.type)},Ds.canControlVolume=function(){try{var e=Ds.TEST_VID.volume;Ds.TEST_VID.volume=e/2+.1;var t=e!==Ds.TEST_VID.volume;return t&&gn?(r().setTimeout((function(){Ds&&Ds.prototype&&(Ds.prototype.featuresVolumeControl=e!==Ds.TEST_VID.volume)})),!1):t}catch(n){return!1}},Ds.canMuteVolume=function(){try{var e=Ds.TEST_VID.muted;return Ds.TEST_VID.muted=!e,Ds.TEST_VID.muted?Dn(Ds.TEST_VID,"muted","muted"):Rn(Ds.TEST_VID,"muted"),e!==Ds.TEST_VID.muted}catch(t){return!1}},Ds.canControlPlaybackRate=function(){if(tn&&on&&ln<58)return!1;try{var e=Ds.TEST_VID.playbackRate;return Ds.TEST_VID.playbackRate=e/2+.1,e!==Ds.TEST_VID.playbackRate}catch(t){return!1}},Ds.canOverrideAttributes=function(){try{var e=function(){};Object.defineProperty(s().createElement("video"),"src",{get:e,set:e}),Object.defineProperty(s().createElement("audio"),"src",{get:e,set:e}),Object.defineProperty(s().createElement("video"),"innerHTML",{get:e,set:e}),Object.defineProperty(s().createElement("audio"),"innerHTML",{get:e,set:e})}catch(t){return!1}return!0},Ds.supportsNativeTextTracks=function(){return mn||gn&&on},Ds.supportsNativeVideoTracks=function(){return!(!Ds.TEST_VID||!Ds.TEST_VID.videoTracks)},Ds.supportsNativeAudioTracks=function(){return!(!Ds.TEST_VID||!Ds.TEST_VID.audioTracks)},Ds.Events=["loadstart","suspend","abort","error","emptied","stalled","loadedmetadata","loadeddata","canplay","canplaythrough","playing","waiting","seeking","seeked","ended","durationchange","timeupdate","progress","play","pause","ratechange","resize","volumechange"],[["featuresMuteControl","canMuteVolume"],["featuresPlaybackRate","canControlPlaybackRate"],["featuresSourceset","canOverrideAttributes"],["featuresNativeTextTracks","supportsNativeTextTracks"],["featuresNativeVideoTracks","supportsNativeVideoTracks"],["featuresNativeAudioTracks","supportsNativeAudioTracks"]].forEach((function(e){var t=e[0],n=e[1];Ms(Ds.prototype,t,(function(){return Ds[n]()}),!0)})),Ds.prototype.featuresVolumeControl=Ds.canControlVolume(),Ds.prototype.movingMediaElementInDOM=!gn,Ds.prototype.featuresFullscreenResize=!0,Ds.prototype.featuresProgressEvents=!0,Ds.prototype.featuresTimeupdateEvents=!0,Ds.prototype.featuresVideoFrameCallback=!(!Ds.TEST_VID||!Ds.TEST_VID.requestVideoFrameCallback),Ds.patchCanPlayType=function(){nn>=4&&!an&&!on&&(Es=Ds.TEST_VID&&Ds.TEST_VID.constructor.prototype.canPlayType,Ds.TEST_VID.constructor.prototype.canPlayType=function(e){return e&&/^application\/(?:x-|vnd\.apple\.)mpegurl/i.test(e)?"maybe":Es.call(this,e)})},Ds.unpatchCanPlayType=function(){var e=Ds.TEST_VID.constructor.prototype.canPlayType;return Es&&(Ds.TEST_VID.constructor.prototype.canPlayType=Es),e},Ds.patchCanPlayType(),Ds.disposeMediaElement=function(e){if(e){for(e.parentNode&&e.parentNode.removeChild(e);e.hasChildNodes();)e.removeChild(e.firstChild);e.removeAttribute("src"),"function"===typeof e.load&&function(){try{e.load()}catch(t){}}()}},Ds.resetMediaElement=function(e){if(e){for(var t=e.querySelectorAll("source"),n=t.length;n--;)e.removeChild(t[n]);e.removeAttribute("src"),"function"===typeof e.load&&function(){try{e.load()}catch(t){}}()}},["muted","defaultMuted","autoplay","controls","loop","playsinline"].forEach((function(e){Ds.prototype[e]=function(){return this.el_[e]||this.el_.hasAttribute(e)}})),["muted","defaultMuted","autoplay","loop","playsinline"].forEach((function(e){Ds.prototype["set"+ji(e)]=function(t){this.el_[e]=t,t?this.el_.setAttribute(e,e):this.el_.removeAttribute(e)}})),["paused","currentTime","buffered","volume","poster","preload","error","seeking","seekable","ended","playbackRate","defaultPlaybackRate","disablePictureInPicture","played","networkState","readyState","videoWidth","videoHeight","crossOrigin"].forEach((function(e){Ds.prototype[e]=function(){return this.el_[e]}})),["volume","src","poster","preload","playbackRate","defaultPlaybackRate","disablePictureInPicture","crossOrigin"].forEach((function(e){Ds.prototype["set"+ji(e)]=function(t){this.el_[e]=t}})),["pause","load","play"].forEach((function(e){Ds.prototype[e]=function(){return this.el_[e]()}})),Dr.withSourceHandlers(Ds),Ds.nativeSourceHandler={},Ds.nativeSourceHandler.canPlayType=function(e){try{return Ds.TEST_VID.canPlayType(e)}catch(t){return""}},Ds.nativeSourceHandler.canHandleSource=function(e,t){if(e.type)return Ds.nativeSourceHandler.canPlayType(e.type);if(e.src){var n=br(e.src);return Ds.nativeSourceHandler.canPlayType("video/"+n)}return""},Ds.nativeSourceHandler.handleSource=function(e,t,n){t.setSrc(e.src)},Ds.nativeSourceHandler.dispose=function(){},Ds.registerSourceHandler(Ds.nativeSourceHandler),Dr.registerTech("Html5",Ds);var Rs=["progress","abort","suspend","emptied","stalled","loadedmetadata","loadeddata","timeupdate","resize","volumechange","texttrackchange"],Ns={canplay:"CanPlay",canplaythrough:"CanPlayThrough",playing:"Playing",seeked:"Seeked"},Us=["tiny","xsmall","small","medium","large","xlarge","huge"],js={};Us.forEach((function(e){var t="x"===e.charAt(0)?"x-"+e.substring(1):e;js[e]="vjs-layout-"+t}));var Fs={tiny:210,xsmall:320,small:425,medium:768,large:1440,xlarge:2560,huge:1/0},Bs=function(e){function t(n,i,r){var a;if(n.id=n.id||i.id||"vjs_video_"+ai(),(i=Gt(t.getTagSettings(n),i)).initChildren=!1,i.createEl=!1,i.evented=!1,i.reportTouchActivity=!1,!i.language)if("function"===typeof n.closest){var o=n.closest("[lang]");o&&o.getAttribute&&(i.language=o.getAttribute("lang"))}else for(var l=n;l&&1===l.nodeType;){if(Ln(l).hasOwnProperty("lang")){i.language=l.getAttribute("lang");break}l=l.parentNode}if((a=e.call(this,null,i,r)||this).boundDocumentFullscreenChange_=function(e){return a.documentFullscreenChange_(e)},a.boundFullWindowOnEscKey_=function(e){return a.fullWindowOnEscKey(e)},a.boundUpdateStyleEl_=function(e){return a.updateStyleEl_(e)},a.boundApplyInitTime_=function(e){return a.applyInitTime_(e)},a.boundUpdateCurrentBreakpoint_=function(e){return a.updateCurrentBreakpoint_(e)},a.boundHandleTechClick_=function(e){return a.handleTechClick_(e)},a.boundHandleTechDoubleClick_=function(e){return a.handleTechDoubleClick_(e)},a.boundHandleTechTouchStart_=function(e){return a.handleTechTouchStart_(e)},a.boundHandleTechTouchMove_=function(e){return a.handleTechTouchMove_(e)},a.boundHandleTechTouchEnd_=function(e){return a.handleTechTouchEnd_(e)},a.boundHandleTechTap_=function(e){return a.handleTechTap_(e)},a.isFullscreen_=!1,a.log=Vt(a.id_),a.fsApi_=Dt,a.isPosterFromTech_=!1,a.queuedCallbacks_=[],a.isReady_=!1,a.hasStarted_=!1,a.userActive_=!1,a.debugEnabled_=!1,a.audioOnlyMode_=!1,a.audioPosterMode_=!1,a.audioOnlyCache_={playerHeight:null,hiddenChildren:[]},!a.options_||!a.options_.techOrder||!a.options_.techOrder.length)throw new Error("No techOrder specified. Did you overwrite videojs.options instead of just changing the properties you want to override?");if(a.tag=n,a.tagAttributes=n&&Ln(n),a.language(a.options_.language),i.languages){var u={};Object.getOwnPropertyNames(i.languages).forEach((function(e){u[e.toLowerCase()]=i.languages[e]})),a.languages_=u}else a.languages_=t.prototype.options_.languages;a.resetCache_(),a.poster_=i.poster||"",a.controls_=!!i.controls,n.controls=!1,n.removeAttribute("controls"),a.changingSrc_=!1,a.playCallbacks_=[],a.playTerminatedQueue_=[],n.hasAttribute("autoplay")?a.autoplay(!0):a.autoplay(a.options_.autoplay),i.plugins&&Object.keys(i.plugins).forEach((function(e){if("function"!==typeof a[e])throw new Error('plugin "'+e+'" does not exist')})),a.scrubbing_=!1,a.el_=a.createEl(),Di(c(a),{eventBusKey:"el_"}),a.fsApi_.requestFullscreen&&(fi(s(),a.fsApi_.fullscreenchange,a.boundDocumentFullscreenChange_),a.on(a.fsApi_.fullscreenchange,a.boundDocumentFullscreenChange_)),a.fluid_&&a.on(["playerreset","resize"],a.boundUpdateStyleEl_);var d=Fi(a.options_);i.plugins&&Object.keys(i.plugins).forEach((function(e){a[e](i.plugins[e])})),i.debug&&a.debug(!0),a.options_.playerOptions=d,a.middleware_=[],a.playbackRates(i.playbackRates),a.initChildren(),a.isAudio("audio"===n.nodeName.toLowerCase()),a.controls()?a.addClass("vjs-controls-enabled"):a.addClass("vjs-controls-disabled"),a.el_.setAttribute("role","region"),a.isAudio()?a.el_.setAttribute("aria-label",a.localize("Audio Player")):a.el_.setAttribute("aria-label",a.localize("Video Player")),a.isAudio()&&a.addClass("vjs-audio"),a.flexNotSupported_()&&a.addClass("vjs-no-flex"),hn&&a.addClass("vjs-touch-enabled"),gn||a.addClass("vjs-workinghover"),t.players[a.id_]=c(a);var h=At.split(".")[0];return a.addClass("vjs-v"+h),a.userActive(!0),a.reportUserActivity(),a.one("play",(function(e){return a.listenForUserActivity_(e)})),a.on("stageclick",(function(e){return a.handleStageClick_(e)})),a.on("keydown",(function(e){return a.handleKeyDown(e)})),a.on("languagechange",(function(e){return a.handleLanguagechange(e)})),a.breakpoints(a.options_.breakpoints),a.responsive(a.options_.responsive),a.on("ready",(function(){a.audioPosterMode(a.options_.audioPosterMode),a.audioOnlyMode(a.options_.audioOnlyMode)})),a}h(t,e);var n=t.prototype;return n.dispose=function(){var n=this;this.trigger("dispose"),this.off("dispose"),pi(s(),this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_),pi(s(),"keydown",this.boundFullWindowOnEscKey_),this.styleEl_&&this.styleEl_.parentNode&&(this.styleEl_.parentNode.removeChild(this.styleEl_),this.styleEl_=null),t.players[this.id_]=null,this.tag&&this.tag.player&&(this.tag.player=null),this.el_&&this.el_.player&&(this.el_.player=null),this.tech_&&(this.tech_.dispose(),this.isPosterFromTech_=!1,this.poster_=""),this.playerElIngest_&&(this.playerElIngest_=null),this.tag&&(this.tag=null),Nr[this.id()]=null,Mr.names.forEach((function(e){var t=Mr[e],i=n[t.getterName]();i&&i.off&&i.off()})),e.prototype.dispose.call(this,{restoreEl:this.options_.restoreEl})},n.createEl=function(){var t,n=this.tag,i=this.playerElIngest_=n.parentNode&&n.parentNode.hasAttribute&&n.parentNode.hasAttribute("data-vjs-player"),a="video-js"===this.tag.tagName.toLowerCase();i?t=this.el_=n.parentNode:a||(t=this.el_=e.prototype.createEl.call(this,"div"));var o=Ln(n);if(a){for(t=this.el_=n,n=this.tag=s().createElement("video");t.children.length;)n.appendChild(t.firstChild);Cn(t,"video-js")||Pn(t,"video-js"),t.appendChild(n),i=this.playerElIngest_=t,Object.keys(t).forEach((function(e){try{n[e]=t[e]}catch(i){}}))}if(n.setAttribute("tabindex","-1"),o.tabindex="-1",(un||on&&dn)&&(n.setAttribute("role","application"),o.role="application"),n.removeAttribute("width"),n.removeAttribute("height"),"width"in o&&delete o.width,"height"in o&&delete o.height,Object.getOwnPropertyNames(o).forEach((function(e){a&&"class"===e||t.setAttribute(e,o[e]),a&&n.setAttribute(e,o[e])})),n.playerId=n.id,n.id+="_html5_api",n.className="vjs-tech",n.player=t.player=this,this.addClass("vjs-paused"),!0!==r().VIDEOJS_NO_DYNAMIC_STYLE){this.styleEl_=ni("vjs-styles-dimensions");var l=Kn(".vjs-styles-defaults"),u=Kn("head");u.insertBefore(this.styleEl_,l?l.nextSibling:u.firstChild)}this.fill_=!1,this.fluid_=!1,this.width(this.options_.width),this.height(this.options_.height),this.fill(this.options_.fill),this.fluid(this.options_.fluid),this.aspectRatio(this.options_.aspectRatio),this.crossOrigin(this.options_.crossOrigin||this.options_.crossorigin);for(var c=n.getElementsByTagName("a"),d=0;d<c.length;d++){var h=c.item(d);Pn(h,"vjs-hidden"),h.setAttribute("hidden","hidden")}return n.initNetworkState_=n.networkState,n.parentNode&&!i&&n.parentNode.insertBefore(t,n),En(n,t),this.children_.unshift(n),this.el_.setAttribute("lang",this.language_),this.el_.setAttribute("translate","no"),this.el_=t,t},n.crossOrigin=function(e){if(!e)return this.techGet_("crossOrigin");"anonymous"===e||"use-credentials"===e?this.techCall_("setCrossOrigin",e):zt.warn('crossOrigin must be "anonymous" or "use-credentials", given "'+e+'"')},n.width=function(e){return this.dimension("width",e)},n.height=function(e){return this.dimension("height",e)},n.dimension=function(e,t){var n=e+"_";if(void 0===t)return this[n]||0;if(""===t||"auto"===t)return this[n]=void 0,void this.updateStyleEl_();var i=parseFloat(t);isNaN(i)?zt.error('Improper value "'+t+'" supplied for for '+e):(this[n]=i,this.updateStyleEl_())},n.fluid=function(e){var t=this;if(void 0===e)return!!this.fluid_;this.fluid_=!!e,Ei(this)&&this.off(["playerreset","resize"],this.boundUpdateStyleEl_),e?(this.addClass("vjs-fluid"),this.fill(!1),function(e,t){Ei(e)?t():(e.eventedCallbacks||(e.eventedCallbacks=[]),e.eventedCallbacks.push(t))}(this,(function(){t.on(["playerreset","resize"],t.boundUpdateStyleEl_)}))):this.removeClass("vjs-fluid"),this.updateStyleEl_()},n.fill=function(e){if(void 0===e)return!!this.fill_;this.fill_=!!e,e?(this.addClass("vjs-fill"),this.fluid(!1)):this.removeClass("vjs-fill")},n.aspectRatio=function(e){if(void 0===e)return this.aspectRatio_;if(!/^\d+\:\d+$/.test(e))throw new Error("Improper value supplied for aspect ratio. The format should be width:height, for example 16:9.");this.aspectRatio_=e,this.fluid(!0),this.updateStyleEl_()},n.updateStyleEl_=function(){if(!0!==r().VIDEOJS_NO_DYNAMIC_STYLE){var e,t,n,i=(void 0!==this.aspectRatio_&&"auto"!==this.aspectRatio_?this.aspectRatio_:this.videoWidth()>0?this.videoWidth()+":"+this.videoHeight():"16:9").split(":"),a=i[1]/i[0];e=void 0!==this.width_?this.width_:void 0!==this.height_?this.height_/a:this.videoWidth()||300,t=void 0!==this.height_?this.height_:e*a,n=/^[^a-zA-Z]/.test(this.id())?"dimensions-"+this.id():this.id()+"-dimensions",this.addClass(n),ii(this.styleEl_,"\n      ."+n+" {\n        width: "+e+"px;\n        height: "+t+"px;\n      }\n\n      ."+n+".vjs-fluid:not(.vjs-audio-only-mode) {\n        padding-top: "+100*a+"%;\n      }\n    ")}else{var s="number"===typeof this.width_?this.width_:this.options_.width,o="number"===typeof this.height_?this.height_:this.options_.height,l=this.tech_&&this.tech_.el();l&&(s>=0&&(l.width=s),o>=0&&(l.height=o))}},n.loadTech_=function(e,t){var n=this;this.tech_&&this.unloadTech_();var i=ji(e),r=e.charAt(0).toLowerCase()+e.slice(1);"Html5"!==i&&this.tag&&(Dr.getTech("Html5").disposeMediaElement(this.tag),this.tag.player=null,this.tag=null),this.techName_=i,this.isReady_=!1;var a=this.autoplay();("string"===typeof this.autoplay()||!0===this.autoplay()&&this.options_.normalizeAutoplay)&&(a=!1);var s={source:t,autoplay:a,nativeControlsForTouch:this.options_.nativeControlsForTouch,playerId:this.id(),techId:this.id()+"_"+r+"_api",playsinline:this.options_.playsinline,preload:this.options_.preload,loop:this.options_.loop,disablePictureInPicture:this.options_.disablePictureInPicture,muted:this.options_.muted,poster:this.poster(),language:this.language(),playerElIngest:this.playerElIngest_||!1,"vtt.js":this.options_["vtt.js"],canOverridePoster:!!this.options_.techCanOverridePoster,enableSourceset:this.options_.enableSourceset,Promise:this.options_.Promise};Mr.names.forEach((function(e){var t=Mr[e];s[t.getterName]=n[t.privateName]})),Gt(s,this.options_[i]),Gt(s,this.options_[r]),Gt(s,this.options_[e.toLowerCase()]),this.tag&&(s.tag=this.tag),t&&t.src===this.cache_.src&&this.cache_.currentTime>0&&(s.startTime=this.cache_.currentTime);var o=Dr.getTech(e);if(!o)throw new Error("No Tech named '"+i+"' exists! '"+i+"' should be registered using videojs.registerTech()'");this.tech_=new o(s),this.tech_.ready(Ti(this,this.handleTechReady_),!0),tr(this.textTracksJson_||[],this.tech_),Rs.forEach((function(e){n.on(n.tech_,e,(function(t){return n["handleTech"+ji(e)+"_"](t)}))})),Object.keys(Ns).forEach((function(e){n.on(n.tech_,e,(function(t){0===n.tech_.playbackRate()&&n.tech_.seeking()?n.queuedCallbacks_.push({callback:n["handleTech"+Ns[e]+"_"].bind(n),event:t}):n["handleTech"+Ns[e]+"_"](t)}))})),this.on(this.tech_,"loadstart",(function(e){return n.handleTechLoadStart_(e)})),this.on(this.tech_,"sourceset",(function(e){return n.handleTechSourceset_(e)})),this.on(this.tech_,"waiting",(function(e){return n.handleTechWaiting_(e)})),this.on(this.tech_,"ended",(function(e){return n.handleTechEnded_(e)})),this.on(this.tech_,"seeking",(function(e){return n.handleTechSeeking_(e)})),this.on(this.tech_,"play",(function(e){return n.handleTechPlay_(e)})),this.on(this.tech_,"firstplay",(function(e){return n.handleTechFirstPlay_(e)})),this.on(this.tech_,"pause",(function(e){return n.handleTechPause_(e)})),this.on(this.tech_,"durationchange",(function(e){return n.handleTechDurationChange_(e)})),this.on(this.tech_,"fullscreenchange",(function(e,t){return n.handleTechFullscreenChange_(e,t)})),this.on(this.tech_,"fullscreenerror",(function(e,t){return n.handleTechFullscreenError_(e,t)})),this.on(this.tech_,"enterpictureinpicture",(function(e){return n.handleTechEnterPictureInPicture_(e)})),this.on(this.tech_,"leavepictureinpicture",(function(e){return n.handleTechLeavePictureInPicture_(e)})),this.on(this.tech_,"error",(function(e){return n.handleTechError_(e)})),this.on(this.tech_,"posterchange",(function(e){return n.handleTechPosterChange_(e)})),this.on(this.tech_,"textdata",(function(e){return n.handleTechTextData_(e)})),this.on(this.tech_,"ratechange",(function(e){return n.handleTechRateChange_(e)})),this.on(this.tech_,"loadedmetadata",this.boundUpdateStyleEl_),this.usingNativeControls(this.techGet_("controls")),this.controls()&&!this.usingNativeControls()&&this.addTechControlsListeners_(),this.tech_.el().parentNode===this.el()||"Html5"===i&&this.tag||En(this.tech_.el(),this.el()),this.tag&&(this.tag.player=null,this.tag=null)},n.unloadTech_=function(){var e=this;Mr.names.forEach((function(t){var n=Mr[t];e[n.privateName]=e[n.getterName]()})),this.textTracksJson_=er(this.tech_),this.isReady_=!1,this.tech_.dispose(),this.tech_=!1,this.isPosterFromTech_&&(this.poster_="",this.trigger("posterchange")),this.isPosterFromTech_=!1},n.tech=function(e){return void 0===e&&zt.warn("Using the tech directly can be dangerous. I hope you know what you're doing.\nSee https://github.com/videojs/video.js/issues/2617 for more info.\n"),this.tech_},n.addTechControlsListeners_=function(){this.removeTechControlsListeners_(),this.on(this.tech_,"click",this.boundHandleTechClick_),this.on(this.tech_,"dblclick",this.boundHandleTechDoubleClick_),this.on(this.tech_,"touchstart",this.boundHandleTechTouchStart_),this.on(this.tech_,"touchmove",this.boundHandleTechTouchMove_),this.on(this.tech_,"touchend",this.boundHandleTechTouchEnd_),this.on(this.tech_,"tap",this.boundHandleTechTap_)},n.removeTechControlsListeners_=function(){this.off(this.tech_,"tap",this.boundHandleTechTap_),this.off(this.tech_,"touchstart",this.boundHandleTechTouchStart_),this.off(this.tech_,"touchmove",this.boundHandleTechTouchMove_),this.off(this.tech_,"touchend",this.boundHandleTechTouchEnd_),this.off(this.tech_,"click",this.boundHandleTechClick_),this.off(this.tech_,"dblclick",this.boundHandleTechDoubleClick_)},n.handleTechReady_=function(){this.triggerReady(),this.cache_.volume&&this.techCall_("setVolume",this.cache_.volume),this.handleTechPosterChange_(),this.handleTechDurationChange_()},n.handleTechLoadStart_=function(){this.removeClass("vjs-ended"),this.removeClass("vjs-seeking"),this.error(null),this.handleTechDurationChange_(),this.paused()?(this.hasStarted(!1),this.trigger("loadstart")):(this.trigger("loadstart"),this.trigger("firstplay")),this.manualAutoplay_(!0===this.autoplay()&&this.options_.normalizeAutoplay?"play":this.autoplay())},n.manualAutoplay_=function(e){var t=this;if(this.tech_&&"string"===typeof e){var n,i=function(){var e=t.muted();t.muted(!0);var n=function(){t.muted(e)};t.playTerminatedQueue_.push(n);var i=t.play();if(Qi(i))return i.catch((function(e){throw n(),new Error("Rejection at manualAutoplay. Restoring muted value. "+(e||""))}))};if("any"!==e||this.muted()?n="muted"!==e||this.muted()?this.play():i():Qi(n=this.play())&&(n=n.catch(i)),Qi(n))return n.then((function(){t.trigger({type:"autoplay-success",autoplay:e})})).catch((function(){t.trigger({type:"autoplay-failure",autoplay:e})}))}},n.updateSourceCaches_=function(e){void 0===e&&(e="");var t=e,n="";"string"!==typeof t&&(t=e.src,n=e.type),this.cache_.source=this.cache_.source||{},this.cache_.sources=this.cache_.sources||[],t&&!n&&(n=function(e,t){if(!t)return"";if(e.cache_.source.src===t&&e.cache_.source.type)return e.cache_.source.type;var n=e.cache_.sources.filter((function(e){return e.src===t}));if(n.length)return n[0].type;for(var i=e.$$("source"),r=0;r<i.length;r++){var a=i[r];if(a.type&&a.src&&a.src===t)return a.type}return Gr(t)}(this,t)),this.cache_.source=Fi({},e,{src:t,type:n});for(var i=this.cache_.sources.filter((function(e){return e.src&&e.src===t})),r=[],a=this.$$("source"),s=[],o=0;o<a.length;o++){var l=Ln(a[o]);r.push(l),l.src&&l.src===t&&s.push(l.src)}s.length&&!i.length?this.cache_.sources=r:i.length||(this.cache_.sources=[this.cache_.source]),this.cache_.src=t},n.handleTechSourceset_=function(e){var t=this;if(!this.changingSrc_){var n=function(e){return t.updateSourceCaches_(e)},i=this.currentSource().src,r=e.src;i&&!/^blob:/.test(i)&&/^blob:/.test(r)&&(!this.lastSource_||this.lastSource_.tech!==r&&this.lastSource_.player!==i)&&(n=function(){}),n(r),e.src||this.tech_.any(["sourceset","loadstart"],(function(e){if("sourceset"!==e.type){var n=t.techGet("currentSrc");t.lastSource_.tech=n,t.updateSourceCaches_(n)}}))}this.lastSource_={player:this.currentSource().src,tech:e.src},this.trigger({src:e.src,type:"sourceset"})},n.hasStarted=function(e){if(void 0===e)return this.hasStarted_;e!==this.hasStarted_&&(this.hasStarted_=e,this.hasStarted_?(this.addClass("vjs-has-started"),this.trigger("firstplay")):this.removeClass("vjs-has-started"))},n.handleTechPlay_=function(){this.removeClass("vjs-ended"),this.removeClass("vjs-paused"),this.addClass("vjs-playing"),this.hasStarted(!0),this.trigger("play")},n.handleTechRateChange_=function(){this.tech_.playbackRate()>0&&0===this.cache_.lastPlaybackRate&&(this.queuedCallbacks_.forEach((function(e){return e.callback(e.event)})),this.queuedCallbacks_=[]),this.cache_.lastPlaybackRate=this.tech_.playbackRate(),this.trigger("ratechange")},n.handleTechWaiting_=function(){var e=this;this.addClass("vjs-waiting"),this.trigger("waiting");var t=this.currentTime();this.on("timeupdate",(function n(){t!==e.currentTime()&&(e.removeClass("vjs-waiting"),e.off("timeupdate",n))}))},n.handleTechCanPlay_=function(){this.removeClass("vjs-waiting"),this.trigger("canplay")},n.handleTechCanPlayThrough_=function(){this.removeClass("vjs-waiting"),this.trigger("canplaythrough")},n.handleTechPlaying_=function(){this.removeClass("vjs-waiting"),this.trigger("playing")},n.handleTechSeeking_=function(){this.addClass("vjs-seeking"),this.trigger("seeking")},n.handleTechSeeked_=function(){this.removeClass("vjs-seeking"),this.removeClass("vjs-ended"),this.trigger("seeked")},n.handleTechFirstPlay_=function(){this.options_.starttime&&(zt.warn("Passing the `starttime` option to the player will be deprecated in 6.0"),this.currentTime(this.options_.starttime)),this.addClass("vjs-has-started"),this.trigger("firstplay")},n.handleTechPause_=function(){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.trigger("pause")},n.handleTechEnded_=function(){this.addClass("vjs-ended"),this.removeClass("vjs-waiting"),this.options_.loop?(this.currentTime(0),this.play()):this.paused()||this.pause(),this.trigger("ended")},n.handleTechDurationChange_=function(){this.duration(this.techGet_("duration"))},n.handleTechClick_=function(e){this.controls_&&(void 0!==this.options_&&void 0!==this.options_.userActions&&void 0!==this.options_.userActions.click&&!1===this.options_.userActions.click||(void 0!==this.options_&&void 0!==this.options_.userActions&&"function"===typeof this.options_.userActions.click?this.options_.userActions.click.call(this,e):this.paused()?Ji(this.play()):this.pause()))},n.handleTechDoubleClick_=function(e){this.controls_&&(Array.prototype.some.call(this.$$(".vjs-control-bar, .vjs-modal-dialog"),(function(t){return t.contains(e.target)}))||void 0!==this.options_&&void 0!==this.options_.userActions&&void 0!==this.options_.userActions.doubleClick&&!1===this.options_.userActions.doubleClick||(void 0!==this.options_&&void 0!==this.options_.userActions&&"function"===typeof this.options_.userActions.doubleClick?this.options_.userActions.doubleClick.call(this,e):this.isFullscreen()?this.exitFullscreen():this.requestFullscreen()))},n.handleTechTap_=function(){this.userActive(!this.userActive())},n.handleTechTouchStart_=function(){this.userWasActive=this.userActive()},n.handleTechTouchMove_=function(){this.userWasActive&&this.reportUserActivity()},n.handleTechTouchEnd_=function(e){e.cancelable&&e.preventDefault()},n.handleStageClick_=function(){this.reportUserActivity()},n.toggleFullscreenClass_=function(){this.isFullscreen()?this.addClass("vjs-fullscreen"):this.removeClass("vjs-fullscreen")},n.documentFullscreenChange_=function(e){var t=e.target.player;if(!t||t===this){var n=this.el(),i=s()[this.fsApi_.fullscreenElement]===n;!i&&n.matches?i=n.matches(":"+this.fsApi_.fullscreen):!i&&n.msMatchesSelector&&(i=n.msMatchesSelector(":"+this.fsApi_.fullscreen)),this.isFullscreen(i)}},n.handleTechFullscreenChange_=function(e,t){var n=this;t&&(t.nativeIOSFullscreen&&(this.addClass("vjs-ios-native-fs"),this.tech_.one("webkitendfullscreen",(function(){n.removeClass("vjs-ios-native-fs")}))),this.isFullscreen(t.isFullscreen))},n.handleTechFullscreenError_=function(e,t){this.trigger("fullscreenerror",t)},n.togglePictureInPictureClass_=function(){this.isInPictureInPicture()?this.addClass("vjs-picture-in-picture"):this.removeClass("vjs-picture-in-picture")},n.handleTechEnterPictureInPicture_=function(e){this.isInPictureInPicture(!0)},n.handleTechLeavePictureInPicture_=function(e){this.isInPictureInPicture(!1)},n.handleTechError_=function(){var e=this.tech_.error();this.error(e)},n.handleTechTextData_=function(){var e=null;arguments.length>1&&(e=arguments[1]),this.trigger("textdata",e)},n.getCache=function(){return this.cache_},n.resetCache_=function(){this.cache_={currentTime:0,initTime:0,inactivityTimeout:this.options_.inactivityTimeout,duration:NaN,lastVolume:1,lastPlaybackRate:this.defaultPlaybackRate(),media:null,src:"",source:{},sources:[],playbackRates:[],volume:1}},n.techCall_=function(e,t){this.ready((function(){if(e in zr)return function(e,t,n,i){return t[n](e.reduce(Hr(n),i))}(this.middleware_,this.tech_,e,t);if(e in Vr)return Fr(this.middleware_,this.tech_,e,t);try{this.tech_&&this.tech_[e](t)}catch(n){throw zt(n),n}}),!0)},n.techGet_=function(e){if(this.tech_&&this.tech_.isReady_){if(e in Br)return function(e,t,n){return e.reduceRight(Hr(n),t[n]())}(this.middleware_,this.tech_,e);if(e in Vr)return Fr(this.middleware_,this.tech_,e);try{return this.tech_[e]()}catch(t){if(void 0===this.tech_[e])throw zt("Video.js: "+e+" method not defined for "+this.techName_+" playback technology.",t),t;if("TypeError"===t.name)throw zt("Video.js: "+e+" unavailable on "+this.techName_+" playback technology element.",t),this.tech_.isReady_=!1,t;throw zt(t),t}}},n.play=function(){var e=this,t=this.options_.Promise||r().Promise;return t?new t((function(t){e.play_(t)})):this.play_()},n.play_=function(e){var t=this;void 0===e&&(e=Ji),this.playCallbacks_.push(e);var n=Boolean(!this.changingSrc_&&(this.src()||this.currentSrc())),i=Boolean(mn||gn);if(this.waitToPlay_&&(this.off(["ready","loadstart"],this.waitToPlay_),this.waitToPlay_=null),!this.isReady_||!n)return this.waitToPlay_=function(e){t.play_()},this.one(["ready","loadstart"],this.waitToPlay_),void(!n&&i&&this.load());var r=this.techGet_("play");i&&this.hasClass("vjs-ended")&&this.resetProgressBar_(),null===r?this.runPlayTerminatedQueue_():this.runPlayCallbacks_(r)},n.runPlayTerminatedQueue_=function(){var e=this.playTerminatedQueue_.slice(0);this.playTerminatedQueue_=[],e.forEach((function(e){e()}))},n.runPlayCallbacks_=function(e){var t=this.playCallbacks_.slice(0);this.playCallbacks_=[],this.playTerminatedQueue_=[],t.forEach((function(t){t(e)}))},n.pause=function(){this.techCall_("pause")},n.paused=function(){return!1!==this.techGet_("paused")},n.played=function(){return this.techGet_("played")||Xi(0,0)},n.scrubbing=function(e){if("undefined"===typeof e)return this.scrubbing_;this.scrubbing_=!!e,this.techCall_("setScrubbing",this.scrubbing_),e?this.addClass("vjs-scrubbing"):this.removeClass("vjs-scrubbing")},n.currentTime=function(e){return"undefined"!==typeof e?(e<0&&(e=0),this.isReady_&&!this.changingSrc_&&this.tech_&&this.tech_.isReady_?(this.techCall_("setCurrentTime",e),void(this.cache_.initTime=0)):(this.cache_.initTime=e,this.off("canplay",this.boundApplyInitTime_),void this.one("canplay",this.boundApplyInitTime_))):(this.cache_.currentTime=this.techGet_("currentTime")||0,this.cache_.currentTime)},n.applyInitTime_=function(){this.currentTime(this.cache_.initTime)},n.duration=function(e){if(void 0===e)return void 0!==this.cache_.duration?this.cache_.duration:NaN;(e=parseFloat(e))<0&&(e=1/0),e!==this.cache_.duration&&(this.cache_.duration=e,e===1/0?this.addClass("vjs-live"):this.removeClass("vjs-live"),isNaN(e)||this.trigger("durationchange"))},n.remainingTime=function(){return this.duration()-this.currentTime()},n.remainingTimeDisplay=function(){return Math.floor(this.duration())-Math.floor(this.currentTime())},n.buffered=function(){var e=this.techGet_("buffered");return e&&e.length||(e=Xi(0,0)),e},n.bufferedPercent=function(){return Ki(this.buffered(),this.duration())},n.bufferedEnd=function(){var e=this.buffered(),t=this.duration(),n=e.end(e.length-1);return n>t&&(n=t),n},n.volume=function(e){var t;return void 0!==e?(t=Math.max(0,Math.min(1,parseFloat(e))),this.cache_.volume=t,this.techCall_("setVolume",t),void(t>0&&this.lastVolume_(t))):(t=parseFloat(this.techGet_("volume")),isNaN(t)?1:t)},n.muted=function(e){if(void 0===e)return this.techGet_("muted")||!1;this.techCall_("setMuted",e)},n.defaultMuted=function(e){return void 0!==e?this.techCall_("setDefaultMuted",e):this.techGet_("defaultMuted")||!1},n.lastVolume_=function(e){if(void 0===e||0===e)return this.cache_.lastVolume;this.cache_.lastVolume=e},n.supportsFullScreen=function(){return this.techGet_("supportsFullScreen")||!1},n.isFullscreen=function(e){if(void 0!==e){var t=this.isFullscreen_;return this.isFullscreen_=Boolean(e),this.isFullscreen_!==t&&this.fsApi_.prefixed&&this.trigger("fullscreenchange"),void this.toggleFullscreenClass_()}return this.isFullscreen_},n.requestFullscreen=function(e){var t=this.options_.Promise||r().Promise;if(t){var n=this;return new t((function(t,i){function r(){n.off("fullscreenerror",s),n.off("fullscreenchange",a)}function a(){r(),t()}function s(e,t){r(),i(t)}n.one("fullscreenchange",a),n.one("fullscreenerror",s);var o=n.requestFullscreenHelper_(e);o&&(o.then(r,r),o.then(t,i))}))}return this.requestFullscreenHelper_()},n.requestFullscreenHelper_=function(e){var t,n=this;if(this.fsApi_.prefixed||(t=this.options_.fullscreen&&this.options_.fullscreen.options||{},void 0!==e&&(t=e)),this.fsApi_.requestFullscreen){var i=this.el_[this.fsApi_.requestFullscreen](t);return i&&i.then((function(){return n.isFullscreen(!0)}),(function(){return n.isFullscreen(!1)})),i}this.tech_.supportsFullScreen()&&!0===!this.options_.preferFullWindow?this.techCall_("enterFullScreen"):this.enterFullWindow()},n.exitFullscreen=function(){var e=this.options_.Promise||r().Promise;if(e){var t=this;return new e((function(e,n){function i(){t.off("fullscreenerror",a),t.off("fullscreenchange",r)}function r(){i(),e()}function a(e,t){i(),n(t)}t.one("fullscreenchange",r),t.one("fullscreenerror",a);var s=t.exitFullscreenHelper_();s&&(s.then(i,i),s.then(e,n))}))}return this.exitFullscreenHelper_()},n.exitFullscreenHelper_=function(){var e=this;if(this.fsApi_.requestFullscreen){var t=s()[this.fsApi_.exitFullscreen]();return t&&Ji(t.then((function(){return e.isFullscreen(!1)}))),t}this.tech_.supportsFullScreen()&&!0===!this.options_.preferFullWindow?this.techCall_("exitFullScreen"):this.exitFullWindow()},n.enterFullWindow=function(){this.isFullscreen(!0),this.isFullWindow=!0,this.docOrigOverflow=s().documentElement.style.overflow,fi(s(),"keydown",this.boundFullWindowOnEscKey_),s().documentElement.style.overflow="hidden",Pn(s().body,"vjs-full-window"),this.trigger("enterFullWindow")},n.fullWindowOnEscKey=function(e){u().isEventKey(e,"Esc")&&!0===this.isFullscreen()&&(this.isFullWindow?this.exitFullWindow():this.exitFullscreen())},n.exitFullWindow=function(){this.isFullscreen(!1),this.isFullWindow=!1,pi(s(),"keydown",this.boundFullWindowOnEscKey_),s().documentElement.style.overflow=this.docOrigOverflow,In(s().body,"vjs-full-window"),this.trigger("exitFullWindow")},n.disablePictureInPicture=function(e){if(void 0===e)return this.techGet_("disablePictureInPicture");this.techCall_("setDisablePictureInPicture",e),this.options_.disablePictureInPicture=e,this.trigger("disablepictureinpicturechanged")},n.isInPictureInPicture=function(e){return void 0!==e?(this.isInPictureInPicture_=!!e,void this.togglePictureInPictureClass_()):!!this.isInPictureInPicture_},n.requestPictureInPicture=function(){if("pictureInPictureEnabled"in s()&&!1===this.disablePictureInPicture())return this.techGet_("requestPictureInPicture")},n.exitPictureInPicture=function(){if("pictureInPictureEnabled"in s())return s().exitPictureInPicture()},n.handleKeyDown=function(e){var t=this.options_.userActions;if(t&&t.hotkeys){(function(e){var t=e.tagName.toLowerCase();if(e.isContentEditable)return!0;if("input"===t)return-1===["button","checkbox","hidden","radio","reset","submit"].indexOf(e.type);return-1!==["textarea"].indexOf(t)})(this.el_.ownerDocument.activeElement)||("function"===typeof t.hotkeys?t.hotkeys.call(this,e):this.handleHotkeys(e))}},n.handleHotkeys=function(e){var t=this.options_.userActions?this.options_.userActions.hotkeys:{},n=t.fullscreenKey,i=void 0===n?function(e){return u().isEventKey(e,"f")}:n,r=t.muteKey,a=void 0===r?function(e){return u().isEventKey(e,"m")}:r,o=t.playPauseKey,l=void 0===o?function(e){return u().isEventKey(e,"k")||u().isEventKey(e,"Space")}:o;if(i.call(this,e)){e.preventDefault(),e.stopPropagation();var c=Wi.getComponent("FullscreenToggle");!1!==s()[this.fsApi_.fullscreenEnabled]&&c.prototype.handleClick.call(this,e)}else if(a.call(this,e)){e.preventDefault(),e.stopPropagation(),Wi.getComponent("MuteToggle").prototype.handleClick.call(this,e)}else if(l.call(this,e)){e.preventDefault(),e.stopPropagation(),Wi.getComponent("PlayToggle").prototype.handleClick.call(this,e)}},n.canPlayType=function(e){for(var t,n=0,i=this.options_.techOrder;n<i.length;n++){var r=i[n],a=Dr.getTech(r);if(a||(a=Wi.getComponent(r)),a){if(a.isSupported()&&(t=a.canPlayType(e)))return t}else zt.error('The "'+r+'" tech is undefined. Skipped browser support check for that tech.')}return""},n.selectSource=function(e){var t,n=this,i=this.options_.techOrder.map((function(e){return[e,Dr.getTech(e)]})).filter((function(e){var t=e[0],n=e[1];return n?n.isSupported():(zt.error('The "'+t+'" tech is undefined. Skipped browser support check for that tech.'),!1)})),r=function(e,t,n){var i;return e.some((function(e){return t.some((function(t){if(i=n(e,t))return!0}))})),i},a=function(e,t){var i=e[0];if(e[1].canPlaySource(t,n.options_[i.toLowerCase()]))return{source:t,tech:i}};return(this.options_.sourceOrder?r(e,i,(t=a,function(e,n){return t(n,e)})):r(i,e,a))||!1},n.handleSrc_=function(e,t){var n=this;if("undefined"===typeof e)return this.cache_.src||"";this.resetRetryOnError_&&this.resetRetryOnError_();var i=Xr(e);if(i.length){if(this.changingSrc_=!0,t||(this.cache_.sources=i),this.updateSourceCaches_(i[0]),jr(this,i[0],(function(e,r){var a,s;if(n.middleware_=r,t||(n.cache_.sources=i),n.updateSourceCaches_(e),n.src_(e))return i.length>1?n.handleSrc_(i.slice(1)):(n.changingSrc_=!1,n.setTimeout((function(){this.error({code:4,message:this.options_.notSupportedMessage})}),0),void n.triggerReady());a=r,s=n.tech_,a.forEach((function(e){return e.setTech&&e.setTech(s)}))})),this.options_.retryOnError&&i.length>1){var r=function(){n.error(null),n.handleSrc_(i.slice(1),!0)},a=function(){n.off("error",r)};this.one("error",r),this.one("playing",a),this.resetRetryOnError_=function(){n.off("error",r),n.off("playing",a)}}}else this.setTimeout((function(){this.error({code:4,message:this.options_.notSupportedMessage})}),0)},n.src=function(e){return this.handleSrc_(e,!1)},n.src_=function(e){var t,n,i=this,r=this.selectSource([e]);return!r||(t=r.tech,n=this.techName_,ji(t)!==ji(n)?(this.changingSrc_=!0,this.loadTech_(r.tech,r.source),this.tech_.ready((function(){i.changingSrc_=!1})),!1):(this.ready((function(){this.tech_.constructor.prototype.hasOwnProperty("setSource")?this.techCall_("setSource",e):this.techCall_("src",e.src),this.changingSrc_=!1}),!0),!1))},n.load=function(){this.techCall_("load")},n.reset=function(){var e=this,t=this.options_.Promise||r().Promise;this.paused()||!t?this.doReset_():Ji(this.play().then((function(){return e.doReset_()})))},n.doReset_=function(){this.tech_&&this.tech_.clearTracks("text"),this.resetCache_(),this.poster(""),this.loadTech_(this.options_.techOrder[0],null),this.techCall_("reset"),this.resetControlBarUI_(),Ei(this)&&this.trigger("playerreset")},n.resetControlBarUI_=function(){this.resetProgressBar_(),this.resetPlaybackRate_(),this.resetVolumeBar_()},n.resetProgressBar_=function(){this.currentTime(0);var e=this.controlBar||{},t=e.durationDisplay,n=e.remainingTimeDisplay;t&&t.updateContent(),n&&n.updateContent()},n.resetPlaybackRate_=function(){this.playbackRate(this.defaultPlaybackRate()),this.handleTechRateChange_()},n.resetVolumeBar_=function(){this.volume(1),this.trigger("volumechange")},n.currentSources=function(){var e=this.currentSource(),t=[];return 0!==Object.keys(e).length&&t.push(e),this.cache_.sources||t},n.currentSource=function(){return this.cache_.source||{}},n.currentSrc=function(){return this.currentSource()&&this.currentSource().src||""},n.currentType=function(){return this.currentSource()&&this.currentSource().type||""},n.preload=function(e){return void 0!==e?(this.techCall_("setPreload",e),void(this.options_.preload=e)):this.techGet_("preload")},n.autoplay=function(e){if(void 0===e)return this.options_.autoplay||!1;var t;"string"===typeof e&&/(any|play|muted)/.test(e)||!0===e&&this.options_.normalizeAutoplay?(this.options_.autoplay=e,this.manualAutoplay_("string"===typeof e?e:"play"),t=!1):this.options_.autoplay=!!e,t="undefined"===typeof t?this.options_.autoplay:t,this.tech_&&this.techCall_("setAutoplay",t)},n.playsinline=function(e){return void 0!==e?(this.techCall_("setPlaysinline",e),this.options_.playsinline=e,this):this.techGet_("playsinline")},n.loop=function(e){return void 0!==e?(this.techCall_("setLoop",e),void(this.options_.loop=e)):this.techGet_("loop")},n.poster=function(e){if(void 0===e)return this.poster_;e||(e=""),e!==this.poster_&&(this.poster_=e,this.techCall_("setPoster",e),this.isPosterFromTech_=!1,this.trigger("posterchange"))},n.handleTechPosterChange_=function(){if((!this.poster_||this.options_.techCanOverridePoster)&&this.tech_&&this.tech_.poster){var e=this.tech_.poster()||"";e!==this.poster_&&(this.poster_=e,this.isPosterFromTech_=!0,this.trigger("posterchange"))}},n.controls=function(e){if(void 0===e)return!!this.controls_;e=!!e,this.controls_!==e&&(this.controls_=e,this.usingNativeControls()&&this.techCall_("setControls",e),this.controls_?(this.removeClass("vjs-controls-disabled"),this.addClass("vjs-controls-enabled"),this.trigger("controlsenabled"),this.usingNativeControls()||this.addTechControlsListeners_()):(this.removeClass("vjs-controls-enabled"),this.addClass("vjs-controls-disabled"),this.trigger("controlsdisabled"),this.usingNativeControls()||this.removeTechControlsListeners_()))},n.usingNativeControls=function(e){if(void 0===e)return!!this.usingNativeControls_;e=!!e,this.usingNativeControls_!==e&&(this.usingNativeControls_=e,this.usingNativeControls_?(this.addClass("vjs-using-native-controls"),this.trigger("usingnativecontrols")):(this.removeClass("vjs-using-native-controls"),this.trigger("usingcustomcontrols")))},n.error=function(e){var t=this;if(void 0===e)return this.error_||null;if(Lt("beforeerror").forEach((function(n){var i=n(t,e);Xt(i)&&!Array.isArray(i)||"string"===typeof i||"number"===typeof i||null===i?e=i:t.log.error("please return a value that MediaError expects in beforeerror hooks")})),this.options_.suppressNotSupportedError&&e&&4===e.code){var n=function(){this.error(e)};return this.options_.suppressNotSupportedError=!1,this.any(["click","touchstart"],n),void this.one("loadstart",(function(){this.off(["click","touchstart"],n)}))}if(null===e)return this.error_=e,this.removeClass("vjs-error"),void(this.errorDisplay&&this.errorDisplay.close());this.error_=new $i(e),this.addClass("vjs-error"),zt.error("(CODE:"+this.error_.code+" "+$i.errorTypes[this.error_.code]+")",this.error_.message,this.error_),this.trigger("error"),Lt("error").forEach((function(e){return e(t,t.error_)}))},n.reportUserActivity=function(e){this.userActivity_=!0},n.userActive=function(e){if(void 0===e)return this.userActive_;if((e=!!e)!==this.userActive_){if(this.userActive_=e,this.userActive_)return this.userActivity_=!0,this.removeClass("vjs-user-inactive"),this.addClass("vjs-user-active"),void this.trigger("useractive");this.tech_&&this.tech_.one("mousemove",(function(e){e.stopPropagation(),e.preventDefault()})),this.userActivity_=!1,this.removeClass("vjs-user-active"),this.addClass("vjs-user-inactive"),this.trigger("userinactive")}},n.listenForUserActivity_=function(){var e,t,n,i=Ti(this,this.reportUserActivity),r=function(t){i(),this.clearInterval(e)};this.on("mousedown",(function(){i(),this.clearInterval(e),e=this.setInterval(i,250)})),this.on("mousemove",(function(e){e.screenX===t&&e.screenY===n||(t=e.screenX,n=e.screenY,i())})),this.on("mouseup",r),this.on("mouseleave",r);var a,s=this.getChild("controlBar");!s||gn||tn||(s.on("mouseenter",(function(e){0!==this.player().options_.inactivityTimeout&&(this.player().cache_.inactivityTimeout=this.player().options_.inactivityTimeout),this.player().options_.inactivityTimeout=0})),s.on("mouseleave",(function(e){this.player().options_.inactivityTimeout=this.player().cache_.inactivityTimeout}))),this.on("keydown",i),this.on("keyup",i),this.setInterval((function(){if(this.userActivity_){this.userActivity_=!1,this.userActive(!0),this.clearTimeout(a);var e=this.options_.inactivityTimeout;e<=0||(a=this.setTimeout((function(){this.userActivity_||this.userActive(!1)}),e))}}),250)},n.playbackRate=function(e){if(void 0===e)return this.tech_&&this.tech_.featuresPlaybackRate?this.cache_.lastPlaybackRate||this.techGet_("playbackRate"):1;this.techCall_("setPlaybackRate",e)},n.defaultPlaybackRate=function(e){return void 0!==e?this.techCall_("setDefaultPlaybackRate",e):this.tech_&&this.tech_.featuresPlaybackRate?this.techGet_("defaultPlaybackRate"):1},n.isAudio=function(e){if(void 0===e)return!!this.isAudio_;this.isAudio_=!!e},n.enableAudioOnlyUI_=function(){var e=this;this.addClass("vjs-audio-only-mode");var t=this.children(),n=this.getChild("ControlBar"),i=n&&n.currentHeight();t.forEach((function(t){t!==n&&t.el_&&!t.hasClass("vjs-hidden")&&(t.hide(),e.audioOnlyCache_.hiddenChildren.push(t))})),this.audioOnlyCache_.playerHeight=this.currentHeight(),this.height(i),this.trigger("audioonlymodechange")},n.disableAudioOnlyUI_=function(){this.removeClass("vjs-audio-only-mode"),this.audioOnlyCache_.hiddenChildren.forEach((function(e){return e.show()})),this.height(this.audioOnlyCache_.playerHeight),this.trigger("audioonlymodechange")},n.audioOnlyMode=function(e){var t=this;if("boolean"!==typeof e||e===this.audioOnlyMode_)return this.audioOnlyMode_;this.audioOnlyMode_=e;var n=this.options_.Promise||r().Promise;if(n){if(e){var i=[];return this.isInPictureInPicture()&&i.push(this.exitPictureInPicture()),this.isFullscreen()&&i.push(this.exitFullscreen()),this.audioPosterMode()&&i.push(this.audioPosterMode(!1)),n.all(i).then((function(){return t.enableAudioOnlyUI_()}))}return n.resolve().then((function(){return t.disableAudioOnlyUI_()}))}e?(this.isInPictureInPicture()&&this.exitPictureInPicture(),this.isFullscreen()&&this.exitFullscreen(),this.enableAudioOnlyUI_()):this.disableAudioOnlyUI_()},n.enablePosterModeUI_=function(){(this.tech_&&this.tech_).hide(),this.addClass("vjs-audio-poster-mode"),this.trigger("audiopostermodechange")},n.disablePosterModeUI_=function(){(this.tech_&&this.tech_).show(),this.removeClass("vjs-audio-poster-mode"),this.trigger("audiopostermodechange")},n.audioPosterMode=function(e){var t=this;if("boolean"!==typeof e||e===this.audioPosterMode_)return this.audioPosterMode_;this.audioPosterMode_=e;var n=this.options_.Promise||r().Promise;return n?e?this.audioOnlyMode()?this.audioOnlyMode(!1).then((function(){t.enablePosterModeUI_()})):n.resolve().then((function(){t.enablePosterModeUI_()})):n.resolve().then((function(){t.disablePosterModeUI_()})):e?(this.audioOnlyMode()&&this.audioOnlyMode(!1),void this.enablePosterModeUI_()):void this.disablePosterModeUI_()},n.addTextTrack=function(e,t,n){if(this.tech_)return this.tech_.addTextTrack(e,t,n)},n.addRemoteTextTrack=function(e,t){if(this.tech_)return this.tech_.addRemoteTextTrack(e,t)},n.removeRemoteTextTrack=function(e){void 0===e&&(e={});var t=e.track;if(t||(t=e),this.tech_)return this.tech_.removeRemoteTextTrack(t)},n.getVideoPlaybackQuality=function(){return this.techGet_("getVideoPlaybackQuality")},n.videoWidth=function(){return this.tech_&&this.tech_.videoWidth&&this.tech_.videoWidth()||0},n.videoHeight=function(){return this.tech_&&this.tech_.videoHeight&&this.tech_.videoHeight()||0},n.language=function(e){if(void 0===e)return this.language_;this.language_!==String(e).toLowerCase()&&(this.language_=String(e).toLowerCase(),Ei(this)&&this.trigger("languagechange"))},n.languages=function(){return Fi(t.prototype.options_.languages,this.languages_)},n.toJSON=function(){var e=Fi(this.options_),t=e.tracks;e.tracks=[];for(var n=0;n<t.length;n++){var i=t[n];(i=Fi(i)).player=void 0,e.tracks[n]=i}return e},n.createModal=function(e,t){var n=this;(t=t||{}).content=e||"";var i=new ir(this,t);return this.addChild(i),i.on("dispose",(function(){n.removeChild(i)})),i.open(),i},n.updateCurrentBreakpoint_=function(){if(this.responsive())for(var e=this.currentBreakpoint(),t=this.currentWidth(),n=0;n<Us.length;n++){var i=Us[n];if(t<=this.breakpoints_[i]){if(e===i)return;e&&this.removeClass(js[e]),this.addClass(js[i]),this.breakpoint_=i;break}}},n.removeCurrentBreakpoint_=function(){var e=this.currentBreakpointClass();this.breakpoint_="",e&&this.removeClass(e)},n.breakpoints=function(e){return void 0===e||(this.breakpoint_="",this.breakpoints_=Gt({},Fs,e),this.updateCurrentBreakpoint_()),Gt(this.breakpoints_)},n.responsive=function(e){return void 0===e?this.responsive_:(e=Boolean(e))!==this.responsive_?(this.responsive_=e,e?(this.on("playerresize",this.boundUpdateCurrentBreakpoint_),this.updateCurrentBreakpoint_()):(this.off("playerresize",this.boundUpdateCurrentBreakpoint_),this.removeCurrentBreakpoint_()),e):void 0},n.currentBreakpoint=function(){return this.breakpoint_},n.currentBreakpointClass=function(){return js[this.breakpoint_]||""},n.loadMedia=function(e,t){var n=this;if(e&&"object"===typeof e){this.reset(),this.cache_.media=Fi(e);var i=this.cache_.media,r=i.artwork,a=i.poster,s=i.src,o=i.textTracks;!r&&a&&(this.cache_.media.artwork=[{src:a,type:Gr(a)}]),s&&this.src(s),a&&this.poster(a),Array.isArray(o)&&o.forEach((function(e){return n.addRemoteTextTrack(e,!1)})),this.ready(t)}},n.getMedia=function(){if(!this.cache_.media){var e=this.poster(),t={src:this.currentSources(),textTracks:Array.prototype.map.call(this.remoteTextTracks(),(function(e){return{kind:e.kind,label:e.label,language:e.language,src:e.src}}))};return e&&(t.poster=e,t.artwork=[{src:t.poster,type:Gr(t.poster)}]),t}return Fi(this.cache_.media)},t.getTagSettings=function(e){var t={sources:[],tracks:[]},n=Ln(e),i=n["data-setup"];if(Cn(e,"vjs-fill")&&(n.fill=!0),Cn(e,"vjs-fluid")&&(n.fluid=!0),null!==i){var r=p()(i||"{}"),a=r[0],s=r[1];a&&zt.error(a),Gt(n,s)}if(Gt(t,n),e.hasChildNodes())for(var o=e.childNodes,l=0,u=o.length;l<u;l++){var c=o[l],d=c.nodeName.toLowerCase();"source"===d?t.sources.push(Ln(c)):"track"===d&&t.tracks.push(Ln(c))}return t},n.flexNotSupported_=function(){var e=s().createElement("i");return!("flexBasis"in e.style||"webkitFlexBasis"in e.style||"mozFlexBasis"in e.style||"msFlexBasis"in e.style||"msFlexOrder"in e.style)},n.debug=function(e){if(void 0===e)return this.debugEnabled_;e?(this.trigger("debugon"),this.previousLogLevel_=this.log.level,this.log.level("debug"),this.debugEnabled_=!0):(this.trigger("debugoff"),this.log.level(this.previousLogLevel_),this.previousLogLevel_=void 0,this.debugEnabled_=!1)},n.playbackRates=function(e){if(void 0===e)return this.cache_.playbackRates;Array.isArray(e)&&e.every((function(e){return"number"===typeof e}))&&(this.cache_.playbackRates=e,this.trigger("playbackrateschange"))},t}(Wi);Mr.names.forEach((function(e){var t=Mr[e];Bs.prototype[t.getterName]=function(){return this.tech_?this.tech_[t.getterName]():(this[t.privateName]=this[t.privateName]||new t.ListClass,this[t.privateName])}})),Bs.prototype.crossorigin=Bs.prototype.crossOrigin,Bs.players={};var zs=r().navigator;Bs.prototype.options_={techOrder:Dr.defaultTechOrder_,html5:{},inactivityTimeout:2e3,playbackRates:[],liveui:!1,children:["mediaLoader","posterImage","textTrackDisplay","loadingSpinner","bigPlayButton","liveTracker","controlBar","errorDisplay","textTrackSettings","resizeManager"],language:zs&&(zs.languages&&zs.languages[0]||zs.userLanguage||zs.language)||"en",languages:{},notSupportedMessage:"No compatible source was found for this media.",normalizeAutoplay:!1,fullscreen:{options:{navigationUI:"hide"}},breakpoints:{},responsive:!1,audioOnlyMode:!1,audioPosterMode:!1},["ended","seeking","seekable","networkState","readyState"].forEach((function(e){Bs.prototype[e]=function(){return this.techGet_(e)}})),Rs.forEach((function(e){Bs.prototype["handleTech"+ji(e)+"_"]=function(){return this.trigger(e)}})),Wi.registerComponent("Player",Bs);var Vs="plugin",Hs="activePlugins_",Ws={},qs=function(e){return Ws.hasOwnProperty(e)},Gs=function(e){return qs(e)?Ws[e]:void 0},Xs=function(e,t){e[Hs]=e[Hs]||{},e[Hs][t]=!0},Ks=function(e,t,n){var i=(n?"before":"")+"pluginsetup";e.trigger(i,t),e.trigger(i+":"+t.name,t)},$s=function(e,t){return t.prototype.name=e,function(){Ks(this,{name:e,plugin:t,instance:null},!0);for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];var a=_(t,[this].concat(i));return this[e]=function(){return a},Ks(this,a.getEventHash()),a}},Ys=function(){function e(t){if(this.constructor===e)throw new Error("Plugin must be sub-classed; not directly instantiated.");this.player=t,this.log||(this.log=this.player.log.createLogger(this.name)),Di(this),delete this.trigger,Ni(this,this.constructor.defaultState),Xs(t,this.name),this.dispose=this.dispose.bind(this),t.on("dispose",this.dispose)}var t=e.prototype;return t.version=function(){return this.constructor.VERSION},t.getEventHash=function(e){return void 0===e&&(e={}),e.name=this.name,e.plugin=this.constructor,e.instance=this,e},t.trigger=function(e,t){return void 0===t&&(t={}),gi(this.eventBusEl_,e,this.getEventHash(t))},t.handleStateChanged=function(e){},t.dispose=function(){var e=this.name,t=this.player;this.trigger("dispose"),this.off(),t.off("dispose",this.dispose),t[Hs][e]=!1,this.player=this.state=null,t[e]=$s(e,Ws[e])},e.isBasic=function(t){var n="string"===typeof t?Gs(t):t;return"function"===typeof n&&!e.prototype.isPrototypeOf(n.prototype)},e.registerPlugin=function(t,n){if("string"!==typeof t)throw new Error('Illegal plugin name, "'+t+'", must be a string, was '+typeof t+".");if(qs(t))zt.warn('A plugin named "'+t+'" already exists. You may want to avoid re-registering plugins!');else if(Bs.prototype.hasOwnProperty(t))throw new Error('Illegal plugin name, "'+t+'", cannot share a name with an existing player method!');if("function"!==typeof n)throw new Error('Illegal plugin for "'+t+'", must be a function, was '+typeof n+".");return Ws[t]=n,t!==Vs&&(e.isBasic(n)?Bs.prototype[t]=function(e,t){var n=function(){Ks(this,{name:e,plugin:t,instance:null},!0);var n=t.apply(this,arguments);return Xs(this,e),Ks(this,{name:e,plugin:t,instance:n}),n};return Object.keys(t).forEach((function(e){n[e]=t[e]})),n}(t,n):Bs.prototype[t]=$s(t,n)),n},e.deregisterPlugin=function(e){if(e===Vs)throw new Error("Cannot de-register base plugin.");qs(e)&&(delete Ws[e],delete Bs.prototype[e])},e.getPlugins=function(e){var t;return void 0===e&&(e=Object.keys(Ws)),e.forEach((function(e){var n=Gs(e);n&&((t=t||{})[e]=n)})),t},e.getPluginVersion=function(e){var t=Gs(e);return t&&t.VERSION||""},e}();Ys.getPlugin=Gs,Ys.BASE_PLUGIN_NAME=Vs,Ys.registerPlugin(Vs,Ys),Bs.prototype.usingPlugin=function(e){return!!this[Hs]&&!0===this[Hs][e]},Bs.prototype.hasPlugin=function(e){return!!qs(e)};var Qs=!1,Js=function(e){return 0===e.indexOf("#")?e.slice(1):e};function Zs(e,t,n){var i=Zs.getPlayer(e);if(i)return t&&zt.warn('Player "'+e+'" is already initialised. Options will not be applied.'),n&&i.ready(n),i;var r="string"===typeof e?Kn("#"+Js(e)):e;if(!Tn(r))throw new TypeError("The element or ID supplied is not valid. (videojs)");r.ownerDocument.defaultView&&r.ownerDocument.body.contains(r)||zt.warn("The element supplied is not included in the DOM"),!0===(t=t||{}).restoreEl&&(t.restoreEl=(r.parentNode&&r.parentNode.hasAttribute("data-vjs-player")?r.parentNode:r).cloneNode(!0)),Lt("beforesetup").forEach((function(e){var n=e(r,Fi(t));Xt(n)&&!Array.isArray(n)?t=Fi(t,n):zt.error("please return an object in beforesetup hooks")}));var a=Wi.getComponent("Player");return i=new a(r,t,n),Lt("setup").forEach((function(e){return e(i)})),i}if(Zs.hooks_=Ot,Zs.hooks=Lt,Zs.hook=function(e,t){Lt(e,t)},Zs.hookOnce=function(e,t){Lt(e,[].concat(t).map((function(t){return function n(){return Mt(e,n),t.apply(void 0,arguments)}})))},Zs.removeHook=Mt,!0!==r().VIDEOJS_NO_DYNAMIC_STYLE&&bn()){var eo=Kn(".vjs-styles-defaults");if(!eo){eo=ni("vjs-styles-defaults");var to=Kn("head");to&&to.insertBefore(eo,to.firstChild),ii(eo,"\n      .video-js {\n        width: 300px;\n        height: 150px;\n      }\n\n      .vjs-fluid:not(.vjs-audio-only-mode) {\n        padding-top: 56.25%\n      }\n    ")}}Zn(1,Zs),Zs.VERSION=At,Zs.options=Bs.prototype.options_,Zs.getPlayers=function(){return Bs.players},Zs.getPlayer=function(e){var t,n=Bs.players;if("string"===typeof e){var i=Js(e),r=n[i];if(r)return r;t=Kn("#"+i)}else t=e;if(Tn(t)){var a=t,s=a.player,o=a.playerId;if(s||n[o])return s||n[o]}},Zs.getAllPlayers=function(){return Object.keys(Bs.players).map((function(e){return Bs.players[e]})).filter(Boolean)},Zs.players=Bs.players,Zs.getComponent=Wi.getComponent,Zs.registerComponent=function(e,t){Dr.isTech(t)&&zt.warn("The "+e+" tech was registered as a component. It should instead be registered using videojs.registerTech(name, tech)"),Wi.registerComponent.call(Wi,e,t)},Zs.getTech=Dr.getTech,Zs.registerTech=Dr.registerTech,Zs.use=function(e,t){Rr[e]=Rr[e]||[],Rr[e].push(t)},Object.defineProperty(Zs,"middleware",{value:{},writeable:!1,enumerable:!0}),Object.defineProperty(Zs.middleware,"TERMINATOR",{value:Ur,writeable:!1,enumerable:!0}),Zs.browser=vn,Zs.TOUCH_ENABLED=hn,Zs.extend=function(e,t){void 0===t&&(t={}),Qs||(zt.warn("videojs.extend is deprecated as of Video.js 7.22.0 and will be removed in Video.js 8.0.0"),Qs=!0);var n=function(){e.apply(this,arguments)},i={};for(var r in"object"===typeof t?(t.constructor!==Object.prototype.constructor&&(n=t.constructor),i=t):"function"===typeof t&&(n=t),function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&d(e,t)}(n,e),e&&(n.super_=e),i)i.hasOwnProperty(r)&&(n.prototype[r]=i[r]);return n},Zs.mergeOptions=Fi,Zs.bind=Ti,Zs.registerPlugin=Ys.registerPlugin,Zs.deregisterPlugin=Ys.deregisterPlugin,Zs.plugin=function(e,t){return zt.warn("videojs.plugin() is deprecated; use videojs.registerPlugin() instead"),Ys.registerPlugin(e,t)},Zs.getPlugins=Ys.getPlugins,Zs.getPlugin=Ys.getPlugin,Zs.getPluginVersion=Ys.getPluginVersion,Zs.addLanguage=function(e,t){var n;return e=(""+e).toLowerCase(),Zs.options.languages=Fi(Zs.options.languages,((n={})[e]=t,n)),Zs.options.languages[e]},Zs.log=zt,Zs.createLogger=Vt,Zs.createTimeRange=Zs.createTimeRanges=Xi,Zs.formatTime=ca,Zs.setFormatTime=function(e){ua=e},Zs.resetFormatTime=function(){ua=la},Zs.parseUrl=yr,Zs.isCrossOrigin=Tr,Zs.EventTarget=Si,Zs.on=fi,Zs.one=mi,Zs.off=pi,Zs.trigger=gi,Zs.xhr=m(),Zs.TextTrack=wr,Zs.AudioTrack=Er,Zs.VideoTrack=Cr,["isEl","isTextNode","createEl","hasClass","addClass","removeClass","toggleClass","setAttributes","getAttributes","emptyEl","appendContent","insertContent"].forEach((function(e){Zs[e]=function(){return zt.warn("videojs."+e+"() is deprecated; use videojs.dom."+e+"() instead"),Yn[e].apply(null,arguments)}})),Zs.computedStyle=$t,Zs.dom=Yn,Zs.url=kr,Zs.defineLazyProperty=Ms,Zs.addLanguage("en",{"Non-Fullscreen":"Exit Fullscreen"});var no=x,io=function(e,t,n){return e&&n&&n.responseURL&&t!==n.responseURL?n.responseURL:t},ro=function(e){return Zs.log.debug?Zs.log.debug.bind(Zs,"VHS:",e+" >"):function(){}},ao=1/30,so=.1,oo=function(e,t){var n,i=[];if(e&&e.length)for(n=0;n<e.length;n++)t(e.start(n),e.end(n))&&i.push([e.start(n),e.end(n)]);return Zs.createTimeRanges(i)},lo=function(e,t){return oo(e,(function(e,n){return e-so<=t&&n+so>=t}))},uo=function(e,t){return oo(e,(function(e){return e-ao>=t}))},co=function(e){var t=[];if(!e||!e.length)return"";for(var n=0;n<e.length;n++)t.push(e.start(n)+" => "+e.end(n));return t.join(", ")},ho=function(e){for(var t=[],n=0;n<e.length;n++)t.push({start:e.start(n),end:e.end(n)});return t},fo=function(e){if(e&&e.length&&e.end)return e.end(e.length-1)},po=function(e,t){var n=0;if(!e||!e.length)return n;for(var i=0;i<e.length;i++){var r=e.start(i),a=e.end(i);t>a||(n+=t>r&&t<=a?a-t:a-r)}return n},go=Zs.createTimeRange,mo=function(e,t){if(!t.preload)return t.duration;var n=0;return(t.parts||[]).forEach((function(e){n+=e.duration})),(t.preloadHints||[]).forEach((function(t){"PART"===t.type&&(n+=e.partTargetDuration)})),n},vo=function(e){return(e.segments||[]).reduce((function(e,t,n){return t.parts?t.parts.forEach((function(i,r){e.push({duration:i.duration,segmentIndex:n,partIndex:r,part:i,segment:t})})):e.push({duration:t.duration,segmentIndex:n,partIndex:null,segment:t,part:null}),e}),[])},yo=function(e){var t=e.segments&&e.segments.length&&e.segments[e.segments.length-1];return t&&t.parts||[]},_o=function(e){var t=e.preloadSegment;if(t){var n=t.parts,i=(t.preloadHints||[]).reduce((function(e,t){return e+("PART"===t.type?1:0)}),0);return i+=n&&n.length?n.length:0}},bo=function(e,t){if(t.endList)return 0;if(e&&e.suggestedPresentationDelay)return e.suggestedPresentationDelay;var n=yo(t).length>0;return n&&t.serverControl&&t.serverControl.partHoldBack?t.serverControl.partHoldBack:n&&t.partTargetDuration?3*t.partTargetDuration:t.serverControl&&t.serverControl.holdBack?t.serverControl.holdBack:t.targetDuration?3*t.targetDuration:0},To=function(e,t,n){if("undefined"===typeof t&&(t=e.mediaSequence+e.segments.length),t<e.mediaSequence)return 0;var i=function(e,t){var n=0,i=t-e.mediaSequence,r=e.segments[i];if(r){if("undefined"!==typeof r.start)return{result:r.start,precise:!0};if("undefined"!==typeof r.end)return{result:r.end-r.duration,precise:!0}}for(;i--;){if("undefined"!==typeof(r=e.segments[i]).end)return{result:n+r.end,precise:!0};if(n+=mo(e,r),"undefined"!==typeof r.start)return{result:n+r.start,precise:!0}}return{result:n,precise:!1}}(e,t);if(i.precise)return i.result;var r=function(e,t){for(var n,i=0,r=t-e.mediaSequence;r<e.segments.length;r++){if("undefined"!==typeof(n=e.segments[r]).start)return{result:n.start-i,precise:!0};if(i+=mo(e,n),"undefined"!==typeof n.end)return{result:n.end-i,precise:!0}}return{result:-1,precise:!1}}(e,t);return r.precise?r.result:i.result+n},ko=function(e,t,n){if(!e)return 0;if("number"!==typeof n&&(n=0),"undefined"===typeof t){if(e.totalDuration)return e.totalDuration;if(!e.endList)return r()[1/0]}return To(e,t,n)},xo=function(e){var t=e.defaultDuration,n=e.durationList,i=e.startIndex,r=e.endIndex,a=0;if(i>r){var s=[r,i];i=s[0],r=s[1]}if(i<0){for(var o=i;o<Math.min(0,r);o++)a+=t;i=0}for(var l=i;l<r;l++)a+=n[l].duration;return a},So=function(e,t,n,i){if(!e||!e.segments)return null;if(e.endList)return ko(e);if(null===t)return null;t=t||0;var r=To(e,e.mediaSequence+e.segments.length,t);return n&&(r-=i="number"===typeof i?i:bo(null,e)),Math.max(0,r)},wo=function(e){return e.excludeUntil&&e.excludeUntil>Date.now()},Eo=function(e){return e.excludeUntil&&e.excludeUntil===1/0},Co=function(e){var t=wo(e);return!e.disabled&&!t},Po=function(e,t){return t.attributes&&t.attributes[e]},Io=function(e,t){if(1===e.playlists.length)return!0;var n=t.attributes.BANDWIDTH||Number.MAX_VALUE;return 0===e.playlists.filter((function(e){return!!Co(e)&&(e.attributes.BANDWIDTH||0)<n})).length},Ao=function(e,t){return!(!e&&!t||!e&&t||e&&!t)&&(e===t||(!(!e.id||!t.id||e.id!==t.id)||(!(!e.resolvedUri||!t.resolvedUri||e.resolvedUri!==t.resolvedUri)||!(!e.uri||!t.uri||e.uri!==t.uri))))},Oo=function(e,t){var n=e&&e.mediaGroups&&e.mediaGroups.AUDIO||{},i=!1;for(var r in n){for(var a in n[r])if(i=t(n[r][a]))break;if(i)break}return!!i},Lo=function(e){if(!e||!e.playlists||!e.playlists.length)return Oo(e,(function(e){return e.playlists&&e.playlists.length||e.uri}));for(var t=function(t){var n=e.playlists[t],i=n.attributes&&n.attributes.CODECS;return i&&i.split(",").every((function(e){return z(e)}))||Oo(e,(function(e){return Ao(n,e)}))?"continue":{v:!1}},n=0;n<e.playlists.length;n++){var i=t(n);if("continue"!==i&&"object"===typeof i)return i.v}return!0},Mo={liveEdgeDelay:bo,duration:ko,seekable:function(e,t,n){var i=t||0,r=So(e,t,!0,n);return null===r?go():go(i,r)},getMediaInfoForTime:function(e){for(var t=e.playlist,n=e.currentTime,i=e.startingSegmentIndex,r=e.startingPartIndex,a=e.startTime,s=e.experimentalExactManifestTimings,o=n-a,l=vo(t),u=0,c=0;c<l.length;c++){var d=l[c];if(i===d.segmentIndex&&("number"!==typeof r||"number"!==typeof d.partIndex||r===d.partIndex)){u=c;break}}if(o<0){if(u>0)for(var h=u-1;h>=0;h--){var f=l[h];if(o+=f.duration,s){if(o<0)continue}else if(o+ao<=0)continue;return{partIndex:f.partIndex,segmentIndex:f.segmentIndex,startTime:a-xo({defaultDuration:t.targetDuration,durationList:l,startIndex:u,endIndex:h})}}return{partIndex:l[0]&&l[0].partIndex||null,segmentIndex:l[0]&&l[0].segmentIndex||0,startTime:n}}if(u<0){for(var p=u;p<0;p++)if((o-=t.targetDuration)<0)return{partIndex:l[0]&&l[0].partIndex||null,segmentIndex:l[0]&&l[0].segmentIndex||0,startTime:n};u=0}for(var g=u;g<l.length;g++){var m=l[g];if(o-=m.duration,s){if(o>0)continue}else if(o-ao>=0)continue;return{partIndex:m.partIndex,segmentIndex:m.segmentIndex,startTime:a+xo({defaultDuration:t.targetDuration,durationList:l,startIndex:u,endIndex:g})}}return{segmentIndex:l[l.length-1].segmentIndex,partIndex:l[l.length-1].partIndex,startTime:n}},isEnabled:Co,isDisabled:function(e){return e.disabled},isBlacklisted:wo,isIncompatible:Eo,playlistEnd:So,isAes:function(e){for(var t=0;t<e.segments.length;t++)if(e.segments[t].key)return!0;return!1},hasAttribute:Po,estimateSegmentRequestTime:function(e,t,n,i){return void 0===i&&(i=0),Po("BANDWIDTH",n)?(e*n.attributes.BANDWIDTH-8*i)/t:NaN},isLowestEnabledRendition:Io,isAudioOnly:Lo,playlistMatch:Ao,segmentDurationWithParts:mo},Do=Zs.log,Ro=function(e,t){return e+"-"+t},No=function(e,t,n){return"placeholder-uri-"+e+"-"+t+"-"+n},Uo=function(e,t){e.mediaGroups&&["AUDIO","SUBTITLES"].forEach((function(n){if(e.mediaGroups[n])for(var i in e.mediaGroups[n])for(var r in e.mediaGroups[n][i]){var a=e.mediaGroups[n][i][r];t(a,n,i,r)}}))},jo=function(e){var t=e.playlist,n=e.uri,i=e.id;t.id=i,t.playlistErrors_=0,n&&(t.uri=n),t.attributes=t.attributes||{}},Fo=function(e,t,n){void 0===n&&(n=No),e.uri=t;for(var i=0;i<e.playlists.length;i++)if(!e.playlists[i].uri){var r="placeholder-uri-"+i;e.playlists[i].uri=r}var a=Lo(e);Uo(e,(function(t,i,r,s){if(!t.playlists||!t.playlists.length){if(a&&"AUDIO"===i&&!t.uri)for(var l=0;l<e.playlists.length;l++){var u=e.playlists[l];if(u.attributes&&u.attributes.AUDIO&&u.attributes.AUDIO===r)return}t.playlists=[o({},t)]}t.playlists.forEach((function(t,a){var o=n(i,r,s,t),l=Ro(a,o);t.uri?t.resolvedUri=t.resolvedUri||no(e.uri,t.uri):(t.uri=0===a?o:l,t.resolvedUri=t.uri),t.id=t.id||l,t.attributes=t.attributes||{},e.playlists[t.id]=t,e.playlists[t.uri]=t}))})),function(e){for(var t=e.playlists.length;t--;){var n=e.playlists[t];jo({playlist:n,id:Ro(t,n.uri)}),n.resolvedUri=no(e.uri,n.uri),e.playlists[n.id]=n,e.playlists[n.uri]=n,n.attributes.BANDWIDTH||Do.warn("Invalid playlist STREAM-INF detected. Missing BANDWIDTH attribute.")}}(e),function(e){Uo(e,(function(t){t.uri&&(t.resolvedUri=no(e.uri,t.uri))}))}(e)},Bo=Zs.mergeOptions,zo=Zs.EventTarget,Vo=function(e,t){if(!e)return t;var n=Bo(e,t);if(e.preloadHints&&!t.preloadHints&&delete n.preloadHints,e.parts&&!t.parts)delete n.parts;else if(e.parts&&t.parts)for(var i=0;i<t.parts.length;i++)e.parts&&e.parts[i]&&(n.parts[i]=Bo(e.parts[i],t.parts[i]));return!e.skipped&&t.skipped&&(n.skipped=!1),e.preload&&!t.preload&&(n.preload=!1),n},Ho=function(e,t){!e.resolvedUri&&e.uri&&(e.resolvedUri=no(t,e.uri)),e.key&&!e.key.resolvedUri&&(e.key.resolvedUri=no(t,e.key.uri)),e.map&&!e.map.resolvedUri&&(e.map.resolvedUri=no(t,e.map.uri)),e.map&&e.map.key&&!e.map.key.resolvedUri&&(e.map.key.resolvedUri=no(t,e.map.key.uri)),e.parts&&e.parts.length&&e.parts.forEach((function(e){e.resolvedUri||(e.resolvedUri=no(t,e.uri))})),e.preloadHints&&e.preloadHints.length&&e.preloadHints.forEach((function(e){e.resolvedUri||(e.resolvedUri=no(t,e.uri))}))},Wo=function(e){var t=e.segments||[],n=e.preloadSegment;if(n&&n.parts&&n.parts.length){if(n.preloadHints)for(var i=0;i<n.preloadHints.length;i++)if("MAP"===n.preloadHints[i].type)return t;n.duration=e.targetDuration,n.preload=!0,t.push(n)}return t},qo=function(e,t){return e===t||e.segments&&t.segments&&e.segments.length===t.segments.length&&e.endList===t.endList&&e.mediaSequence===t.mediaSequence&&e.preloadSegment===t.preloadSegment},Go=function(e,t,n){void 0===n&&(n=qo);var i=Bo(e,{}),r=i.playlists[t.id];if(!r)return null;if(n(r,t))return null;t.segments=Wo(t);var a=Bo(r,t);if(a.preloadSegment&&!t.preloadSegment&&delete a.preloadSegment,r.segments){if(t.skip){t.segments=t.segments||[];for(var s=0;s<t.skip.skippedSegments;s++)t.segments.unshift({skipped:!0})}a.segments=function(e,t,n){var i=e.slice(),r=t.slice();n=n||0;for(var a,s=[],o=0;o<r.length;o++){var l=i[o+n],u=r[o];l?(a=l.map||a,s.push(Vo(l,u))):(a&&!u.map&&(u.map=a),s.push(u))}return s}(r.segments,t.segments,t.mediaSequence-r.mediaSequence)}a.segments.forEach((function(e){Ho(e,a.resolvedUri)}));for(var o=0;o<i.playlists.length;o++)i.playlists[o].id===t.id&&(i.playlists[o]=a);return i.playlists[t.id]=a,i.playlists[t.uri]=a,Uo(e,(function(e,n,i,r){if(e.playlists)for(var s=0;s<e.playlists.length;s++)t.id===e.playlists[s].id&&(e.playlists[s]=a)})),i},Xo=function(e,t){var n=e.segments||[],i=n[n.length-1],r=i&&i.parts&&i.parts[i.parts.length-1],a=r&&r.duration||i&&i.duration;return t&&a?1e3*a:500*(e.partTargetDuration||e.targetDuration||10)},Ko=function(e){function t(t,n,i){var r;if(void 0===i&&(i={}),r=e.call(this)||this,!t)throw new Error("A non-empty playlist URL or object is required");r.logger_=ro("PlaylistLoader");var a=i,s=a.withCredentials,o=void 0!==s&&s,l=a.handleManifestRedirects,u=void 0!==l&&l;r.src=t,r.vhs_=n,r.withCredentials=o,r.handleManifestRedirects=u;var d=n.options_;return r.customTagParsers=d&&d.customTagParsers||[],r.customTagMappers=d&&d.customTagMappers||[],r.experimentalLLHLS=d&&d.experimentalLLHLS||!1,Zs.browser.IE_VERSION&&(r.experimentalLLHLS=!1),r.state="HAVE_NOTHING",r.handleMediaupdatetimeout_=r.handleMediaupdatetimeout_.bind(c(r)),r.on("mediaupdatetimeout",r.handleMediaupdatetimeout_),r}h(t,e);var n=t.prototype;return n.handleMediaupdatetimeout_=function(){var e=this;if("HAVE_METADATA"===this.state){var t=this.media(),n=no(this.master.uri,t.uri);this.experimentalLLHLS&&(n=function(e,t){if(t.endList||!t.serverControl)return e;var n={};if(t.serverControl.canBlockReload){var i=t.preloadSegment,a=t.mediaSequence+t.segments.length;if(i){var s=i.parts||[],o=_o(t)-1;o>-1&&o!==s.length-1&&(n._HLS_part=o),(o>-1||s.length)&&a--}n._HLS_msn=a}if(t.serverControl&&t.serverControl.canSkipUntil&&(n._HLS_skip=t.serverControl.canSkipDateranges?"v2":"YES"),Object.keys(n).length){var l=new(r().URL)(e);["_HLS_skip","_HLS_msn","_HLS_part"].forEach((function(e){n.hasOwnProperty(e)&&l.searchParams.set(e,n[e])})),e=l.toString()}return e}(n,t)),this.state="HAVE_CURRENT_METADATA",this.request=this.vhs_.xhr({uri:n,withCredentials:this.withCredentials},(function(t,n){if(e.request)return t?e.playlistRequestError(e.request,e.media(),"HAVE_METADATA"):void e.haveMetadata({playlistString:e.request.responseText,url:e.media().uri,id:e.media().id})}))}},n.playlistRequestError=function(e,t,n){var i=t.uri,r=t.id;this.request=null,n&&(this.state=n),this.error={playlist:this.master.playlists[r],status:e.status,message:"HLS playlist request error at URL: "+i+".",responseText:e.responseText,code:e.status>=500?4:2},this.trigger("error")},n.parseManifest_=function(e){var t=this,n=e.url;return function(e){var t=e.onwarn,n=e.oninfo,i=e.manifestString,r=e.customTagParsers,a=void 0===r?[]:r,s=e.customTagMappers,o=void 0===s?[]:s,l=e.experimentalLLHLS,u=new R;t&&u.on("warn",t),n&&u.on("info",n),a.forEach((function(e){return u.addParser(e)})),o.forEach((function(e){return u.addTagMapper(e)})),u.push(i),u.end();var c=u.manifest;if(l||(["preloadSegment","skip","serverControl","renditionReports","partInf","partTargetDuration"].forEach((function(e){c.hasOwnProperty(e)&&delete c[e]})),c.segments&&c.segments.forEach((function(e){["parts","preloadHints"].forEach((function(t){e.hasOwnProperty(t)&&delete e[t]}))}))),!c.targetDuration){var d=10;c.segments&&c.segments.length&&(d=c.segments.reduce((function(e,t){return Math.max(e,t.duration)}),0)),t&&t("manifest has no targetDuration defaulting to "+d),c.targetDuration=d}var h=yo(c);if(h.length&&!c.partTargetDuration){var f=h.reduce((function(e,t){return Math.max(e,t.duration)}),0);t&&(t("manifest has no partTargetDuration defaulting to "+f),Do.error("LL-HLS manifest has parts but lacks required #EXT-X-PART-INF:PART-TARGET value. See https://datatracker.ietf.org/doc/html/draft-pantos-hls-rfc8216bis-09#section-4.4.3.7. Playback is not guaranteed.")),c.partTargetDuration=f}return c}({onwarn:function(e){var i=e.message;return t.logger_("m3u8-parser warn for "+n+": "+i)},oninfo:function(e){var i=e.message;return t.logger_("m3u8-parser info for "+n+": "+i)},manifestString:e.manifestString,customTagParsers:this.customTagParsers,customTagMappers:this.customTagMappers,experimentalLLHLS:this.experimentalLLHLS})},n.haveMetadata=function(e){var t=e.playlistString,n=e.playlistObject,i=e.url,r=e.id;this.request=null,this.state="HAVE_METADATA";var a=n||this.parseManifest_({url:i,manifestString:t});a.lastRequest=Date.now(),jo({playlist:a,uri:i,id:r});var s=Go(this.master,a);this.targetDuration=a.partTargetDuration||a.targetDuration,this.pendingMedia_=null,s?(this.master=s,this.media_=this.master.playlists[r]):this.trigger("playlistunchanged"),this.updateMediaUpdateTimeout_(Xo(this.media(),!!s)),this.trigger("loadedplaylist")},n.dispose=function(){this.trigger("dispose"),this.stopRequest(),r().clearTimeout(this.mediaUpdateTimeout),r().clearTimeout(this.finalRenditionTimeout),this.off()},n.stopRequest=function(){if(this.request){var e=this.request;this.request=null,e.onreadystatechange=null,e.abort()}},n.media=function(e,t){var n=this;if(!e)return this.media_;if("HAVE_NOTHING"===this.state)throw new Error("Cannot switch media playlist from "+this.state);if("string"===typeof e){if(!this.master.playlists[e])throw new Error("Unknown playlist URI: "+e);e=this.master.playlists[e]}if(r().clearTimeout(this.finalRenditionTimeout),t){var i=(e.partTargetDuration||e.targetDuration)/2*1e3||5e3;this.finalRenditionTimeout=r().setTimeout(this.media.bind(this,e,!1),i)}else{var a=this.state,s=!this.media_||e.id!==this.media_.id,o=this.master.playlists[e.id];if(o&&o.endList||e.endList&&e.segments.length)return this.request&&(this.request.onreadystatechange=null,this.request.abort(),this.request=null),this.state="HAVE_METADATA",this.media_=e,void(s&&(this.trigger("mediachanging"),"HAVE_MASTER"===a?this.trigger("loadedmetadata"):this.trigger("mediachange")));if(this.updateMediaUpdateTimeout_(Xo(e,!0)),s){if(this.state="SWITCHING_MEDIA",this.request){if(e.resolvedUri===this.request.url)return;this.request.onreadystatechange=null,this.request.abort(),this.request=null}this.media_&&this.trigger("mediachanging"),this.pendingMedia_=e,this.request=this.vhs_.xhr({uri:e.resolvedUri,withCredentials:this.withCredentials},(function(t,i){if(n.request){if(e.lastRequest=Date.now(),e.resolvedUri=io(n.handleManifestRedirects,e.resolvedUri,i),t)return n.playlistRequestError(n.request,e,a);n.haveMetadata({playlistString:i.responseText,url:e.uri,id:e.id}),"HAVE_MASTER"===a?n.trigger("loadedmetadata"):n.trigger("mediachange")}}))}}},n.pause=function(){this.mediaUpdateTimeout&&(r().clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null),this.stopRequest(),"HAVE_NOTHING"===this.state&&(this.started=!1),"SWITCHING_MEDIA"===this.state?this.media_?this.state="HAVE_METADATA":this.state="HAVE_MASTER":"HAVE_CURRENT_METADATA"===this.state&&(this.state="HAVE_METADATA")},n.load=function(e){var t=this;this.mediaUpdateTimeout&&(r().clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null);var n=this.media();if(e){var i=n?(n.partTargetDuration||n.targetDuration)/2*1e3:5e3;this.mediaUpdateTimeout=r().setTimeout((function(){t.mediaUpdateTimeout=null,t.load()}),i)}else this.started?n&&!n.endList?this.trigger("mediaupdatetimeout"):this.trigger("loadedplaylist"):this.start()},n.updateMediaUpdateTimeout_=function(e){var t=this;this.mediaUpdateTimeout&&(r().clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null),this.media()&&!this.media().endList&&(this.mediaUpdateTimeout=r().setTimeout((function(){t.mediaUpdateTimeout=null,t.trigger("mediaupdatetimeout"),t.updateMediaUpdateTimeout_(e)}),e))},n.start=function(){var e=this;if(this.started=!0,"object"===typeof this.src)return this.src.uri||(this.src.uri=r().location.href),this.src.resolvedUri=this.src.uri,void setTimeout((function(){e.setupInitialPlaylist(e.src)}),0);this.request=this.vhs_.xhr({uri:this.src,withCredentials:this.withCredentials},(function(t,n){if(e.request){if(e.request=null,t)return e.error={status:n.status,message:"HLS playlist request error at URL: "+e.src+".",responseText:n.responseText,code:2},"HAVE_NOTHING"===e.state&&(e.started=!1),e.trigger("error");e.src=io(e.handleManifestRedirects,e.src,n);var i=e.parseManifest_({manifestString:n.responseText,url:e.src});e.setupInitialPlaylist(i)}}))},n.srcUri=function(){return"string"===typeof this.src?this.src:this.src.uri},n.setupInitialPlaylist=function(e){if(this.state="HAVE_MASTER",e.playlists)return this.master=e,Fo(this.master,this.srcUri()),e.playlists.forEach((function(e){e.segments=Wo(e),e.segments.forEach((function(t){Ho(t,e.resolvedUri)}))})),this.trigger("loadedplaylist"),void(this.request||this.media(this.master.playlists[0]));var t=this.srcUri()||r().location.href;this.master=function(e,t){var n=Ro(0,t),i={mediaGroups:{AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},uri:r().location.href,resolvedUri:r().location.href,playlists:[{uri:t,id:n,resolvedUri:t,attributes:{}}]};return i.playlists[n]=i.playlists[0],i.playlists[t]=i.playlists[0],i}(0,t),this.haveMetadata({playlistObject:e,url:t,id:this.master.playlists[0].id}),this.trigger("loadedmetadata")},t}(zo),$o=Zs.xhr,Yo=Zs.mergeOptions,Qo=function(e,t,n,i){var r="arraybuffer"===e.responseType?e.response:e.responseText;!t&&r&&(e.responseTime=Date.now(),e.roundTripTime=e.responseTime-e.requestTime,e.bytesReceived=r.byteLength||r.length,e.bandwidth||(e.bandwidth=Math.floor(e.bytesReceived/e.roundTripTime*8*1e3))),n.headers&&(e.responseHeaders=n.headers),t&&"ETIMEDOUT"===t.code&&(e.timedout=!0),t||e.aborted||200===n.statusCode||206===n.statusCode||0===n.statusCode||(t=new Error("XHR Failed with a response of: "+(e&&(r||e.responseText)))),i(t,e)},Jo=function(){var e=function e(t,n){t=Yo({timeout:45e3},t);var i=e.beforeRequest||Zs.Vhs.xhr.beforeRequest;if(i&&"function"===typeof i){var r=i(t);r&&(t=r)}var a=(!0===Zs.Vhs.xhr.original?$o:Zs.Vhs.xhr)(t,(function(e,t){return Qo(a,e,t,n)})),s=a.abort;return a.abort=function(){return a.aborted=!0,s.apply(a,arguments)},a.uri=t.uri,a.requestTime=Date.now(),a};return e.original=!0,e},Zo=function(e){var t,n={};return e.byterange&&(n.Range="bytes="+(t=e.byterange).offset+"-"+("bigint"===typeof t.offset||"bigint"===typeof t.length?r().BigInt(t.offset)+r().BigInt(t.length)-r().BigInt(1):t.offset+t.length-1)),n},el=function(e,t){return e.start(t)+"-"+e.end(t)},tl=function(e,t){var n=e.toString(16);return"00".substring(0,2-n.length)+n+(t%2?" ":"")},nl=function(e){return e>=32&&e<126?String.fromCharCode(e):"."},il=function(e){var t={};return Object.keys(e).forEach((function(n){var i=e[n];$(i)?t[n]={bytes:i.buffer,byteOffset:i.byteOffset,byteLength:i.byteLength}:t[n]=i})),t},rl=function(e){var t=e.byterange||{length:1/0,offset:0};return[t.length,t.offset,e.resolvedUri].join(",")},al=function(e){return e.resolvedUri},sl=function(e){for(var t=Array.prototype.slice.call(e),n=16,i="",r=0;r<t.length/n;r++)i+=t.slice(r*n,r*n+n).map(tl).join("")+" "+t.slice(r*n,r*n+n).map(nl).join("")+"\n";return i},ol=Object.freeze({__proto__:null,createTransferableMessage:il,initSegmentId:rl,segmentKeyId:al,hexDump:sl,tagDump:function(e){var t=e.bytes;return sl(t)},textRanges:function(e){var t,n="";for(t=0;t<e.length;t++)n+=el(e,t)+" ";return n}}),ll=function(e){var t=e.playlist,n=e.time,i=void 0===n?void 0:n,r=e.callback;if(!r)throw new Error("getProgramTime: callback must be provided");if(!t||void 0===i)return r({message:"getProgramTime: playlist and time must be provided"});var a=function(e,t){if(!t||!t.segments||0===t.segments.length)return null;for(var n,i=0,r=0;r<t.segments.length&&!(e<=(i=(n=t.segments[r]).videoTimingInfo?n.videoTimingInfo.transmuxedPresentationEnd:i+n.duration));r++);var a=t.segments[t.segments.length-1];if(a.videoTimingInfo&&a.videoTimingInfo.transmuxedPresentationEnd<e)return null;if(e>i){if(e>i+.25*a.duration)return null;n=a}return{segment:n,estimatedStart:n.videoTimingInfo?n.videoTimingInfo.transmuxedPresentationStart:i-n.duration,type:n.videoTimingInfo?"accurate":"estimate"}}(i,t);if(!a)return r({message:"valid programTime was not found"});if("estimate"===a.type)return r({message:"Accurate programTime could not be determined. Please seek to e.seekTime and try again",seekTime:a.estimatedStart});var s={mediaSeconds:i},o=function(e,t){if(!t.dateTimeObject)return null;var n=t.videoTimingInfo.transmuxerPrependedSeconds,i=e-(t.videoTimingInfo.transmuxedPresentationStart+n);return new Date(t.dateTimeObject.getTime()+1e3*i)}(i,a.segment);return o&&(s.programDateTime=o.toISOString()),r(null,s)},ul=function e(t){var n=t.programTime,i=t.playlist,r=t.retryCount,a=void 0===r?2:r,s=t.seekTo,o=t.pauseAfterSeek,l=void 0===o||o,u=t.tech,c=t.callback;if(!c)throw new Error("seekToProgramTime: callback must be provided");if("undefined"===typeof n||!i||!s)return c({message:"seekToProgramTime: programTime, seekTo and playlist must be provided"});if(!i.endList&&!u.hasStarted_)return c({message:"player must be playing a live stream to start buffering"});if(!function(e){if(!e.segments||0===e.segments.length)return!1;for(var t=0;t<e.segments.length;t++)if(!e.segments[t].dateTimeObject)return!1;return!0}(i))return c({message:"programDateTime tags must be provided in the manifest "+i.resolvedUri});var d=function(e,t){var n;try{n=new Date(e)}catch(u){return null}if(!t||!t.segments||0===t.segments.length)return null;var i=t.segments[0];if(n<i.dateTimeObject)return null;for(var r=0;r<t.segments.length-1&&(i=t.segments[r],!(n<t.segments[r+1].dateTimeObject));r++);var a,s=t.segments[t.segments.length-1],o=s.dateTimeObject,l=s.videoTimingInfo?(a=s.videoTimingInfo).transmuxedPresentationEnd-a.transmuxedPresentationStart-a.transmuxerPrependedSeconds:s.duration+.25*s.duration;return n>new Date(o.getTime()+1e3*l)?null:(n>o&&(i=s),{segment:i,estimatedStart:i.videoTimingInfo?i.videoTimingInfo.transmuxedPresentationStart:Mo.duration(t,t.mediaSequence+t.segments.indexOf(i)),type:i.videoTimingInfo?"accurate":"estimate"})}(n,i);if(!d)return c({message:n+" was not found in the stream"});var h=d.segment,f=function(e,t){var n,i;try{n=new Date(e),i=new Date(t)}catch(a){}var r=n.getTime();return(i.getTime()-r)/1e3}(h.dateTimeObject,n);if("estimate"===d.type)return 0===a?c({message:n+" is not buffered yet. Try again"}):(s(d.estimatedStart+f),void u.one("seeked",(function(){e({programTime:n,playlist:i,retryCount:a-1,seekTo:s,pauseAfterSeek:l,tech:u,callback:c})})));var p=h.start+f;u.one("seeked",(function(){return c(null,u.currentTime())})),l&&u.pause(),s(p)},cl=function(e,t){if(4===e.readyState)return t()},dl=function(e,t,n){var i,r=[],a=!1,s=function(e,t,i,r){return t.abort(),a=!0,n(e,t,i,r)},o=function(e,t){if(!a){if(e)return s(e,t,"",r);var n=t.responseText.substring(r&&r.byteLength||0,t.responseText.length);if(r=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if((t=t.filter((function(e){return e&&(e.byteLength||e.length)&&"string"!==typeof e}))).length<=1)return Y(t[0]);var i=t.reduce((function(e,t,n){return e+(t.byteLength||t.length)}),0),r=new Uint8Array(i),a=0;return t.forEach((function(e){e=Y(e),r.set(e,a),a+=e.byteLength})),r}(r,te(n,!0)),i=i||st(r),r.length<10||i&&r.length<i+2)return cl(t,(function(){return s(e,t,"",r)}));var o=wt(r);return"ts"===o&&r.length<188||!o&&r.length<376?cl(t,(function(){return s(e,t,"",r)})):s(null,t,o,r)}},l={uri:e,beforeSend:function(e){e.overrideMimeType("text/plain; charset=x-user-defined"),e.addEventListener("progress",(function(t){return t.total,t.loaded,Qo(e,null,{statusCode:e.status},o)}))}},u=t(l,(function(e,t){return Qo(u,e,t,o)}));return u},hl=Zs.EventTarget,fl=Zs.mergeOptions,pl=function(e,t){if(!qo(e,t))return!1;if(e.sidx&&t.sidx&&(e.sidx.offset!==t.sidx.offset||e.sidx.length!==t.sidx.length))return!1;if(!e.sidx&&t.sidx||e.sidx&&!t.sidx)return!1;if(e.segments&&!t.segments||!e.segments&&t.segments)return!1;if(!e.segments&&!t.segments)return!0;for(var n=0;n<e.segments.length;n++){var i=e.segments[n],r=t.segments[n];if(i.uri!==r.uri)return!1;if(i.byterange||r.byterange){var a=i.byterange,s=r.byterange;if(a&&!s||!a&&s)return!1;if(a.offset!==s.offset||a.length!==s.length)return!1}}return!0},gl=function(e,t,n,i){return"placeholder-uri-"+e+"-"+t+"-"+(i.attributes.NAME||n)},ml=function(e,t,n){for(var i=!0,r=fl(e,{duration:t.duration,minimumUpdatePeriod:t.minimumUpdatePeriod,timelineStarts:t.timelineStarts}),a=0;a<t.playlists.length;a++){var s=t.playlists[a];if(s.sidx){var o=Ce(s.sidx);n&&n[o]&&n[o].sidx&&Te(s,n[o].sidx,s.sidx.resolvedUri)}var l=Go(r,s,pl);l&&(r=l,i=!1)}return Uo(t,(function(e,t,n,a){if(e.playlists&&e.playlists.length){var s=e.playlists[0].id,o=Go(r,e.playlists[0],pl);o&&(a in(r=o).mediaGroups[t][n]||(r.mediaGroups[t][n][a]=e),r.mediaGroups[t][n][a].playlists[0]=r.playlists[s],i=!1)}})),function(e,t){Uo(e,(function(n,i,r,a){a in t.mediaGroups[i][r]||delete e.mediaGroups[i][r][a]}))}(r,t),t.minimumUpdatePeriod!==e.minimumUpdatePeriod&&(i=!1),i?null:r},vl=function(e,t){var n,i,r={};for(var a in e){var s=e[a].sidx;if(s){var o=Ce(s);if(!t[o])break;var l=t[o].sidxInfo;n=l,i=s,(Boolean(!n.map&&!i.map)||Boolean(n.map&&i.map&&n.map.byterange.offset===i.map.byterange.offset&&n.map.byterange.length===i.map.byterange.length))&&n.uri===i.uri&&n.byterange.offset===i.byterange.offset&&n.byterange.length===i.byterange.length&&(r[o]=t[o])}}return r},yl=function(e){function t(t,n,i,r){var a;void 0===i&&(i={}),(a=e.call(this)||this).masterPlaylistLoader_=r||c(a),r||(a.isMaster_=!0);var s=i,o=s.withCredentials,l=void 0!==o&&o,u=s.handleManifestRedirects,d=void 0!==u&&u;if(a.vhs_=n,a.withCredentials=l,a.handleManifestRedirects=d,!t)throw new Error("A non-empty playlist URL or object is required");return a.on("minimumUpdatePeriod",(function(){a.refreshXml_()})),a.on("mediaupdatetimeout",(function(){a.refreshMedia_(a.media().id)})),a.state="HAVE_NOTHING",a.loadedPlaylists_={},a.logger_=ro("DashPlaylistLoader"),a.isMaster_?(a.masterPlaylistLoader_.srcUrl=t,a.masterPlaylistLoader_.sidxMapping_={}):a.childPlaylist_=t,a}h(t,e);var n=t.prototype;return n.requestErrored_=function(e,t,n){return!this.request||(this.request=null,e?(this.error="object"!==typeof e||e instanceof Error?{status:t.status,message:"DASH request error at URL: "+t.uri,response:t.response,code:2}:e,n&&(this.state=n),this.trigger("error"),!0):void 0)},n.addSidxSegments_=function(e,t,n){var i=this,a=e.sidx&&Ce(e.sidx);if(e.sidx&&a&&!this.masterPlaylistLoader_.sidxMapping_[a]){var s=io(this.handleManifestRedirects,e.sidx.resolvedUri),o=function(r,s){if(!i.requestErrored_(r,s,t)){var o,l=i.masterPlaylistLoader_.sidxMapping_;try{o=rt()(Y(s.response).subarray(8))}catch(u){return void i.requestErrored_(u,s,t)}return l[a]={sidxInfo:e.sidx,sidx:o},Te(e,o,e.sidx.resolvedUri),n(!0)}};this.request=dl(s,this.vhs_.xhr,(function(t,n,r,a){if(t)return o(t,n);if(!r||"mp4"!==r)return o({status:n.status,message:"Unsupported "+(r||"unknown")+" container type for sidx segment at URL: "+s,response:"",playlist:e,internal:!0,blacklistDuration:1/0,code:2},n);var l=e.sidx.byterange,u=l.offset,c=l.length;if(a.length>=c+u)return o(t,{response:a.subarray(u,u+c),status:n.status,uri:n.uri});i.request=i.vhs_.xhr({uri:s,responseType:"arraybuffer",headers:Zo({byterange:e.sidx.byterange})},o)}))}else this.mediaRequest_=r().setTimeout((function(){return n(!1)}),0)},n.dispose=function(){this.trigger("dispose"),this.stopRequest(),this.loadedPlaylists_={},r().clearTimeout(this.minimumUpdatePeriodTimeout_),r().clearTimeout(this.mediaRequest_),r().clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null,this.mediaRequest_=null,this.minimumUpdatePeriodTimeout_=null,this.masterPlaylistLoader_.createMupOnMedia_&&(this.off("loadedmetadata",this.masterPlaylistLoader_.createMupOnMedia_),this.masterPlaylistLoader_.createMupOnMedia_=null),this.off()},n.hasPendingRequest=function(){return this.request||this.mediaRequest_},n.stopRequest=function(){if(this.request){var e=this.request;this.request=null,e.onreadystatechange=null,e.abort()}},n.media=function(e){var t=this;if(!e)return this.media_;if("HAVE_NOTHING"===this.state)throw new Error("Cannot switch media playlist from "+this.state);var n=this.state;if("string"===typeof e){if(!this.masterPlaylistLoader_.master.playlists[e])throw new Error("Unknown playlist URI: "+e);e=this.masterPlaylistLoader_.master.playlists[e]}var i=!this.media_||e.id!==this.media_.id;if(i&&this.loadedPlaylists_[e.id]&&this.loadedPlaylists_[e.id].endList)return this.state="HAVE_METADATA",this.media_=e,void(i&&(this.trigger("mediachanging"),this.trigger("mediachange")));i&&(this.media_&&this.trigger("mediachanging"),this.addSidxSegments_(e,n,(function(i){t.haveMetadata({startingState:n,playlist:e})})))},n.haveMetadata=function(e){var t=e.startingState,n=e.playlist;this.state="HAVE_METADATA",this.loadedPlaylists_[n.id]=n,this.mediaRequest_=null,this.refreshMedia_(n.id),"HAVE_MASTER"===t?this.trigger("loadedmetadata"):this.trigger("mediachange")},n.pause=function(){this.masterPlaylistLoader_.createMupOnMedia_&&(this.off("loadedmetadata",this.masterPlaylistLoader_.createMupOnMedia_),this.masterPlaylistLoader_.createMupOnMedia_=null),this.stopRequest(),r().clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null,this.isMaster_&&(r().clearTimeout(this.masterPlaylistLoader_.minimumUpdatePeriodTimeout_),this.masterPlaylistLoader_.minimumUpdatePeriodTimeout_=null),"HAVE_NOTHING"===this.state&&(this.started=!1)},n.load=function(e){var t=this;r().clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null;var n=this.media();if(e){var i=n?n.targetDuration/2*1e3:5e3;this.mediaUpdateTimeout=r().setTimeout((function(){return t.load()}),i)}else this.started?n&&!n.endList?(this.isMaster_&&!this.minimumUpdatePeriodTimeout_&&(this.trigger("minimumUpdatePeriod"),this.updateMinimumUpdatePeriodTimeout_()),this.trigger("mediaupdatetimeout")):this.trigger("loadedplaylist"):this.start()},n.start=function(){var e=this;this.started=!0,this.isMaster_?this.requestMaster_((function(t,n){e.haveMaster_(),e.hasPendingRequest()||e.media_||e.media(e.masterPlaylistLoader_.master.playlists[0])})):this.mediaRequest_=r().setTimeout((function(){return e.haveMaster_()}),0)},n.requestMaster_=function(e){var t=this;this.request=this.vhs_.xhr({uri:this.masterPlaylistLoader_.srcUrl,withCredentials:this.withCredentials},(function(n,i){if(!t.requestErrored_(n,i)){var r=i.responseText!==t.masterPlaylistLoader_.masterXml_;return t.masterPlaylistLoader_.masterXml_=i.responseText,i.responseHeaders&&i.responseHeaders.date?t.masterLoaded_=Date.parse(i.responseHeaders.date):t.masterLoaded_=Date.now(),t.masterPlaylistLoader_.srcUrl=io(t.handleManifestRedirects,t.masterPlaylistLoader_.srcUrl,i),r?(t.handleMaster_(),void t.syncClientServerClock_((function(){return e(i,r)}))):e(i,r)}"HAVE_NOTHING"===t.state&&(t.started=!1)}))},n.syncClientServerClock_=function(e){var t=this,n=nt(this.masterPlaylistLoader_.masterXml_);return null===n?(this.masterPlaylistLoader_.clientOffset_=this.masterLoaded_-Date.now(),e()):"DIRECT"===n.method?(this.masterPlaylistLoader_.clientOffset_=n.value-Date.now(),e()):void(this.request=this.vhs_.xhr({uri:no(this.masterPlaylistLoader_.srcUrl,n.value),method:n.method,withCredentials:this.withCredentials},(function(i,r){if(t.request){if(i)return t.masterPlaylistLoader_.clientOffset_=t.masterLoaded_-Date.now(),e();var a;a="HEAD"===n.method?r.responseHeaders&&r.responseHeaders.date?Date.parse(r.responseHeaders.date):t.masterLoaded_:Date.parse(r.responseText),t.masterPlaylistLoader_.clientOffset_=a-Date.now(),e()}})))},n.haveMaster_=function(){this.state="HAVE_MASTER",this.isMaster_?this.trigger("loadedplaylist"):this.media_||this.media(this.childPlaylist_)},n.handleMaster_=function(){this.mediaRequest_=null;var e=this.masterPlaylistLoader_.master,t=function(e){var t=e.masterXml,n=e.srcUrl,i=e.clientOffset,r=e.sidxMapping,a=e.previousManifest,s=tt(t,{manifestUri:n,clientOffset:i,sidxMapping:r,previousManifest:a});return Fo(s,n,gl),s}({masterXml:this.masterPlaylistLoader_.masterXml_,srcUrl:this.masterPlaylistLoader_.srcUrl,clientOffset:this.masterPlaylistLoader_.clientOffset_,sidxMapping:this.masterPlaylistLoader_.sidxMapping_,previousManifest:e});e&&(t=ml(e,t,this.masterPlaylistLoader_.sidxMapping_)),this.masterPlaylistLoader_.master=t||e;var n=this.masterPlaylistLoader_.master.locations&&this.masterPlaylistLoader_.master.locations[0];return n&&n!==this.masterPlaylistLoader_.srcUrl&&(this.masterPlaylistLoader_.srcUrl=n),(!e||t&&t.minimumUpdatePeriod!==e.minimumUpdatePeriod)&&this.updateMinimumUpdatePeriodTimeout_(),Boolean(t)},n.updateMinimumUpdatePeriodTimeout_=function(){var e=this.masterPlaylistLoader_;e.createMupOnMedia_&&(e.off("loadedmetadata",e.createMupOnMedia_),e.createMupOnMedia_=null),e.minimumUpdatePeriodTimeout_&&(r().clearTimeout(e.minimumUpdatePeriodTimeout_),e.minimumUpdatePeriodTimeout_=null);var t=e.master&&e.master.minimumUpdatePeriod;0===t&&(e.media()?t=1e3*e.media().targetDuration:(e.createMupOnMedia_=e.updateMinimumUpdatePeriodTimeout_,e.one("loadedmetadata",e.createMupOnMedia_))),"number"!==typeof t||t<=0?t<0&&this.logger_("found invalid minimumUpdatePeriod of "+t+", not setting a timeout"):this.createMUPTimeout_(t)},n.createMUPTimeout_=function(e){var t=this.masterPlaylistLoader_;t.minimumUpdatePeriodTimeout_=r().setTimeout((function(){t.minimumUpdatePeriodTimeout_=null,t.trigger("minimumUpdatePeriod"),t.createMUPTimeout_(e)}),e)},n.refreshXml_=function(){var e=this;this.requestMaster_((function(t,n){n&&(e.media_&&(e.media_=e.masterPlaylistLoader_.master.playlists[e.media_.id]),e.masterPlaylistLoader_.sidxMapping_=function(e,t){var n=vl(e.playlists,t);return Uo(e,(function(e,i,r,a){if(e.playlists&&e.playlists.length){var s=e.playlists;n=fl(n,vl(s,t))}})),n}(e.masterPlaylistLoader_.master,e.masterPlaylistLoader_.sidxMapping_),e.addSidxSegments_(e.media(),e.state,(function(t){e.refreshMedia_(e.media().id)})))}))},n.refreshMedia_=function(e){var t=this;if(!e)throw new Error("refreshMedia_ must take a media id");this.media_&&this.isMaster_&&this.handleMaster_();var n=this.masterPlaylistLoader_.master.playlists,i=!this.media_||this.media_!==n[e];if(i?this.media_=n[e]:this.trigger("playlistunchanged"),!this.mediaUpdateTimeout){!function e(){t.media().endList||(t.mediaUpdateTimeout=r().setTimeout((function(){t.trigger("mediaupdatetimeout"),e()}),Xo(t.media(),Boolean(i))))}()}this.trigger("loadedplaylist")},t}(hl),_l={GOAL_BUFFER_LENGTH:30,MAX_GOAL_BUFFER_LENGTH:60,BACK_BUFFER_LENGTH:30,GOAL_BUFFER_LENGTH_RATE:1,INITIAL_BANDWIDTH:4194304,BANDWIDTH_VARIANCE:1.2,BUFFER_LOW_WATER_LINE:0,MAX_BUFFER_LOW_WATER_LINE:30,EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE:16,BUFFER_LOW_WATER_LINE_RATE:1,BUFFER_HIGH_WATER_LINE:30},bl=function(e){return e.on=e.addEventListener,e.off=e.removeEventListener,e},Tl=function(e){return function(){var t=function(e){try{return URL.createObjectURL(new Blob([e],{type:"application/javascript"}))}catch(n){var t=new BlobBuilder;return t.append(e),URL.createObjectURL(t.getBlob())}}(e),n=bl(new Worker(t));n.objURL=t;var i=n.terminate;return n.on=n.addEventListener,n.off=n.removeEventListener,n.terminate=function(){return URL.revokeObjectURL(t),i.call(this)},n}},kl=function(e){return"var browserWorkerPolyFill = "+bl.toString()+";\nbrowserWorkerPolyFill(self);\n"+e},xl=function(e){return e.toString().replace(/^function.+?{/,"").slice(0,-1)},Sl=kl(xl((function(){var e=function(){this.init=function(){var e={};this.on=function(t,n){e[t]||(e[t]=[]),e[t]=e[t].concat(n)},this.off=function(t,n){var i;return!!e[t]&&(i=e[t].indexOf(n),e[t]=e[t].slice(),e[t].splice(i,1),i>-1)},this.trigger=function(t){var n,i,r,a;if(n=e[t])if(2===arguments.length)for(r=n.length,i=0;i<r;++i)n[i].call(this,arguments[1]);else{for(a=[],i=arguments.length,i=1;i<arguments.length;++i)a.push(arguments[i]);for(r=n.length,i=0;i<r;++i)n[i].apply(this,a)}},this.dispose=function(){e={}}}};e.prototype.pipe=function(e){return this.on("data",(function(t){e.push(t)})),this.on("done",(function(t){e.flush(t)})),this.on("partialdone",(function(t){e.partialFlush(t)})),this.on("endedtimeline",(function(t){e.endTimeline(t)})),this.on("reset",(function(t){e.reset(t)})),e},e.prototype.push=function(e){this.trigger("data",e)},e.prototype.flush=function(e){this.trigger("done",e)},e.prototype.partialFlush=function(e){this.trigger("partialdone",e)},e.prototype.endTimeline=function(e){this.trigger("endedtimeline",e)},e.prototype.reset=function(e){this.trigger("reset",e)};var t,i,r,a,s,o,l,u,c,d,h,f,p,g,m,v,y,_,b,T,k,x,S,w,E,C,P,I,A,O,L,M,D,R,N,U,j=e,F=Math.pow(2,32),B={getUint64:function(e){var t,n=new DataView(e.buffer,e.byteOffset,e.byteLength);return n.getBigUint64?(t=n.getBigUint64(0))<Number.MAX_SAFE_INTEGER?Number(t):t:n.getUint32(0)*F+n.getUint32(4)},MAX_UINT32:F},z=B.MAX_UINT32;!function(){var e;if(S={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],pasp:[],sdtp:[],smhd:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],styp:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[]},"undefined"!==typeof Uint8Array){for(e in S)S.hasOwnProperty(e)&&(S[e]=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]);w=new Uint8Array(["i".charCodeAt(0),"s".charCodeAt(0),"o".charCodeAt(0),"m".charCodeAt(0)]),C=new Uint8Array(["a".charCodeAt(0),"v".charCodeAt(0),"c".charCodeAt(0),"1".charCodeAt(0)]),E=new Uint8Array([0,0,0,1]),P=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),I=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),A={video:P,audio:I},M=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),L=new Uint8Array([0,0,0,0,0,0,0,0]),D=new Uint8Array([0,0,0,0,0,0,0,0]),R=D,N=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),U=D,O=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])}}(),t=function(e){var t,n,i=[],r=0;for(t=1;t<arguments.length;t++)i.push(arguments[t]);for(t=i.length;t--;)r+=i[t].byteLength;for(n=new Uint8Array(r+8),new DataView(n.buffer,n.byteOffset,n.byteLength).setUint32(0,n.byteLength),n.set(e,4),t=0,r=8;t<i.length;t++)n.set(i[t],r),r+=i[t].byteLength;return n},i=function(){return t(S.dinf,t(S.dref,M))},r=function(e){return t(S.esds,new Uint8Array([0,0,0,0,3,25,0,0,0,4,17,64,21,0,6,0,0,0,218,192,0,0,218,192,5,2,e.audioobjecttype<<3|e.samplingfrequencyindex>>>1,e.samplingfrequencyindex<<7|e.channelcount<<3,6,1,2]))},a=function(){return t(S.ftyp,w,E,w,C)},v=function(e){return t(S.hdlr,A[e])},s=function(e){return t(S.mdat,e)},m=function(e){var n=new Uint8Array([0,0,0,0,0,0,0,2,0,0,0,3,0,1,95,144,e.duration>>>24&255,e.duration>>>16&255,e.duration>>>8&255,255&e.duration,85,196,0,0]);return e.samplerate&&(n[12]=e.samplerate>>>24&255,n[13]=e.samplerate>>>16&255,n[14]=e.samplerate>>>8&255,n[15]=255&e.samplerate),t(S.mdhd,n)},g=function(e){return t(S.mdia,m(e),v(e.type),l(e))},o=function(e){return t(S.mfhd,new Uint8Array([0,0,0,0,(4278190080&e)>>24,(16711680&e)>>16,(65280&e)>>8,255&e]))},l=function(e){return t(S.minf,"video"===e.type?t(S.vmhd,O):t(S.smhd,L),i(),_(e))},u=function(e,n){for(var i=[],r=n.length;r--;)i[r]=T(n[r]);return t.apply(null,[S.moof,o(e)].concat(i))},c=function(e){for(var n=e.length,i=[];n--;)i[n]=f(e[n]);return t.apply(null,[S.moov,h(4294967295)].concat(i).concat(d(e)))},d=function(e){for(var n=e.length,i=[];n--;)i[n]=k(e[n]);return t.apply(null,[S.mvex].concat(i))},h=function(e){var n=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,2,0,1,95,144,(4278190080&e)>>24,(16711680&e)>>16,(65280&e)>>8,255&e,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return t(S.mvhd,n)},y=function(e){var n,i,r=e.samples||[],a=new Uint8Array(4+r.length);for(i=0;i<r.length;i++)n=r[i].flags,a[i+4]=n.dependsOn<<4|n.isDependedOn<<2|n.hasRedundancy;return t(S.sdtp,a)},_=function(e){return t(S.stbl,b(e),t(S.stts,U),t(S.stsc,R),t(S.stsz,N),t(S.stco,D))},function(){var e,n;b=function(i){return t(S.stsd,new Uint8Array([0,0,0,0,0,0,0,1]),"video"===i.type?e(i):n(i))},e=function(e){var n,i,r=e.sps||[],a=e.pps||[],s=[],o=[];for(n=0;n<r.length;n++)s.push((65280&r[n].byteLength)>>>8),s.push(255&r[n].byteLength),s=s.concat(Array.prototype.slice.call(r[n]));for(n=0;n<a.length;n++)o.push((65280&a[n].byteLength)>>>8),o.push(255&a[n].byteLength),o=o.concat(Array.prototype.slice.call(a[n]));if(i=[S.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,(65280&e.width)>>8,255&e.width,(65280&e.height)>>8,255&e.height,0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),t(S.avcC,new Uint8Array([1,e.profileIdc,e.profileCompatibility,e.levelIdc,255].concat([r.length],s,[a.length],o))),t(S.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192]))],e.sarRatio){var l=e.sarRatio[0],u=e.sarRatio[1];i.push(t(S.pasp,new Uint8Array([(4278190080&l)>>24,(16711680&l)>>16,(65280&l)>>8,255&l,(4278190080&u)>>24,(16711680&u)>>16,(65280&u)>>8,255&u])))}return t.apply(null,i)},n=function(e){return t(S.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,(65280&e.channelcount)>>8,255&e.channelcount,(65280&e.samplesize)>>8,255&e.samplesize,0,0,0,0,(65280&e.samplerate)>>8,255&e.samplerate,0,0]),r(e))}}(),p=function(e){var n=new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,(4278190080&e.id)>>24,(16711680&e.id)>>16,(65280&e.id)>>8,255&e.id,0,0,0,0,(4278190080&e.duration)>>24,(16711680&e.duration)>>16,(65280&e.duration)>>8,255&e.duration,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,(65280&e.width)>>8,255&e.width,0,0,(65280&e.height)>>8,255&e.height,0,0]);return t(S.tkhd,n)},T=function(e){var n,i,r,a,s,o;return n=t(S.tfhd,new Uint8Array([0,0,0,58,(4278190080&e.id)>>24,(16711680&e.id)>>16,(65280&e.id)>>8,255&e.id,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0])),s=Math.floor(e.baseMediaDecodeTime/z),o=Math.floor(e.baseMediaDecodeTime%z),i=t(S.tfdt,new Uint8Array([1,0,0,0,s>>>24&255,s>>>16&255,s>>>8&255,255&s,o>>>24&255,o>>>16&255,o>>>8&255,255&o])),92,"audio"===e.type?(r=x(e,92),t(S.traf,n,i,r)):(a=y(e),r=x(e,a.length+92),t(S.traf,n,i,r,a))},f=function(e){return e.duration=e.duration||4294967295,t(S.trak,p(e),g(e))},k=function(e){var n=new Uint8Array([0,0,0,0,(4278190080&e.id)>>24,(16711680&e.id)>>16,(65280&e.id)>>8,255&e.id,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);return"video"!==e.type&&(n[n.length-1]=0),t(S.trex,n)},function(){var e,n,i;i=function(e,t){var n=0,i=0,r=0,a=0;return e.length&&(void 0!==e[0].duration&&(n=1),void 0!==e[0].size&&(i=2),void 0!==e[0].flags&&(r=4),void 0!==e[0].compositionTimeOffset&&(a=8)),[0,0,n|i|r|a,1,(4278190080&e.length)>>>24,(16711680&e.length)>>>16,(65280&e.length)>>>8,255&e.length,(4278190080&t)>>>24,(16711680&t)>>>16,(65280&t)>>>8,255&t]},n=function(e,n){var r,a,s,o,l,u;for(n+=20+16*(o=e.samples||[]).length,s=i(o,n),(a=new Uint8Array(s.length+16*o.length)).set(s),r=s.length,u=0;u<o.length;u++)l=o[u],a[r++]=(4278190080&l.duration)>>>24,a[r++]=(16711680&l.duration)>>>16,a[r++]=(65280&l.duration)>>>8,a[r++]=255&l.duration,a[r++]=(4278190080&l.size)>>>24,a[r++]=(16711680&l.size)>>>16,a[r++]=(65280&l.size)>>>8,a[r++]=255&l.size,a[r++]=l.flags.isLeading<<2|l.flags.dependsOn,a[r++]=l.flags.isDependedOn<<6|l.flags.hasRedundancy<<4|l.flags.paddingValue<<1|l.flags.isNonSyncSample,a[r++]=61440&l.flags.degradationPriority,a[r++]=15&l.flags.degradationPriority,a[r++]=(4278190080&l.compositionTimeOffset)>>>24,a[r++]=(16711680&l.compositionTimeOffset)>>>16,a[r++]=(65280&l.compositionTimeOffset)>>>8,a[r++]=255&l.compositionTimeOffset;return t(S.trun,a)},e=function(e,n){var r,a,s,o,l,u;for(n+=20+8*(o=e.samples||[]).length,s=i(o,n),(r=new Uint8Array(s.length+8*o.length)).set(s),a=s.length,u=0;u<o.length;u++)l=o[u],r[a++]=(4278190080&l.duration)>>>24,r[a++]=(16711680&l.duration)>>>16,r[a++]=(65280&l.duration)>>>8,r[a++]=255&l.duration,r[a++]=(4278190080&l.size)>>>24,r[a++]=(16711680&l.size)>>>16,r[a++]=(65280&l.size)>>>8,r[a++]=255&l.size;return t(S.trun,r)},x=function(t,i){return"audio"===t.type?e(t,i):n(t,i)}}();var V,H,W,q,G,X,K,$,Y=s,Q=u,J=function(e){var t,n=a(),i=c(e);return(t=new Uint8Array(n.byteLength+i.byteLength)).set(n),t.set(i,n.byteLength),t},Z=function(e,t){var n={size:0,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0,degradationPriority:0,isNonSyncSample:1}};return n.dataOffset=t,n.compositionTimeOffset=e.pts-e.dts,n.duration=e.duration,n.size=4*e.length,n.size+=e.byteLength,e.keyFrame&&(n.flags.dependsOn=2,n.flags.isNonSyncSample=0),n},ee=function(e){var t,n,i=[],r=[];for(r.byteLength=0,r.nalCount=0,r.duration=0,i.byteLength=0,t=0;t<e.length;t++)"access_unit_delimiter_rbsp"===(n=e[t]).nalUnitType?(i.length&&(i.duration=n.dts-i.dts,r.byteLength+=i.byteLength,r.nalCount+=i.length,r.duration+=i.duration,r.push(i)),(i=[n]).byteLength=n.data.byteLength,i.pts=n.pts,i.dts=n.dts):("slice_layer_without_partitioning_rbsp_idr"===n.nalUnitType&&(i.keyFrame=!0),i.duration=n.dts-i.dts,i.byteLength+=n.data.byteLength,i.push(n));return r.length&&(!i.duration||i.duration<=0)&&(i.duration=r[r.length-1].duration),r.byteLength+=i.byteLength,r.nalCount+=i.length,r.duration+=i.duration,r.push(i),r},te=function(e){var t,n,i=[],r=[];for(i.byteLength=0,i.nalCount=0,i.duration=0,i.pts=e[0].pts,i.dts=e[0].dts,r.byteLength=0,r.nalCount=0,r.duration=0,r.pts=e[0].pts,r.dts=e[0].dts,t=0;t<e.length;t++)(n=e[t]).keyFrame?(i.length&&(r.push(i),r.byteLength+=i.byteLength,r.nalCount+=i.nalCount,r.duration+=i.duration),(i=[n]).nalCount=n.length,i.byteLength=n.byteLength,i.pts=n.pts,i.dts=n.dts,i.duration=n.duration):(i.duration+=n.duration,i.nalCount+=n.length,i.byteLength+=n.byteLength,i.push(n));return r.length&&i.duration<=0&&(i.duration=r[r.length-1].duration),r.byteLength+=i.byteLength,r.nalCount+=i.nalCount,r.duration+=i.duration,r.push(i),r},ne=function(e){var t;return!e[0][0].keyFrame&&e.length>1&&(t=e.shift(),e.byteLength-=t.byteLength,e.nalCount-=t.nalCount,e[0][0].dts=t.dts,e[0][0].pts=t.pts,e[0][0].duration+=t.duration),e},ie=function(e,t){var n,i,r,a,s,o=t||0,l=[];for(n=0;n<e.length;n++)for(a=e[n],i=0;i<a.length;i++)s=a[i],o+=(r=Z(s,o)).size,l.push(r);return l},re=function(e){var t,n,i,r,a,s,o=0,l=e.byteLength,u=e.nalCount,c=new Uint8Array(l+4*u),d=new DataView(c.buffer);for(t=0;t<e.length;t++)for(r=e[t],n=0;n<r.length;n++)for(a=r[n],i=0;i<a.length;i++)s=a[i],d.setUint32(o,s.data.byteLength),o+=4,c.set(s.data,o),o+=s.data.byteLength;return c},ae=[33,16,5,32,164,27],se=[33,65,108,84,1,2,4,8,168,2,4,8,17,191,252],oe=function(e){for(var t=[];e--;)t.push(0);return t},le=function(){if(!V){var e={96e3:[ae,[227,64],oe(154),[56]],88200:[ae,[231],oe(170),[56]],64e3:[ae,[248,192],oe(240),[56]],48e3:[ae,[255,192],oe(268),[55,148,128],oe(54),[112]],44100:[ae,[255,192],oe(268),[55,163,128],oe(84),[112]],32e3:[ae,[255,192],oe(268),[55,234],oe(226),[112]],24e3:[ae,[255,192],oe(268),[55,255,128],oe(268),[111,112],oe(126),[224]],16e3:[ae,[255,192],oe(268),[55,255,128],oe(268),[111,255],oe(269),[223,108],oe(195),[1,192]],12e3:[se,oe(268),[3,127,248],oe(268),[6,255,240],oe(268),[13,255,224],oe(268),[27,253,128],oe(259),[56]],11025:[se,oe(268),[3,127,248],oe(268),[6,255,240],oe(268),[13,255,224],oe(268),[27,255,192],oe(268),[55,175,128],oe(108),[112]],8e3:[se,oe(268),[3,121,16],oe(47),[7]]};t=e,V=Object.keys(t).reduce((function(e,n){return e[n]=new Uint8Array(t[n].reduce((function(e,t){return e.concat(t)}),[])),e}),{})}var t;return V},ue=9e4;X=function(e,t){return H(G(e,t))},K=function(e,t){return W(q(e),t)},$=function(e,t,n){return q(n?e:e-t)};var ce=ue,de=H=function(e){return e*ue},he=(W=function(e,t){return e*t},q=function(e){return e/ue}),fe=(G=function(e,t){return e/t},X),pe=K,ge=$,me=function(e,t,n,i){var r,a,s,o,l,u=0,c=0,d=0;if(t.length&&(r=fe(e.baseMediaDecodeTime,e.samplerate),a=Math.ceil(ce/(e.samplerate/1024)),n&&i&&(u=r-Math.max(n,i),d=(c=Math.floor(u/a))*a),!(c<1||d>ce/2))){for((s=le()[e.samplerate])||(s=t[0].data),o=0;o<c;o++)l=t[0],t.splice(0,0,{data:s,dts:l.dts-a,pts:l.pts-a});return e.baseMediaDecodeTime-=Math.floor(pe(d,e.samplerate)),d}},ve=function(e,t,n){return t.minSegmentDts>=n?e:(t.minSegmentDts=1/0,e.filter((function(e){return e.dts>=n&&(t.minSegmentDts=Math.min(t.minSegmentDts,e.dts),t.minSegmentPts=t.minSegmentDts,!0)})))},ye=function(e){var t,n,i=[];for(t=0;t<e.length;t++)n=e[t],i.push({size:n.data.byteLength,duration:1024});return i},_e=function(e){var t,n,i=0,r=new Uint8Array(function(e){var t,n=0;for(t=0;t<e.length;t++)n+=e[t].data.byteLength;return n}(e));for(t=0;t<e.length;t++)n=e[t],r.set(n.data,i),i+=n.data.byteLength;return r},be=ce,Te=function(e){delete e.minSegmentDts,delete e.maxSegmentDts,delete e.minSegmentPts,delete e.maxSegmentPts},ke=function(e,t){var n,i=e.minSegmentDts;return t||(i-=e.timelineStartInfo.dts),n=e.timelineStartInfo.baseMediaDecodeTime,n+=i,n=Math.max(0,n),"audio"===e.type&&(n*=e.samplerate/be,n=Math.floor(n)),n},xe=function(e,t){"number"===typeof t.pts&&(void 0===e.timelineStartInfo.pts&&(e.timelineStartInfo.pts=t.pts),void 0===e.minSegmentPts?e.minSegmentPts=t.pts:e.minSegmentPts=Math.min(e.minSegmentPts,t.pts),void 0===e.maxSegmentPts?e.maxSegmentPts=t.pts:e.maxSegmentPts=Math.max(e.maxSegmentPts,t.pts)),"number"===typeof t.dts&&(void 0===e.timelineStartInfo.dts&&(e.timelineStartInfo.dts=t.dts),void 0===e.minSegmentDts?e.minSegmentDts=t.dts:e.minSegmentDts=Math.min(e.minSegmentDts,t.dts),void 0===e.maxSegmentDts?e.maxSegmentDts=t.dts:e.maxSegmentDts=Math.max(e.maxSegmentDts,t.dts))},Se=function(e){for(var t=0,n={payloadType:-1,payloadSize:0},i=0,r=0;t<e.byteLength&&128!==e[t];){for(;255===e[t];)i+=255,t++;for(i+=e[t++];255===e[t];)r+=255,t++;if(r+=e[t++],!n.payload&&4===i){if("GA94"===String.fromCharCode(e[t+3],e[t+4],e[t+5],e[t+6])){n.payloadType=i,n.payloadSize=r,n.payload=e.subarray(t,t+r);break}n.payload=void 0}t+=r,i=0,r=0}return n},we=function(e){return 181!==e.payload[0]||49!==(e.payload[1]<<8|e.payload[2])||"GA94"!==String.fromCharCode(e.payload[3],e.payload[4],e.payload[5],e.payload[6])||3!==e.payload[7]?null:e.payload.subarray(8,e.payload.length-1)},Ee=function(e,t){var n,i,r,a,s=[];if(!(64&t[0]))return s;for(i=31&t[0],n=0;n<i;n++)a={type:3&t[(r=3*n)+2],pts:e},4&t[r+2]&&(a.ccData=t[r+3]<<8|t[r+4],s.push(a));return s},Ce=function(e){for(var t,n,i=e.byteLength,r=[],a=1;a<i-2;)0===e[a]&&0===e[a+1]&&3===e[a+2]?(r.push(a+2),a+=2):a++;if(0===r.length)return e;t=i-r.length,n=new Uint8Array(t);var s=0;for(a=0;a<t;s++,a++)s===r[0]&&(s++,r.shift()),n[a]=e[s];return n},Pe=4,Ie=function e(t){t=t||{},e.prototype.init.call(this),this.parse708captions_="boolean"!==typeof t.parse708captions||t.parse708captions,this.captionPackets_=[],this.ccStreams_=[new Fe(0,0),new Fe(0,1),new Fe(1,0),new Fe(1,1)],this.parse708captions_&&(this.cc708Stream_=new De({captionServices:t.captionServices})),this.reset(),this.ccStreams_.forEach((function(e){e.on("data",this.trigger.bind(this,"data")),e.on("partialdone",this.trigger.bind(this,"partialdone")),e.on("done",this.trigger.bind(this,"done"))}),this),this.parse708captions_&&(this.cc708Stream_.on("data",this.trigger.bind(this,"data")),this.cc708Stream_.on("partialdone",this.trigger.bind(this,"partialdone")),this.cc708Stream_.on("done",this.trigger.bind(this,"done")))};(Ie.prototype=new j).push=function(e){var t,n,i;if("sei_rbsp"===e.nalUnitType&&(t=Se(e.escapedRBSP)).payload&&t.payloadType===Pe&&(n=we(t)))if(e.dts<this.latestDts_)this.ignoreNextEqualDts_=!0;else{if(e.dts===this.latestDts_&&this.ignoreNextEqualDts_)return this.numSameDts_--,void(this.numSameDts_||(this.ignoreNextEqualDts_=!1));i=Ee(e.pts,n),this.captionPackets_=this.captionPackets_.concat(i),this.latestDts_!==e.dts&&(this.numSameDts_=0),this.numSameDts_++,this.latestDts_=e.dts}},Ie.prototype.flushCCStreams=function(e){this.ccStreams_.forEach((function(t){return"flush"===e?t.flush():t.partialFlush()}),this)},Ie.prototype.flushStream=function(e){this.captionPackets_.length?(this.captionPackets_.forEach((function(e,t){e.presortIndex=t})),this.captionPackets_.sort((function(e,t){return e.pts===t.pts?e.presortIndex-t.presortIndex:e.pts-t.pts})),this.captionPackets_.forEach((function(e){e.type<2?this.dispatchCea608Packet(e):this.dispatchCea708Packet(e)}),this),this.captionPackets_.length=0,this.flushCCStreams(e)):this.flushCCStreams(e)},Ie.prototype.flush=function(){return this.flushStream("flush")},Ie.prototype.partialFlush=function(){return this.flushStream("partialFlush")},Ie.prototype.reset=function(){this.latestDts_=null,this.ignoreNextEqualDts_=!1,this.numSameDts_=0,this.activeCea608Channel_=[null,null],this.ccStreams_.forEach((function(e){e.reset()}))},Ie.prototype.dispatchCea608Packet=function(e){this.setsTextOrXDSActive(e)?this.activeCea608Channel_[e.type]=null:this.setsChannel1Active(e)?this.activeCea608Channel_[e.type]=0:this.setsChannel2Active(e)&&(this.activeCea608Channel_[e.type]=1),null!==this.activeCea608Channel_[e.type]&&this.ccStreams_[(e.type<<1)+this.activeCea608Channel_[e.type]].push(e)},Ie.prototype.setsChannel1Active=function(e){return 4096===(30720&e.ccData)},Ie.prototype.setsChannel2Active=function(e){return 6144===(30720&e.ccData)},Ie.prototype.setsTextOrXDSActive=function(e){return 256===(28928&e.ccData)||4138===(30974&e.ccData)||6186===(30974&e.ccData)},Ie.prototype.dispatchCea708Packet=function(e){this.parse708captions_&&this.cc708Stream_.push(e)};var Ae={127:9834,4128:32,4129:160,4133:8230,4138:352,4140:338,4144:9608,4145:8216,4146:8217,4147:8220,4148:8221,4149:8226,4153:8482,4154:353,4156:339,4157:8480,4159:376,4214:8539,4215:8540,4216:8541,4217:8542,4218:9168,4219:9124,4220:9123,4221:9135,4222:9126,4223:9121,4256:12600},Oe=function(e){return 32<=e&&e<=127||160<=e&&e<=255},Le=function(e){this.windowNum=e,this.reset()};Le.prototype.reset=function(){this.clearText(),this.pendingNewLine=!1,this.winAttr={},this.penAttr={},this.penLoc={},this.penColor={},this.visible=0,this.rowLock=0,this.columnLock=0,this.priority=0,this.relativePositioning=0,this.anchorVertical=0,this.anchorHorizontal=0,this.anchorPoint=0,this.rowCount=1,this.virtualRowCount=this.rowCount+1,this.columnCount=41,this.windowStyle=0,this.penStyle=0},Le.prototype.getText=function(){return this.rows.join("\n")},Le.prototype.clearText=function(){this.rows=[""],this.rowIdx=0},Le.prototype.newLine=function(e){for(this.rows.length>=this.virtualRowCount&&"function"===typeof this.beforeRowOverflow&&this.beforeRowOverflow(e),this.rows.length>0&&(this.rows.push(""),this.rowIdx++);this.rows.length>this.virtualRowCount;)this.rows.shift(),this.rowIdx--},Le.prototype.isEmpty=function(){return 0===this.rows.length||1===this.rows.length&&""===this.rows[0]},Le.prototype.addText=function(e){this.rows[this.rowIdx]+=e},Le.prototype.backspace=function(){if(!this.isEmpty()){var e=this.rows[this.rowIdx];this.rows[this.rowIdx]=e.substr(0,e.length-1)}};var Me=function(e,t,n){this.serviceNum=e,this.text="",this.currentWindow=new Le(-1),this.windows=[],this.stream=n,"string"===typeof t&&this.createTextDecoder(t)};Me.prototype.init=function(e,t){this.startPts=e;for(var n=0;n<8;n++)this.windows[n]=new Le(n),"function"===typeof t&&(this.windows[n].beforeRowOverflow=t)},Me.prototype.setCurrentWindow=function(e){this.currentWindow=this.windows[e]},Me.prototype.createTextDecoder=function(e){if("undefined"===typeof TextDecoder)this.stream.trigger("log",{level:"warn",message:"The `encoding` option is unsupported without TextDecoder support"});else try{this.textDecoder_=new TextDecoder(e)}catch(t){this.stream.trigger("log",{level:"warn",message:"TextDecoder could not be created with "+e+" encoding. "+t})}};var De=function e(t){t=t||{},e.prototype.init.call(this);var n,i=this,r=t.captionServices||{},a={};Object.keys(r).forEach((function(e){n=r[e],/^SERVICE/.test(e)&&(a[e]=n.encoding)})),this.serviceEncodings=a,this.current708Packet=null,this.services={},this.push=function(e){3===e.type?(i.new708Packet(),i.add708Bytes(e)):(null===i.current708Packet&&i.new708Packet(),i.add708Bytes(e))}};De.prototype=new j,De.prototype.new708Packet=function(){null!==this.current708Packet&&this.push708Packet(),this.current708Packet={data:[],ptsVals:[]}},De.prototype.add708Bytes=function(e){var t=e.ccData,n=t>>>8,i=255&t;this.current708Packet.ptsVals.push(e.pts),this.current708Packet.data.push(n),this.current708Packet.data.push(i)},De.prototype.push708Packet=function(){var e=this.current708Packet,t=e.data,n=null,i=null,r=0,a=t[r++];for(e.seq=a>>6,e.sizeCode=63&a;r<t.length;r++)i=31&(a=t[r++]),7===(n=a>>5)&&i>0&&(n=a=t[r++]),this.pushServiceBlock(n,r,i),i>0&&(r+=i-1)},De.prototype.pushServiceBlock=function(e,t,n){var i,r=t,a=this.current708Packet.data,s=this.services[e];for(s||(s=this.initService(e,r));r<t+n&&r<a.length;r++)i=a[r],Oe(i)?r=this.handleText(r,s):24===i?r=this.multiByteCharacter(r,s):16===i?r=this.extendedCommands(r,s):128<=i&&i<=135?r=this.setCurrentWindow(r,s):152<=i&&i<=159?r=this.defineWindow(r,s):136===i?r=this.clearWindows(r,s):140===i?r=this.deleteWindows(r,s):137===i?r=this.displayWindows(r,s):138===i?r=this.hideWindows(r,s):139===i?r=this.toggleWindows(r,s):151===i?r=this.setWindowAttributes(r,s):144===i?r=this.setPenAttributes(r,s):145===i?r=this.setPenColor(r,s):146===i?r=this.setPenLocation(r,s):143===i?s=this.reset(r,s):8===i?s.currentWindow.backspace():12===i?s.currentWindow.clearText():13===i?s.currentWindow.pendingNewLine=!0:14===i?s.currentWindow.clearText():141===i&&r++},De.prototype.extendedCommands=function(e,t){var n=this.current708Packet.data[++e];return Oe(n)&&(e=this.handleText(e,t,{isExtended:!0})),e},De.prototype.getPts=function(e){return this.current708Packet.ptsVals[Math.floor(e/2)]},De.prototype.initService=function(e,t){var n,i,r=this;return(n="SERVICE"+e)in this.serviceEncodings&&(i=this.serviceEncodings[n]),this.services[e]=new Me(e,i,r),this.services[e].init(this.getPts(t),(function(t){r.flushDisplayed(t,r.services[e])})),this.services[e]},De.prototype.handleText=function(e,t,n){var i,r,a=n&&n.isExtended,s=n&&n.isMultiByte,o=this.current708Packet.data,l=a?4096:0,u=o[e],c=o[e+1],d=t.currentWindow;return t.textDecoder_&&!a?(s?(r=[u,c],e++):r=[u],i=t.textDecoder_.decode(new Uint8Array(r))):i=function(e){var t=Ae[e]||e;return 4096&e&&e===t?"":String.fromCharCode(t)}(l|u),d.pendingNewLine&&!d.isEmpty()&&d.newLine(this.getPts(e)),d.pendingNewLine=!1,d.addText(i),e},De.prototype.multiByteCharacter=function(e,t){var n=this.current708Packet.data,i=n[e+1],r=n[e+2];return Oe(i)&&Oe(r)&&(e=this.handleText(++e,t,{isMultiByte:!0})),e},De.prototype.setCurrentWindow=function(e,t){var n=7&this.current708Packet.data[e];return t.setCurrentWindow(n),e},De.prototype.defineWindow=function(e,t){var n=this.current708Packet.data,i=n[e],r=7&i;t.setCurrentWindow(r);var a=t.currentWindow;return i=n[++e],a.visible=(32&i)>>5,a.rowLock=(16&i)>>4,a.columnLock=(8&i)>>3,a.priority=7&i,i=n[++e],a.relativePositioning=(128&i)>>7,a.anchorVertical=127&i,i=n[++e],a.anchorHorizontal=i,i=n[++e],a.anchorPoint=(240&i)>>4,a.rowCount=15&i,i=n[++e],a.columnCount=63&i,i=n[++e],a.windowStyle=(56&i)>>3,a.penStyle=7&i,a.virtualRowCount=a.rowCount+1,e},De.prototype.setWindowAttributes=function(e,t){var n=this.current708Packet.data,i=n[e],r=t.currentWindow.winAttr;return i=n[++e],r.fillOpacity=(192&i)>>6,r.fillRed=(48&i)>>4,r.fillGreen=(12&i)>>2,r.fillBlue=3&i,i=n[++e],r.borderType=(192&i)>>6,r.borderRed=(48&i)>>4,r.borderGreen=(12&i)>>2,r.borderBlue=3&i,i=n[++e],r.borderType+=(128&i)>>5,r.wordWrap=(64&i)>>6,r.printDirection=(48&i)>>4,r.scrollDirection=(12&i)>>2,r.justify=3&i,i=n[++e],r.effectSpeed=(240&i)>>4,r.effectDirection=(12&i)>>2,r.displayEffect=3&i,e},De.prototype.flushDisplayed=function(e,t){for(var n=[],i=0;i<8;i++)t.windows[i].visible&&!t.windows[i].isEmpty()&&n.push(t.windows[i].getText());t.endPts=e,t.text=n.join("\n\n"),this.pushCaption(t),t.startPts=e},De.prototype.pushCaption=function(e){""!==e.text&&(this.trigger("data",{startPts:e.startPts,endPts:e.endPts,text:e.text,stream:"cc708_"+e.serviceNum}),e.text="",e.startPts=e.endPts)},De.prototype.displayWindows=function(e,t){var n=this.current708Packet.data[++e],i=this.getPts(e);this.flushDisplayed(i,t);for(var r=0;r<8;r++)n&1<<r&&(t.windows[r].visible=1);return e},De.prototype.hideWindows=function(e,t){var n=this.current708Packet.data[++e],i=this.getPts(e);this.flushDisplayed(i,t);for(var r=0;r<8;r++)n&1<<r&&(t.windows[r].visible=0);return e},De.prototype.toggleWindows=function(e,t){var n=this.current708Packet.data[++e],i=this.getPts(e);this.flushDisplayed(i,t);for(var r=0;r<8;r++)n&1<<r&&(t.windows[r].visible^=1);return e},De.prototype.clearWindows=function(e,t){var n=this.current708Packet.data[++e],i=this.getPts(e);this.flushDisplayed(i,t);for(var r=0;r<8;r++)n&1<<r&&t.windows[r].clearText();return e},De.prototype.deleteWindows=function(e,t){var n=this.current708Packet.data[++e],i=this.getPts(e);this.flushDisplayed(i,t);for(var r=0;r<8;r++)n&1<<r&&t.windows[r].reset();return e},De.prototype.setPenAttributes=function(e,t){var n=this.current708Packet.data,i=n[e],r=t.currentWindow.penAttr;return i=n[++e],r.textTag=(240&i)>>4,r.offset=(12&i)>>2,r.penSize=3&i,i=n[++e],r.italics=(128&i)>>7,r.underline=(64&i)>>6,r.edgeType=(56&i)>>3,r.fontStyle=7&i,e},De.prototype.setPenColor=function(e,t){var n=this.current708Packet.data,i=n[e],r=t.currentWindow.penColor;return i=n[++e],r.fgOpacity=(192&i)>>6,r.fgRed=(48&i)>>4,r.fgGreen=(12&i)>>2,r.fgBlue=3&i,i=n[++e],r.bgOpacity=(192&i)>>6,r.bgRed=(48&i)>>4,r.bgGreen=(12&i)>>2,r.bgBlue=3&i,i=n[++e],r.edgeRed=(48&i)>>4,r.edgeGreen=(12&i)>>2,r.edgeBlue=3&i,e},De.prototype.setPenLocation=function(e,t){var n=this.current708Packet.data,i=n[e],r=t.currentWindow.penLoc;return t.currentWindow.pendingNewLine=!0,i=n[++e],r.row=15&i,i=n[++e],r.column=63&i,e},De.prototype.reset=function(e,t){var n=this.getPts(e);return this.flushDisplayed(n,t),this.initService(t.serviceNum,e)};var Re={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,304:174,305:176,306:189,307:191,308:8482,309:162,310:163,311:9834,312:224,313:160,314:232,315:226,316:234,317:238,318:244,319:251,544:193,545:201,546:211,547:218,548:220,549:252,550:8216,551:161,552:42,553:39,554:8212,555:169,556:8480,557:8226,558:8220,559:8221,560:192,561:194,562:199,563:200,564:202,565:203,566:235,567:206,568:207,569:239,570:212,571:217,572:249,573:219,574:171,575:187,800:195,801:227,802:205,803:204,804:236,805:210,806:242,807:213,808:245,809:123,810:125,811:92,812:94,813:95,814:124,815:126,816:196,817:228,818:214,819:246,820:223,821:165,822:164,823:9474,824:197,825:229,826:216,827:248,828:9484,829:9488,830:9492,831:9496},Ne=function(e){return null===e?"":(e=Re[e]||e,String.fromCharCode(e))},Ue=[4352,4384,4608,4640,5376,5408,5632,5664,5888,5920,4096,4864,4896,5120,5152],je=function(){for(var e=[],t=15;t--;)e.push("");return e},Fe=function e(t,n){e.prototype.init.call(this),this.field_=t||0,this.dataChannel_=n||0,this.name_="CC"+(1+(this.field_<<1|this.dataChannel_)),this.setConstants(),this.reset(),this.push=function(e){var t,n,i,r,a;if((t=32639&e.ccData)!==this.lastControlCode_){if(4096===(61440&t)?this.lastControlCode_=t:t!==this.PADDING_&&(this.lastControlCode_=null),i=t>>>8,r=255&t,t!==this.PADDING_)if(t===this.RESUME_CAPTION_LOADING_)this.mode_="popOn";else if(t===this.END_OF_CAPTION_)this.mode_="popOn",this.clearFormatting(e.pts),this.flushDisplayed(e.pts),n=this.displayed_,this.displayed_=this.nonDisplayed_,this.nonDisplayed_=n,this.startPts_=e.pts;else if(t===this.ROLL_UP_2_ROWS_)this.rollUpRows_=2,this.setRollUp(e.pts);else if(t===this.ROLL_UP_3_ROWS_)this.rollUpRows_=3,this.setRollUp(e.pts);else if(t===this.ROLL_UP_4_ROWS_)this.rollUpRows_=4,this.setRollUp(e.pts);else if(t===this.CARRIAGE_RETURN_)this.clearFormatting(e.pts),this.flushDisplayed(e.pts),this.shiftRowsUp_(),this.startPts_=e.pts;else if(t===this.BACKSPACE_)"popOn"===this.mode_?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1);else if(t===this.ERASE_DISPLAYED_MEMORY_)this.flushDisplayed(e.pts),this.displayed_=je();else if(t===this.ERASE_NON_DISPLAYED_MEMORY_)this.nonDisplayed_=je();else if(t===this.RESUME_DIRECT_CAPTIONING_)"paintOn"!==this.mode_&&(this.flushDisplayed(e.pts),this.displayed_=je()),this.mode_="paintOn",this.startPts_=e.pts;else if(this.isSpecialCharacter(i,r))a=Ne((i=(3&i)<<8)|r),this[this.mode_](e.pts,a),this.column_++;else if(this.isExtCharacter(i,r))"popOn"===this.mode_?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1),a=Ne((i=(3&i)<<8)|r),this[this.mode_](e.pts,a),this.column_++;else if(this.isMidRowCode(i,r))this.clearFormatting(e.pts),this[this.mode_](e.pts," "),this.column_++,14===(14&r)&&this.addFormatting(e.pts,["i"]),1===(1&r)&&this.addFormatting(e.pts,["u"]);else if(this.isOffsetControlCode(i,r))this.column_+=3&r;else if(this.isPAC(i,r)){var s=Ue.indexOf(7968&t);"rollUp"===this.mode_&&(s-this.rollUpRows_+1<0&&(s=this.rollUpRows_-1),this.setRollUp(e.pts,s)),s!==this.row_&&(this.clearFormatting(e.pts),this.row_=s),1&r&&-1===this.formatting_.indexOf("u")&&this.addFormatting(e.pts,["u"]),16===(16&t)&&(this.column_=4*((14&t)>>1)),this.isColorPAC(r)&&14===(14&r)&&this.addFormatting(e.pts,["i"])}else this.isNormalChar(i)&&(0===r&&(r=null),a=Ne(i),a+=Ne(r),this[this.mode_](e.pts,a),this.column_+=a.length)}else this.lastControlCode_=null}};Fe.prototype=new j,Fe.prototype.flushDisplayed=function(e){var t=this.displayed_.map((function(e,t){try{return e.trim()}catch(n){return this.trigger("log",{level:"warn",message:"Skipping a malformed 608 caption at index "+t+"."}),""}}),this).join("\n").replace(/^\n+|\n+$/g,"");t.length&&this.trigger("data",{startPts:this.startPts_,endPts:e,text:t,stream:this.name_})},Fe.prototype.reset=function(){this.mode_="popOn",this.topRow_=0,this.startPts_=0,this.displayed_=je(),this.nonDisplayed_=je(),this.lastControlCode_=null,this.column_=0,this.row_=14,this.rollUpRows_=2,this.formatting_=[]},Fe.prototype.setConstants=function(){0===this.dataChannel_?(this.BASE_=16,this.EXT_=17,this.CONTROL_=(20|this.field_)<<8,this.OFFSET_=23):1===this.dataChannel_&&(this.BASE_=24,this.EXT_=25,this.CONTROL_=(28|this.field_)<<8,this.OFFSET_=31),this.PADDING_=0,this.RESUME_CAPTION_LOADING_=32|this.CONTROL_,this.END_OF_CAPTION_=47|this.CONTROL_,this.ROLL_UP_2_ROWS_=37|this.CONTROL_,this.ROLL_UP_3_ROWS_=38|this.CONTROL_,this.ROLL_UP_4_ROWS_=39|this.CONTROL_,this.CARRIAGE_RETURN_=45|this.CONTROL_,this.RESUME_DIRECT_CAPTIONING_=41|this.CONTROL_,this.BACKSPACE_=33|this.CONTROL_,this.ERASE_DISPLAYED_MEMORY_=44|this.CONTROL_,this.ERASE_NON_DISPLAYED_MEMORY_=46|this.CONTROL_},Fe.prototype.isSpecialCharacter=function(e,t){return e===this.EXT_&&t>=48&&t<=63},Fe.prototype.isExtCharacter=function(e,t){return(e===this.EXT_+1||e===this.EXT_+2)&&t>=32&&t<=63},Fe.prototype.isMidRowCode=function(e,t){return e===this.EXT_&&t>=32&&t<=47},Fe.prototype.isOffsetControlCode=function(e,t){return e===this.OFFSET_&&t>=33&&t<=35},Fe.prototype.isPAC=function(e,t){return e>=this.BASE_&&e<this.BASE_+8&&t>=64&&t<=127},Fe.prototype.isColorPAC=function(e){return e>=64&&e<=79||e>=96&&e<=127},Fe.prototype.isNormalChar=function(e){return e>=32&&e<=127},Fe.prototype.setRollUp=function(e,t){if("rollUp"!==this.mode_&&(this.row_=14,this.mode_="rollUp",this.flushDisplayed(e),this.nonDisplayed_=je(),this.displayed_=je()),void 0!==t&&t!==this.row_)for(var n=0;n<this.rollUpRows_;n++)this.displayed_[t-n]=this.displayed_[this.row_-n],this.displayed_[this.row_-n]="";void 0===t&&(t=this.row_),this.topRow_=t-this.rollUpRows_+1},Fe.prototype.addFormatting=function(e,t){this.formatting_=this.formatting_.concat(t);var n=t.reduce((function(e,t){return e+"<"+t+">"}),"");this[this.mode_](e,n)},Fe.prototype.clearFormatting=function(e){if(this.formatting_.length){var t=this.formatting_.reverse().reduce((function(e,t){return e+"</"+t+">"}),"");this.formatting_=[],this[this.mode_](e,t)}},Fe.prototype.popOn=function(e,t){var n=this.nonDisplayed_[this.row_];n+=t,this.nonDisplayed_[this.row_]=n},Fe.prototype.rollUp=function(e,t){var n=this.displayed_[this.row_];n+=t,this.displayed_[this.row_]=n},Fe.prototype.shiftRowsUp_=function(){var e;for(e=0;e<this.topRow_;e++)this.displayed_[e]="";for(e=this.row_+1;e<15;e++)this.displayed_[e]="";for(e=this.topRow_;e<this.row_;e++)this.displayed_[e]=this.displayed_[e+1];this.displayed_[this.row_]=""},Fe.prototype.paintOn=function(e,t){var n=this.displayed_[this.row_];n+=t,this.displayed_[this.row_]=n};var Be={CaptionStream:Ie,Cea608Stream:Fe,Cea708Stream:De},ze={H264_STREAM_TYPE:27,ADTS_STREAM_TYPE:15,METADATA_STREAM_TYPE:21},Ve="shared",He=function(e,t){var n=1;for(e>t&&(n=-1);Math.abs(t-e)>4294967296;)e+=8589934592*n;return e},We=function e(t){var n,i;e.prototype.init.call(this),this.type_=t||Ve,this.push=function(e){this.type_!==Ve&&e.type!==this.type_||(void 0===i&&(i=e.dts),e.dts=He(e.dts,i),e.pts=He(e.pts,i),n=e.dts,this.trigger("data",e))},this.flush=function(){i=n,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.discontinuity=function(){i=void 0,n=void 0},this.reset=function(){this.discontinuity(),this.trigger("reset")}};We.prototype=new j;var qe,Ge=We,Xe=He,Ke=function(e,t,n){var i,r="";for(i=t;i<n;i++)r+="%"+("00"+e[i].toString(16)).slice(-2);return r},$e=function(e,t,n){return decodeURIComponent(Ke(e,t,n))},Ye=function(e){return e[0]<<21|e[1]<<14|e[2]<<7|e[3]},Qe={TXXX:function(e){var t;if(3===e.data[0]){for(t=1;t<e.data.length;t++)if(0===e.data[t]){e.description=$e(e.data,1,t),e.value=$e(e.data,t+1,e.data.length).replace(/\0*$/,"");break}e.data=e.value}},WXXX:function(e){var t;if(3===e.data[0])for(t=1;t<e.data.length;t++)if(0===e.data[t]){e.description=$e(e.data,1,t),e.url=$e(e.data,t+1,e.data.length);break}},PRIV:function(e){var t,n;for(t=0;t<e.data.length;t++)if(0===e.data[t]){e.owner=(n=e.data,unescape(Ke(n,0,t)));break}e.privateData=e.data.subarray(t+1),e.data=e.privateData}};qe=function(e){var t,n={descriptor:e&&e.descriptor},i=0,r=[],a=0;if(qe.prototype.init.call(this),this.dispatchType=ze.METADATA_STREAM_TYPE.toString(16),n.descriptor)for(t=0;t<n.descriptor.length;t++)this.dispatchType+=("00"+n.descriptor[t].toString(16)).slice(-2);this.push=function(e){var t,n,s,o,l;if("timed-metadata"===e.type)if(e.dataAlignmentIndicator&&(a=0,r.length=0),0===r.length&&(e.data.length<10||e.data[0]!=="I".charCodeAt(0)||e.data[1]!=="D".charCodeAt(0)||e.data[2]!=="3".charCodeAt(0)))this.trigger("log",{level:"warn",message:"Skipping unrecognized metadata packet"});else if(r.push(e),a+=e.data.byteLength,1===r.length&&(i=Ye(e.data.subarray(6,10)),i+=10),!(a<i)){for(t={data:new Uint8Array(i),frames:[],pts:r[0].pts,dts:r[0].dts},l=0;l<i;)t.data.set(r[0].data.subarray(0,i-l),l),l+=r[0].data.byteLength,a-=r[0].data.byteLength,r.shift();n=10,64&t.data[5]&&(n+=4,n+=Ye(t.data.subarray(10,14)),i-=Ye(t.data.subarray(16,20)));do{if((s=Ye(t.data.subarray(n+4,n+8)))<1)return void this.trigger("log",{level:"warn",message:"Malformed ID3 frame encountered. Skipping metadata parsing."});if((o={id:String.fromCharCode(t.data[n],t.data[n+1],t.data[n+2],t.data[n+3]),data:t.data.subarray(n+10,n+s+10)}).key=o.id,Qe[o.id]&&(Qe[o.id](o),"com.apple.streaming.transportStreamTimestamp"===o.owner)){var u=o.data,c=(1&u[3])<<30|u[4]<<22|u[5]<<14|u[6]<<6|u[7]>>>2;c*=4,c+=3&u[7],o.timeStamp=c,void 0===t.pts&&void 0===t.dts&&(t.pts=o.timeStamp,t.dts=o.timeStamp),this.trigger("timestamp",o)}t.frames.push(o),n+=10,n+=s}while(n<i);this.trigger("data",t)}}},qe.prototype=new j;var Je,Ze,et,tt=qe,nt=Ge,it=188;(Je=function(){var e=new Uint8Array(it),t=0;Je.prototype.init.call(this),this.push=function(n){var i,r=0,a=it;for(t?((i=new Uint8Array(n.byteLength+t)).set(e.subarray(0,t)),i.set(n,t),t=0):i=n;a<i.byteLength;)71!==i[r]||71!==i[a]?(r++,a++):(this.trigger("data",i.subarray(r,a)),r+=it,a+=it);r<i.byteLength&&(e.set(i.subarray(r),0),t=i.byteLength-r)},this.flush=function(){t===it&&71===e[0]&&(this.trigger("data",e),t=0),this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.reset=function(){t=0,this.trigger("reset")}}).prototype=new j,Ze=function(){var e,t,n,i;Ze.prototype.init.call(this),i=this,this.packetsWaitingForPmt=[],this.programMapTable=void 0,e=function(e,i){var r=0;i.payloadUnitStartIndicator&&(r+=e[r]+1),"pat"===i.type?t(e.subarray(r),i):n(e.subarray(r),i)},t=function(e,t){t.section_number=e[7],t.last_section_number=e[8],i.pmtPid=(31&e[10])<<8|e[11],t.pmtPid=i.pmtPid},n=function(e,t){var n,r;if(1&e[5]){for(i.programMapTable={video:null,audio:null,"timed-metadata":{}},n=3+((15&e[1])<<8|e[2])-4,r=12+((15&e[10])<<8|e[11]);r<n;){var a=e[r],s=(31&e[r+1])<<8|e[r+2];a===ze.H264_STREAM_TYPE&&null===i.programMapTable.video?i.programMapTable.video=s:a===ze.ADTS_STREAM_TYPE&&null===i.programMapTable.audio?i.programMapTable.audio=s:a===ze.METADATA_STREAM_TYPE&&(i.programMapTable["timed-metadata"][s]=a),r+=5+((15&e[r+3])<<8|e[r+4])}t.programMapTable=i.programMapTable}},this.push=function(t){var n={},i=4;if(n.payloadUnitStartIndicator=!!(64&t[1]),n.pid=31&t[1],n.pid<<=8,n.pid|=t[2],(48&t[3])>>>4>1&&(i+=t[i]+1),0===n.pid)n.type="pat",e(t.subarray(i),n),this.trigger("data",n);else if(n.pid===this.pmtPid)for(n.type="pmt",e(t.subarray(i),n),this.trigger("data",n);this.packetsWaitingForPmt.length;)this.processPes_.apply(this,this.packetsWaitingForPmt.shift());else void 0===this.programMapTable?this.packetsWaitingForPmt.push([t,i,n]):this.processPes_(t,i,n)},this.processPes_=function(e,t,n){n.pid===this.programMapTable.video?n.streamType=ze.H264_STREAM_TYPE:n.pid===this.programMapTable.audio?n.streamType=ze.ADTS_STREAM_TYPE:n.streamType=this.programMapTable["timed-metadata"][n.pid],n.type="pes",n.data=e.subarray(t),this.trigger("data",n)}},Ze.prototype=new j,Ze.STREAM_TYPES={h264:27,adts:15},et=function(){var e,t=this,n=!1,i={data:[],size:0},r={data:[],size:0},a={data:[],size:0},s=function(e,n,i){var r,a,s=new Uint8Array(e.size),o={type:n},l=0,u=0;if(e.data.length&&!(e.size<9)){for(o.trackId=e.data[0].pid,l=0;l<e.data.length;l++)a=e.data[l],s.set(a.data,u),u+=a.data.byteLength;!function(e,t){var n,i=e[0]<<16|e[1]<<8|e[2];t.data=new Uint8Array,1===i&&(t.packetLength=6+(e[4]<<8|e[5]),t.dataAlignmentIndicator=0!==(4&e[6]),192&(n=e[7])&&(t.pts=(14&e[9])<<27|(255&e[10])<<20|(254&e[11])<<12|(255&e[12])<<5|(254&e[13])>>>3,t.pts*=4,t.pts+=(6&e[13])>>>1,t.dts=t.pts,64&n&&(t.dts=(14&e[14])<<27|(255&e[15])<<20|(254&e[16])<<12|(255&e[17])<<5|(254&e[18])>>>3,t.dts*=4,t.dts+=(6&e[18])>>>1)),t.data=e.subarray(9+e[8]))}(s,o),r="video"===n||o.packetLength<=e.size,(i||r)&&(e.size=0,e.data.length=0),r&&t.trigger("data",o)}};et.prototype.init.call(this),this.push=function(o){({pat:function(){},pes:function(){var e,t;switch(o.streamType){case ze.H264_STREAM_TYPE:e=i,t="video";break;case ze.ADTS_STREAM_TYPE:e=r,t="audio";break;case ze.METADATA_STREAM_TYPE:e=a,t="timed-metadata";break;default:return}o.payloadUnitStartIndicator&&s(e,t,!0),e.data.push(o),e.size+=o.data.byteLength},pmt:function(){var i={type:"metadata",tracks:[]};null!==(e=o.programMapTable).video&&i.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+e.video,codec:"avc",type:"video"}),null!==e.audio&&i.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+e.audio,codec:"adts",type:"audio"}),n=!0,t.trigger("data",i)}})[o.type]()},this.reset=function(){i.size=0,i.data.length=0,r.size=0,r.data.length=0,this.trigger("reset")},this.flushStreams_=function(){s(i,"video"),s(r,"audio"),s(a,"timed-metadata")},this.flush=function(){if(!n&&e){var i={type:"metadata",tracks:[]};null!==e.video&&i.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+e.video,codec:"avc",type:"video"}),null!==e.audio&&i.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+e.audio,codec:"adts",type:"audio"}),t.trigger("data",i)}n=!1,this.flushStreams_(),this.trigger("done")}},et.prototype=new j;var rt={PAT_PID:0,MP2T_PACKET_LENGTH:it,TransportPacketStream:Je,TransportParseStream:Ze,ElementaryStream:et,TimestampRolloverStream:nt,CaptionStream:Be.CaptionStream,Cea608Stream:Be.Cea608Stream,Cea708Stream:Be.Cea708Stream,MetadataStream:tt};for(var at in ze)ze.hasOwnProperty(at)&&(rt[at]=ze[at]);var st,ot=rt,lt=ce,ut=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];st=function(e){var t,n=0;st.prototype.init.call(this),this.skipWarn_=function(e,t){this.trigger("log",{level:"warn",message:"adts skiping bytes "+e+" to "+t+" in frame "+n+" outside syncword"})},this.push=function(i){var r,a,s,o,l,u=0;if(e||(n=0),"audio"===i.type){var c;for(t&&t.length?(s=t,(t=new Uint8Array(s.byteLength+i.data.byteLength)).set(s),t.set(i.data,s.byteLength)):t=i.data;u+7<t.length;)if(255===t[u]&&240===(246&t[u+1])){if("number"===typeof c&&(this.skipWarn_(c,u),c=null),a=2*(1&~t[u+1]),r=(3&t[u+3])<<11|t[u+4]<<3|(224&t[u+5])>>5,l=(o=1024*(1+(3&t[u+6])))*lt/ut[(60&t[u+2])>>>2],t.byteLength-u<r)break;this.trigger("data",{pts:i.pts+n*l,dts:i.dts+n*l,sampleCount:o,audioobjecttype:1+(t[u+2]>>>6&3),channelcount:(1&t[u+2])<<2|(192&t[u+3])>>>6,samplerate:ut[(60&t[u+2])>>>2],samplingfrequencyindex:(60&t[u+2])>>>2,samplesize:16,data:t.subarray(u+7+a,u+r)}),n++,u+=r}else"number"!==typeof c&&(c=u),u++;"number"===typeof c&&(this.skipWarn_(c,u),c=null),t=t.subarray(u)}},this.flush=function(){n=0,this.trigger("done")},this.reset=function(){t=void 0,this.trigger("reset")},this.endTimeline=function(){t=void 0,this.trigger("endedtimeline")}},st.prototype=new j;var ct,dt,ht,ft=st,pt=function(e){var t=e.byteLength,n=0,i=0;this.length=function(){return 8*t},this.bitsAvailable=function(){return 8*t+i},this.loadWord=function(){var r=e.byteLength-t,a=new Uint8Array(4),s=Math.min(4,t);if(0===s)throw new Error("no bytes available");a.set(e.subarray(r,r+s)),n=new DataView(a.buffer).getUint32(0),i=8*s,t-=s},this.skipBits=function(e){var r;i>e?(n<<=e,i-=e):(e-=i,e-=8*(r=Math.floor(e/8)),t-=r,this.loadWord(),n<<=e,i-=e)},this.readBits=function(e){var r=Math.min(i,e),a=n>>>32-r;return(i-=r)>0?n<<=r:t>0&&this.loadWord(),(r=e-r)>0?a<<r|this.readBits(r):a},this.skipLeadingZeros=function(){var e;for(e=0;e<i;++e)if(0!==(n&2147483648>>>e))return n<<=e,i-=e,e;return this.loadWord(),e+this.skipLeadingZeros()},this.skipUnsignedExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.skipExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.readUnsignedExpGolomb=function(){var e=this.skipLeadingZeros();return this.readBits(e+1)-1},this.readExpGolomb=function(){var e=this.readUnsignedExpGolomb();return 1&e?1+e>>>1:-1*(e>>>1)},this.readBoolean=function(){return 1===this.readBits(1)},this.readUnsignedByte=function(){return this.readBits(8)},this.loadWord()};dt=function(){var e,t,n=0;dt.prototype.init.call(this),this.push=function(i){var r;t?((r=new Uint8Array(t.byteLength+i.data.byteLength)).set(t),r.set(i.data,t.byteLength),t=r):t=i.data;for(var a=t.byteLength;n<a-3;n++)if(1===t[n+2]){e=n+5;break}for(;e<a;)switch(t[e]){case 0:if(0!==t[e-1]){e+=2;break}if(0!==t[e-2]){e++;break}n+3!==e-2&&this.trigger("data",t.subarray(n+3,e-2));do{e++}while(1!==t[e]&&e<a);n=e-2,e+=3;break;case 1:if(0!==t[e-1]||0!==t[e-2]){e+=3;break}this.trigger("data",t.subarray(n+3,e-2)),n=e-2,e+=3;break;default:e+=3}t=t.subarray(n),e-=n,n=0},this.reset=function(){t=null,n=0,this.trigger("reset")},this.flush=function(){t&&t.byteLength>3&&this.trigger("data",t.subarray(n+3)),t=null,n=0,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")}},dt.prototype=new j,ht={100:!0,110:!0,122:!0,244:!0,44:!0,83:!0,86:!0,118:!0,128:!0,138:!0,139:!0,134:!0},ct=function(){var e,t,n,i,r,a,s,o=new dt;ct.prototype.init.call(this),e=this,this.push=function(e){"video"===e.type&&(t=e.trackId,n=e.pts,i=e.dts,o.push(e))},o.on("data",(function(s){var o={trackId:t,pts:n,dts:i,data:s,nalUnitTypeCode:31&s[0]};switch(o.nalUnitTypeCode){case 5:o.nalUnitType="slice_layer_without_partitioning_rbsp_idr";break;case 6:o.nalUnitType="sei_rbsp",o.escapedRBSP=r(s.subarray(1));break;case 7:o.nalUnitType="seq_parameter_set_rbsp",o.escapedRBSP=r(s.subarray(1)),o.config=a(o.escapedRBSP);break;case 8:o.nalUnitType="pic_parameter_set_rbsp";break;case 9:o.nalUnitType="access_unit_delimiter_rbsp"}e.trigger("data",o)})),o.on("done",(function(){e.trigger("done")})),o.on("partialdone",(function(){e.trigger("partialdone")})),o.on("reset",(function(){e.trigger("reset")})),o.on("endedtimeline",(function(){e.trigger("endedtimeline")})),this.flush=function(){o.flush()},this.partialFlush=function(){o.partialFlush()},this.reset=function(){o.reset()},this.endTimeline=function(){o.endTimeline()},s=function(e,t){var n,i=8,r=8;for(n=0;n<e;n++)0!==r&&(r=(i+t.readExpGolomb()+256)%256),i=0===r?i:r},r=function(e){for(var t,n,i=e.byteLength,r=[],a=1;a<i-2;)0===e[a]&&0===e[a+1]&&3===e[a+2]?(r.push(a+2),a+=2):a++;if(0===r.length)return e;t=i-r.length,n=new Uint8Array(t);var s=0;for(a=0;a<t;s++,a++)s===r[0]&&(s++,r.shift()),n[a]=e[s];return n},a=function(e){var t,n,i,r,a,o,l,u,c,d,h,f,p=0,g=0,m=0,v=0,y=[1,1];if(n=(t=new pt(e)).readUnsignedByte(),r=t.readUnsignedByte(),i=t.readUnsignedByte(),t.skipUnsignedExpGolomb(),ht[n]&&(3===(a=t.readUnsignedExpGolomb())&&t.skipBits(1),t.skipUnsignedExpGolomb(),t.skipUnsignedExpGolomb(),t.skipBits(1),t.readBoolean()))for(h=3!==a?8:12,f=0;f<h;f++)t.readBoolean()&&s(f<6?16:64,t);if(t.skipUnsignedExpGolomb(),0===(o=t.readUnsignedExpGolomb()))t.readUnsignedExpGolomb();else if(1===o)for(t.skipBits(1),t.skipExpGolomb(),t.skipExpGolomb(),l=t.readUnsignedExpGolomb(),f=0;f<l;f++)t.skipExpGolomb();if(t.skipUnsignedExpGolomb(),t.skipBits(1),u=t.readUnsignedExpGolomb(),c=t.readUnsignedExpGolomb(),0===(d=t.readBits(1))&&t.skipBits(1),t.skipBits(1),t.readBoolean()&&(p=t.readUnsignedExpGolomb(),g=t.readUnsignedExpGolomb(),m=t.readUnsignedExpGolomb(),v=t.readUnsignedExpGolomb()),t.readBoolean()&&t.readBoolean()){switch(t.readUnsignedByte()){case 1:y=[1,1];break;case 2:y=[12,11];break;case 3:y=[10,11];break;case 4:y=[16,11];break;case 5:y=[40,33];break;case 6:y=[24,11];break;case 7:y=[20,11];break;case 8:y=[32,11];break;case 9:y=[80,33];break;case 10:y=[18,11];break;case 11:y=[15,11];break;case 12:y=[64,33];break;case 13:y=[160,99];break;case 14:y=[4,3];break;case 15:y=[3,2];break;case 16:y=[2,1];break;case 255:y=[t.readUnsignedByte()<<8|t.readUnsignedByte(),t.readUnsignedByte()<<8|t.readUnsignedByte()]}y&&(y[0],y[1])}return{profileIdc:n,levelIdc:i,profileCompatibility:r,width:16*(u+1)-2*p-2*g,height:(2-d)*(c+1)*16-2*m-2*v,sarRatio:y}}},ct.prototype=new j;var gt,mt={H264Stream:ct,NalByteStream:dt},vt=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],yt=function(e,t){var n=e[t+6]<<21|e[t+7]<<14|e[t+8]<<7|e[t+9];return n=n>=0?n:0,(16&e[t+5])>>4?n+20:n+10},_t=function e(t,n){return t.length-n<10||t[n]!=="I".charCodeAt(0)||t[n+1]!=="D".charCodeAt(0)||t[n+2]!=="3".charCodeAt(0)?n:e(t,n+=yt(t,n))},bt=function(e){return e[0]<<21|e[1]<<14|e[2]<<7|e[3]},Tt={isLikelyAacData:function(e){var t=_t(e,0);return e.length>=t+2&&255===(255&e[t])&&240===(240&e[t+1])&&16===(22&e[t+1])},parseId3TagSize:yt,parseAdtsSize:function(e,t){var n=(224&e[t+5])>>5,i=e[t+4]<<3;return 6144&e[t+3]|i|n},parseType:function(e,t){return e[t]==="I".charCodeAt(0)&&e[t+1]==="D".charCodeAt(0)&&e[t+2]==="3".charCodeAt(0)?"timed-metadata":!0&e[t]&&240===(240&e[t+1])?"audio":null},parseSampleRate:function(e){for(var t=0;t+5<e.length;){if(255===e[t]&&240===(246&e[t+1]))return vt[(60&e[t+2])>>>2];t++}return null},parseAacTimestamp:function(e){var t,n,i;t=10,64&e[5]&&(t+=4,t+=bt(e.subarray(10,14)));do{if((n=bt(e.subarray(t+4,t+8)))<1)return null;if("PRIV"===String.fromCharCode(e[t],e[t+1],e[t+2],e[t+3])){i=e.subarray(t+10,t+n+10);for(var r=0;r<i.byteLength;r++)if(0===i[r]){var a=unescape(function(e,t,n){var i,r="";for(i=t;i<n;i++)r+="%"+("00"+e[i].toString(16)).slice(-2);return r}(i,0,r));if("com.apple.streaming.transportStreamTimestamp"===a){var s=i.subarray(r+1),o=(1&s[3])<<30|s[4]<<22|s[5]<<14|s[6]<<6|s[7]>>>2;return o*=4,o+=3&s[7]}break}}t+=10,t+=n}while(t<e.byteLength);return null}};(gt=function(){var e=new Uint8Array,t=0;gt.prototype.init.call(this),this.setTimestamp=function(e){t=e},this.push=function(n){var i,r,a,s,o=0,l=0;for(e.length?(s=e.length,(e=new Uint8Array(n.byteLength+s)).set(e.subarray(0,s)),e.set(n,s)):e=n;e.length-l>=3;)if(e[l]!=="I".charCodeAt(0)||e[l+1]!=="D".charCodeAt(0)||e[l+2]!=="3".charCodeAt(0))if(255!==(255&e[l])||240!==(240&e[l+1]))l++;else{if(e.length-l<7)break;if(l+(o=Tt.parseAdtsSize(e,l))>e.length)break;a={type:"audio",data:e.subarray(l,l+o),pts:t,dts:t},this.trigger("data",a),l+=o}else{if(e.length-l<10)break;if(l+(o=Tt.parseId3TagSize(e,l))>e.length)break;r={type:"timed-metadata",data:e.subarray(l,l+o)},this.trigger("data",r),l+=o}i=e.length-l,e=i>0?e.subarray(l):new Uint8Array},this.reset=function(){e=new Uint8Array,this.trigger("reset")},this.endTimeline=function(){e=new Uint8Array,this.trigger("endedtimeline")}}).prototype=new j;var kt,xt,St,wt,Et=gt,Ct=["audioobjecttype","channelcount","samplerate","samplingfrequencyindex","samplesize"],Pt=["width","height","profileIdc","levelIdc","profileCompatibility","sarRatio"],It=mt.H264Stream,At=Tt.isLikelyAacData,Ot=ce,Lt=function(e,t){t.stream=e,this.trigger("log",t)},Mt=function(e,t){for(var n=Object.keys(t),i=0;i<n.length;i++){var r=n[i];"headOfPipeline"!==r&&t[r].on&&t[r].on("log",Lt.bind(e,r))}},Dt=function(e,t){var n;if(e.length!==t.length)return!1;for(n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0},Rt=function(e,t,n,i,r,a){return{start:{dts:e,pts:e+(n-t)},end:{dts:e+(i-t),pts:e+(r-n)},prependedContentDuration:a,baseMediaDecodeTime:e}};xt=function(e,t){var n,i=[],r=0,a=0,s=1/0;n=(t=t||{}).firstSequenceNumber||0,xt.prototype.init.call(this),this.push=function(t){xe(e,t),e&&Ct.forEach((function(n){e[n]=t[n]})),i.push(t)},this.setEarliestDts=function(e){r=e},this.setVideoBaseMediaDecodeTime=function(e){s=e},this.setAudioAppendStart=function(e){a=e},this.flush=function(){var o,l,u,c,d,h,f;0!==i.length?(o=ve(i,e,r),e.baseMediaDecodeTime=ke(e,t.keepOriginalTimestamps),f=me(e,o,a,s),e.samples=ye(o),u=Y(_e(o)),i=[],l=Q(n,[e]),c=new Uint8Array(l.byteLength+u.byteLength),n++,c.set(l),c.set(u,l.byteLength),Te(e),d=Math.ceil(1024*Ot/e.samplerate),o.length&&(h=o.length*d,this.trigger("segmentTimingInfo",Rt(fe(e.baseMediaDecodeTime,e.samplerate),o[0].dts,o[0].pts,o[0].dts+h,o[0].pts+h,f||0)),this.trigger("timingInfo",{start:o[0].pts,end:o[0].pts+h})),this.trigger("data",{track:e,boxes:c}),this.trigger("done","AudioSegmentStream")):this.trigger("done","AudioSegmentStream")},this.reset=function(){Te(e),i=[],this.trigger("reset")}},xt.prototype=new j,kt=function(e,t){var n,i,r,a=[],s=[];n=(t=t||{}).firstSequenceNumber||0,kt.prototype.init.call(this),delete e.minPTS,this.gopCache_=[],this.push=function(t){xe(e,t),"seq_parameter_set_rbsp"!==t.nalUnitType||i||(i=t.config,e.sps=[t.data],Pt.forEach((function(t){e[t]=i[t]}),this)),"pic_parameter_set_rbsp"!==t.nalUnitType||r||(r=t.data,e.pps=[t.data]),a.push(t)},this.flush=function(){for(var i,r,o,l,u,c,d,h,f=0;a.length&&"access_unit_delimiter_rbsp"!==a[0].nalUnitType;)a.shift();if(0===a.length)return this.resetStream_(),void this.trigger("done","VideoSegmentStream");if(i=ee(a),(o=te(i))[0][0].keyFrame||((r=this.getGopForFusion_(a[0],e))?(f=r.duration,o.unshift(r),o.byteLength+=r.byteLength,o.nalCount+=r.nalCount,o.pts=r.pts,o.dts=r.dts,o.duration+=r.duration):o=ne(o)),s.length){var p;if(!(p=t.alignGopsAtEnd?this.alignGopsAtEnd_(o):this.alignGopsAtStart_(o)))return this.gopCache_.unshift({gop:o.pop(),pps:e.pps,sps:e.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),a=[],this.resetStream_(),void this.trigger("done","VideoSegmentStream");Te(e),o=p}xe(e,o),e.samples=ie(o),u=Y(re(o)),e.baseMediaDecodeTime=ke(e,t.keepOriginalTimestamps),this.trigger("processedGopsInfo",o.map((function(e){return{pts:e.pts,dts:e.dts,byteLength:e.byteLength}}))),d=o[0],h=o[o.length-1],this.trigger("segmentTimingInfo",Rt(e.baseMediaDecodeTime,d.dts,d.pts,h.dts+h.duration,h.pts+h.duration,f)),this.trigger("timingInfo",{start:o[0].pts,end:o[o.length-1].pts+o[o.length-1].duration}),this.gopCache_.unshift({gop:o.pop(),pps:e.pps,sps:e.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),a=[],this.trigger("baseMediaDecodeTime",e.baseMediaDecodeTime),this.trigger("timelineStartInfo",e.timelineStartInfo),l=Q(n,[e]),c=new Uint8Array(l.byteLength+u.byteLength),n++,c.set(l),c.set(u,l.byteLength),this.trigger("data",{track:e,boxes:c}),this.resetStream_(),this.trigger("done","VideoSegmentStream")},this.reset=function(){this.resetStream_(),a=[],this.gopCache_.length=0,s.length=0,this.trigger("reset")},this.resetStream_=function(){Te(e),i=void 0,r=void 0},this.getGopForFusion_=function(t){var n,i,r,a,s,o=1/0;for(s=0;s<this.gopCache_.length;s++)r=(a=this.gopCache_[s]).gop,e.pps&&Dt(e.pps[0],a.pps[0])&&e.sps&&Dt(e.sps[0],a.sps[0])&&(r.dts<e.timelineStartInfo.dts||(n=t.dts-r.dts-r.duration)>=-1e4&&n<=45e3&&(!i||o>n)&&(i=a,o=n));return i?i.gop:null},this.alignGopsAtStart_=function(e){var t,n,i,r,a,o,l,u;for(a=e.byteLength,o=e.nalCount,l=e.duration,t=n=0;t<s.length&&n<e.length&&(i=s[t],r=e[n],i.pts!==r.pts);)r.pts>i.pts?t++:(n++,a-=r.byteLength,o-=r.nalCount,l-=r.duration);return 0===n?e:n===e.length?null:((u=e.slice(n)).byteLength=a,u.duration=l,u.nalCount=o,u.pts=u[0].pts,u.dts=u[0].dts,u)},this.alignGopsAtEnd_=function(e){var t,n,i,r,a,o,l;for(t=s.length-1,n=e.length-1,a=null,o=!1;t>=0&&n>=0;){if(i=s[t],r=e[n],i.pts===r.pts){o=!0;break}i.pts>r.pts?t--:(t===s.length-1&&(a=n),n--)}if(!o&&null===a)return null;if(0===(l=o?n:a))return e;var u=e.slice(l),c=u.reduce((function(e,t){return e.byteLength+=t.byteLength,e.duration+=t.duration,e.nalCount+=t.nalCount,e}),{byteLength:0,duration:0,nalCount:0});return u.byteLength=c.byteLength,u.duration=c.duration,u.nalCount=c.nalCount,u.pts=u[0].pts,u.dts=u[0].dts,u},this.alignGopsWith=function(e){s=e}},kt.prototype=new j,wt=function(e,t){this.numberOfTracks=0,this.metadataStream=t,"undefined"!==typeof(e=e||{}).remux?this.remuxTracks=!!e.remux:this.remuxTracks=!0,"boolean"===typeof e.keepOriginalTimestamps?this.keepOriginalTimestamps=e.keepOriginalTimestamps:this.keepOriginalTimestamps=!1,this.pendingTracks=[],this.videoTrack=null,this.pendingBoxes=[],this.pendingCaptions=[],this.pendingMetadata=[],this.pendingBytes=0,this.emittedTracks=0,wt.prototype.init.call(this),this.push=function(e){return e.text?this.pendingCaptions.push(e):e.frames?this.pendingMetadata.push(e):(this.pendingTracks.push(e.track),this.pendingBytes+=e.boxes.byteLength,"video"===e.track.type&&(this.videoTrack=e.track,this.pendingBoxes.push(e.boxes)),void("audio"===e.track.type&&(this.audioTrack=e.track,this.pendingBoxes.unshift(e.boxes))))}},wt.prototype=new j,wt.prototype.flush=function(e){var t,n,i,r,a=0,s={captions:[],captionStreams:{},metadata:[],info:{}},o=0;if(this.pendingTracks.length<this.numberOfTracks){if("VideoSegmentStream"!==e&&"AudioSegmentStream"!==e)return;if(this.remuxTracks)return;if(0===this.pendingTracks.length)return this.emittedTracks++,void(this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0))}if(this.videoTrack?(o=this.videoTrack.timelineStartInfo.pts,Pt.forEach((function(e){s.info[e]=this.videoTrack[e]}),this)):this.audioTrack&&(o=this.audioTrack.timelineStartInfo.pts,Ct.forEach((function(e){s.info[e]=this.audioTrack[e]}),this)),this.videoTrack||this.audioTrack){for(1===this.pendingTracks.length?s.type=this.pendingTracks[0].type:s.type="combined",this.emittedTracks+=this.pendingTracks.length,i=J(this.pendingTracks),s.initSegment=new Uint8Array(i.byteLength),s.initSegment.set(i),s.data=new Uint8Array(this.pendingBytes),r=0;r<this.pendingBoxes.length;r++)s.data.set(this.pendingBoxes[r],a),a+=this.pendingBoxes[r].byteLength;for(r=0;r<this.pendingCaptions.length;r++)(t=this.pendingCaptions[r]).startTime=ge(t.startPts,o,this.keepOriginalTimestamps),t.endTime=ge(t.endPts,o,this.keepOriginalTimestamps),s.captionStreams[t.stream]=!0,s.captions.push(t);for(r=0;r<this.pendingMetadata.length;r++)(n=this.pendingMetadata[r]).cueTime=ge(n.pts,o,this.keepOriginalTimestamps),s.metadata.push(n);for(s.metadata.dispatchType=this.metadataStream.dispatchType,this.pendingTracks.length=0,this.videoTrack=null,this.pendingBoxes.length=0,this.pendingCaptions.length=0,this.pendingBytes=0,this.pendingMetadata.length=0,this.trigger("data",s),r=0;r<s.captions.length;r++)t=s.captions[r],this.trigger("caption",t);for(r=0;r<s.metadata.length;r++)n=s.metadata[r],this.trigger("id3Frame",n)}this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0)},wt.prototype.setRemux=function(e){this.remuxTracks=e},St=function(e){var t,n,i=this,r=!0;St.prototype.init.call(this),e=e||{},this.baseMediaDecodeTime=e.baseMediaDecodeTime||0,this.transmuxPipeline_={},this.setupAacPipeline=function(){var r={};this.transmuxPipeline_=r,r.type="aac",r.metadataStream=new ot.MetadataStream,r.aacStream=new Et,r.audioTimestampRolloverStream=new ot.TimestampRolloverStream("audio"),r.timedMetadataTimestampRolloverStream=new ot.TimestampRolloverStream("timed-metadata"),r.adtsStream=new ft,r.coalesceStream=new wt(e,r.metadataStream),r.headOfPipeline=r.aacStream,r.aacStream.pipe(r.audioTimestampRolloverStream).pipe(r.adtsStream),r.aacStream.pipe(r.timedMetadataTimestampRolloverStream).pipe(r.metadataStream).pipe(r.coalesceStream),r.metadataStream.on("timestamp",(function(e){r.aacStream.setTimestamp(e.timeStamp)})),r.aacStream.on("data",(function(a){"timed-metadata"!==a.type&&"audio"!==a.type||r.audioSegmentStream||(n=n||{timelineStartInfo:{baseMediaDecodeTime:i.baseMediaDecodeTime},codec:"adts",type:"audio"},r.coalesceStream.numberOfTracks++,r.audioSegmentStream=new xt(n,e),r.audioSegmentStream.on("log",i.getLogTrigger_("audioSegmentStream")),r.audioSegmentStream.on("timingInfo",i.trigger.bind(i,"audioTimingInfo")),r.adtsStream.pipe(r.audioSegmentStream).pipe(r.coalesceStream),i.trigger("trackinfo",{hasAudio:!!n,hasVideo:!!t}))})),r.coalesceStream.on("data",this.trigger.bind(this,"data")),r.coalesceStream.on("done",this.trigger.bind(this,"done")),Mt(this,r)},this.setupTsPipeline=function(){var r={};this.transmuxPipeline_=r,r.type="ts",r.metadataStream=new ot.MetadataStream,r.packetStream=new ot.TransportPacketStream,r.parseStream=new ot.TransportParseStream,r.elementaryStream=new ot.ElementaryStream,r.timestampRolloverStream=new ot.TimestampRolloverStream,r.adtsStream=new ft,r.h264Stream=new It,r.captionStream=new ot.CaptionStream(e),r.coalesceStream=new wt(e,r.metadataStream),r.headOfPipeline=r.packetStream,r.packetStream.pipe(r.parseStream).pipe(r.elementaryStream).pipe(r.timestampRolloverStream),r.timestampRolloverStream.pipe(r.h264Stream),r.timestampRolloverStream.pipe(r.adtsStream),r.timestampRolloverStream.pipe(r.metadataStream).pipe(r.coalesceStream),r.h264Stream.pipe(r.captionStream).pipe(r.coalesceStream),r.elementaryStream.on("data",(function(a){var s;if("metadata"===a.type){for(s=a.tracks.length;s--;)t||"video"!==a.tracks[s].type?n||"audio"!==a.tracks[s].type||((n=a.tracks[s]).timelineStartInfo.baseMediaDecodeTime=i.baseMediaDecodeTime):(t=a.tracks[s]).timelineStartInfo.baseMediaDecodeTime=i.baseMediaDecodeTime;t&&!r.videoSegmentStream&&(r.coalesceStream.numberOfTracks++,r.videoSegmentStream=new kt(t,e),r.videoSegmentStream.on("log",i.getLogTrigger_("videoSegmentStream")),r.videoSegmentStream.on("timelineStartInfo",(function(t){n&&!e.keepOriginalTimestamps&&(n.timelineStartInfo=t,r.audioSegmentStream.setEarliestDts(t.dts-i.baseMediaDecodeTime))})),r.videoSegmentStream.on("processedGopsInfo",i.trigger.bind(i,"gopInfo")),r.videoSegmentStream.on("segmentTimingInfo",i.trigger.bind(i,"videoSegmentTimingInfo")),r.videoSegmentStream.on("baseMediaDecodeTime",(function(e){n&&r.audioSegmentStream.setVideoBaseMediaDecodeTime(e)})),r.videoSegmentStream.on("timingInfo",i.trigger.bind(i,"videoTimingInfo")),r.h264Stream.pipe(r.videoSegmentStream).pipe(r.coalesceStream)),n&&!r.audioSegmentStream&&(r.coalesceStream.numberOfTracks++,r.audioSegmentStream=new xt(n,e),r.audioSegmentStream.on("log",i.getLogTrigger_("audioSegmentStream")),r.audioSegmentStream.on("timingInfo",i.trigger.bind(i,"audioTimingInfo")),r.audioSegmentStream.on("segmentTimingInfo",i.trigger.bind(i,"audioSegmentTimingInfo")),r.adtsStream.pipe(r.audioSegmentStream).pipe(r.coalesceStream)),i.trigger("trackinfo",{hasAudio:!!n,hasVideo:!!t})}})),r.coalesceStream.on("data",this.trigger.bind(this,"data")),r.coalesceStream.on("id3Frame",(function(e){e.dispatchType=r.metadataStream.dispatchType,i.trigger("id3Frame",e)})),r.coalesceStream.on("caption",this.trigger.bind(this,"caption")),r.coalesceStream.on("done",this.trigger.bind(this,"done")),Mt(this,r)},this.setBaseMediaDecodeTime=function(i){var r=this.transmuxPipeline_;e.keepOriginalTimestamps||(this.baseMediaDecodeTime=i),n&&(n.timelineStartInfo.dts=void 0,n.timelineStartInfo.pts=void 0,Te(n),r.audioTimestampRolloverStream&&r.audioTimestampRolloverStream.discontinuity()),t&&(r.videoSegmentStream&&(r.videoSegmentStream.gopCache_=[]),t.timelineStartInfo.dts=void 0,t.timelineStartInfo.pts=void 0,Te(t),r.captionStream.reset()),r.timestampRolloverStream&&r.timestampRolloverStream.discontinuity()},this.setAudioAppendStart=function(e){n&&this.transmuxPipeline_.audioSegmentStream.setAudioAppendStart(e)},this.setRemux=function(t){var n=this.transmuxPipeline_;e.remux=t,n&&n.coalesceStream&&n.coalesceStream.setRemux(t)},this.alignGopsWith=function(e){t&&this.transmuxPipeline_.videoSegmentStream&&this.transmuxPipeline_.videoSegmentStream.alignGopsWith(e)},this.getLogTrigger_=function(e){var t=this;return function(n){n.stream=e,t.trigger("log",n)}},this.push=function(e){if(r){var t=At(e);t&&"aac"!==this.transmuxPipeline_.type?this.setupAacPipeline():t||"ts"===this.transmuxPipeline_.type||this.setupTsPipeline(),r=!1}this.transmuxPipeline_.headOfPipeline.push(e)},this.flush=function(){r=!0,this.transmuxPipeline_.headOfPipeline.flush()},this.endTimeline=function(){this.transmuxPipeline_.headOfPipeline.endTimeline()},this.reset=function(){this.transmuxPipeline_.headOfPipeline&&this.transmuxPipeline_.headOfPipeline.reset()},this.resetCaptions=function(){this.transmuxPipeline_.captionStream&&this.transmuxPipeline_.captionStream.reset()}},St.prototype=new j;var Nt,Ut,jt,Ft={Transmuxer:St,VideoSegmentStream:kt,AudioSegmentStream:xt,AUDIO_PROPERTIES:Ct,VIDEO_PROPERTIES:Pt,generateSegmentTimingInfo:Rt},Bt=function(e){return e>>>0},zt=function(e){return("00"+e.toString(16)).slice(-2)},Vt=function(e){var t="";return t+=String.fromCharCode(e[0]),t+=String.fromCharCode(e[1]),t+=String.fromCharCode(e[2]),t+=String.fromCharCode(e[3])},Ht=Bt,Wt=function e(t,n){var i,r,a,s,o,l=[];if(!n.length)return null;for(i=0;i<t.byteLength;)r=Ht(t[i]<<24|t[i+1]<<16|t[i+2]<<8|t[i+3]),a=Vt(t.subarray(i+4,i+8)),s=r>1?i+r:t.byteLength,a===n[0]&&(1===n.length?l.push(t.subarray(i+8,s)):(o=e(t.subarray(i+8,s),n.slice(1))).length&&(l=l.concat(o))),i=s;return l},qt=Bt,Gt=B.getUint64,Xt=function(e){var t={version:e[0],flags:new Uint8Array(e.subarray(1,4))};return 1===t.version?t.baseMediaDecodeTime=Gt(e.subarray(4)):t.baseMediaDecodeTime=qt(e[4]<<24|e[5]<<16|e[6]<<8|e[7]),t},Kt=function(e){return{isLeading:(12&e[0])>>>2,dependsOn:3&e[0],isDependedOn:(192&e[1])>>>6,hasRedundancy:(48&e[1])>>>4,paddingValue:(14&e[1])>>>1,isNonSyncSample:1&e[1],degradationPriority:e[2]<<8|e[3]}},$t=function(e){var t,n={version:e[0],flags:new Uint8Array(e.subarray(1,4)),samples:[]},i=new DataView(e.buffer,e.byteOffset,e.byteLength),r=1&n.flags[2],a=4&n.flags[2],s=1&n.flags[1],o=2&n.flags[1],l=4&n.flags[1],u=8&n.flags[1],c=i.getUint32(4),d=8;for(r&&(n.dataOffset=i.getInt32(d),d+=4),a&&c&&(t={flags:Kt(e.subarray(d,d+4))},d+=4,s&&(t.duration=i.getUint32(d),d+=4),o&&(t.size=i.getUint32(d),d+=4),u&&(1===n.version?t.compositionTimeOffset=i.getInt32(d):t.compositionTimeOffset=i.getUint32(d),d+=4),n.samples.push(t),c--);c--;)t={},s&&(t.duration=i.getUint32(d),d+=4),o&&(t.size=i.getUint32(d),d+=4),l&&(t.flags=Kt(e.subarray(d,d+4)),d+=4),u&&(1===n.version?t.compositionTimeOffset=i.getInt32(d):t.compositionTimeOffset=i.getUint32(d),d+=4),n.samples.push(t);return n},Yt=function(e){var t,n=new DataView(e.buffer,e.byteOffset,e.byteLength),i={version:e[0],flags:new Uint8Array(e.subarray(1,4)),trackId:n.getUint32(4)},r=1&i.flags[2],a=2&i.flags[2],s=8&i.flags[2],o=16&i.flags[2],l=32&i.flags[2],u=65536&i.flags[0],c=131072&i.flags[0];return t=8,r&&(t+=4,i.baseDataOffset=n.getUint32(12),t+=4),a&&(i.sampleDescriptionIndex=n.getUint32(t),t+=4),s&&(i.defaultSampleDuration=n.getUint32(t),t+=4),o&&(i.defaultSampleSize=n.getUint32(t),t+=4),l&&(i.defaultSampleFlags=n.getUint32(t)),u&&(i.durationIsEmpty=!0),!r&&c&&(i.baseDataOffsetIsMoof=!0),i},Qt="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:{},Jt="undefined"!==typeof window?window:"undefined"!==typeof Qt?Qt:"undefined"!==typeof self?self:{},Zt=Ce,en=Be.CaptionStream,tn=function(e,t){for(var n=e,i=0;i<t.length;i++){var r=t[i];if(n<r.size)return r;n-=r.size}return null},nn=function(e,t){var n=Wt(e,["moof","traf"]),i=Wt(e,["mdat"]),r={},a=[];return i.forEach((function(e,t){var i=n[t];a.push({mdat:e,traf:i})})),a.forEach((function(e){var n,i,a=e.mdat,s=e.traf,o=Wt(s,["tfhd"]),l=Yt(o[0]),u=l.trackId,c=Wt(s,["tfdt"]),d=c.length>0?Xt(c[0]).baseMediaDecodeTime:0,h=Wt(s,["trun"]);t===u&&h.length>0&&(n=function(e,t,n){var i=t,r=n.defaultSampleDuration||0,a=n.defaultSampleSize||0,s=n.trackId,o=[];return e.forEach((function(e){var t=$t(e).samples;t.forEach((function(e){void 0===e.duration&&(e.duration=r),void 0===e.size&&(e.size=a),e.trackId=s,e.dts=i,void 0===e.compositionTimeOffset&&(e.compositionTimeOffset=0),"bigint"===typeof i?(e.pts=i+Jt.BigInt(e.compositionTimeOffset),i+=Jt.BigInt(e.duration)):(e.pts=i+e.compositionTimeOffset,i+=e.duration)})),o=o.concat(t)})),o}(h,d,l),i=function(e,t,n){var i,r,a,s,o=new DataView(e.buffer,e.byteOffset,e.byteLength),l={logs:[],seiNals:[]};for(r=0;r+4<e.length;r+=a)if(a=o.getUint32(r),r+=4,!(a<=0))switch(31&e[r]){case 6:var u=e.subarray(r+1,r+1+a),c=tn(r,t);if(i={nalUnitType:"sei_rbsp",size:a,data:u,escapedRBSP:Zt(u),trackId:n},c)i.pts=c.pts,i.dts=c.dts,s=c;else{if(!s){l.logs.push({level:"warn",message:"We've encountered a nal unit without data at "+r+" for trackId "+n+". See mux.js#223."});break}i.pts=s.pts,i.dts=s.dts}l.seiNals.push(i)}return l}(a,n,u),r[u]||(r[u]={seiNals:[],logs:[]}),r[u].seiNals=r[u].seiNals.concat(i.seiNals),r[u].logs=r[u].logs.concat(i.logs))})),r},rn=function(){var e,t,n,i,r,a,s=!1;this.isInitialized=function(){return s},this.init=function(t){e=new en,s=!0,a=!!t&&t.isPartial,e.on("data",(function(e){e.startTime=e.startPts/i,e.endTime=e.endPts/i,r.captions.push(e),r.captionStreams[e.stream]=!0})),e.on("log",(function(e){r.logs.push(e)}))},this.isNewInit=function(e,t){return!(e&&0===e.length||t&&"object"===typeof t&&0===Object.keys(t).length)&&(n!==e[0]||i!==t[n])},this.parse=function(e,a,s){var o;if(!this.isInitialized())return null;if(!a||!s)return null;if(this.isNewInit(a,s))n=a[0],i=s[n];else if(null===n||!i)return t.push(e),null;for(;t.length>0;){var l=t.shift();this.parse(l,a,s)}return o=function(e,t,n){if(null===t)return null;var i=nn(e,t)[t]||{};return{seiNals:i.seiNals,logs:i.logs,timescale:n}}(e,n,i),o&&o.logs&&(r.logs=r.logs.concat(o.logs)),null!==o&&o.seiNals?(this.pushNals(o.seiNals),this.flushStream(),r):r.logs.length?{logs:r.logs,captions:[],captionStreams:[]}:null},this.pushNals=function(t){if(!this.isInitialized()||!t||0===t.length)return null;t.forEach((function(t){e.push(t)}))},this.flushStream=function(){if(!this.isInitialized())return null;a?e.partialFlush():e.flush()},this.clearParsedCaptions=function(){r.captions=[],r.captionStreams={},r.logs=[]},this.resetCaptionStream=function(){if(!this.isInitialized())return null;e.reset()},this.clearAllCaptions=function(){this.clearParsedCaptions(),this.resetCaptionStream()},this.reset=function(){t=[],n=null,i=null,r?this.clearParsedCaptions():r={captions:[],captionStreams:{},logs:[]},this.resetCaptionStream()},this.reset()},an=Bt,sn=zt,on=B.getUint64;Nt=function(e,t){var n=Wt(t,["moof","traf"]).reduce((function(t,n){var i,r,a=Wt(n,["tfhd"])[0],s=an(a[4]<<24|a[5]<<16|a[6]<<8|a[7]),o=e[s]||9e4,l=Wt(n,["tfdt"])[0],u=new DataView(l.buffer,l.byteOffset,l.byteLength);return"bigint"===typeof(i=1===l[0]?on(l.subarray(4,12)):u.getUint32(4))?r=i/Jt.BigInt(o):"number"!==typeof i||isNaN(i)||(r=i/o),r<Number.MAX_SAFE_INTEGER&&(r=Number(r)),r<t&&(t=r),t}),1/0);return"bigint"===typeof n||isFinite(n)?n:0},jt=function(e){var t=0===e[0]?12:20;return an(e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3])},Ut=function(e){var t=Wt(e,["moov","trak"]),n=[];return t.forEach((function(e){var t,i,r={},a=Wt(e,["tkhd"])[0];a&&(i=(t=new DataView(a.buffer,a.byteOffset,a.byteLength)).getUint8(0),r.id=0===i?t.getUint32(12):t.getUint32(20));var s=Wt(e,["mdia","hdlr"])[0];if(s){var o=Vt(s.subarray(8,12));r.type="vide"===o?"video":"soun"===o?"audio":o}var l=Wt(e,["mdia","minf","stbl","stsd"])[0];if(l){var u=l.subarray(8);r.codec=Vt(u.subarray(4,8));var c,d=Wt(u,[r.codec])[0];d&&(/^[asm]vc[1-9]$/i.test(r.codec)?(c=d.subarray(78),"avcC"===Vt(c.subarray(4,8))&&c.length>11?(r.codec+=".",r.codec+=sn(c[9]),r.codec+=sn(c[10]),r.codec+=sn(c[11])):r.codec="avc1.4d400d"):/^mp4[a,v]$/i.test(r.codec)?(c=d.subarray(28),"esds"===Vt(c.subarray(4,8))&&c.length>20&&0!==c[19]?(r.codec+="."+sn(c[19]),r.codec+="."+sn(c[20]>>>2&63).replace(/^0/,"")):r.codec="mp4a.40.2"):r.codec=r.codec.toLowerCase())}var h=Wt(e,["mdia","mdhd"])[0];h&&(r.timescale=jt(h)),n.push(r)})),n};var ln=Nt,un=Ut,cn=function(e){var t=31&e[1];return t<<=8,t|=e[2]},dn=function(e){return!!(64&e[1])},hn=function(e){var t=0;return(48&e[3])>>>4>1&&(t+=e[4]+1),t},fn=function(e){switch(e){case 5:return"slice_layer_without_partitioning_rbsp_idr";case 6:return"sei_rbsp";case 7:return"seq_parameter_set_rbsp";case 8:return"pic_parameter_set_rbsp";case 9:return"access_unit_delimiter_rbsp";default:return null}},pn={parseType:function(e,t){var n=cn(e);return 0===n?"pat":n===t?"pmt":t?"pes":null},parsePat:function(e){var t=dn(e),n=4+hn(e);return t&&(n+=e[n]+1),(31&e[n+10])<<8|e[n+11]},parsePmt:function(e){var t={},n=dn(e),i=4+hn(e);if(n&&(i+=e[i]+1),1&e[i+5]){var r;r=3+((15&e[i+1])<<8|e[i+2])-4;for(var a=12+((15&e[i+10])<<8|e[i+11]);a<r;){var s=i+a;t[(31&e[s+1])<<8|e[s+2]]=e[s],a+=5+((15&e[s+3])<<8|e[s+4])}return t}},parsePayloadUnitStartIndicator:dn,parsePesType:function(e,t){switch(t[cn(e)]){case ze.H264_STREAM_TYPE:return"video";case ze.ADTS_STREAM_TYPE:return"audio";case ze.METADATA_STREAM_TYPE:return"timed-metadata";default:return null}},parsePesTime:function(e){if(!dn(e))return null;var t=4+hn(e);if(t>=e.byteLength)return null;var n,i=null;return 192&(n=e[t+7])&&((i={}).pts=(14&e[t+9])<<27|(255&e[t+10])<<20|(254&e[t+11])<<12|(255&e[t+12])<<5|(254&e[t+13])>>>3,i.pts*=4,i.pts+=(6&e[t+13])>>>1,i.dts=i.pts,64&n&&(i.dts=(14&e[t+14])<<27|(255&e[t+15])<<20|(254&e[t+16])<<12|(255&e[t+17])<<5|(254&e[t+18])>>>3,i.dts*=4,i.dts+=(6&e[t+18])>>>1)),i},videoPacketContainsKeyFrame:function(e){for(var t=4+hn(e),n=e.subarray(t),i=0,r=0,a=!1;r<n.byteLength-3;r++)if(1===n[r+2]){i=r+5;break}for(;i<n.byteLength;)switch(n[i]){case 0:if(0!==n[i-1]){i+=2;break}if(0!==n[i-2]){i++;break}r+3!==i-2&&"slice_layer_without_partitioning_rbsp_idr"===fn(31&n[r+3])&&(a=!0);do{i++}while(1!==n[i]&&i<n.length);r=i-2,i+=3;break;case 1:if(0!==n[i-1]||0!==n[i-2]){i+=3;break}"slice_layer_without_partitioning_rbsp_idr"===fn(31&n[r+3])&&(a=!0),r=i-2,i+=3;break;default:i+=3}return n=n.subarray(r),i-=r,r=0,n&&n.byteLength>3&&"slice_layer_without_partitioning_rbsp_idr"===fn(31&n[r+3])&&(a=!0),a}},gn=Xe,mn={};mn.ts=pn,mn.aac=Tt;var vn=ce,yn=188,_n=71,bn=function(e,t,n){for(var i,r,a,s,o=0,l=yn,u=!1;l<=e.byteLength;)if(e[o]!==_n||e[l]!==_n&&l!==e.byteLength)o++,l++;else{if(i=e.subarray(o,l),"pes"===mn.ts.parseType(i,t.pid))r=mn.ts.parsePesType(i,t.table),a=mn.ts.parsePayloadUnitStartIndicator(i),"audio"===r&&a&&(s=mn.ts.parsePesTime(i))&&(s.type="audio",n.audio.push(s),u=!0);if(u)break;o+=yn,l+=yn}for(o=(l=e.byteLength)-yn,u=!1;o>=0;)if(e[o]!==_n||e[l]!==_n&&l!==e.byteLength)o--,l--;else{if(i=e.subarray(o,l),"pes"===mn.ts.parseType(i,t.pid))r=mn.ts.parsePesType(i,t.table),a=mn.ts.parsePayloadUnitStartIndicator(i),"audio"===r&&a&&(s=mn.ts.parsePesTime(i))&&(s.type="audio",n.audio.push(s),u=!0);if(u)break;o-=yn,l-=yn}},Tn=function(e,t,n){for(var i,r,a,s,o,l,u,c=0,d=yn,h=!1,f={data:[],size:0};d<e.byteLength;)if(e[c]!==_n||e[d]!==_n)c++,d++;else{if(i=e.subarray(c,d),"pes"===mn.ts.parseType(i,t.pid))if(r=mn.ts.parsePesType(i,t.table),a=mn.ts.parsePayloadUnitStartIndicator(i),"video"===r&&(a&&!h&&(s=mn.ts.parsePesTime(i))&&(s.type="video",n.video.push(s),h=!0),!n.firstKeyFrame)){if(a&&0!==f.size){for(o=new Uint8Array(f.size),l=0;f.data.length;)u=f.data.shift(),o.set(u,l),l+=u.byteLength;if(mn.ts.videoPacketContainsKeyFrame(o)){var p=mn.ts.parsePesTime(o);p?(n.firstKeyFrame=p,n.firstKeyFrame.type="video"):console.warn("Failed to extract PTS/DTS from PES at first keyframe. This could be an unusual TS segment, or else mux.js did not parse your TS segment correctly. If you know your TS segments do contain PTS/DTS on keyframes please file a bug report! You can try ffprobe to double check for yourself.")}f.size=0}f.data.push(i),f.size+=i.byteLength}if(h&&n.firstKeyFrame)break;c+=yn,d+=yn}for(c=(d=e.byteLength)-yn,h=!1;c>=0;)if(e[c]!==_n||e[d]!==_n)c--,d--;else{if(i=e.subarray(c,d),"pes"===mn.ts.parseType(i,t.pid))r=mn.ts.parsePesType(i,t.table),a=mn.ts.parsePayloadUnitStartIndicator(i),"video"===r&&a&&(s=mn.ts.parsePesTime(i))&&(s.type="video",n.video.push(s),h=!0);if(h)break;c-=yn,d-=yn}},kn=function(e){var t={pid:null,table:null},n={};for(var i in function(e,t){for(var n,i=0,r=yn;r<e.byteLength;)if(e[i]!==_n||e[r]!==_n)i++,r++;else{switch(n=e.subarray(i,r),mn.ts.parseType(n,t.pid)){case"pat":t.pid=mn.ts.parsePat(n);break;case"pmt":var a=mn.ts.parsePmt(n);t.table=t.table||{},Object.keys(a).forEach((function(e){t.table[e]=a[e]}))}i+=yn,r+=yn}}(e,t),t.table){if(t.table.hasOwnProperty(i))switch(t.table[i]){case ze.H264_STREAM_TYPE:n.video=[],Tn(e,t,n),0===n.video.length&&delete n.video;break;case ze.ADTS_STREAM_TYPE:n.audio=[],bn(e,t,n),0===n.audio.length&&delete n.audio}}return n},xn=function(e,t){var n;return n=mn.aac.isLikelyAacData(e)?function(e){for(var t,n=!1,i=0,r=null,a=null,s=0,o=0;e.length-o>=3;){switch(mn.aac.parseType(e,o)){case"timed-metadata":if(e.length-o<10){n=!0;break}if((s=mn.aac.parseId3TagSize(e,o))>e.length){n=!0;break}null===a&&(t=e.subarray(o,o+s),a=mn.aac.parseAacTimestamp(t)),o+=s;break;case"audio":if(e.length-o<7){n=!0;break}if((s=mn.aac.parseAdtsSize(e,o))>e.length){n=!0;break}null===r&&(t=e.subarray(o,o+s),r=mn.aac.parseSampleRate(t)),i++,o+=s;break;default:o++}if(n)return null}if(null===r||null===a)return null;var l=vn/r;return{audio:[{type:"audio",dts:a,pts:a},{type:"audio",dts:a+1024*i*l,pts:a+1024*i*l}]}}(e):kn(e),n&&(n.audio||n.video)?(function(e,t){if(e.audio&&e.audio.length){var n=t;("undefined"===typeof n||isNaN(n))&&(n=e.audio[0].dts),e.audio.forEach((function(e){e.dts=gn(e.dts,n),e.pts=gn(e.pts,n),e.dtsTime=e.dts/vn,e.ptsTime=e.pts/vn}))}if(e.video&&e.video.length){var i=t;if(("undefined"===typeof i||isNaN(i))&&(i=e.video[0].dts),e.video.forEach((function(e){e.dts=gn(e.dts,i),e.pts=gn(e.pts,i),e.dtsTime=e.dts/vn,e.ptsTime=e.pts/vn})),e.firstKeyFrame){var r=e.firstKeyFrame;r.dts=gn(r.dts,i),r.pts=gn(r.pts,i),r.dtsTime=r.dts/vn,r.ptsTime=r.pts/vn}}}(n,t),n):null},Sn=function(){function e(e,t){this.options=t||{},this.self=e,this.init()}var t=e.prototype;return t.init=function(){this.transmuxer&&this.transmuxer.dispose(),this.transmuxer=new Ft.Transmuxer(this.options),function(e,t){t.on("data",(function(t){var n=t.initSegment;t.initSegment={data:n.buffer,byteOffset:n.byteOffset,byteLength:n.byteLength};var i=t.data;t.data=i.buffer,e.postMessage({action:"data",segment:t,byteOffset:i.byteOffset,byteLength:i.byteLength},[t.data])})),t.on("done",(function(t){e.postMessage({action:"done"})})),t.on("gopInfo",(function(t){e.postMessage({action:"gopInfo",gopInfo:t})})),t.on("videoSegmentTimingInfo",(function(t){var n={start:{decode:he(t.start.dts),presentation:he(t.start.pts)},end:{decode:he(t.end.dts),presentation:he(t.end.pts)},baseMediaDecodeTime:he(t.baseMediaDecodeTime)};t.prependedContentDuration&&(n.prependedContentDuration=he(t.prependedContentDuration)),e.postMessage({action:"videoSegmentTimingInfo",videoSegmentTimingInfo:n})})),t.on("audioSegmentTimingInfo",(function(t){var n={start:{decode:he(t.start.dts),presentation:he(t.start.pts)},end:{decode:he(t.end.dts),presentation:he(t.end.pts)},baseMediaDecodeTime:he(t.baseMediaDecodeTime)};t.prependedContentDuration&&(n.prependedContentDuration=he(t.prependedContentDuration)),e.postMessage({action:"audioSegmentTimingInfo",audioSegmentTimingInfo:n})})),t.on("id3Frame",(function(t){e.postMessage({action:"id3Frame",id3Frame:t})})),t.on("caption",(function(t){e.postMessage({action:"caption",caption:t})})),t.on("trackinfo",(function(t){e.postMessage({action:"trackinfo",trackInfo:t})})),t.on("audioTimingInfo",(function(t){e.postMessage({action:"audioTimingInfo",audioTimingInfo:{start:he(t.start),end:he(t.end)}})})),t.on("videoTimingInfo",(function(t){e.postMessage({action:"videoTimingInfo",videoTimingInfo:{start:he(t.start),end:he(t.end)}})})),t.on("log",(function(t){e.postMessage({action:"log",log:t})}))}(this.self,this.transmuxer)},t.pushMp4Captions=function(e){this.captionParser||(this.captionParser=new rn,this.captionParser.init());var t=new Uint8Array(e.data,e.byteOffset,e.byteLength),n=this.captionParser.parse(t,e.trackIds,e.timescales);this.self.postMessage({action:"mp4Captions",captions:n&&n.captions||[],logs:n&&n.logs||[],data:t.buffer},[t.buffer])},t.probeMp4StartTime=function(e){var t=e.timescales,n=e.data,i=ln(t,n);this.self.postMessage({action:"probeMp4StartTime",startTime:i,data:n},[n.buffer])},t.probeMp4Tracks=function(e){var t=e.data,n=un(t);this.self.postMessage({action:"probeMp4Tracks",tracks:n,data:t},[t.buffer])},t.probeTs=function(e){var t=e.data,n=e.baseStartTime,i="number"!==typeof n||isNaN(n)?void 0:n*ce,r=xn(t,i),a=null;r&&((a={hasVideo:r.video&&2===r.video.length||!1,hasAudio:r.audio&&2===r.audio.length||!1}).hasVideo&&(a.videoStart=r.video[0].ptsTime),a.hasAudio&&(a.audioStart=r.audio[0].ptsTime)),this.self.postMessage({action:"probeTs",result:a,data:t},[t.buffer])},t.clearAllMp4Captions=function(){this.captionParser&&this.captionParser.clearAllCaptions()},t.clearParsedMp4Captions=function(){this.captionParser&&this.captionParser.clearParsedCaptions()},t.push=function(e){var t=new Uint8Array(e.data,e.byteOffset,e.byteLength);this.transmuxer.push(t)},t.reset=function(){this.transmuxer.reset()},t.setTimestampOffset=function(e){var t=e.timestampOffset||0;this.transmuxer.setBaseMediaDecodeTime(Math.round(de(t)))},t.setAudioAppendStart=function(e){this.transmuxer.setAudioAppendStart(Math.ceil(de(e.appendStart)))},t.setRemux=function(e){this.transmuxer.setRemux(e.remux)},t.flush=function(e){this.transmuxer.flush(),self.postMessage({action:"done",type:"transmuxed"})},t.endTimeline=function(){this.transmuxer.endTimeline(),self.postMessage({action:"endedtimeline",type:"transmuxed"})},t.alignGopsWith=function(e){this.transmuxer.alignGopsWith(e.gopsToAlignWith.slice())},e}();self.onmessage=function(e){"init"===e.data.action&&e.data.options?this.messageHandlers=new Sn(self,e.data.options):(this.messageHandlers||(this.messageHandlers=new Sn(self)),e.data&&e.data.action&&"init"!==e.data.action&&this.messageHandlers[e.data.action]&&this.messageHandlers[e.data.action](e.data))}}))),wl=Tl(Sl),El=function(e){var t=e.transmuxer,n=e.bytes,i=e.audioAppendStart,r=e.gopsToAlignWith,a=e.remux,s=e.onData,o=e.onTrackInfo,l=e.onAudioTimingInfo,u=e.onVideoTimingInfo,c=e.onVideoSegmentTimingInfo,d=e.onAudioSegmentTimingInfo,h=e.onId3,f=e.onCaptions,p=e.onDone,g=e.onEndedTimeline,m=e.onTransmuxerLog,v=e.isEndOfTimeline,y={buffer:[]},_=v;if(t.onmessage=function(n){t.currentTransmux===e&&("data"===n.data.action&&function(e,t,n){var i=e.data.segment,r=i.type,a=i.initSegment,s=i.captions,o=i.captionStreams,l=i.metadata,u=i.videoFrameDtsTime,c=i.videoFramePtsTime;t.buffer.push({captions:s,captionStreams:o,metadata:l});var d=e.data.segment.boxes||{data:e.data.segment.data},h={type:r,data:new Uint8Array(d.data,d.data.byteOffset,d.data.byteLength),initSegment:new Uint8Array(a.data,a.byteOffset,a.byteLength)};"undefined"!==typeof u&&(h.videoFrameDtsTime=u),"undefined"!==typeof c&&(h.videoFramePtsTime=c),n(h)}(n,y,s),"trackinfo"===n.data.action&&o(n.data.trackInfo),"gopInfo"===n.data.action&&function(e,t){t.gopInfo=e.data.gopInfo}(n,y),"audioTimingInfo"===n.data.action&&l(n.data.audioTimingInfo),"videoTimingInfo"===n.data.action&&u(n.data.videoTimingInfo),"videoSegmentTimingInfo"===n.data.action&&c(n.data.videoSegmentTimingInfo),"audioSegmentTimingInfo"===n.data.action&&d(n.data.audioSegmentTimingInfo),"id3Frame"===n.data.action&&h([n.data.id3Frame],n.data.id3Frame.dispatchType),"caption"===n.data.action&&f(n.data.caption),"endedtimeline"===n.data.action&&(_=!1,g()),"log"===n.data.action&&m(n.data.log),"transmuxed"===n.data.type&&(_||(t.onmessage=null,function(e){var t=e.transmuxedData,n=e.callback;t.buffer=[],n(t)}({transmuxedData:y,callback:p}),Cl(t))))},i&&t.postMessage({action:"setAudioAppendStart",appendStart:i}),Array.isArray(r)&&t.postMessage({action:"alignGopsWith",gopsToAlignWith:r}),"undefined"!==typeof a&&t.postMessage({action:"setRemux",remux:a}),n.byteLength){var b=n instanceof ArrayBuffer?n:n.buffer,T=n instanceof ArrayBuffer?0:n.byteOffset;t.postMessage({action:"push",data:b,byteOffset:T,byteLength:n.byteLength},[b])}v&&t.postMessage({action:"endTimeline"}),t.postMessage({action:"flush"})},Cl=function(e){e.currentTransmux=null,e.transmuxQueue.length&&(e.currentTransmux=e.transmuxQueue.shift(),"function"===typeof e.currentTransmux?e.currentTransmux():El(e.currentTransmux))},Pl=function(e,t){e.postMessage({action:t}),Cl(e)},Il=function(e,t){if(!t.currentTransmux)return t.currentTransmux=e,void Pl(t,e);t.transmuxQueue.push(Pl.bind(null,t,e))},Al=function(e){if(!e.transmuxer.currentTransmux)return e.transmuxer.currentTransmux=e,void El(e);e.transmuxer.transmuxQueue.push(e)},Ol=function(e){Il("reset",e)},Ll=function(e){var t=new wl;t.currentTransmux=null,t.transmuxQueue=[];var n=t.terminate;return t.terminate=function(){return t.currentTransmux=null,t.transmuxQueue.length=0,n.call(t)},t.postMessage({action:"init",options:e}),t},Ml=function(e){var t=e.transmuxer,n=e.endAction||e.action,i=e.callback,r=o({},e,{endAction:null,transmuxer:null,callback:null});if(t.addEventListener("message",(function r(a){a.data.action===n&&(t.removeEventListener("message",r),a.data.data&&(a.data.data=new Uint8Array(a.data.data,e.byteOffset||0,e.byteLength||a.data.data.byteLength),e.data&&(e.data=a.data.data)),i(a.data))})),e.data){var a=e.data instanceof ArrayBuffer;r.byteOffset=a?0:e.data.byteOffset,r.byteLength=e.data.byteLength;var s=[a?e.data:e.data.buffer];t.postMessage(r,s)}else t.postMessage(r)},Dl=2,Rl=-101,Nl=-102,Ul=function(e){e.forEach((function(e){e.abort()}))},jl=function(e,t){return t.timedout?{status:t.status,message:"HLS request timed-out at URL: "+t.uri,code:Rl,xhr:t}:t.aborted?{status:t.status,message:"HLS request aborted at URL: "+t.uri,code:Nl,xhr:t}:e?{status:t.status,message:"HLS request errored at URL: "+t.uri,code:Dl,xhr:t}:"arraybuffer"===t.responseType&&0===t.response.byteLength?{status:t.status,message:"Empty HLS response at URL: "+t.uri,code:Dl,xhr:t}:null},Fl=function(e,t,n){return function(i,r){var a=r.response,s=jl(i,r);if(s)return n(s,e);if(16!==a.byteLength)return n({status:r.status,message:"Invalid HLS key at URL: "+r.uri,code:Dl,xhr:r},e);for(var o=new DataView(a),l=new Uint32Array([o.getUint32(0),o.getUint32(4),o.getUint32(8),o.getUint32(12)]),u=0;u<t.length;u++)t[u].bytes=l;return n(null,e)}},Bl=function(e,t){var n=wt(e.map.bytes);if("mp4"!==n){var i=e.map.resolvedUri||e.map.uri;return t({internal:!0,message:"Found unsupported "+(n||"unknown")+" container for initialization segment at URL: "+i,code:Dl})}Ml({action:"probeMp4Tracks",data:e.map.bytes,transmuxer:e.transmuxer,callback:function(n){var i=n.tracks,r=n.data;return e.map.bytes=r,i.forEach((function(t){e.map.tracks=e.map.tracks||{},e.map.tracks[t.type]||(e.map.tracks[t.type]=t,"number"===typeof t.id&&t.timescale&&(e.map.timescales=e.map.timescales||{},e.map.timescales[t.id]=t.timescale))})),t(null)}})},zl=function(e){var t=e.segment,n=e.finishProcessingFn,i=e.responseType;return function(e,r){var a=jl(e,r);if(a)return n(a,t);var s="arraybuffer"!==i&&r.responseText?function(e){for(var t=new Uint8Array(new ArrayBuffer(e.length)),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t.buffer}(r.responseText.substring(t.lastReachedChar||0)):r.response;return t.stats=function(e){return{bandwidth:e.bandwidth,bytesReceived:e.bytesReceived||0,roundTripTime:e.roundTripTime||0}}(r),t.key?t.encryptedBytes=new Uint8Array(s):t.bytes=new Uint8Array(s),n(null,t)}},Vl=function(e){var t=e.segment,n=e.bytes,i=e.trackInfoFn,r=e.timingInfoFn,a=e.videoSegmentTimingInfoFn,s=e.audioSegmentTimingInfoFn,o=e.id3Fn,l=e.captionsFn,u=e.isEndOfTimeline,c=e.endedTimelineFn,d=e.dataFn,h=e.doneFn,f=e.onTransmuxerLog,p=t.map&&t.map.tracks||{},g=Boolean(p.audio&&p.video),m=r.bind(null,t,"audio","start"),v=r.bind(null,t,"audio","end"),y=r.bind(null,t,"video","start"),_=r.bind(null,t,"video","end");Ml({action:"probeTs",transmuxer:t.transmuxer,data:n,baseStartTime:t.baseStartTime,callback:function(e){t.bytes=n=e.data;var r=e.result;r&&(i(t,{hasAudio:r.hasAudio,hasVideo:r.hasVideo,isMuxed:g}),i=null,r.hasAudio&&!g&&m(r.audioStart),r.hasVideo&&y(r.videoStart),m=null,y=null),Al({bytes:n,transmuxer:t.transmuxer,audioAppendStart:t.audioAppendStart,gopsToAlignWith:t.gopsToAlignWith,remux:g,onData:function(e){e.type="combined"===e.type?"video":e.type,d(t,e)},onTrackInfo:function(e){i&&(g&&(e.isMuxed=!0),i(t,e))},onAudioTimingInfo:function(e){m&&"undefined"!==typeof e.start&&(m(e.start),m=null),v&&"undefined"!==typeof e.end&&v(e.end)},onVideoTimingInfo:function(e){y&&"undefined"!==typeof e.start&&(y(e.start),y=null),_&&"undefined"!==typeof e.end&&_(e.end)},onVideoSegmentTimingInfo:function(e){a(e)},onAudioSegmentTimingInfo:function(e){s(e)},onId3:function(e,n){o(t,e,n)},onCaptions:function(e){l(t,[e])},isEndOfTimeline:u,onEndedTimeline:function(){c()},onTransmuxerLog:f,onDone:function(e){h&&(e.type="combined"===e.type?"video":e.type,h(null,t,e))}})}})},Hl=function(e){var t=e.segment,n=e.bytes,i=e.trackInfoFn,r=e.timingInfoFn,a=e.videoSegmentTimingInfoFn,s=e.audioSegmentTimingInfoFn,o=e.id3Fn,l=e.captionsFn,u=e.isEndOfTimeline,c=e.endedTimelineFn,d=e.dataFn,h=e.doneFn,f=e.onTransmuxerLog,p=new Uint8Array(n);if(function(e){return ut(e,["moof"]).length>0}(p)){t.isFmp4=!0;var g=t.map.tracks,m={isFmp4:!0,hasVideo:!!g.video,hasAudio:!!g.audio};g.audio&&g.audio.codec&&"enca"!==g.audio.codec&&(m.audioCodec=g.audio.codec),g.video&&g.video.codec&&"encv"!==g.video.codec&&(m.videoCodec=g.video.codec),g.video&&g.audio&&(m.isMuxed=!0),i(t,m);var v=function(e){d(t,{data:p,type:m.hasAudio&&!m.isMuxed?"audio":"video"}),e&&e.length&&l(t,e),h(null,t,{})};Ml({action:"probeMp4StartTime",timescales:t.map.timescales,data:p,transmuxer:t.transmuxer,callback:function(e){var i=e.data,a=e.startTime;n=i.buffer,t.bytes=p=i,m.hasAudio&&!m.isMuxed&&r(t,"audio","start",a),m.hasVideo&&r(t,"video","start",a),g.video&&i.byteLength&&t.transmuxer?Ml({action:"pushMp4Captions",endAction:"mp4Captions",transmuxer:t.transmuxer,data:p,timescales:t.map.timescales,trackIds:[g.video.id],callback:function(e){n=e.data.buffer,t.bytes=p=e.data,e.logs.forEach((function(e){f(Zs.mergeOptions(e,{stream:"mp4CaptionParser"}))})),v(e.captions)}}):v()}})}else if(t.transmuxer){if("undefined"===typeof t.container&&(t.container=wt(p)),"ts"!==t.container&&"aac"!==t.container)return i(t,{hasAudio:!1,hasVideo:!1}),void h(null,t,{});Vl({segment:t,bytes:n,trackInfoFn:i,timingInfoFn:r,videoSegmentTimingInfoFn:a,audioSegmentTimingInfoFn:s,id3Fn:o,captionsFn:l,isEndOfTimeline:u,endedTimelineFn:c,dataFn:d,doneFn:h,onTransmuxerLog:f})}else h(null,t,{})},Wl=function(e,t){var n,i=e.id,r=e.key,a=e.encryptedBytes,s=e.decryptionWorker;s.addEventListener("message",(function e(n){if(n.data.source===i){s.removeEventListener("message",e);var r=n.data.decrypted;t(new Uint8Array(r.bytes,r.byteOffset,r.byteLength))}})),n=r.bytes.slice?r.bytes.slice():new Uint32Array(Array.prototype.slice.call(r.bytes)),s.postMessage(il({source:i,encrypted:a,key:n,iv:r.iv}),[a.buffer,n.buffer])},ql=function(e){var t=e.activeXhrs,n=e.decryptionWorker,i=e.trackInfoFn,r=e.timingInfoFn,a=e.videoSegmentTimingInfoFn,s=e.audioSegmentTimingInfoFn,o=e.id3Fn,l=e.captionsFn,u=e.isEndOfTimeline,c=e.endedTimelineFn,d=e.dataFn,h=e.doneFn,f=e.onTransmuxerLog,p=0,g=!1;return function(e,m){if(!g){if(e)return g=!0,Ul(t),h(e,m);if((p+=1)===t.length){var v=function(){if(m.encryptedBytes)return function(e){var t=e.decryptionWorker,n=e.segment,i=e.trackInfoFn,r=e.timingInfoFn,a=e.videoSegmentTimingInfoFn,s=e.audioSegmentTimingInfoFn,o=e.id3Fn,l=e.captionsFn,u=e.isEndOfTimeline,c=e.endedTimelineFn,d=e.dataFn,h=e.doneFn,f=e.onTransmuxerLog;Wl({id:n.requestId,key:n.key,encryptedBytes:n.encryptedBytes,decryptionWorker:t},(function(e){n.bytes=e,Hl({segment:n,bytes:n.bytes,trackInfoFn:i,timingInfoFn:r,videoSegmentTimingInfoFn:a,audioSegmentTimingInfoFn:s,id3Fn:o,captionsFn:l,isEndOfTimeline:u,endedTimelineFn:c,dataFn:d,doneFn:h,onTransmuxerLog:f})}))}({decryptionWorker:n,segment:m,trackInfoFn:i,timingInfoFn:r,videoSegmentTimingInfoFn:a,audioSegmentTimingInfoFn:s,id3Fn:o,captionsFn:l,isEndOfTimeline:u,endedTimelineFn:c,dataFn:d,doneFn:h,onTransmuxerLog:f});Hl({segment:m,bytes:m.bytes,trackInfoFn:i,timingInfoFn:r,videoSegmentTimingInfoFn:a,audioSegmentTimingInfoFn:s,id3Fn:o,captionsFn:l,isEndOfTimeline:u,endedTimelineFn:c,dataFn:d,doneFn:h,onTransmuxerLog:f})};if(m.endOfAllRequests=Date.now(),m.map&&m.map.encryptedBytes&&!m.map.bytes)return Wl({decryptionWorker:n,id:m.requestId+"-init",encryptedBytes:m.map.encryptedBytes,key:m.map.key},(function(e){m.map.bytes=e,Bl(m,(function(e){if(e)return Ul(t),h(e,m);v()}))}));v()}}}},Gl=function(e){var t=e.segment,n=e.progressFn;return e.trackInfoFn,e.timingInfoFn,e.videoSegmentTimingInfoFn,e.audioSegmentTimingInfoFn,e.id3Fn,e.captionsFn,e.isEndOfTimeline,e.endedTimelineFn,e.dataFn,function(e){if(!e.target.aborted)return t.stats=Zs.mergeOptions(t.stats,function(e){var t=e.target,n={bandwidth:1/0,bytesReceived:0,roundTripTime:Date.now()-t.requestTime||0};return n.bytesReceived=e.loaded,n.bandwidth=Math.floor(n.bytesReceived/n.roundTripTime*8*1e3),n}(e)),!t.stats.firstBytesReceivedAt&&t.stats.bytesReceived&&(t.stats.firstBytesReceivedAt=Date.now()),n(e,t)}},Xl=function(e){var t=e.xhr,n=e.xhrOptions,i=e.decryptionWorker,r=e.segment,a=e.abortFn,s=e.progressFn,o=e.trackInfoFn,l=e.timingInfoFn,u=e.videoSegmentTimingInfoFn,c=e.audioSegmentTimingInfoFn,d=e.id3Fn,h=e.captionsFn,f=e.isEndOfTimeline,p=e.endedTimelineFn,g=e.dataFn,m=e.doneFn,v=e.onTransmuxerLog,y=[],_=ql({activeXhrs:y,decryptionWorker:i,trackInfoFn:o,timingInfoFn:l,videoSegmentTimingInfoFn:u,audioSegmentTimingInfoFn:c,id3Fn:d,captionsFn:h,isEndOfTimeline:f,endedTimelineFn:p,dataFn:g,doneFn:m,onTransmuxerLog:v});if(r.key&&!r.key.bytes){var b=[r.key];r.map&&!r.map.bytes&&r.map.key&&r.map.key.resolvedUri===r.key.resolvedUri&&b.push(r.map.key);var T=t(Zs.mergeOptions(n,{uri:r.key.resolvedUri,responseType:"arraybuffer"}),Fl(r,b,_));y.push(T)}if(r.map&&!r.map.bytes){if(r.map.key&&(!r.key||r.key.resolvedUri!==r.map.key.resolvedUri)){var k=t(Zs.mergeOptions(n,{uri:r.map.key.resolvedUri,responseType:"arraybuffer"}),Fl(r,[r.map.key],_));y.push(k)}var x=Zs.mergeOptions(n,{uri:r.map.resolvedUri,responseType:"arraybuffer",headers:Zo(r.map)}),S=function(e){var t=e.segment,n=e.finishProcessingFn;return function(e,i){var r=jl(e,i);if(r)return n(r,t);var a=new Uint8Array(i.response);if(t.map.key)return t.map.encryptedBytes=a,n(null,t);t.map.bytes=a,Bl(t,(function(e){if(e)return e.xhr=i,e.status=i.status,n(e,t);n(null,t)}))}}({segment:r,finishProcessingFn:_}),w=t(x,S);y.push(w)}var E=Zs.mergeOptions(n,{uri:r.part&&r.part.resolvedUri||r.resolvedUri,responseType:"arraybuffer",headers:Zo(r)}),C=t(E,zl({segment:r,finishProcessingFn:_,responseType:E.responseType}));C.addEventListener("progress",Gl({segment:r,progressFn:s,trackInfoFn:o,timingInfoFn:l,videoSegmentTimingInfoFn:u,audioSegmentTimingInfoFn:c,id3Fn:d,captionsFn:h,isEndOfTimeline:f,endedTimelineFn:p,dataFn:g})),y.push(C);var P={};return y.forEach((function(e){e.addEventListener("loadend",function(e){var t=e.loadendState,n=e.abortFn;return function(e){e.target.aborted&&n&&!t.calledAbortFn&&(n(),t.calledAbortFn=!0)}}({loadendState:P,abortFn:a}))})),function(){return Ul(y)}},Kl=ro("CodecUtils"),$l=function(e,t){var n=t.attributes||{};return e&&e.mediaGroups&&e.mediaGroups.AUDIO&&n.AUDIO&&e.mediaGroups.AUDIO[n.AUDIO]},Yl=function(e){var t={};return e.forEach((function(e){var n=e.mediaType,i=e.type,r=e.details;t[n]=t[n]||[],t[n].push(F(""+i+r))})),Object.keys(t).forEach((function(e){if(t[e].length>1)return Kl("multiple "+e+" codecs found as attributes: "+t[e].join(", ")+". Setting playlist codecs to null so that we wait for mux.js to probe segments for real codecs."),void(t[e]=null);t[e]=t[e][0]})),t},Ql=function(e){var t=0;return e.audio&&t++,e.video&&t++,t},Jl=function(e,t){var n=t.attributes||{},i=Yl(function(e){var t=e.attributes||{};if(t.CODECS)return B(t.CODECS)}(t)||[]);if($l(e,t)&&!i.audio&&!function(e,t){if(!$l(e,t))return!0;var n=t.attributes||{},i=e.mediaGroups.AUDIO[n.AUDIO];for(var r in i)if(!i[r].uri&&!i[r].playlists)return!0;return!1}(e,t)){var r=Yl(function(e,t){if(!e.mediaGroups.AUDIO||!t)return null;var n=e.mediaGroups.AUDIO[t];if(!n)return null;for(var i in n){var r=n[i];if(r.default&&r.playlists)return B(r.playlists[0].attributes.CODECS)}return null}(e,n.AUDIO)||[]);r.audio&&(i.audio=r.audio)}return i},Zl=ro("PlaylistSelector"),eu=function(e){if(e&&e.playlist){var t=e.playlist;return JSON.stringify({id:t.id,bandwidth:e.bandwidth,width:e.width,height:e.height,codecs:t.attributes&&t.attributes.CODECS||""})}},tu=function(e,t){if(!e)return"";var n=r().getComputedStyle(e);return n?n[t]:""},nu=function(e,t){var n=e.slice();e.sort((function(e,i){var r=t(e,i);return 0===r?n.indexOf(e)-n.indexOf(i):r}))},iu=function(e,t){var n,i;return e.attributes.BANDWIDTH&&(n=e.attributes.BANDWIDTH),n=n||r().Number.MAX_VALUE,t.attributes.BANDWIDTH&&(i=t.attributes.BANDWIDTH),n-(i=i||r().Number.MAX_VALUE)},ru=function(e,t,n,i,a,s){if(e){var o={bandwidth:t,width:n,height:i,limitRenditionByPlayerDimensions:a},l=e.playlists;Mo.isAudioOnly(e)&&(l=s.getAudioTrackPlaylists_(),o.audioOnly=!0);var u=l.map((function(e){var t=e.attributes&&e.attributes.RESOLUTION&&e.attributes.RESOLUTION.width,n=e.attributes&&e.attributes.RESOLUTION&&e.attributes.RESOLUTION.height;return{bandwidth:e.attributes&&e.attributes.BANDWIDTH||r().Number.MAX_VALUE,width:t,height:n,playlist:e}}));nu(u,(function(e,t){return e.bandwidth-t.bandwidth}));var c=(u=u.filter((function(e){return!Mo.isIncompatible(e.playlist)}))).filter((function(e){return Mo.isEnabled(e.playlist)}));c.length||(c=u.filter((function(e){return!Mo.isDisabled(e.playlist)})));var d=c.filter((function(e){return e.bandwidth*_l.BANDWIDTH_VARIANCE<t})),h=d[d.length-1],f=d.filter((function(e){return e.bandwidth===h.bandwidth}))[0];if(!1===a){var p=f||c[0]||u[0];if(p&&p.playlist){var g="sortedPlaylistReps";return f&&(g="bandwidthBestRep"),c[0]&&(g="enabledPlaylistReps"),Zl("choosing "+eu(p)+" using "+g+" with options",o),p.playlist}return Zl("could not choose a playlist with options",o),null}var m=d.filter((function(e){return e.width&&e.height}));nu(m,(function(e,t){return e.width-t.width}));var v=m.filter((function(e){return e.width===n&&e.height===i}));h=v[v.length-1];var y,_,b,T,k=v.filter((function(e){return e.bandwidth===h.bandwidth}))[0];if(k||(_=(y=m.filter((function(e){return e.width>n||e.height>i}))).filter((function(e){return e.width===y[0].width&&e.height===y[0].height})),h=_[_.length-1],b=_.filter((function(e){return e.bandwidth===h.bandwidth}))[0]),s.experimentalLeastPixelDiffSelector){var x=m.map((function(e){return e.pixelDiff=Math.abs(e.width-n)+Math.abs(e.height-i),e}));nu(x,(function(e,t){return e.pixelDiff===t.pixelDiff?t.bandwidth-e.bandwidth:e.pixelDiff-t.pixelDiff})),T=x[0]}var S=T||b||k||f||c[0]||u[0];if(S&&S.playlist){var w="sortedPlaylistReps";return T?w="leastPixelDiffRep":b?w="resolutionPlusOneRep":k?w="resolutionBestRep":f?w="bandwidthBestRep":c[0]&&(w="enabledPlaylistReps"),Zl("choosing "+eu(S)+" using "+w+" with options",o),S.playlist}return Zl("could not choose a playlist with options",o),null}},au=function(){var e=this.useDevicePixelRatio&&r().devicePixelRatio||1;return ru(this.playlists.master,this.systemBandwidth,parseInt(tu(this.tech_.el(),"width"),10)*e,parseInt(tu(this.tech_.el(),"height"),10)*e,this.limitRenditionByPlayerDimensions,this.masterPlaylistController_)},su=function(e){var t=e.inbandTextTracks,n=e.metadataArray,i=e.timestampOffset,a=e.videoDuration;if(n){var s=r().WebKitDataCue||r().VTTCue,o=t.metadataTrack_;if(o&&(n.forEach((function(e){var t=e.cueTime+i;!("number"!==typeof t||r().isNaN(t)||t<0)&&t<1/0&&e.frames.forEach((function(e){var n=new s(t,t,e.value||e.url||e.data||"");n.frame=e,n.value=e,function(e){Object.defineProperties(e.frame,{id:{get:function(){return Zs.log.warn("cue.frame.id is deprecated. Use cue.value.key instead."),e.value.key}},value:{get:function(){return Zs.log.warn("cue.frame.value is deprecated. Use cue.value.data instead."),e.value.data}},privateData:{get:function(){return Zs.log.warn("cue.frame.privateData is deprecated. Use cue.value.data instead."),e.value.data}}})}(n),o.addCue(n)}))})),o.cues&&o.cues.length)){for(var l=o.cues,u=[],c=0;c<l.length;c++)l[c]&&u.push(l[c]);var d=u.reduce((function(e,t){var n=e[t.startTime]||[];return n.push(t),e[t.startTime]=n,e}),{}),h=Object.keys(d).sort((function(e,t){return Number(e)-Number(t)}));h.forEach((function(e,t){var n=d[e],i=Number(h[t+1])||a;n.forEach((function(e){e.endTime=i}))}))}}},ou=function(e,t,n){var i,r;if(n&&n.cues)for(i=n.cues.length;i--;)(r=n.cues[i]).startTime>=e&&r.endTime<=t&&n.removeCue(r)},lu=function(e){return"number"===typeof e&&isFinite(e)},uu=1/60,cu=function(e){var t=e.startOfSegment,n=e.duration,i=e.segment,r=e.part,a=e.playlist,s=a.mediaSequence,o=a.id,l=a.segments,u=void 0===l?[]:l,c=e.mediaIndex,d=e.partIndex,h=e.timeline,f=u.length-1,p="mediaIndex/partIndex increment";e.getMediaInfoForTime?p="getMediaInfoForTime ("+e.getMediaInfoForTime+")":e.isSyncRequest&&(p="getSyncSegmentCandidate (isSyncRequest)"),e.independent&&(p+=" with independent "+e.independent);var g="number"===typeof d,m=e.segment.uri?"segment":"pre-segment",v=g?_o({preloadSegment:i})-1:0;return m+" ["+(s+c)+"/"+(s+f)+"]"+(g?" part ["+d+"/"+v+"]":"")+" segment start/end ["+i.start+" => "+i.end+"]"+(g?" part start/end ["+r.start+" => "+r.end+"]":"")+" startOfSegment ["+t+"] duration ["+n+"] timeline ["+h+"] selected by ["+p+"] playlist ["+o+"]"},du=function(e){return e+"TimingInfo"},hu=function(e){var t=e.timelineChangeController,n=e.currentTimeline,i=e.segmentTimeline,r=e.loaderType,a=e.audioDisabled;if(n===i)return!1;if("audio"===r){var s=t.lastTimelineChange({type:"main"});return!s||s.to!==i}if("main"===r&&a){var o=t.pendingTimelineChange({type:"audio"});return!o||o.to!==i}return!1},fu=function(e){var t=e.segmentDuration,n=e.maxDuration;return!!t&&Math.round(t)>n+ao},pu=function(e,t){if("hls"!==t)return null;var n=function(e){var t=0;return["video","audio"].forEach((function(n){var i=e[n+"TimingInfo"];if(i){var a,s=i.start,o=i.end;"bigint"===typeof s||"bigint"===typeof o?a=r().BigInt(o)-r().BigInt(s):"number"===typeof s&&"number"===typeof o&&(a=o-s),"undefined"!==typeof a&&a>t&&(t=a)}})),"bigint"===typeof t&&t<Number.MAX_SAFE_INTEGER&&(t=Number(t)),t}({audioTimingInfo:e.audioTimingInfo,videoTimingInfo:e.videoTimingInfo});if(!n)return null;var i=e.playlist.targetDuration,a=fu({segmentDuration:n,maxDuration:2*i}),s=fu({segmentDuration:n,maxDuration:i}),o="Segment with index "+e.mediaIndex+" from playlist "+e.playlist.id+" has a duration of "+n+" when the reported duration is "+e.duration+" and the target duration is "+i+". For HLS content, a duration in excess of the target duration may result in playback issues. See the HLS specification section on EXT-X-TARGETDURATION for more details: https://tools.ietf.org/html/draft-pantos-http-live-streaming-23#section-4.3.3.1";return a||s?{severity:a?"warn":"info",message:o}:null},gu=function(e){function t(t,n){var i;if(i=e.call(this)||this,!t)throw new TypeError("Initialization settings are required");if("function"!==typeof t.currentTime)throw new TypeError("No currentTime getter specified");if(!t.mediaSource)throw new TypeError("No MediaSource specified");return i.bandwidth=t.bandwidth,i.throughput={rate:0,count:0},i.roundTrip=NaN,i.resetStats_(),i.mediaIndex=null,i.partIndex=null,i.hasPlayed_=t.hasPlayed,i.currentTime_=t.currentTime,i.seekable_=t.seekable,i.seeking_=t.seeking,i.duration_=t.duration,i.mediaSource_=t.mediaSource,i.vhs_=t.vhs,i.loaderType_=t.loaderType,i.currentMediaInfo_=void 0,i.startingMediaInfo_=void 0,i.segmentMetadataTrack_=t.segmentMetadataTrack,i.goalBufferLength_=t.goalBufferLength,i.sourceType_=t.sourceType,i.sourceUpdater_=t.sourceUpdater,i.inbandTextTracks_=t.inbandTextTracks,i.state_="INIT",i.timelineChangeController_=t.timelineChangeController,i.shouldSaveSegmentTimingInfo_=!0,i.parse708captions_=t.parse708captions,i.useDtsForTimestampOffset_=t.useDtsForTimestampOffset,i.captionServices_=t.captionServices,i.experimentalExactManifestTimings=t.experimentalExactManifestTimings,i.checkBufferTimeout_=null,i.error_=void 0,i.currentTimeline_=-1,i.pendingSegment_=null,i.xhrOptions_=null,i.pendingSegments_=[],i.audioDisabled_=!1,i.isPendingTimestampOffset_=!1,i.gopBuffer_=[],i.timeMapping_=0,i.safeAppend_=Zs.browser.IE_VERSION>=11,i.appendInitSegment_={audio:!0,video:!0},i.playlistOfLastInitSegment_={audio:null,video:null},i.callQueue_=[],i.loadQueue_=[],i.metadataQueue_={id3:[],caption:[]},i.waitingOnRemove_=!1,i.quotaExceededErrorRetryTimeout_=null,i.activeInitSegmentId_=null,i.initSegments_={},i.cacheEncryptionKeys_=t.cacheEncryptionKeys,i.keyCache_={},i.decrypter_=t.decrypter,i.syncController_=t.syncController,i.syncPoint_={segmentIndex:0,time:0},i.transmuxer_=i.createTransmuxer_(),i.triggerSyncInfoUpdate_=function(){return i.trigger("syncinfoupdate")},i.syncController_.on("syncinfoupdate",i.triggerSyncInfoUpdate_),i.mediaSource_.addEventListener("sourceopen",(function(){i.isEndOfStream_()||(i.ended_=!1)})),i.fetchAtBuffer_=!1,i.logger_=ro("SegmentLoader["+i.loaderType_+"]"),Object.defineProperty(c(i),"state",{get:function(){return this.state_},set:function(e){e!==this.state_&&(this.logger_(this.state_+" -> "+e),this.state_=e,this.trigger("statechange"))}}),i.sourceUpdater_.on("ready",(function(){i.hasEnoughInfoToAppend_()&&i.processCallQueue_()})),"main"===i.loaderType_&&i.timelineChangeController_.on("pendingtimelinechange",(function(){i.hasEnoughInfoToAppend_()&&i.processCallQueue_()})),"audio"===i.loaderType_&&i.timelineChangeController_.on("timelinechange",(function(){i.hasEnoughInfoToLoad_()&&i.processLoadQueue_(),i.hasEnoughInfoToAppend_()&&i.processCallQueue_()})),i}h(t,e);var n=t.prototype;return n.createTransmuxer_=function(){return Ll({remux:!1,alignGopsAtEnd:this.safeAppend_,keepOriginalTimestamps:!0,parse708captions:this.parse708captions_,captionServices:this.captionServices_})},n.resetStats_=function(){this.mediaBytesTransferred=0,this.mediaRequests=0,this.mediaRequestsAborted=0,this.mediaRequestsTimedout=0,this.mediaRequestsErrored=0,this.mediaTransferDuration=0,this.mediaSecondsLoaded=0,this.mediaAppends=0},n.dispose=function(){this.trigger("dispose"),this.state="DISPOSED",this.pause(),this.abort_(),this.transmuxer_&&this.transmuxer_.terminate(),this.resetStats_(),this.checkBufferTimeout_&&r().clearTimeout(this.checkBufferTimeout_),this.syncController_&&this.triggerSyncInfoUpdate_&&this.syncController_.off("syncinfoupdate",this.triggerSyncInfoUpdate_),this.off()},n.setAudio=function(e){this.audioDisabled_=!e,e?this.appendInitSegment_.audio=!0:this.sourceUpdater_.removeAudio(0,this.duration_())},n.abort=function(){"WAITING"===this.state?(this.abort_(),this.state="READY",this.paused()||this.monitorBuffer_()):this.pendingSegment_&&(this.pendingSegment_=null)},n.abort_=function(){this.pendingSegment_&&this.pendingSegment_.abortRequests&&this.pendingSegment_.abortRequests(),this.pendingSegment_=null,this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_.id3=[],this.metadataQueue_.caption=[],this.timelineChangeController_.clearPendingTimelineChange(this.loaderType_),this.waitingOnRemove_=!1,r().clearTimeout(this.quotaExceededErrorRetryTimeout_),this.quotaExceededErrorRetryTimeout_=null},n.checkForAbort_=function(e){return"APPENDING"!==this.state||this.pendingSegment_?!this.pendingSegment_||this.pendingSegment_.requestId!==e:(this.state="READY",!0)},n.error=function(e){return"undefined"!==typeof e&&(this.logger_("error occurred:",e),this.error_=e),this.pendingSegment_=null,this.error_},n.endOfStream=function(){this.ended_=!0,this.transmuxer_&&Ol(this.transmuxer_),this.gopBuffer_.length=0,this.pause(),this.trigger("ended")},n.buffered_=function(){var e=this.getMediaInfo_();if(!this.sourceUpdater_||!e)return Zs.createTimeRanges();if("main"===this.loaderType_){var t=e.hasAudio,n=e.hasVideo,i=e.isMuxed;if(n&&t&&!this.audioDisabled_&&!i)return this.sourceUpdater_.buffered();if(n)return this.sourceUpdater_.videoBuffered()}return this.sourceUpdater_.audioBuffered()},n.initSegmentForMap=function(e,t){if(void 0===t&&(t=!1),!e)return null;var n=rl(e),i=this.initSegments_[n];return t&&!i&&e.bytes&&(this.initSegments_[n]=i={resolvedUri:e.resolvedUri,byterange:e.byterange,bytes:e.bytes,tracks:e.tracks,timescales:e.timescales}),i||e},n.segmentKey=function(e,t){if(void 0===t&&(t=!1),!e)return null;var n=al(e),i=this.keyCache_[n];this.cacheEncryptionKeys_&&t&&!i&&e.bytes&&(this.keyCache_[n]=i={resolvedUri:e.resolvedUri,bytes:e.bytes});var r={resolvedUri:(i||e).resolvedUri};return i&&(r.bytes=i.bytes),r},n.couldBeginLoading_=function(){return this.playlist_&&!this.paused()},n.load=function(){if(this.monitorBuffer_(),this.playlist_)return"INIT"===this.state&&this.couldBeginLoading_()?this.init_():void(!this.couldBeginLoading_()||"READY"!==this.state&&"INIT"!==this.state||(this.state="READY"))},n.init_=function(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()},n.playlist=function(e,t){if(void 0===t&&(t={}),e){var n=this.playlist_,i=this.pendingSegment_;this.playlist_=e,this.xhrOptions_=t,"INIT"===this.state&&(e.syncInfo={mediaSequence:e.mediaSequence,time:0},"main"===this.loaderType_&&this.syncController_.setDateTimeMappingForStart(e));var r=null;if(n&&(n.id?r=n.id:n.uri&&(r=n.uri)),this.logger_("playlist update ["+r+" => "+(e.id||e.uri)+"]"),this.trigger("syncinfoupdate"),"INIT"===this.state&&this.couldBeginLoading_())return this.init_();if(!n||n.uri!==e.uri)return null!==this.mediaIndex&&(e.endList?this.resyncLoader():this.resetLoader()),this.currentMediaInfo_=void 0,void this.trigger("playlistupdate");var a=e.mediaSequence-n.mediaSequence;if(this.logger_("live window shift ["+a+"]"),null!==this.mediaIndex)if(this.mediaIndex-=a,this.mediaIndex<0)this.mediaIndex=null,this.partIndex=null;else{var s=this.playlist_.segments[this.mediaIndex];if(this.partIndex&&(!s.parts||!s.parts.length||!s.parts[this.partIndex])){var o=this.mediaIndex;this.logger_("currently processing part (index "+this.partIndex+") no longer exists."),this.resetLoader(),this.mediaIndex=o}}i&&(i.mediaIndex-=a,i.mediaIndex<0?(i.mediaIndex=null,i.partIndex=null):(i.mediaIndex>=0&&(i.segment=e.segments[i.mediaIndex]),i.partIndex>=0&&i.segment.parts&&(i.part=i.segment.parts[i.partIndex]))),this.syncController_.saveExpiredSegmentInfo(n,e)}},n.pause=function(){this.checkBufferTimeout_&&(r().clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=null)},n.paused=function(){return null===this.checkBufferTimeout_},n.resetEverything=function(e){this.ended_=!1,this.activeInitSegmentId_=null,this.appendInitSegment_={audio:!0,video:!0},this.resetLoader(),this.remove(0,1/0,e),this.transmuxer_&&(this.transmuxer_.postMessage({action:"clearAllMp4Captions"}),this.transmuxer_.postMessage({action:"reset"}))},n.resetLoader=function(){this.fetchAtBuffer_=!1,this.resyncLoader()},n.resyncLoader=function(){this.transmuxer_&&Ol(this.transmuxer_),this.mediaIndex=null,this.partIndex=null,this.syncPoint_=null,this.isPendingTimestampOffset_=!1,this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_.id3=[],this.metadataQueue_.caption=[],this.abort(),this.transmuxer_&&this.transmuxer_.postMessage({action:"clearParsedMp4Captions"})},n.remove=function(e,t,n,i){if(void 0===n&&(n=function(){}),void 0===i&&(i=!1),t===1/0&&(t=this.duration_()),t<=e)this.logger_("skipping remove because end ${end} is <= start ${start}");else if(this.sourceUpdater_&&this.getMediaInfo_()){var r=1,a=function(){0===--r&&n()};for(var s in!i&&this.audioDisabled_||(r++,this.sourceUpdater_.removeAudio(e,t,a)),(i||"main"===this.loaderType_)&&(this.gopBuffer_=function(e,t,n,i){for(var r=Math.ceil((t-i)*Et.ONE_SECOND_IN_TS),a=Math.ceil((n-i)*Et.ONE_SECOND_IN_TS),s=e.slice(),o=e.length;o--&&!(e[o].pts<=a););if(-1===o)return s;for(var l=o+1;l--&&!(e[l].pts<=r););return l=Math.max(l,0),s.splice(l,o-l+1),s}(this.gopBuffer_,e,t,this.timeMapping_),r++,this.sourceUpdater_.removeVideo(e,t,a)),this.inbandTextTracks_)ou(e,t,this.inbandTextTracks_[s]);ou(e,t,this.segmentMetadataTrack_),a()}else this.logger_("skipping remove because no source updater or starting media info")},n.monitorBuffer_=function(){this.checkBufferTimeout_&&r().clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=r().setTimeout(this.monitorBufferTick_.bind(this),1)},n.monitorBufferTick_=function(){"READY"===this.state&&this.fillBuffer_(),this.checkBufferTimeout_&&r().clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=r().setTimeout(this.monitorBufferTick_.bind(this),500)},n.fillBuffer_=function(){if(!this.sourceUpdater_.updating()){var e=this.chooseNextRequest_();e&&("number"===typeof e.timestampOffset&&(this.isPendingTimestampOffset_=!1,this.timelineChangeController_.pendingTimelineChange({type:this.loaderType_,from:this.currentTimeline_,to:e.timeline})),this.loadSegment_(e))}},n.isEndOfStream_=function(e,t,n){if(void 0===e&&(e=this.mediaIndex),void 0===t&&(t=this.playlist_),void 0===n&&(n=this.partIndex),!t||!this.mediaSource_)return!1;var i="number"===typeof e&&t.segments[e],r=e+1===t.segments.length,a=!i||!i.parts||n+1===i.parts.length;return t.endList&&"open"===this.mediaSource_.readyState&&r&&a},n.chooseNextRequest_=function(){var e=this.buffered_(),t=fo(e)||0,n=po(e,this.currentTime_()),i=!this.hasPlayed_()&&n>=1,r=n>=this.goalBufferLength_(),a=this.playlist_.segments;if(!a.length||i||r)return null;this.syncPoint_=this.syncPoint_||this.syncController_.getSyncPoint(this.playlist_,this.duration_(),this.currentTimeline_,this.currentTime_());var s={partIndex:null,mediaIndex:null,startOfSegment:null,playlist:this.playlist_,isSyncRequest:Boolean(!this.syncPoint_)};if(s.isSyncRequest)s.mediaIndex=function(e,t,n){t=t||[];for(var i=[],r=0,a=0;a<t.length;a++){var s=t[a];if(e===s.timeline&&(i.push(a),(r+=s.duration)>n))return a}return 0===i.length?0:i[i.length-1]}(this.currentTimeline_,a,t);else if(null!==this.mediaIndex){var o=a[this.mediaIndex],l="number"===typeof this.partIndex?this.partIndex:-1;s.startOfSegment=o.end?o.end:t,o.parts&&o.parts[l+1]?(s.mediaIndex=this.mediaIndex,s.partIndex=l+1):s.mediaIndex=this.mediaIndex+1}else{var u=Mo.getMediaInfoForTime({experimentalExactManifestTimings:this.experimentalExactManifestTimings,playlist:this.playlist_,currentTime:this.fetchAtBuffer_?t:this.currentTime_(),startingPartIndex:this.syncPoint_.partIndex,startingSegmentIndex:this.syncPoint_.segmentIndex,startTime:this.syncPoint_.time}),c=u.segmentIndex,d=u.startTime,h=u.partIndex;s.getMediaInfoForTime=this.fetchAtBuffer_?"bufferedEnd "+t:"currentTime "+this.currentTime_(),s.mediaIndex=c,s.startOfSegment=d,s.partIndex=h}var f=a[s.mediaIndex],p=f&&"number"===typeof s.partIndex&&f.parts&&f.parts[s.partIndex];if(!f||"number"===typeof s.partIndex&&!p)return null;if("number"!==typeof s.partIndex&&f.parts&&(s.partIndex=0,p=f.parts[0]),!n&&p&&!p.independent)if(0===s.partIndex){var g=a[s.mediaIndex-1],m=g.parts&&g.parts.length&&g.parts[g.parts.length-1];m&&m.independent&&(s.mediaIndex-=1,s.partIndex=g.parts.length-1,s.independent="previous segment")}else f.parts[s.partIndex-1].independent&&(s.partIndex-=1,s.independent="previous part");var v=this.mediaSource_&&"ended"===this.mediaSource_.readyState;return s.mediaIndex>=a.length-1&&v&&!this.seeking_()?null:this.generateSegmentInfo_(s)},n.generateSegmentInfo_=function(e){var t=e.independent,n=e.playlist,i=e.mediaIndex,r=e.startOfSegment,a=e.isSyncRequest,s=e.partIndex,o=e.forceTimestampOffset,l=e.getMediaInfoForTime,u=n.segments[i],c="number"===typeof s&&u.parts[s],d={requestId:"segment-loader-"+Math.random(),uri:c&&c.resolvedUri||u.resolvedUri,mediaIndex:i,partIndex:c?s:null,isSyncRequest:a,startOfSegment:r,playlist:n,bytes:null,encryptedBytes:null,timestampOffset:null,timeline:u.timeline,duration:c&&c.duration||u.duration,segment:u,part:c,byteLength:0,transmuxer:this.transmuxer_,getMediaInfoForTime:l,independent:t},h="undefined"!==typeof o?o:this.isPendingTimestampOffset_;d.timestampOffset=this.timestampOffsetForSegment_({segmentTimeline:u.timeline,currentTimeline:this.currentTimeline_,startOfSegment:r,buffered:this.buffered_(),overrideCheck:h});var f=fo(this.sourceUpdater_.audioBuffered());return"number"===typeof f&&(d.audioAppendStart=f-this.sourceUpdater_.audioTimestampOffset()),this.sourceUpdater_.videoBuffered().length&&(d.gopsToAlignWith=function(e,t,n){if("undefined"===typeof t||null===t||!e.length)return[];var i,r=Math.ceil((t-n+3)*Et.ONE_SECOND_IN_TS);for(i=0;i<e.length&&!(e[i].pts>r);i++);return e.slice(i)}(this.gopBuffer_,this.currentTime_()-this.sourceUpdater_.videoTimestampOffset(),this.timeMapping_)),d},n.timestampOffsetForSegment_=function(e){return function(e){var t=e.segmentTimeline,n=e.currentTimeline,i=e.startOfSegment,r=e.buffered;return e.overrideCheck||t!==n?t<n?i:r.length?r.end(r.length-1):i:null}(e)},n.earlyAbortWhenNeeded_=function(e){if(!this.vhs_.tech_.paused()&&this.xhrOptions_.timeout&&this.playlist_.attributes.BANDWIDTH&&!(Date.now()-(e.firstBytesReceivedAt||Date.now())<1e3)){var t=this.currentTime_(),n=e.bandwidth,i=this.pendingSegment_.duration,r=Mo.estimateSegmentRequestTime(i,n,this.playlist_,e.bytesReceived),a=function(e,t,n){return void 0===n&&(n=1),((e.length?e.end(e.length-1):0)-t)/n}(this.buffered_(),t,this.vhs_.tech_.playbackRate())-1;if(!(r<=a)){var s=function(e){var t=e.master,n=e.currentTime,i=e.bandwidth,r=e.duration,a=e.segmentDuration,s=e.timeUntilRebuffer,o=e.currentTimeline,l=e.syncController,u=t.playlists.filter((function(e){return!Mo.isIncompatible(e)})),c=u.filter(Mo.isEnabled);c.length||(c=u.filter((function(e){return!Mo.isDisabled(e)})));var d=c.filter(Mo.hasAttribute.bind(null,"BANDWIDTH")).map((function(e){var t=l.getSyncPoint(e,r,o,n)?1:2;return{playlist:e,rebufferingImpact:Mo.estimateSegmentRequestTime(a,i,e)*t-s}})),h=d.filter((function(e){return e.rebufferingImpact<=0}));return nu(h,(function(e,t){return iu(t.playlist,e.playlist)})),h.length?h[0]:(nu(d,(function(e,t){return e.rebufferingImpact-t.rebufferingImpact})),d[0]||null)}({master:this.vhs_.playlists.master,currentTime:t,bandwidth:n,duration:this.duration_(),segmentDuration:i,timeUntilRebuffer:a,currentTimeline:this.currentTimeline_,syncController:this.syncController_});if(s){var o=r-a-s.rebufferingImpact,l=.5;a<=ao&&(l=1),!s.playlist||s.playlist.uri===this.playlist_.uri||o<l||(this.bandwidth=s.playlist.attributes.BANDWIDTH*_l.BANDWIDTH_VARIANCE+1,this.trigger("earlyabort"))}}}},n.handleAbort_=function(e){this.logger_("Aborting "+cu(e)),this.mediaRequestsAborted+=1},n.handleProgress_=function(e,t){this.earlyAbortWhenNeeded_(t.stats),this.checkForAbort_(t.requestId)||this.trigger("progress")},n.handleTrackInfo_=function(e,t){this.earlyAbortWhenNeeded_(e.stats),this.checkForAbort_(e.requestId)||this.checkForIllegalMediaSwitch(t)||(t=t||{},function(e,t){if(!e&&!t||!e&&t||e&&!t)return!1;if(e===t)return!0;var n=Object.keys(e).sort(),i=Object.keys(t).sort();if(n.length!==i.length)return!1;for(var r=0;r<n.length;r++){var a=n[r];if(a!==i[r])return!1;if(e[a]!==t[a])return!1}return!0}(this.currentMediaInfo_,t)||(this.appendInitSegment_={audio:!0,video:!0},this.startingMediaInfo_=t,this.currentMediaInfo_=t,this.logger_("trackinfo update",t),this.trigger("trackinfo")),this.checkForAbort_(e.requestId)||(this.pendingSegment_.trackInfo=t,this.hasEnoughInfoToAppend_()&&this.processCallQueue_()))},n.handleTimingInfo_=function(e,t,n,i){if(this.earlyAbortWhenNeeded_(e.stats),!this.checkForAbort_(e.requestId)){var r=this.pendingSegment_,a=du(t);r[a]=r[a]||{},r[a][n]=i,this.logger_("timinginfo: "+t+" - "+n+" - "+i),this.hasEnoughInfoToAppend_()&&this.processCallQueue_()}},n.handleCaptions_=function(e,t){var n=this;if(this.earlyAbortWhenNeeded_(e.stats),!this.checkForAbort_(e.requestId))if(0!==t.length)if(this.pendingSegment_.hasAppendedData_){var i=null===this.sourceUpdater_.videoTimestampOffset()?this.sourceUpdater_.audioTimestampOffset():this.sourceUpdater_.videoTimestampOffset(),a={};t.forEach((function(e){a[e.stream]=a[e.stream]||{startTime:1/0,captions:[],endTime:0};var t=a[e.stream];t.startTime=Math.min(t.startTime,e.startTime+i),t.endTime=Math.max(t.endTime,e.endTime+i),t.captions.push(e)})),Object.keys(a).forEach((function(e){var t=a[e],s=t.startTime,o=t.endTime,l=t.captions,u=n.inbandTextTracks_;n.logger_("adding cues from "+s+" -> "+o+" for "+e),function(e,t,n){if(!e[n]){t.trigger({type:"usage",name:"vhs-608"}),t.trigger({type:"usage",name:"hls-608"});var i=n;/^cc708_/.test(n)&&(i="SERVICE"+n.split("_")[1]);var r=t.textTracks().getTrackById(i);if(r)e[n]=r;else{var a=n,s=n,o=!1,l=(t.options_.vhs&&t.options_.vhs.captionServices||{})[i];l&&(a=l.label,s=l.language,o=l.default),e[n]=t.addRemoteTextTrack({kind:"captions",id:i,default:o,label:a,language:s},!1).track}}}(u,n.vhs_.tech_,e),ou(s,o,u[e]),function(e){var t=e.inbandTextTracks,n=e.captionArray,i=e.timestampOffset;if(n){var a=r().WebKitDataCue||r().VTTCue;n.forEach((function(e){var n=e.stream;t[n].addCue(new a(e.startTime+i,e.endTime+i,e.text))}))}}({captionArray:l,inbandTextTracks:u,timestampOffset:i})})),this.transmuxer_&&this.transmuxer_.postMessage({action:"clearParsedMp4Captions"})}else this.metadataQueue_.caption.push(this.handleCaptions_.bind(this,e,t));else this.logger_("SegmentLoader received no captions from a caption event")},n.handleId3_=function(e,t,n){if(this.earlyAbortWhenNeeded_(e.stats),!this.checkForAbort_(e.requestId))if(this.pendingSegment_.hasAppendedData_){var i=null===this.sourceUpdater_.videoTimestampOffset()?this.sourceUpdater_.audioTimestampOffset():this.sourceUpdater_.videoTimestampOffset();!function(e,t,n){e.metadataTrack_||(e.metadataTrack_=n.addRemoteTextTrack({kind:"metadata",label:"Timed Metadata"},!1).track,e.metadataTrack_.inBandMetadataTrackDispatchType=t)}(this.inbandTextTracks_,n,this.vhs_.tech_),su({inbandTextTracks:this.inbandTextTracks_,metadataArray:t,timestampOffset:i,videoDuration:this.duration_()})}else this.metadataQueue_.id3.push(this.handleId3_.bind(this,e,t,n))},n.processMetadataQueue_=function(){this.metadataQueue_.id3.forEach((function(e){return e()})),this.metadataQueue_.caption.forEach((function(e){return e()})),this.metadataQueue_.id3=[],this.metadataQueue_.caption=[]},n.processCallQueue_=function(){var e=this.callQueue_;this.callQueue_=[],e.forEach((function(e){return e()}))},n.processLoadQueue_=function(){var e=this.loadQueue_;this.loadQueue_=[],e.forEach((function(e){return e()}))},n.hasEnoughInfoToLoad_=function(){if("audio"!==this.loaderType_)return!0;var e=this.pendingSegment_;return!!e&&(!this.getCurrentMediaInfo_()||!hu({timelineChangeController:this.timelineChangeController_,currentTimeline:this.currentTimeline_,segmentTimeline:e.timeline,loaderType:this.loaderType_,audioDisabled:this.audioDisabled_}))},n.getCurrentMediaInfo_=function(e){return void 0===e&&(e=this.pendingSegment_),e&&e.trackInfo||this.currentMediaInfo_},n.getMediaInfo_=function(e){return void 0===e&&(e=this.pendingSegment_),this.getCurrentMediaInfo_(e)||this.startingMediaInfo_},n.getPendingSegmentPlaylist=function(){return this.pendingSegment_?this.pendingSegment_.playlist:null},n.hasEnoughInfoToAppend_=function(){if(!this.sourceUpdater_.ready())return!1;if(this.waitingOnRemove_||this.quotaExceededErrorRetryTimeout_)return!1;var e=this.pendingSegment_,t=this.getCurrentMediaInfo_();if(!e||!t)return!1;var n=t.hasAudio,i=t.hasVideo,r=t.isMuxed;return!(i&&!e.videoTimingInfo)&&(!(n&&!this.audioDisabled_&&!r&&!e.audioTimingInfo)&&!hu({timelineChangeController:this.timelineChangeController_,currentTimeline:this.currentTimeline_,segmentTimeline:e.timeline,loaderType:this.loaderType_,audioDisabled:this.audioDisabled_}))},n.handleData_=function(e,t){if(this.earlyAbortWhenNeeded_(e.stats),!this.checkForAbort_(e.requestId))if(!this.callQueue_.length&&this.hasEnoughInfoToAppend_()){var n=this.pendingSegment_;if(this.setTimeMapping_(n.timeline),this.updateMediaSecondsLoaded_(n.part||n.segment),"closed"!==this.mediaSource_.readyState){if(e.map&&(e.map=this.initSegmentForMap(e.map,!0),n.segment.map=e.map),e.key&&this.segmentKey(e.key,!0),n.isFmp4=e.isFmp4,n.timingInfo=n.timingInfo||{},n.isFmp4)this.trigger("fmp4"),n.timingInfo.start=n[du(t.type)].start;else{var i,r=this.getCurrentMediaInfo_(),a="main"===this.loaderType_&&r&&r.hasVideo;a&&(i=n.videoTimingInfo.start),n.timingInfo.start=this.trueSegmentStart_({currentStart:n.timingInfo.start,playlist:n.playlist,mediaIndex:n.mediaIndex,currentVideoTimestampOffset:this.sourceUpdater_.videoTimestampOffset(),useVideoTimingInfo:a,firstVideoFrameTimeForData:i,videoTimingInfo:n.videoTimingInfo,audioTimingInfo:n.audioTimingInfo})}if(this.updateAppendInitSegmentStatus(n,t.type),this.updateSourceBufferTimestampOffset_(n),n.isSyncRequest){this.updateTimingInfoEnd_(n),this.syncController_.saveSegmentTimingInfo({segmentInfo:n,shouldSaveTimelineMapping:"main"===this.loaderType_});var s=this.chooseNextRequest_();if(s.mediaIndex!==n.mediaIndex||s.partIndex!==n.partIndex)return void this.logger_("sync segment was incorrect, not appending");this.logger_("sync segment was correct, appending")}n.hasAppendedData_=!0,this.processMetadataQueue_(),this.appendData_(n,t)}}else this.callQueue_.push(this.handleData_.bind(this,e,t))},n.updateAppendInitSegmentStatus=function(e,t){"main"!==this.loaderType_||"number"!==typeof e.timestampOffset||e.changedTimestampOffset||(this.appendInitSegment_={audio:!0,video:!0}),this.playlistOfLastInitSegment_[t]!==e.playlist&&(this.appendInitSegment_[t]=!0)},n.getInitSegmentAndUpdateState_=function(e){var t=e.type,n=e.initSegment,i=e.map,r=e.playlist;if(i){var a=rl(i);if(this.activeInitSegmentId_===a)return null;n=this.initSegmentForMap(i,!0).bytes,this.activeInitSegmentId_=a}return n&&this.appendInitSegment_[t]?(this.playlistOfLastInitSegment_[t]=r,this.appendInitSegment_[t]=!1,this.activeInitSegmentId_=null,n):null},n.handleQuotaExceededError_=function(e,t){var n=this,i=e.segmentInfo,a=e.type,s=e.bytes,o=this.sourceUpdater_.audioBuffered(),l=this.sourceUpdater_.videoBuffered();o.length>1&&this.logger_("On QUOTA_EXCEEDED_ERR, found gaps in the audio buffer: "+ho(o).join(", ")),l.length>1&&this.logger_("On QUOTA_EXCEEDED_ERR, found gaps in the video buffer: "+ho(l).join(", "));var u=o.length?o.start(0):0,c=o.length?o.end(o.length-1):0,d=l.length?l.start(0):0,h=l.length?l.end(l.length-1):0;if(c-u<=1&&h-d<=1)return this.logger_("On QUOTA_EXCEEDED_ERR, single segment too large to append to buffer, triggering an error. Appended byte length: "+s.byteLength+", audio buffer: "+ho(o).join(", ")+", video buffer: "+ho(l).join(", ")+", "),this.error({message:"Quota exceeded error with append of a single segment of content",excludeUntil:1/0}),void this.trigger("error");this.waitingOnRemove_=!0,this.callQueue_.push(this.appendToSourceBuffer_.bind(this,{segmentInfo:i,type:a,bytes:s}));var f=this.currentTime_()-1;this.logger_("On QUOTA_EXCEEDED_ERR, removing audio/video from 0 to "+f),this.remove(0,f,(function(){n.logger_("On QUOTA_EXCEEDED_ERR, retrying append in 1s"),n.waitingOnRemove_=!1,n.quotaExceededErrorRetryTimeout_=r().setTimeout((function(){n.logger_("On QUOTA_EXCEEDED_ERR, re-processing call queue"),n.quotaExceededErrorRetryTimeout_=null,n.processCallQueue_()}),1e3)}),!0)},n.handleAppendError_=function(e,t){var n=e.segmentInfo,i=e.type,r=e.bytes;t&&(22!==t.code?(this.logger_("Received non QUOTA_EXCEEDED_ERR on append",t),this.error(i+" append of "+r.length+"b failed for segment #"+n.mediaIndex+" in playlist "+n.playlist.id),this.trigger("appenderror")):this.handleQuotaExceededError_({segmentInfo:n,type:i,bytes:r}))},n.appendToSourceBuffer_=function(e){var t=e.segmentInfo,n=e.type,i=e.initSegment,r=e.data,a=e.bytes;if(!a){var s=[r],o=r.byteLength;i&&(s.unshift(i),o+=i.byteLength),a=function(e){var t,n=0;return e.bytes&&(t=new Uint8Array(e.bytes),e.segments.forEach((function(e){t.set(e,n),n+=e.byteLength}))),t}({bytes:o,segments:s})}this.sourceUpdater_.appendBuffer({segmentInfo:t,type:n,bytes:a},this.handleAppendError_.bind(this,{segmentInfo:t,type:n,bytes:a}))},n.handleSegmentTimingInfo_=function(e,t,n){if(this.pendingSegment_&&t===this.pendingSegment_.requestId){var i=this.pendingSegment_.segment,r=e+"TimingInfo";i[r]||(i[r]={}),i[r].transmuxerPrependedSeconds=n.prependedContentDuration||0,i[r].transmuxedPresentationStart=n.start.presentation,i[r].transmuxedDecodeStart=n.start.decode,i[r].transmuxedPresentationEnd=n.end.presentation,i[r].transmuxedDecodeEnd=n.end.decode,i[r].baseMediaDecodeTime=n.baseMediaDecodeTime}},n.appendData_=function(e,t){var n=t.type,i=t.data;if(i&&i.byteLength&&("audio"!==n||!this.audioDisabled_)){var r=this.getInitSegmentAndUpdateState_({type:n,initSegment:t.initSegment,playlist:e.playlist,map:e.isFmp4?e.segment.map:null});this.appendToSourceBuffer_({segmentInfo:e,type:n,initSegment:r,data:i})}},n.loadSegment_=function(e){var t=this;this.state="WAITING",this.pendingSegment_=e,this.trimBackBuffer_(e),"number"===typeof e.timestampOffset&&this.transmuxer_&&this.transmuxer_.postMessage({action:"clearAllMp4Captions"}),this.hasEnoughInfoToLoad_()?this.updateTransmuxerAndRequestSegment_(e):this.loadQueue_.push((function(){var n=o({},e,{forceTimestampOffset:!0});o(e,t.generateSegmentInfo_(n)),t.isPendingTimestampOffset_=!1,t.updateTransmuxerAndRequestSegment_(e)}))},n.updateTransmuxerAndRequestSegment_=function(e){var t=this;this.shouldUpdateTransmuxerTimestampOffset_(e.timestampOffset)&&(this.gopBuffer_.length=0,e.gopsToAlignWith=[],this.timeMapping_=0,this.transmuxer_.postMessage({action:"reset"}),this.transmuxer_.postMessage({action:"setTimestampOffset",timestampOffset:e.timestampOffset}));var n=this.createSimplifiedSegmentObj_(e),i=this.isEndOfStream_(e.mediaIndex,e.playlist,e.partIndex),r=null!==this.mediaIndex,a=e.timeline!==this.currentTimeline_&&e.timeline>0,s=i||r&&a;this.logger_("Requesting "+cu(e)),n.map&&!n.map.bytes&&(this.logger_("going to request init segment."),this.appendInitSegment_={video:!0,audio:!0}),e.abortRequests=Xl({xhr:this.vhs_.xhr,xhrOptions:this.xhrOptions_,decryptionWorker:this.decrypter_,segment:n,abortFn:this.handleAbort_.bind(this,e),progressFn:this.handleProgress_.bind(this),trackInfoFn:this.handleTrackInfo_.bind(this),timingInfoFn:this.handleTimingInfo_.bind(this),videoSegmentTimingInfoFn:this.handleSegmentTimingInfo_.bind(this,"video",e.requestId),audioSegmentTimingInfoFn:this.handleSegmentTimingInfo_.bind(this,"audio",e.requestId),captionsFn:this.handleCaptions_.bind(this),isEndOfTimeline:s,endedTimelineFn:function(){t.logger_("received endedtimeline callback")},id3Fn:this.handleId3_.bind(this),dataFn:this.handleData_.bind(this),doneFn:this.segmentRequestFinished_.bind(this),onTransmuxerLog:function(n){var i=n.message,r=n.level,a=n.stream;t.logger_(cu(e)+" logged from transmuxer stream "+a+" as a "+r+": "+i)}})},n.trimBackBuffer_=function(e){var t=function(e,t,n){var i=t-_l.BACK_BUFFER_LENGTH;e.length&&(i=Math.max(i,e.start(0)));var r=t-n;return Math.min(r,i)}(this.seekable_(),this.currentTime_(),this.playlist_.targetDuration||10);t>0&&this.remove(0,t)},n.createSimplifiedSegmentObj_=function(e){var t=e.segment,n=e.part,i={resolvedUri:n?n.resolvedUri:t.resolvedUri,byterange:n?n.byterange:t.byterange,requestId:e.requestId,transmuxer:e.transmuxer,audioAppendStart:e.audioAppendStart,gopsToAlignWith:e.gopsToAlignWith,part:e.part},r=e.playlist.segments[e.mediaIndex-1];if(r&&r.timeline===t.timeline&&(r.videoTimingInfo?i.baseStartTime=r.videoTimingInfo.transmuxedDecodeEnd:r.audioTimingInfo&&(i.baseStartTime=r.audioTimingInfo.transmuxedDecodeEnd)),t.key){var a=t.key.iv||new Uint32Array([0,0,0,e.mediaIndex+e.playlist.mediaSequence]);i.key=this.segmentKey(t.key),i.key.iv=a}return t.map&&(i.map=this.initSegmentForMap(t.map)),i},n.saveTransferStats_=function(e){this.mediaRequests+=1,e&&(this.mediaBytesTransferred+=e.bytesReceived,this.mediaTransferDuration+=e.roundTripTime)},n.saveBandwidthRelatedStats_=function(e,t){this.pendingSegment_.byteLength=t.bytesReceived,e<uu?this.logger_("Ignoring segment's bandwidth because its duration of "+e+" is less than the min to record "+uu):(this.bandwidth=t.bandwidth,this.roundTrip=t.roundTripTime)},n.handleTimeout_=function(){this.mediaRequestsTimedout+=1,this.bandwidth=1,this.roundTrip=NaN,this.trigger("bandwidthupdate"),this.trigger("timeout")},n.segmentRequestFinished_=function(e,t,n){if(this.callQueue_.length)this.callQueue_.push(this.segmentRequestFinished_.bind(this,e,t,n));else if(this.saveTransferStats_(t.stats),this.pendingSegment_&&t.requestId===this.pendingSegment_.requestId){if(e){if(this.pendingSegment_=null,this.state="READY",e.code===Nl)return;return this.pause(),e.code===Rl?void this.handleTimeout_():(this.mediaRequestsErrored+=1,this.error(e),void this.trigger("error"))}var i=this.pendingSegment_;this.saveBandwidthRelatedStats_(i.duration,t.stats),i.endOfAllRequests=t.endOfAllRequests,n.gopInfo&&(this.gopBuffer_=function(e,t,n){if(!t.length)return e;if(n)return t.slice();for(var i=t[0].pts,r=0;r<e.length&&!(e[r].pts>=i);r++);return e.slice(0,r).concat(t)}(this.gopBuffer_,n.gopInfo,this.safeAppend_)),this.state="APPENDING",this.trigger("appending"),this.waitForAppendsToComplete_(i)}},n.setTimeMapping_=function(e){var t=this.syncController_.mappingForTimeline(e);null!==t&&(this.timeMapping_=t)},n.updateMediaSecondsLoaded_=function(e){"number"===typeof e.start&&"number"===typeof e.end?this.mediaSecondsLoaded+=e.end-e.start:this.mediaSecondsLoaded+=e.duration},n.shouldUpdateTransmuxerTimestampOffset_=function(e){return null!==e&&("main"===this.loaderType_&&e!==this.sourceUpdater_.videoTimestampOffset()||!this.audioDisabled_&&e!==this.sourceUpdater_.audioTimestampOffset())},n.trueSegmentStart_=function(e){var t=e.currentStart,n=e.playlist,i=e.mediaIndex,r=e.firstVideoFrameTimeForData,a=e.currentVideoTimestampOffset,s=e.useVideoTimingInfo,o=e.videoTimingInfo,l=e.audioTimingInfo;if("undefined"!==typeof t)return t;if(!s)return l.start;var u=n.segments[i-1];return 0!==i&&u&&"undefined"!==typeof u.start&&u.end===r+a?o.start:r},n.waitForAppendsToComplete_=function(e){var t=this.getCurrentMediaInfo_(e);if(!t)return this.error({message:"No starting media returned, likely due to an unsupported media format.",blacklistDuration:1/0}),void this.trigger("error");var n=t.hasAudio,i=t.hasVideo,r=t.isMuxed,a="main"===this.loaderType_&&i,s=!this.audioDisabled_&&n&&!r;if(e.waitingOnAppends=0,!e.hasAppendedData_)return e.timingInfo||"number"!==typeof e.timestampOffset||(this.isPendingTimestampOffset_=!0),e.timingInfo={start:0},e.waitingOnAppends++,this.isPendingTimestampOffset_||(this.updateSourceBufferTimestampOffset_(e),this.processMetadataQueue_()),void this.checkAppendsDone_(e);a&&e.waitingOnAppends++,s&&e.waitingOnAppends++,a&&this.sourceUpdater_.videoQueueCallback(this.checkAppendsDone_.bind(this,e)),s&&this.sourceUpdater_.audioQueueCallback(this.checkAppendsDone_.bind(this,e))},n.checkAppendsDone_=function(e){this.checkForAbort_(e.requestId)||(e.waitingOnAppends--,0===e.waitingOnAppends&&this.handleAppendsDone_())},n.checkForIllegalMediaSwitch=function(e){var t=function(e,t,n){return"main"===e&&t&&n?n.hasAudio||n.hasVideo?t.hasVideo&&!n.hasVideo?"Only audio found in segment when we expected video. We can't switch to audio only from a stream that had video. To get rid of this message, please add codec information to the manifest.":!t.hasVideo&&n.hasVideo?"Video found in segment when we expected only audio. We can't switch to a stream with video from an audio only stream. To get rid of this message, please add codec information to the manifest.":null:"Neither audio nor video found in segment.":null}(this.loaderType_,this.getCurrentMediaInfo_(),e);return!!t&&(this.error({message:t,blacklistDuration:1/0}),this.trigger("error"),!0)},n.updateSourceBufferTimestampOffset_=function(e){if(null!==e.timestampOffset&&"number"===typeof e.timingInfo.start&&!e.changedTimestampOffset&&"main"===this.loaderType_){var t=!1;e.timestampOffset-=this.getSegmentStartTimeForTimestampOffsetCalculation_({videoTimingInfo:e.segment.videoTimingInfo,audioTimingInfo:e.segment.audioTimingInfo,timingInfo:e.timingInfo}),e.changedTimestampOffset=!0,e.timestampOffset!==this.sourceUpdater_.videoTimestampOffset()&&(this.sourceUpdater_.videoTimestampOffset(e.timestampOffset),t=!0),e.timestampOffset!==this.sourceUpdater_.audioTimestampOffset()&&(this.sourceUpdater_.audioTimestampOffset(e.timestampOffset),t=!0),t&&this.trigger("timestampoffset")}},n.getSegmentStartTimeForTimestampOffsetCalculation_=function(e){var t=e.videoTimingInfo,n=e.audioTimingInfo,i=e.timingInfo;return this.useDtsForTimestampOffset_?t&&"number"===typeof t.transmuxedDecodeStart?t.transmuxedDecodeStart:n&&"number"===typeof n.transmuxedDecodeStart?n.transmuxedDecodeStart:i.start:i.start},n.updateTimingInfoEnd_=function(e){e.timingInfo=e.timingInfo||{};var t=this.getMediaInfo_(),n="main"===this.loaderType_&&t&&t.hasVideo&&e.videoTimingInfo?e.videoTimingInfo:e.audioTimingInfo;n&&(e.timingInfo.end="number"===typeof n.end?n.end:n.start+e.duration)},n.handleAppendsDone_=function(){if(this.pendingSegment_&&this.trigger("appendsdone"),!this.pendingSegment_)return this.state="READY",void(this.paused()||this.monitorBuffer_());var e=this.pendingSegment_;this.updateTimingInfoEnd_(e),this.shouldSaveSegmentTimingInfo_&&this.syncController_.saveSegmentTimingInfo({segmentInfo:e,shouldSaveTimelineMapping:"main"===this.loaderType_});var t=pu(e,this.sourceType_);if(t&&("warn"===t.severity?Zs.log.warn(t.message):this.logger_(t.message)),this.recordThroughput_(e),this.pendingSegment_=null,this.state="READY",!e.isSyncRequest||(this.trigger("syncinfoupdate"),e.hasAppendedData_)){this.logger_("Appended "+cu(e)),this.addSegmentMetadataCue_(e),this.fetchAtBuffer_=!0,this.currentTimeline_!==e.timeline&&(this.timelineChangeController_.lastTimelineChange({type:this.loaderType_,from:this.currentTimeline_,to:e.timeline}),"main"!==this.loaderType_||this.audioDisabled_||this.timelineChangeController_.lastTimelineChange({type:"audio",from:this.currentTimeline_,to:e.timeline})),this.currentTimeline_=e.timeline,this.trigger("syncinfoupdate");var n=e.segment,i=e.part,r=n.end&&this.currentTime_()-n.end>3*e.playlist.targetDuration,a=i&&i.end&&this.currentTime_()-i.end>3*e.playlist.partTargetDuration;if(r||a)return this.logger_("bad "+(r?"segment":"part")+" "+cu(e)),void this.resetEverything();null!==this.mediaIndex&&this.trigger("bandwidthupdate"),this.trigger("progress"),this.mediaIndex=e.mediaIndex,this.partIndex=e.partIndex,this.isEndOfStream_(e.mediaIndex,e.playlist,e.partIndex)&&this.endOfStream(),this.trigger("appended"),e.hasAppendedData_&&this.mediaAppends++,this.paused()||this.monitorBuffer_()}else this.logger_("Throwing away un-appended sync request "+cu(e))},n.recordThroughput_=function(e){if(e.duration<uu)this.logger_("Ignoring segment's throughput because its duration of "+e.duration+" is less than the min to record "+uu);else{var t=this.throughput.rate,n=Date.now()-e.endOfAllRequests+1,i=Math.floor(e.byteLength/n*8*1e3);this.throughput.rate+=(i-t)/++this.throughput.count}},n.addSegmentMetadataCue_=function(e){if(this.segmentMetadataTrack_){var t=e.segment,n=t.start,i=t.end;if(lu(n)&&lu(i)){ou(n,i,this.segmentMetadataTrack_);var a=r().WebKitDataCue||r().VTTCue,s={custom:t.custom,dateTimeObject:t.dateTimeObject,dateTimeString:t.dateTimeString,bandwidth:e.playlist.attributes.BANDWIDTH,resolution:e.playlist.attributes.RESOLUTION,codecs:e.playlist.attributes.CODECS,byteLength:e.byteLength,uri:e.uri,timeline:e.timeline,playlist:e.playlist.id,start:n,end:i},o=new a(n,i,JSON.stringify(s));o.value=s,this.segmentMetadataTrack_.addCue(o)}}},t}(Zs.EventTarget);function mu(){}var vu,yu=function(e){return"string"!==typeof e?e:e.replace(/./,(function(e){return e.toUpperCase()}))},_u=["video","audio"],bu=function(e,t){var n=t[e+"Buffer"];return n&&n.updating||t.queuePending[e]},Tu=function e(t,n){if(0!==n.queue.length){var i=0,r=n.queue[i];if("mediaSource"!==r.type){if("mediaSource"!==t&&n.ready()&&"closed"!==n.mediaSource.readyState&&!bu(t,n)){if(r.type!==t){if(i=function(e,t){for(var n=0;n<t.length;n++){var i=t[n];if("mediaSource"===i.type)return null;if(i.type===e)return n}return null}(t,n.queue),null===i)return;r=n.queue[i]}return n.queue.splice(i,1),n.queuePending[t]=r,r.action(t,n),r.doneFn?void 0:(n.queuePending[t]=null,void e(t,n))}}else n.updating()||"closed"===n.mediaSource.readyState||(n.queue.shift(),r.action(n),r.doneFn&&r.doneFn(),e("audio",n),e("video",n))}},ku=function(e,t){var n=t[e+"Buffer"],i=yu(e);n&&(n.removeEventListener("updateend",t["on"+i+"UpdateEnd_"]),n.removeEventListener("error",t["on"+i+"Error_"]),t.codecs[e]=null,t[e+"Buffer"]=null)},xu=function(e,t){return e&&t&&-1!==Array.prototype.indexOf.call(e.sourceBuffers,t)},Su=function(e,t,n){return function(i,r){var a=r[i+"Buffer"];if(xu(r.mediaSource,a)){r.logger_("Appending segment "+t.mediaIndex+"'s "+e.length+" bytes to "+i+"Buffer");try{a.appendBuffer(e)}catch(s){r.logger_("Error with code "+s.code+" "+(22===s.code?"(QUOTA_EXCEEDED_ERR) ":"")+"when appending segment "+t.mediaIndex+" to "+i+"Buffer"),r.queuePending[i]=null,n(s)}}}},wu=function(e,t){return function(n,i){var r=i[n+"Buffer"];if(xu(i.mediaSource,r)){i.logger_("Removing "+e+" to "+t+" from "+n+"Buffer");try{r.remove(e,t)}catch(a){i.logger_("Remove "+e+" to "+t+" from "+n+"Buffer failed")}}}},Eu=function(e){return function(t,n){var i=n[t+"Buffer"];xu(n.mediaSource,i)&&(n.logger_("Setting "+t+"timestampOffset to "+e),i.timestampOffset=e)}},Cu=function(e){return function(t,n){e()}},Pu=function(e){return function(t){if("open"===t.mediaSource.readyState){t.logger_("Calling mediaSource endOfStream("+(e||"")+")");try{t.mediaSource.endOfStream(e)}catch(n){Zs.log.warn("Failed to call media source endOfStream",n)}}}},Iu=function(e){return function(t){t.logger_("Setting mediaSource duration to "+e);try{t.mediaSource.duration=e}catch(n){Zs.log.warn("Failed to set media source duration",n)}}},Au=function(){return function(e,t){if("open"===t.mediaSource.readyState){var n=t[e+"Buffer"];if(xu(t.mediaSource,n)){t.logger_("calling abort on "+e+"Buffer");try{n.abort()}catch(i){Zs.log.warn("Failed to abort on "+e+"Buffer",i)}}}}},Ou=function(e,t){return function(n){var i=yu(e),r=V(t);n.logger_("Adding "+e+"Buffer with codec "+t+" to mediaSource");var a=n.mediaSource.addSourceBuffer(r);a.addEventListener("updateend",n["on"+i+"UpdateEnd_"]),a.addEventListener("error",n["on"+i+"Error_"]),n.codecs[e]=t,n[e+"Buffer"]=a}},Lu=function(e){return function(t){var n=t[e+"Buffer"];if(ku(e,t),xu(t.mediaSource,n)){t.logger_("Removing "+e+"Buffer with codec "+t.codecs[e]+" from mediaSource");try{t.mediaSource.removeSourceBuffer(n)}catch(i){Zs.log.warn("Failed to removeSourceBuffer "+e+"Buffer",i)}}}},Mu=function(e){return function(t,n){var i=n[t+"Buffer"],r=V(e);xu(n.mediaSource,i)&&n.codecs[t]!==e&&(n.logger_("changing "+t+"Buffer codec from "+n.codecs[t]+" to "+e),i.changeType(r),n.codecs[t]=e)}},Du=function(e){var t=e.type,n=e.sourceUpdater,i=e.action,r=e.doneFn,a=e.name;n.queue.push({type:t,action:i,doneFn:r,name:a}),Tu(t,n)},Ru=function(e,t){return function(n){if(t.queuePending[e]){var i=t.queuePending[e].doneFn;t.queuePending[e]=null,i&&i(t[e+"Error_"])}Tu(e,t)}},Nu=function(e){function t(t){var n;return(n=e.call(this)||this).mediaSource=t,n.sourceopenListener_=function(){return Tu("mediaSource",c(n))},n.mediaSource.addEventListener("sourceopen",n.sourceopenListener_),n.logger_=ro("SourceUpdater"),n.audioTimestampOffset_=0,n.videoTimestampOffset_=0,n.queue=[],n.queuePending={audio:null,video:null},n.delayedAudioAppendQueue_=[],n.videoAppendQueued_=!1,n.codecs={},n.onVideoUpdateEnd_=Ru("video",c(n)),n.onAudioUpdateEnd_=Ru("audio",c(n)),n.onVideoError_=function(e){n.videoError_=e},n.onAudioError_=function(e){n.audioError_=e},n.createdSourceBuffers_=!1,n.initializedEme_=!1,n.triggeredReady_=!1,n}h(t,e);var n=t.prototype;return n.initializedEme=function(){this.initializedEme_=!0,this.triggerReady()},n.hasCreatedSourceBuffers=function(){return this.createdSourceBuffers_},n.hasInitializedAnyEme=function(){return this.initializedEme_},n.ready=function(){return this.hasCreatedSourceBuffers()&&this.hasInitializedAnyEme()},n.createSourceBuffers=function(e){this.hasCreatedSourceBuffers()||(this.addOrChangeSourceBuffers(e),this.createdSourceBuffers_=!0,this.trigger("createdsourcebuffers"),this.triggerReady())},n.triggerReady=function(){this.ready()&&!this.triggeredReady_&&(this.triggeredReady_=!0,this.trigger("ready"))},n.addSourceBuffer=function(e,t){Du({type:"mediaSource",sourceUpdater:this,action:Ou(e,t),name:"addSourceBuffer"})},n.abort=function(e){Du({type:e,sourceUpdater:this,action:Au(e),name:"abort"})},n.removeSourceBuffer=function(e){this.canRemoveSourceBuffer()?Du({type:"mediaSource",sourceUpdater:this,action:Lu(e),name:"removeSourceBuffer"}):Zs.log.error("removeSourceBuffer is not supported!")},n.canRemoveSourceBuffer=function(){return!Zs.browser.IE_VERSION&&!Zs.browser.IS_FIREFOX&&r().MediaSource&&r().MediaSource.prototype&&"function"===typeof r().MediaSource.prototype.removeSourceBuffer},t.canChangeType=function(){return r().SourceBuffer&&r().SourceBuffer.prototype&&"function"===typeof r().SourceBuffer.prototype.changeType},n.canChangeType=function(){return this.constructor.canChangeType()},n.changeType=function(e,t){this.canChangeType()?Du({type:e,sourceUpdater:this,action:Mu(t),name:"changeType"}):Zs.log.error("changeType is not supported!")},n.addOrChangeSourceBuffers=function(e){var t=this;if(!e||"object"!==typeof e||0===Object.keys(e).length)throw new Error("Cannot addOrChangeSourceBuffers to undefined codecs");Object.keys(e).forEach((function(n){var i=e[n];if(!t.hasCreatedSourceBuffers())return t.addSourceBuffer(n,i);t.canChangeType()&&t.changeType(n,i)}))},n.appendBuffer=function(e,t){var n=this,i=e.segmentInfo,r=e.type,a=e.bytes;if(this.processedAppend_=!0,"audio"===r&&this.videoBuffer&&!this.videoAppendQueued_)return this.delayedAudioAppendQueue_.push([e,t]),void this.logger_("delayed audio append of "+a.length+" until video append");if(Du({type:r,sourceUpdater:this,action:Su(a,i||{mediaIndex:-1},t),doneFn:t,name:"appendBuffer"}),"video"===r){if(this.videoAppendQueued_=!0,!this.delayedAudioAppendQueue_.length)return;var s=this.delayedAudioAppendQueue_.slice();this.logger_("queuing delayed audio "+s.length+" appendBuffers"),this.delayedAudioAppendQueue_.length=0,s.forEach((function(e){n.appendBuffer.apply(n,e)}))}},n.audioBuffered=function(){return xu(this.mediaSource,this.audioBuffer)&&this.audioBuffer.buffered?this.audioBuffer.buffered:Zs.createTimeRange()},n.videoBuffered=function(){return xu(this.mediaSource,this.videoBuffer)&&this.videoBuffer.buffered?this.videoBuffer.buffered:Zs.createTimeRange()},n.buffered=function(){var e=xu(this.mediaSource,this.videoBuffer)?this.videoBuffer:null,t=xu(this.mediaSource,this.audioBuffer)?this.audioBuffer:null;return t&&!e?this.audioBuffered():e&&!t?this.videoBuffered():function(e,t){var n=null,i=null,r=0,a=[],s=[];if(!e||!e.length||!t||!t.length)return Zs.createTimeRange();for(var o=e.length;o--;)a.push({time:e.start(o),type:"start"}),a.push({time:e.end(o),type:"end"});for(o=t.length;o--;)a.push({time:t.start(o),type:"start"}),a.push({time:t.end(o),type:"end"});for(a.sort((function(e,t){return e.time-t.time})),o=0;o<a.length;o++)"start"===a[o].type?2===++r&&(n=a[o].time):"end"===a[o].type&&1===--r&&(i=a[o].time),null!==n&&null!==i&&(s.push([n,i]),n=null,i=null);return Zs.createTimeRanges(s)}(this.audioBuffered(),this.videoBuffered())},n.setDuration=function(e,t){void 0===t&&(t=mu),Du({type:"mediaSource",sourceUpdater:this,action:Iu(e),name:"duration",doneFn:t})},n.endOfStream=function(e,t){void 0===e&&(e=null),void 0===t&&(t=mu),"string"!==typeof e&&(e=void 0),Du({type:"mediaSource",sourceUpdater:this,action:Pu(e),name:"endOfStream",doneFn:t})},n.removeAudio=function(e,t,n){void 0===n&&(n=mu),this.audioBuffered().length&&0!==this.audioBuffered().end(0)?Du({type:"audio",sourceUpdater:this,action:wu(e,t),doneFn:n,name:"remove"}):n()},n.removeVideo=function(e,t,n){void 0===n&&(n=mu),this.videoBuffered().length&&0!==this.videoBuffered().end(0)?Du({type:"video",sourceUpdater:this,action:wu(e,t),doneFn:n,name:"remove"}):n()},n.updating=function(){return!(!bu("audio",this)&&!bu("video",this))},n.audioTimestampOffset=function(e){return"undefined"!==typeof e&&this.audioBuffer&&this.audioTimestampOffset_!==e&&(Du({type:"audio",sourceUpdater:this,action:Eu(e),name:"timestampOffset"}),this.audioTimestampOffset_=e),this.audioTimestampOffset_},n.videoTimestampOffset=function(e){return"undefined"!==typeof e&&this.videoBuffer&&this.videoTimestampOffset!==e&&(Du({type:"video",sourceUpdater:this,action:Eu(e),name:"timestampOffset"}),this.videoTimestampOffset_=e),this.videoTimestampOffset_},n.audioQueueCallback=function(e){this.audioBuffer&&Du({type:"audio",sourceUpdater:this,action:Cu(e),name:"callback"})},n.videoQueueCallback=function(e){this.videoBuffer&&Du({type:"video",sourceUpdater:this,action:Cu(e),name:"callback"})},n.dispose=function(){var e=this;this.trigger("dispose"),_u.forEach((function(t){e.abort(t),e.canRemoveSourceBuffer()?e.removeSourceBuffer(t):e[t+"QueueCallback"]((function(){return ku(t,e)}))})),this.videoAppendQueued_=!1,this.delayedAudioAppendQueue_.length=0,this.sourceopenListener_&&this.mediaSource.removeEventListener("sourceopen",this.sourceopenListener_),this.off()},t}(Zs.EventTarget),Uu=function(e){return decodeURIComponent(escape(String.fromCharCode.apply(null,e)))},ju=new Uint8Array("\n\n".split("").map((function(e){return e.charCodeAt(0)}))),Fu=function(e){function t(){return e.call(this,"Trying to parse received VTT cues, but there is no WebVTT. Make sure vtt.js is loaded.")||this}return h(t,e),t}(Pt(Error)),Bu=function(e){function t(t,n){var i;return void 0===n&&(n={}),(i=e.call(this,t,n)||this).mediaSource_=null,i.subtitlesTrack_=null,i.loaderType_="subtitle",i.featuresNativeTextTracks_=t.featuresNativeTextTracks,i.loadVttJs=t.loadVttJs,i.shouldSaveSegmentTimingInfo_=!1,i}h(t,e);var n=t.prototype;return n.createTransmuxer_=function(){return null},n.buffered_=function(){if(!this.subtitlesTrack_||!this.subtitlesTrack_.cues||!this.subtitlesTrack_.cues.length)return Zs.createTimeRanges();var e=this.subtitlesTrack_.cues,t=e[0].startTime,n=e[e.length-1].startTime;return Zs.createTimeRanges([[t,n]])},n.initSegmentForMap=function(e,t){if(void 0===t&&(t=!1),!e)return null;var n=rl(e),i=this.initSegments_[n];if(t&&!i&&e.bytes){var r=ju.byteLength+e.bytes.byteLength,a=new Uint8Array(r);a.set(e.bytes),a.set(ju,e.bytes.byteLength),this.initSegments_[n]=i={resolvedUri:e.resolvedUri,byterange:e.byterange,bytes:a}}return i||e},n.couldBeginLoading_=function(){return this.playlist_&&this.subtitlesTrack_&&!this.paused()},n.init_=function(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()},n.track=function(e){return"undefined"===typeof e||(this.subtitlesTrack_=e,"INIT"===this.state&&this.couldBeginLoading_()&&this.init_()),this.subtitlesTrack_},n.remove=function(e,t){ou(e,t,this.subtitlesTrack_)},n.fillBuffer_=function(){var e=this,t=this.chooseNextRequest_();if(t){if(null===this.syncController_.timestampOffsetForTimeline(t.timeline)){return this.syncController_.one("timestampoffset",(function(){e.state="READY",e.paused()||e.monitorBuffer_()})),void(this.state="WAITING_ON_TIMELINE")}this.loadSegment_(t)}},n.timestampOffsetForSegment_=function(){return null},n.chooseNextRequest_=function(){return this.skipEmptySegments_(e.prototype.chooseNextRequest_.call(this))},n.skipEmptySegments_=function(e){for(;e&&e.segment.empty;){if(e.mediaIndex+1>=e.playlist.segments.length){e=null;break}e=this.generateSegmentInfo_({playlist:e.playlist,mediaIndex:e.mediaIndex+1,startOfSegment:e.startOfSegment+e.duration,isSyncRequest:e.isSyncRequest})}return e},n.stopForError=function(e){this.error(e),this.state="READY",this.pause(),this.trigger("error")},n.segmentRequestFinished_=function(e,t,n){var i=this;if(this.subtitlesTrack_){if(this.saveTransferStats_(t.stats),!this.pendingSegment_)return this.state="READY",void(this.mediaRequestsAborted+=1);if(e)return e.code===Rl&&this.handleTimeout_(),e.code===Nl?this.mediaRequestsAborted+=1:this.mediaRequestsErrored+=1,void this.stopForError(e);var a=this.pendingSegment_;this.saveBandwidthRelatedStats_(a.duration,t.stats),t.key&&this.segmentKey(t.key,!0),this.state="APPENDING",this.trigger("appending");var s=a.segment;if(s.map&&(s.map.bytes=t.map.bytes),a.bytes=t.bytes,"function"!==typeof r().WebVTT&&"function"===typeof this.loadVttJs)return this.state="WAITING_ON_VTTJS",void this.loadVttJs().then((function(){return i.segmentRequestFinished_(e,t,n)}),(function(){return i.stopForError({message:"Error loading vtt.js"})}));s.requested=!0;try{this.parseVTTCues_(a)}catch(o){return void this.stopForError({message:o.message})}if(this.updateTimeMapping_(a,this.syncController_.timelines[a.timeline],this.playlist_),a.cues.length?a.timingInfo={start:a.cues[0].startTime,end:a.cues[a.cues.length-1].endTime}:a.timingInfo={start:a.startOfSegment,end:a.startOfSegment+a.duration},a.isSyncRequest)return this.trigger("syncinfoupdate"),this.pendingSegment_=null,void(this.state="READY");a.byteLength=a.bytes.byteLength,this.mediaSecondsLoaded+=s.duration,a.cues.forEach((function(e){i.subtitlesTrack_.addCue(i.featuresNativeTextTracks_?new(r().VTTCue)(e.startTime,e.endTime,e.text):e)})),function(e){var t=e.cues;if(t)for(var n=0;n<t.length;n++){for(var i=[],r=0,a=0;a<t.length;a++)t[n].startTime===t[a].startTime&&t[n].endTime===t[a].endTime&&t[n].text===t[a].text&&++r>1&&i.push(t[a]);i.length&&i.forEach((function(t){return e.removeCue(t)}))}}(this.subtitlesTrack_),this.handleAppendsDone_()}else this.state="READY"},n.handleData_=function(){},n.updateTimingInfoEnd_=function(){},n.parseVTTCues_=function(e){var t,n=!1;if("function"!==typeof r().WebVTT)throw new Fu;"function"===typeof r().TextDecoder?t=new(r().TextDecoder)("utf8"):(t=r().WebVTT.StringDecoder(),n=!0);var i=new(r().WebVTT.Parser)(r(),r().vttjs,t);if(e.cues=[],e.timestampmap={MPEGTS:0,LOCAL:0},i.oncue=e.cues.push.bind(e.cues),i.ontimestampmap=function(t){e.timestampmap=t},i.onparsingerror=function(e){Zs.log.warn("Error encountered when parsing cues: "+e.message)},e.segment.map){var a=e.segment.map.bytes;n&&(a=Uu(a)),i.parse(a)}var s=e.bytes;n&&(s=Uu(s)),i.parse(s),i.flush()},n.updateTimeMapping_=function(e,t,n){var i=e.segment;if(t)if(e.cues.length){var r=e.timestampmap,a=r.MPEGTS/Et.ONE_SECOND_IN_TS-r.LOCAL+t.mapping;if(e.cues.forEach((function(e){e.startTime+=a,e.endTime+=a})),!n.syncInfo){var s=e.cues[0].startTime,o=e.cues[e.cues.length-1].startTime;n.syncInfo={mediaSequence:n.mediaSequence+e.mediaIndex,time:Math.min(s,o-i.duration)}}}else i.empty=!0},t}(gu),zu=function(e,t){for(var n=e.cues,i=0;i<n.length;i++){var r=n[i];if(t>=r.adStartTime&&t<=r.adEndTime)return r}return null},Vu=[{name:"VOD",run:function(e,t,n,i,r){if(n!==1/0){return{time:0,segmentIndex:0,partIndex:null}}return null}},{name:"ProgramDateTime",run:function(e,t,n,i,r){if(!Object.keys(e.timelineToDatetimeMappings).length)return null;var a=null,s=null,o=vo(t);r=r||0;for(var l=0;l<o.length;l++){var u=o[t.endList||0===r?l:o.length-(l+1)],c=u.segment,d=e.timelineToDatetimeMappings[c.timeline];if(d&&c.dateTimeObject){var h=c.dateTimeObject.getTime()/1e3+d;if(c.parts&&"number"===typeof u.partIndex)for(var f=0;f<u.partIndex;f++)h+=c.parts[f].duration;var p=Math.abs(r-h);if(null!==s&&(0===p||s<p))break;s=p,a={time:h,segmentIndex:u.segmentIndex,partIndex:u.partIndex}}}return a}},{name:"Segment",run:function(e,t,n,i,r){var a=null,s=null;r=r||0;for(var o=vo(t),l=0;l<o.length;l++){var u=o[t.endList||0===r?l:o.length-(l+1)],c=u.segment,d=u.part&&u.part.start||c&&c.start;if(c.timeline===i&&"undefined"!==typeof d){var h=Math.abs(r-d);if(null!==s&&s<h)break;(!a||null===s||s>=h)&&(s=h,a={time:d,segmentIndex:u.segmentIndex,partIndex:u.partIndex})}}return a}},{name:"Discontinuity",run:function(e,t,n,i,r){var a=null;if(r=r||0,t.discontinuityStarts&&t.discontinuityStarts.length)for(var s=null,o=0;o<t.discontinuityStarts.length;o++){var l=t.discontinuityStarts[o],u=t.discontinuitySequence+o+1,c=e.discontinuities[u];if(c){var d=Math.abs(r-c.time);if(null!==s&&s<d)break;(!a||null===s||s>=d)&&(s=d,a={time:c.time,segmentIndex:l,partIndex:null})}}return a}},{name:"Playlist",run:function(e,t,n,i,r){return t.syncInfo?{time:t.syncInfo.time,segmentIndex:t.syncInfo.mediaSequence-t.mediaSequence,partIndex:null}:null}}],Hu=function(e){function t(t){var n;return(n=e.call(this)||this).timelines=[],n.discontinuities=[],n.timelineToDatetimeMappings={},n.logger_=ro("SyncController"),n}h(t,e);var n=t.prototype;return n.getSyncPoint=function(e,t,n,i){var r=this.runStrategies_(e,t,n,i);return r.length?this.selectSyncPoint_(r,{key:"time",value:i}):null},n.getExpiredTime=function(e,t){if(!e||!e.segments)return null;var n=this.runStrategies_(e,t,e.discontinuitySequence,0);if(!n.length)return null;var i=this.selectSyncPoint_(n,{key:"segmentIndex",value:0});return i.segmentIndex>0&&(i.time*=-1),Math.abs(i.time+xo({defaultDuration:e.targetDuration,durationList:e.segments,startIndex:i.segmentIndex,endIndex:0}))},n.runStrategies_=function(e,t,n,i){for(var r=[],a=0;a<Vu.length;a++){var s=Vu[a],o=s.run(this,e,t,n,i);o&&(o.strategy=s.name,r.push({strategy:s.name,syncPoint:o}))}return r},n.selectSyncPoint_=function(e,t){for(var n=e[0].syncPoint,i=Math.abs(e[0].syncPoint[t.key]-t.value),r=e[0].strategy,a=1;a<e.length;a++){var s=Math.abs(e[a].syncPoint[t.key]-t.value);s<i&&(i=s,n=e[a].syncPoint,r=e[a].strategy)}return this.logger_("syncPoint for ["+t.key+": "+t.value+"] chosen with strategy ["+r+"]: [time:"+n.time+", segmentIndex:"+n.segmentIndex+("number"===typeof n.partIndex?",partIndex:"+n.partIndex:"")+"]"),n},n.saveExpiredSegmentInfo=function(e,t){var n=t.mediaSequence-e.mediaSequence;if(n>86400)Zs.log.warn("Not saving expired segment info. Media sequence gap "+n+" is too large.");else for(var i=n-1;i>=0;i--){var r=e.segments[i];if(r&&"undefined"!==typeof r.start){t.syncInfo={mediaSequence:e.mediaSequence+i,time:r.start},this.logger_("playlist refresh sync: [time:"+t.syncInfo.time+", mediaSequence: "+t.syncInfo.mediaSequence+"]"),this.trigger("syncinfoupdate");break}}},n.setDateTimeMappingForStart=function(e){if(this.timelineToDatetimeMappings={},e.segments&&e.segments.length&&e.segments[0].dateTimeObject){var t=e.segments[0],n=t.dateTimeObject.getTime()/1e3;this.timelineToDatetimeMappings[t.timeline]=-n}},n.saveSegmentTimingInfo=function(e){var t=e.segmentInfo,n=e.shouldSaveTimelineMapping,i=this.calculateSegmentTimeMapping_(t,t.timingInfo,n),r=t.segment;i&&(this.saveDiscontinuitySyncInfo_(t),t.playlist.syncInfo||(t.playlist.syncInfo={mediaSequence:t.playlist.mediaSequence+t.mediaIndex,time:r.start}));var a=r.dateTimeObject;r.discontinuity&&n&&a&&(this.timelineToDatetimeMappings[r.timeline]=-a.getTime()/1e3)},n.timestampOffsetForTimeline=function(e){return"undefined"===typeof this.timelines[e]?null:this.timelines[e].time},n.mappingForTimeline=function(e){return"undefined"===typeof this.timelines[e]?null:this.timelines[e].mapping},n.calculateSegmentTimeMapping_=function(e,t,n){var i,r,a=e.segment,s=e.part,o=this.timelines[e.timeline];if("number"===typeof e.timestampOffset)o={time:e.startOfSegment,mapping:e.startOfSegment-t.start},n&&(this.timelines[e.timeline]=o,this.trigger("timestampoffset"),this.logger_("time mapping for timeline "+e.timeline+": [time: "+o.time+"] [mapping: "+o.mapping+"]")),i=e.startOfSegment,r=t.end+o.mapping;else{if(!o)return!1;i=t.start+o.mapping,r=t.end+o.mapping}return s&&(s.start=i,s.end=r),(!a.start||i<a.start)&&(a.start=i),a.end=r,!0},n.saveDiscontinuitySyncInfo_=function(e){var t=e.playlist,n=e.segment;if(n.discontinuity)this.discontinuities[n.timeline]={time:n.start,accuracy:0};else if(t.discontinuityStarts&&t.discontinuityStarts.length)for(var i=0;i<t.discontinuityStarts.length;i++){var r=t.discontinuityStarts[i],a=t.discontinuitySequence+i+1,s=r-e.mediaIndex,o=Math.abs(s);if(!this.discontinuities[a]||this.discontinuities[a].accuracy>o){var l=void 0;l=s<0?n.start-xo({defaultDuration:t.targetDuration,durationList:t.segments,startIndex:e.mediaIndex,endIndex:r}):n.end+xo({defaultDuration:t.targetDuration,durationList:t.segments,startIndex:e.mediaIndex+1,endIndex:r}),this.discontinuities[a]={time:l,accuracy:o}}}},n.dispose=function(){this.trigger("dispose"),this.off()},t}(Zs.EventTarget),Wu=function(e){function t(){var t;return(t=e.call(this)||this).pendingTimelineChanges_={},t.lastTimelineChanges_={},t}h(t,e);var n=t.prototype;return n.clearPendingTimelineChange=function(e){this.pendingTimelineChanges_[e]=null,this.trigger("pendingtimelinechange")},n.pendingTimelineChange=function(e){var t=e.type,n=e.from,i=e.to;return"number"===typeof n&&"number"===typeof i&&(this.pendingTimelineChanges_[t]={type:t,from:n,to:i},this.trigger("pendingtimelinechange")),this.pendingTimelineChanges_[t]},n.lastTimelineChange=function(e){var t=e.type,n=e.from,i=e.to;return"number"===typeof n&&"number"===typeof i&&(this.lastTimelineChanges_[t]={type:t,from:n,to:i},delete this.pendingTimelineChanges_[t],this.trigger("timelinechange")),this.lastTimelineChanges_[t]},n.dispose=function(){this.trigger("dispose"),this.pendingTimelineChanges_={},this.lastTimelineChanges_={},this.off()},t}(Zs.EventTarget),qu=kl(xl((function(){var e="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:{};function t(e,t,n){return e(n={path:t,exports:{},require:function(e,t){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}((void 0===t||null===t)&&n.path)}},n.exports),n.exports}var i=t((function(e){function t(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}e.exports=function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e},e.exports.default=e.exports,e.exports.__esModule=!0})),r=t((function(e){function t(n,i){return e.exports=t=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},e.exports.default=e.exports,e.exports.__esModule=!0,t(n,i)}e.exports=t,e.exports.default=e.exports,e.exports.__esModule=!0})),a=t((function(e){e.exports=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,r(e,t)},e.exports.default=e.exports,e.exports.__esModule=!0})),s=function(){function e(){this.listeners={}}var t=e.prototype;return t.on=function(e,t){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(t)},t.off=function(e,t){if(!this.listeners[e])return!1;var n=this.listeners[e].indexOf(t);return this.listeners[e]=this.listeners[e].slice(0),this.listeners[e].splice(n,1),n>-1},t.trigger=function(e){var t=this.listeners[e];if(t)if(2===arguments.length)for(var n=t.length,i=0;i<n;++i)t[i].call(this,arguments[1]);else for(var r=Array.prototype.slice.call(arguments,1),a=t.length,s=0;s<a;++s)t[s].apply(this,r)},t.dispose=function(){this.listeners={}},t.pipe=function(e){this.on("data",(function(t){e.push(t)}))},e}();var o,l=function(){var e,t,n,i,r,a,s,o,l=[[[],[],[],[],[]],[[],[],[],[],[]]],u=l[0],c=l[1],d=u[4],h=c[4],f=[],p=[];for(e=0;e<256;e++)p[(f[e]=e<<1^283*(e>>7))^e]=e;for(t=n=0;!d[t];t^=i||1,n=p[n]||1)for(a=(a=n^n<<1^n<<2^n<<3^n<<4)>>8^255&a^99,d[t]=a,h[a]=t,o=16843009*f[r=f[i=f[t]]]^65537*r^257*i^16843008*t,s=257*f[a]^16843008*a,e=0;e<4;e++)u[e][t]=s=s<<24^s>>>8,c[e][a]=o=o<<24^o>>>8;for(e=0;e<5;e++)u[e]=u[e].slice(0),c[e]=c[e].slice(0);return l},u=null,c=function(){function e(e){var t,n,i;u||(u=l()),this._tables=[[u[0][0].slice(),u[0][1].slice(),u[0][2].slice(),u[0][3].slice(),u[0][4].slice()],[u[1][0].slice(),u[1][1].slice(),u[1][2].slice(),u[1][3].slice(),u[1][4].slice()]];var r=this._tables[0][4],a=this._tables[1],s=e.length,o=1;if(4!==s&&6!==s&&8!==s)throw new Error("Invalid aes key size");var c=e.slice(0),d=[];for(this._key=[c,d],t=s;t<4*s+28;t++)i=c[t-1],(t%s===0||8===s&&t%s===4)&&(i=r[i>>>24]<<24^r[i>>16&255]<<16^r[i>>8&255]<<8^r[255&i],t%s===0&&(i=i<<8^i>>>24^o<<24,o=o<<1^283*(o>>7))),c[t]=c[t-s]^i;for(n=0;t;n++,t--)i=c[3&n?t:t-4],d[n]=t<=4||n<4?i:a[0][r[i>>>24]]^a[1][r[i>>16&255]]^a[2][r[i>>8&255]]^a[3][r[255&i]]}return e.prototype.decrypt=function(e,t,n,i,r,a){var s,o,l,u,c=this._key[1],d=e^c[0],h=i^c[1],f=n^c[2],p=t^c[3],g=c.length/4-2,m=4,v=this._tables[1],y=v[0],_=v[1],b=v[2],T=v[3],k=v[4];for(u=0;u<g;u++)s=y[d>>>24]^_[h>>16&255]^b[f>>8&255]^T[255&p]^c[m],o=y[h>>>24]^_[f>>16&255]^b[p>>8&255]^T[255&d]^c[m+1],l=y[f>>>24]^_[p>>16&255]^b[d>>8&255]^T[255&h]^c[m+2],p=y[p>>>24]^_[d>>16&255]^b[h>>8&255]^T[255&f]^c[m+3],m+=4,d=s,h=o,f=l;for(u=0;u<4;u++)r[(3&-u)+a]=k[d>>>24]<<24^k[h>>16&255]<<16^k[f>>8&255]<<8^k[255&p]^c[m++],s=d,d=h,h=f,f=p,p=s},e}(),d=function(e){function t(){var t;return(t=e.call(this,s)||this).jobs=[],t.delay=1,t.timeout_=null,t}a(t,e);var n=t.prototype;return n.processJob_=function(){this.jobs.shift()(),this.jobs.length?this.timeout_=setTimeout(this.processJob_.bind(this),this.delay):this.timeout_=null},n.push=function(e){this.jobs.push(e),this.timeout_||(this.timeout_=setTimeout(this.processJob_.bind(this),this.delay))},t}(s),h=function(e){return e<<24|(65280&e)<<8|(16711680&e)>>8|e>>>24},f=function(){function e(t,n,i,r){var a=e.STEP,s=new Int32Array(t.buffer),o=new Uint8Array(t.byteLength),l=0;for(this.asyncStream_=new d,this.asyncStream_.push(this.decryptChunk_(s.subarray(l,l+a),n,i,o)),l=a;l<s.length;l+=a)i=new Uint32Array([h(s[l-4]),h(s[l-3]),h(s[l-2]),h(s[l-1])]),this.asyncStream_.push(this.decryptChunk_(s.subarray(l,l+a),n,i,o));this.asyncStream_.push((function(){var e;r(null,(e=o).subarray(0,e.byteLength-e[e.byteLength-1]))}))}return e.prototype.decryptChunk_=function(e,t,n,i){return function(){var r=function(e,t,n){var i,r,a,s,o,l,u,d,f,p=new Int32Array(e.buffer,e.byteOffset,e.byteLength>>2),g=new c(Array.prototype.slice.call(t)),m=new Uint8Array(e.byteLength),v=new Int32Array(m.buffer);for(i=n[0],r=n[1],a=n[2],s=n[3],f=0;f<p.length;f+=4)o=h(p[f]),l=h(p[f+1]),u=h(p[f+2]),d=h(p[f+3]),g.decrypt(o,l,u,d,v,f),v[f]=h(v[f]^i),v[f+1]=h(v[f+1]^r),v[f+2]=h(v[f+2]^a),v[f+3]=h(v[f+3]^s),i=o,r=l,a=u,s=d;return m}(e,t,n);i.set(r,e.byteOffset)}},i(e,null,[{key:"STEP",get:function(){return 32e3}}]),e}();o="undefined"!==typeof window?window:"undefined"!==typeof e?e:"undefined"!==typeof self?self:{};var p=o.BigInt||Number;p("0x1"),p("0x100"),p("0x10000"),p("0x1000000"),p("0x100000000"),p("0x10000000000"),p("0x1000000000000"),p("0x100000000000000"),p("0x10000000000000000");var g=function(e){var t={};return Object.keys(e).forEach((function(n){var i,r=e[n];i=r,("function"===ArrayBuffer.isView?ArrayBuffer.isView(i):i&&i.buffer instanceof ArrayBuffer)?t[n]={bytes:r.buffer,byteOffset:r.byteOffset,byteLength:r.byteLength}:t[n]=r})),t};self.onmessage=function(e){var t=e.data,n=new Uint8Array(t.encrypted.bytes,t.encrypted.byteOffset,t.encrypted.byteLength),i=new Uint32Array(t.key.bytes,t.key.byteOffset,t.key.byteLength/4),r=new Uint32Array(t.iv.bytes,t.iv.byteOffset,t.iv.byteLength/4);new f(n,i,r,(function(e,n){self.postMessage(g({source:t.source,decrypted:n}),[n.buffer])}))}}))),Gu=Tl(qu),Xu=function(e){var t=e.default?"main":"alternative";return e.characteristics&&e.characteristics.indexOf("public.accessibility.describes-video")>=0&&(t="main-desc"),t},Ku=function(e,t){e.abort(),e.pause(),t&&t.activePlaylistLoader&&(t.activePlaylistLoader.pause(),t.activePlaylistLoader=null)},$u=function(e,t){t.activePlaylistLoader=e,e.load()},Yu={AUDIO:function(e,t){return function(){var n=t.segmentLoaders[e],i=t.mediaTypes[e],r=t.blacklistCurrentPlaylist;Ku(n,i);var a=i.activeTrack(),s=i.activeGroup(),o=(s.filter((function(e){return e.default}))[0]||s[0]).id,l=i.tracks[o];if(a!==l){for(var u in Zs.log.warn("Problem encountered loading the alternate audio track.Switching back to default."),i.tracks)i.tracks[u].enabled=i.tracks[u]===l;i.onTrackChanged()}else r({message:"Problem encountered loading the default audio track."})}},SUBTITLES:function(e,t){return function(){var n=t.segmentLoaders[e],i=t.mediaTypes[e];Zs.log.warn("Problem encountered loading the subtitle track.Disabling subtitle track."),Ku(n,i);var r=i.activeTrack();r&&(r.mode="disabled"),i.onTrackChanged()}}},Qu={AUDIO:function(e,t,n){if(t){var i=n.tech,r=n.requestOptions,a=n.segmentLoaders[e];t.on("loadedmetadata",(function(){var e=t.media();a.playlist(e,r),(!i.paused()||e.endList&&"none"!==i.preload())&&a.load()})),t.on("loadedplaylist",(function(){a.playlist(t.media(),r),i.paused()||a.load()})),t.on("error",Yu[e](e,n))}},SUBTITLES:function(e,t,n){var i=n.tech,r=n.requestOptions,a=n.segmentLoaders[e],s=n.mediaTypes[e];t.on("loadedmetadata",(function(){var e=t.media();a.playlist(e,r),a.track(s.activeTrack()),(!i.paused()||e.endList&&"none"!==i.preload())&&a.load()})),t.on("loadedplaylist",(function(){a.playlist(t.media(),r),i.paused()||a.load()})),t.on("error",Yu[e](e,n))}},Ju={AUDIO:function(e,t){var n=t.vhs,i=t.sourceType,r=t.segmentLoaders[e],a=t.requestOptions,s=t.master.mediaGroups,o=t.mediaTypes[e],l=o.groups,u=o.tracks,c=o.logger_,d=t.masterPlaylistLoader,h=Lo(d.master);for(var f in s[e]&&0!==Object.keys(s[e]).length||(s[e]={main:{default:{default:!0}}},h&&(s[e].main.default.playlists=d.master.playlists)),s[e])for(var p in l[f]||(l[f]=[]),s[e][f]){var g=s[e][f][p],m=void 0;if(h?(c("AUDIO group '"+f+"' label '"+p+"' is a master playlist"),g.isMasterPlaylist=!0,m=null):m="vhs-json"===i&&g.playlists?new Ko(g.playlists[0],n,a):g.resolvedUri?new Ko(g.resolvedUri,n,a):g.playlists&&"dash"===i?new yl(g.playlists[0],n,a,d):null,g=Zs.mergeOptions({id:p,playlistLoader:m},g),Qu[e](e,g.playlistLoader,t),l[f].push(g),"undefined"===typeof u[p]){var v=new Zs.AudioTrack({id:p,kind:Xu(g),enabled:!1,language:g.language,default:g.default,label:p});u[p]=v}}r.on("error",Yu[e](e,t))},SUBTITLES:function(e,t){var n=t.tech,i=t.vhs,r=t.sourceType,a=t.segmentLoaders[e],s=t.requestOptions,o=t.master.mediaGroups,l=t.mediaTypes[e],u=l.groups,c=l.tracks,d=t.masterPlaylistLoader;for(var h in o[e])for(var f in u[h]||(u[h]=[]),o[e][h])if(!o[e][h][f].forced){var p=o[e][h][f],g=void 0;if("hls"===r)g=new Ko(p.resolvedUri,i,s);else if("dash"===r){if(!p.playlists.filter((function(e){return e.excludeUntil!==1/0})).length)return;g=new yl(p.playlists[0],i,s,d)}else"vhs-json"===r&&(g=new Ko(p.playlists?p.playlists[0]:p.resolvedUri,i,s));if(p=Zs.mergeOptions({id:f,playlistLoader:g},p),Qu[e](e,p.playlistLoader,t),u[h].push(p),"undefined"===typeof c[f]){var m=n.addRemoteTextTrack({id:f,kind:"subtitles",default:p.default&&p.autoselect,language:p.language,label:f},!1).track;c[f]=m}}a.on("error",Yu[e](e,t))},"CLOSED-CAPTIONS":function(e,t){var n=t.tech,i=t.master.mediaGroups,r=t.mediaTypes[e],a=r.groups,s=r.tracks;for(var o in i[e])for(var l in a[o]||(a[o]=[]),i[e][o]){var u=i[e][o][l];if(/^(?:CC|SERVICE)/.test(u.instreamId)){var c=n.options_.vhs&&n.options_.vhs.captionServices||{},d={label:l,language:u.language,instreamId:u.instreamId,default:u.default&&u.autoselect};if(c[d.instreamId]&&(d=Zs.mergeOptions(d,c[d.instreamId])),void 0===d.default&&delete d.default,a[o].push(Zs.mergeOptions({id:l},u)),"undefined"===typeof s[l]){var h=n.addRemoteTextTrack({id:d.instreamId,kind:"captions",default:d.default,language:d.language,label:d.label},!1).track;s[l]=h}}}}},Zu=function e(t,n){for(var i=0;i<t.length;i++){if(Ao(n,t[i]))return!0;if(t[i].playlists&&e(t[i].playlists,n))return!0}return!1},ec={AUDIO:function(e,t){return function(){var n=t.mediaTypes[e].tracks;for(var i in n)if(n[i].enabled)return n[i];return null}},SUBTITLES:function(e,t){return function(){var n=t.mediaTypes[e].tracks;for(var i in n)if("showing"===n[i].mode||"hidden"===n[i].mode)return n[i];return null}}},tc=function(e){["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach((function(t){Ju[t](t,e)}));var t=e.mediaTypes,n=e.masterPlaylistLoader,i=e.tech,r=e.vhs,a=e.segmentLoaders,s=a.AUDIO,o=a.main;["AUDIO","SUBTITLES"].forEach((function(n){t[n].activeGroup=function(e,t){return function(n){var i=t.masterPlaylistLoader,r=t.mediaTypes[e].groups,a=i.media();if(!a)return null;var s=null;a.attributes[e]&&(s=r[a.attributes[e]]);var o=Object.keys(r);if(!s)if("AUDIO"===e&&o.length>1&&Lo(t.master))for(var l=0;l<o.length;l++){var u=r[o[l]];if(Zu(u,a)){s=u;break}}else r.main?s=r.main:1===o.length&&(s=r[o[0]]);return"undefined"===typeof n?s:null!==n&&s&&s.filter((function(e){return e.id===n.id}))[0]||null}}(n,e),t[n].activeTrack=ec[n](n,e),t[n].onGroupChanged=function(e,t){return function(){var n=t.segmentLoaders,i=n[e],r=n.main,a=t.mediaTypes[e],s=a.activeTrack(),o=a.getActiveGroup(),l=a.activePlaylistLoader,u=a.lastGroup_;o&&u&&o.id===u.id||(a.lastGroup_=o,a.lastTrack_=s,Ku(i,a),o&&!o.isMasterPlaylist&&(o.playlistLoader?(i.resyncLoader(),$u(o.playlistLoader,a)):l&&r.resetEverything()))}}(n,e),t[n].onGroupChanging=function(e,t){return function(){var n=t.segmentLoaders[e];t.mediaTypes[e].lastGroup_=null,n.abort(),n.pause()}}(n,e),t[n].onTrackChanged=function(e,t){return function(){var n=t.masterPlaylistLoader,i=t.segmentLoaders,r=i[e],a=i.main,s=t.mediaTypes[e],o=s.activeTrack(),l=s.getActiveGroup(),u=s.activePlaylistLoader,c=s.lastTrack_;if((!c||!o||c.id!==o.id)&&(s.lastGroup_=l,s.lastTrack_=o,Ku(r,s),l)){if(l.isMasterPlaylist){if(!o||!c||o.id===c.id)return;var d=t.vhs.masterPlaylistController_,h=d.selectPlaylist();if(d.media()===h)return;return s.logger_("track change. Switching master audio from "+c.id+" to "+o.id),n.pause(),a.resetEverything(),void d.fastQualityChange_(h)}if("AUDIO"===e){if(!l.playlistLoader)return a.setAudio(!0),void a.resetEverything();r.setAudio(!0),a.setAudio(!1)}u!==l.playlistLoader?(r.track&&r.track(o),r.resetEverything(),$u(l.playlistLoader,s)):$u(l.playlistLoader,s)}}}(n,e),t[n].getActiveGroup=function(e,t){var n=t.mediaTypes;return function(){var t=n[e].activeTrack();return t?n[e].activeGroup(t):null}}(n,e)}));var l=t.AUDIO.activeGroup();if(l){var u=(l.filter((function(e){return e.default}))[0]||l[0]).id;t.AUDIO.tracks[u].enabled=!0,t.AUDIO.onGroupChanged(),t.AUDIO.onTrackChanged(),t.AUDIO.getActiveGroup().playlistLoader?(o.setAudio(!1),s.setAudio(!0)):o.setAudio(!0)}n.on("mediachange",(function(){["AUDIO","SUBTITLES"].forEach((function(e){return t[e].onGroupChanged()}))})),n.on("mediachanging",(function(){["AUDIO","SUBTITLES"].forEach((function(e){return t[e].onGroupChanging()}))}));var c=function(){t.AUDIO.onTrackChanged(),i.trigger({type:"usage",name:"vhs-audio-change"}),i.trigger({type:"usage",name:"hls-audio-change"})};for(var d in i.audioTracks().addEventListener("change",c),i.remoteTextTracks().addEventListener("change",t.SUBTITLES.onTrackChanged),r.on("dispose",(function(){i.audioTracks().removeEventListener("change",c),i.remoteTextTracks().removeEventListener("change",t.SUBTITLES.onTrackChanged)})),i.clearTracks("audio"),t.AUDIO.tracks)i.audioTracks().addTrack(t.AUDIO.tracks[d])},nc=function(){var e={};return["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach((function(t){e[t]={groups:{},tracks:{},activePlaylistLoader:null,activeGroup:mu,activeTrack:mu,getActiveGroup:mu,onGroupChanged:mu,onTrackChanged:mu,lastTrack_:null,logger_:ro("MediaGroups["+t+"]")}})),e},ic=["mediaRequests","mediaRequestsAborted","mediaRequestsTimedout","mediaRequestsErrored","mediaTransferDuration","mediaBytesTransferred","mediaAppends"],rc=function(e){return this.audioSegmentLoader_[e]+this.mainSegmentLoader_[e]},ac=function(e){function t(t){var n;n=e.call(this)||this;var i=t.src,a=t.handleManifestRedirects,s=t.withCredentials,o=t.tech,l=t.bandwidth,u=t.externVhs,d=t.useCueTags,h=t.blacklistDuration,f=t.enableLowInitialPlaylist,p=t.sourceType,g=t.cacheEncryptionKeys,m=t.experimentalBufferBasedABR,v=t.experimentalLeastPixelDiffSelector,y=t.captionServices;if(!i)throw new Error("A non-empty playlist URL or JSON manifest string is required");var _=t.maxPlaylistRetries;null!==_&&"undefined"!==typeof _||(_=1/0),vu=u,n.experimentalBufferBasedABR=Boolean(m),n.experimentalLeastPixelDiffSelector=Boolean(v),n.withCredentials=s,n.tech_=o,n.vhs_=o.vhs,n.sourceType_=p,n.useCueTags_=d,n.blacklistDuration=h,n.maxPlaylistRetries=_,n.enableLowInitialPlaylist=f,n.useCueTags_&&(n.cueTagsTrack_=n.tech_.addTextTrack("metadata","ad-cues"),n.cueTagsTrack_.inBandMetadataTrackDispatchType=""),n.requestOptions_={withCredentials:s,handleManifestRedirects:a,maxPlaylistRetries:_,timeout:null},n.on("error",n.pauseLoading),n.mediaTypes_=nc(),n.mediaSource=new(r().MediaSource),n.handleDurationChange_=n.handleDurationChange_.bind(c(n)),n.handleSourceOpen_=n.handleSourceOpen_.bind(c(n)),n.handleSourceEnded_=n.handleSourceEnded_.bind(c(n)),n.mediaSource.addEventListener("durationchange",n.handleDurationChange_),n.mediaSource.addEventListener("sourceopen",n.handleSourceOpen_),n.mediaSource.addEventListener("sourceended",n.handleSourceEnded_),n.seekable_=Zs.createTimeRanges(),n.hasPlayed_=!1,n.syncController_=new Hu(t),n.segmentMetadataTrack_=o.addRemoteTextTrack({kind:"metadata",label:"segment-metadata"},!1).track,n.decrypter_=new Gu,n.sourceUpdater_=new Nu(n.mediaSource),n.inbandTextTracks_={},n.timelineChangeController_=new Wu;var b={vhs:n.vhs_,parse708captions:t.parse708captions,useDtsForTimestampOffset:t.useDtsForTimestampOffset,captionServices:y,mediaSource:n.mediaSource,currentTime:n.tech_.currentTime.bind(n.tech_),seekable:function(){return n.seekable()},seeking:function(){return n.tech_.seeking()},duration:function(){return n.duration()},hasPlayed:function(){return n.hasPlayed_},goalBufferLength:function(){return n.goalBufferLength()},bandwidth:l,syncController:n.syncController_,decrypter:n.decrypter_,sourceType:n.sourceType_,inbandTextTracks:n.inbandTextTracks_,cacheEncryptionKeys:g,sourceUpdater:n.sourceUpdater_,timelineChangeController:n.timelineChangeController_,experimentalExactManifestTimings:t.experimentalExactManifestTimings};n.masterPlaylistLoader_="dash"===n.sourceType_?new yl(i,n.vhs_,n.requestOptions_):new Ko(i,n.vhs_,n.requestOptions_),n.setupMasterPlaylistLoaderListeners_(),n.mainSegmentLoader_=new gu(Zs.mergeOptions(b,{segmentMetadataTrack:n.segmentMetadataTrack_,loaderType:"main"}),t),n.audioSegmentLoader_=new gu(Zs.mergeOptions(b,{loaderType:"audio"}),t),n.subtitleSegmentLoader_=new Bu(Zs.mergeOptions(b,{loaderType:"vtt",featuresNativeTextTracks:n.tech_.featuresNativeTextTracks,loadVttJs:function(){return new Promise((function(e,t){function n(){o.off("vttjserror",i),e()}function i(){o.off("vttjsloaded",n),t()}o.one("vttjsloaded",n),o.one("vttjserror",i),o.addWebVttScript_()}))}}),t),n.setupSegmentLoaderListeners_(),n.experimentalBufferBasedABR&&(n.masterPlaylistLoader_.one("loadedplaylist",(function(){return n.startABRTimer_()})),n.tech_.on("pause",(function(){return n.stopABRTimer_()})),n.tech_.on("play",(function(){return n.startABRTimer_()}))),ic.forEach((function(e){n[e+"_"]=rc.bind(c(n),e)})),n.logger_=ro("MPC"),n.triggeredFmp4Usage=!1,"none"===n.tech_.preload()?(n.loadOnPlay_=function(){n.loadOnPlay_=null,n.masterPlaylistLoader_.load()},n.tech_.one("play",n.loadOnPlay_)):n.masterPlaylistLoader_.load(),n.timeToLoadedData__=-1,n.mainAppendsToLoadedData__=-1,n.audioAppendsToLoadedData__=-1;var T="none"===n.tech_.preload()?"play":"loadstart";return n.tech_.one(T,(function(){var e=Date.now();n.tech_.one("loadeddata",(function(){n.timeToLoadedData__=Date.now()-e,n.mainAppendsToLoadedData__=n.mainSegmentLoader_.mediaAppends,n.audioAppendsToLoadedData__=n.audioSegmentLoader_.mediaAppends}))})),n}h(t,e);var n=t.prototype;return n.mainAppendsToLoadedData_=function(){return this.mainAppendsToLoadedData__},n.audioAppendsToLoadedData_=function(){return this.audioAppendsToLoadedData__},n.appendsToLoadedData_=function(){var e=this.mainAppendsToLoadedData_(),t=this.audioAppendsToLoadedData_();return-1===e||-1===t?-1:e+t},n.timeToLoadedData_=function(){return this.timeToLoadedData__},n.checkABR_=function(e){void 0===e&&(e="abr");var t=this.selectPlaylist();t&&this.shouldSwitchToMedia_(t)&&this.switchMedia_(t,e)},n.switchMedia_=function(e,t,n){var i=this.media(),r=i&&(i.id||i.uri),a=e.id||e.uri;r&&r!==a&&(this.logger_("switch media "+r+" -> "+a+" from "+t),this.tech_.trigger({type:"usage",name:"vhs-rendition-change-"+t})),this.masterPlaylistLoader_.media(e,n)},n.startABRTimer_=function(){var e=this;this.stopABRTimer_(),this.abrTimer_=r().setInterval((function(){return e.checkABR_()}),250)},n.stopABRTimer_=function(){this.tech_.scrubbing&&this.tech_.scrubbing()||(r().clearInterval(this.abrTimer_),this.abrTimer_=null)},n.getAudioTrackPlaylists_=function(){var e=this.master(),t=e&&e.playlists||[];if(!e||!e.mediaGroups||!e.mediaGroups.AUDIO)return t;var n,i=e.mediaGroups.AUDIO,r=Object.keys(i);if(Object.keys(this.mediaTypes_.AUDIO.groups).length)n=this.mediaTypes_.AUDIO.activeTrack();else{var a=i.main||r.length&&i[r[0]];for(var s in a)if(a[s].default){n={label:s};break}}if(!n)return t;var o=[];for(var l in i)if(i[l][n.label]){var u=i[l][n.label];if(u.playlists&&u.playlists.length)o.push.apply(o,u.playlists);else if(u.uri)o.push(u);else if(e.playlists.length)for(var c=0;c<e.playlists.length;c++){var d=e.playlists[c];d.attributes&&d.attributes.AUDIO&&d.attributes.AUDIO===l&&o.push(d)}}return o.length?o:t},n.setupMasterPlaylistLoaderListeners_=function(){var e=this;this.masterPlaylistLoader_.on("loadedmetadata",(function(){var t=e.masterPlaylistLoader_.media(),n=1.5*t.targetDuration*1e3;Io(e.masterPlaylistLoader_.master,e.masterPlaylistLoader_.media())?e.requestOptions_.timeout=0:e.requestOptions_.timeout=n,t.endList&&"none"!==e.tech_.preload()&&(e.mainSegmentLoader_.playlist(t,e.requestOptions_),e.mainSegmentLoader_.load()),tc({sourceType:e.sourceType_,segmentLoaders:{AUDIO:e.audioSegmentLoader_,SUBTITLES:e.subtitleSegmentLoader_,main:e.mainSegmentLoader_},tech:e.tech_,requestOptions:e.requestOptions_,masterPlaylistLoader:e.masterPlaylistLoader_,vhs:e.vhs_,master:e.master(),mediaTypes:e.mediaTypes_,blacklistCurrentPlaylist:e.blacklistCurrentPlaylist.bind(e)}),e.triggerPresenceUsage_(e.master(),t),e.setupFirstPlay(),!e.mediaTypes_.AUDIO.activePlaylistLoader||e.mediaTypes_.AUDIO.activePlaylistLoader.media()?e.trigger("selectedinitialmedia"):e.mediaTypes_.AUDIO.activePlaylistLoader.one("loadedmetadata",(function(){e.trigger("selectedinitialmedia")}))})),this.masterPlaylistLoader_.on("loadedplaylist",(function(){e.loadOnPlay_&&e.tech_.off("play",e.loadOnPlay_);var t=e.masterPlaylistLoader_.media();if(!t){var n;if(e.excludeUnsupportedVariants_(),e.enableLowInitialPlaylist&&(n=e.selectInitialPlaylist()),n||(n=e.selectPlaylist()),!n||!e.shouldSwitchToMedia_(n))return;if(e.initialMedia_=n,e.switchMedia_(e.initialMedia_,"initial"),!("vhs-json"===e.sourceType_&&e.initialMedia_.segments))return;t=e.initialMedia_}e.handleUpdatedMediaPlaylist(t)})),this.masterPlaylistLoader_.on("error",(function(){e.blacklistCurrentPlaylist(e.masterPlaylistLoader_.error)})),this.masterPlaylistLoader_.on("mediachanging",(function(){e.mainSegmentLoader_.abort(),e.mainSegmentLoader_.pause()})),this.masterPlaylistLoader_.on("mediachange",(function(){var t=e.masterPlaylistLoader_.media(),n=1.5*t.targetDuration*1e3;Io(e.masterPlaylistLoader_.master,e.masterPlaylistLoader_.media())?e.requestOptions_.timeout=0:e.requestOptions_.timeout=n,e.masterPlaylistLoader_.load(),e.mainSegmentLoader_.playlist(t,e.requestOptions_),e.mainSegmentLoader_.load(),e.tech_.trigger({type:"mediachange",bubbles:!0})})),this.masterPlaylistLoader_.on("playlistunchanged",(function(){var t=e.masterPlaylistLoader_.media();"playlist-unchanged"!==t.lastExcludeReason_&&(e.stuckAtPlaylistEnd_(t)&&(e.blacklistCurrentPlaylist({message:"Playlist no longer updating.",reason:"playlist-unchanged"}),e.tech_.trigger("playliststuck")))})),this.masterPlaylistLoader_.on("renditiondisabled",(function(){e.tech_.trigger({type:"usage",name:"vhs-rendition-disabled"}),e.tech_.trigger({type:"usage",name:"hls-rendition-disabled"})})),this.masterPlaylistLoader_.on("renditionenabled",(function(){e.tech_.trigger({type:"usage",name:"vhs-rendition-enabled"}),e.tech_.trigger({type:"usage",name:"hls-rendition-enabled"})}))},n.handleUpdatedMediaPlaylist=function(e){this.useCueTags_&&this.updateAdCues_(e),this.mainSegmentLoader_.playlist(e,this.requestOptions_),this.updateDuration(!e.endList),this.tech_.paused()||(this.mainSegmentLoader_.load(),this.audioSegmentLoader_&&this.audioSegmentLoader_.load())},n.triggerPresenceUsage_=function(e,t){var n=e.mediaGroups||{},i=!0,r=Object.keys(n.AUDIO);for(var a in n.AUDIO)for(var s in n.AUDIO[a]){n.AUDIO[a][s].uri||(i=!1)}i&&(this.tech_.trigger({type:"usage",name:"vhs-demuxed"}),this.tech_.trigger({type:"usage",name:"hls-demuxed"})),Object.keys(n.SUBTITLES).length&&(this.tech_.trigger({type:"usage",name:"vhs-webvtt"}),this.tech_.trigger({type:"usage",name:"hls-webvtt"})),vu.Playlist.isAes(t)&&(this.tech_.trigger({type:"usage",name:"vhs-aes"}),this.tech_.trigger({type:"usage",name:"hls-aes"})),r.length&&Object.keys(n.AUDIO[r[0]]).length>1&&(this.tech_.trigger({type:"usage",name:"vhs-alternate-audio"}),this.tech_.trigger({type:"usage",name:"hls-alternate-audio"})),this.useCueTags_&&(this.tech_.trigger({type:"usage",name:"vhs-playlist-cue-tags"}),this.tech_.trigger({type:"usage",name:"hls-playlist-cue-tags"}))},n.shouldSwitchToMedia_=function(e){var t=this.masterPlaylistLoader_.media()||this.masterPlaylistLoader_.pendingMedia_,n=this.tech_.currentTime(),i=this.bufferLowWaterLine(),r=this.bufferHighWaterLine();return function(e){var t=e.currentPlaylist,n=e.buffered,i=e.currentTime,r=e.nextPlaylist,a=e.bufferLowWaterLine,s=e.bufferHighWaterLine,o=e.duration,l=e.experimentalBufferBasedABR,u=e.log;if(!r)return Zs.log.warn("We received no playlist to switch to. Please check your stream."),!1;var c="allowing switch "+(t&&t.id||"null")+" -> "+r.id;if(!t)return u(c+" as current playlist is not set"),!0;if(r.id===t.id)return!1;var d=Boolean(lo(n,i).length);if(!t.endList)return d||"number"!==typeof t.partTargetDuration?(u(c+" as current playlist is live"),!0):(u("not "+c+" as current playlist is live llhls, but currentTime isn't in buffered."),!1);var h=po(n,i),f=l?_l.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE:_l.MAX_BUFFER_LOW_WATER_LINE;if(o<f)return u(c+" as duration < max low water line ("+o+" < "+f+")"),!0;var p=r.attributes.BANDWIDTH,g=t.attributes.BANDWIDTH;if(p<g&&(!l||h<s)){var m=c+" as next bandwidth < current bandwidth ("+p+" < "+g+")";return l&&(m+=" and forwardBuffer < bufferHighWaterLine ("+h+" < "+s+")"),u(m),!0}if((!l||p>g)&&h>=a){var v=c+" as forwardBuffer >= bufferLowWaterLine ("+h+" >= "+a+")";return l&&(v+=" and next bandwidth > current bandwidth ("+p+" > "+g+")"),u(v),!0}return u("not "+c+" as no switching criteria met"),!1}({buffered:this.tech_.buffered(),currentTime:n,currentPlaylist:t,nextPlaylist:e,bufferLowWaterLine:i,bufferHighWaterLine:r,duration:this.duration(),experimentalBufferBasedABR:this.experimentalBufferBasedABR,log:this.logger_})},n.setupSegmentLoaderListeners_=function(){var e=this;this.mainSegmentLoader_.on("bandwidthupdate",(function(){e.checkABR_("bandwidthupdate"),e.tech_.trigger("bandwidthupdate")})),this.mainSegmentLoader_.on("timeout",(function(){e.experimentalBufferBasedABR&&e.mainSegmentLoader_.load()})),this.experimentalBufferBasedABR||this.mainSegmentLoader_.on("progress",(function(){e.trigger("progress")})),this.mainSegmentLoader_.on("error",(function(){e.blacklistCurrentPlaylist(e.mainSegmentLoader_.error())})),this.mainSegmentLoader_.on("appenderror",(function(){e.error=e.mainSegmentLoader_.error_,e.trigger("error")})),this.mainSegmentLoader_.on("syncinfoupdate",(function(){e.onSyncInfoUpdate_()})),this.mainSegmentLoader_.on("timestampoffset",(function(){e.tech_.trigger({type:"usage",name:"vhs-timestamp-offset"}),e.tech_.trigger({type:"usage",name:"hls-timestamp-offset"})})),this.audioSegmentLoader_.on("syncinfoupdate",(function(){e.onSyncInfoUpdate_()})),this.audioSegmentLoader_.on("appenderror",(function(){e.error=e.audioSegmentLoader_.error_,e.trigger("error")})),this.mainSegmentLoader_.on("ended",(function(){e.logger_("main segment loader ended"),e.onEndOfStream()})),this.mainSegmentLoader_.on("earlyabort",(function(t){e.experimentalBufferBasedABR||(e.delegateLoaders_("all",["abort"]),e.blacklistCurrentPlaylist({message:"Aborted early because there isn't enough bandwidth to complete the request without rebuffering."},120))}));var t=function(){if(!e.sourceUpdater_.hasCreatedSourceBuffers())return e.tryToCreateSourceBuffers_();var t=e.getCodecsOrExclude_();t&&e.sourceUpdater_.addOrChangeSourceBuffers(t)};this.mainSegmentLoader_.on("trackinfo",t),this.audioSegmentLoader_.on("trackinfo",t),this.mainSegmentLoader_.on("fmp4",(function(){e.triggeredFmp4Usage||(e.tech_.trigger({type:"usage",name:"vhs-fmp4"}),e.tech_.trigger({type:"usage",name:"hls-fmp4"}),e.triggeredFmp4Usage=!0)})),this.audioSegmentLoader_.on("fmp4",(function(){e.triggeredFmp4Usage||(e.tech_.trigger({type:"usage",name:"vhs-fmp4"}),e.tech_.trigger({type:"usage",name:"hls-fmp4"}),e.triggeredFmp4Usage=!0)})),this.audioSegmentLoader_.on("ended",(function(){e.logger_("audioSegmentLoader ended"),e.onEndOfStream()}))},n.mediaSecondsLoaded_=function(){return Math.max(this.audioSegmentLoader_.mediaSecondsLoaded+this.mainSegmentLoader_.mediaSecondsLoaded)},n.load=function(){this.mainSegmentLoader_.load(),this.mediaTypes_.AUDIO.activePlaylistLoader&&this.audioSegmentLoader_.load(),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&this.subtitleSegmentLoader_.load()},n.smoothQualityChange_=function(e){void 0===e&&(e=this.selectPlaylist()),this.fastQualityChange_(e)},n.fastQualityChange_=function(e){var t=this;void 0===e&&(e=this.selectPlaylist()),e!==this.masterPlaylistLoader_.media()?(this.switchMedia_(e,"fast-quality"),this.mainSegmentLoader_.resetEverything((function(){Zs.browser.IE_VERSION||Zs.browser.IS_EDGE?t.tech_.setCurrentTime(t.tech_.currentTime()+.04):t.tech_.setCurrentTime(t.tech_.currentTime())}))):this.logger_("skipping fastQualityChange because new media is same as old")},n.play=function(){if(!this.setupFirstPlay()){this.tech_.ended()&&this.tech_.setCurrentTime(0),this.hasPlayed_&&this.load();var e=this.tech_.seekable();return this.tech_.duration()===1/0&&this.tech_.currentTime()<e.start(0)?this.tech_.setCurrentTime(e.end(e.length-1)):void 0}},n.setupFirstPlay=function(){var e=this,t=this.masterPlaylistLoader_.media();if(!t||this.tech_.paused()||this.hasPlayed_)return!1;if(!t.endList){var n=this.seekable();if(!n.length)return!1;if(Zs.browser.IE_VERSION&&0===this.tech_.readyState())return this.tech_.one("loadedmetadata",(function(){e.trigger("firstplay"),e.tech_.setCurrentTime(n.end(0)),e.hasPlayed_=!0})),!1;this.trigger("firstplay"),this.tech_.setCurrentTime(n.end(0))}return this.hasPlayed_=!0,this.load(),!0},n.handleSourceOpen_=function(){if(this.tryToCreateSourceBuffers_(),this.tech_.autoplay()){var e=this.tech_.play();"undefined"!==typeof e&&"function"===typeof e.then&&e.then(null,(function(e){}))}this.trigger("sourceopen")},n.handleSourceEnded_=function(){if(this.inbandTextTracks_.metadataTrack_){var e=this.inbandTextTracks_.metadataTrack_.cues;if(e&&e.length){var t=this.duration();e[e.length-1].endTime=isNaN(t)||Math.abs(t)===1/0?Number.MAX_VALUE:t}}},n.handleDurationChange_=function(){this.tech_.trigger("durationchange")},n.onEndOfStream=function(){var e=this.mainSegmentLoader_.ended_;if(this.mediaTypes_.AUDIO.activePlaylistLoader){var t=this.mainSegmentLoader_.getCurrentMediaInfo_();e=!t||t.hasVideo?e&&this.audioSegmentLoader_.ended_:this.audioSegmentLoader_.ended_}e&&(this.stopABRTimer_(),this.sourceUpdater_.endOfStream())},n.stuckAtPlaylistEnd_=function(e){if(!this.seekable().length)return!1;var t=this.syncController_.getExpiredTime(e,this.duration());if(null===t)return!1;var n=vu.Playlist.playlistEnd(e,t),i=this.tech_.currentTime(),r=this.tech_.buffered();if(!r.length)return n-i<=so;var a=r.end(r.length-1);return a-i<=so&&n-a<=so},n.blacklistCurrentPlaylist=function(e,t){void 0===e&&(e={});var n=e.playlist||this.masterPlaylistLoader_.media();if(t=t||e.blacklistDuration||this.blacklistDuration,!n)return this.error=e,void("open"!==this.mediaSource.readyState?this.trigger("error"):this.sourceUpdater_.endOfStream("network"));n.playlistErrors_++;var i,r=this.masterPlaylistLoader_.master.playlists,a=r.filter(Co),s=1===a.length&&a[0]===n;if(1===r.length&&t!==1/0)return Zs.log.warn("Problem encountered with playlist "+n.id+". Trying again since it is the only playlist."),this.tech_.trigger("retryplaylist"),this.masterPlaylistLoader_.load(s);if(s){var o=!1;r.forEach((function(e){if(e!==n){var t=e.excludeUntil;"undefined"!==typeof t&&t!==1/0&&(o=!0,delete e.excludeUntil)}})),o&&(Zs.log.warn("Removing other playlists from the exclusion list because the last rendition is about to be excluded."),this.tech_.trigger("retryplaylist"))}i=n.playlistErrors_>this.maxPlaylistRetries?1/0:Date.now()+1e3*t,n.excludeUntil=i,e.reason&&(n.lastExcludeReason_=e.reason),this.tech_.trigger("blacklistplaylist"),this.tech_.trigger({type:"usage",name:"vhs-rendition-blacklisted"}),this.tech_.trigger({type:"usage",name:"hls-rendition-blacklisted"});var l=this.selectPlaylist();if(!l)return this.error="Playback cannot continue. No available working or supported playlists.",void this.trigger("error");var u=e.internal?this.logger_:Zs.log.warn,c=e.message?" "+e.message:"";u((e.internal?"Internal problem":"Problem")+" encountered with playlist "+n.id+"."+c+" Switching to playlist "+l.id+"."),l.attributes.AUDIO!==n.attributes.AUDIO&&this.delegateLoaders_("audio",["abort","pause"]),l.attributes.SUBTITLES!==n.attributes.SUBTITLES&&this.delegateLoaders_("subtitle",["abort","pause"]),this.delegateLoaders_("main",["abort","pause"]);var d=l.targetDuration/2*1e3||5e3,h="number"===typeof l.lastRequest&&Date.now()-l.lastRequest<=d;return this.switchMedia_(l,"exclude",s||h)},n.pauseLoading=function(){this.delegateLoaders_("all",["abort","pause"]),this.stopABRTimer_()},n.delegateLoaders_=function(e,t){var n=this,i=[],r="all"===e;(r||"main"===e)&&i.push(this.masterPlaylistLoader_);var a=[];(r||"audio"===e)&&a.push("AUDIO"),(r||"subtitle"===e)&&(a.push("CLOSED-CAPTIONS"),a.push("SUBTITLES")),a.forEach((function(e){var t=n.mediaTypes_[e]&&n.mediaTypes_[e].activePlaylistLoader;t&&i.push(t)})),["main","audio","subtitle"].forEach((function(t){var r=n[t+"SegmentLoader_"];!r||e!==t&&"all"!==e||i.push(r)})),i.forEach((function(e){return t.forEach((function(t){"function"===typeof e[t]&&e[t]()}))}))},n.setCurrentTime=function(e){var t=lo(this.tech_.buffered(),e);return this.masterPlaylistLoader_&&this.masterPlaylistLoader_.media()&&this.masterPlaylistLoader_.media().segments?t&&t.length?e:(this.mainSegmentLoader_.resetEverything(),this.mainSegmentLoader_.abort(),this.mediaTypes_.AUDIO.activePlaylistLoader&&(this.audioSegmentLoader_.resetEverything(),this.audioSegmentLoader_.abort()),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&(this.subtitleSegmentLoader_.resetEverything(),this.subtitleSegmentLoader_.abort()),void this.load()):0},n.duration=function(){if(!this.masterPlaylistLoader_)return 0;var e=this.masterPlaylistLoader_.media();return e?e.endList?this.mediaSource?this.mediaSource.duration:vu.Playlist.duration(e):1/0:0},n.seekable=function(){return this.seekable_},n.onSyncInfoUpdate_=function(){var e;if(this.masterPlaylistLoader_){var t=this.masterPlaylistLoader_.media();if(t){var n=this.syncController_.getExpiredTime(t,this.duration());if(null!==n){var i=this.masterPlaylistLoader_.master,r=vu.Playlist.seekable(t,n,vu.Playlist.liveEdgeDelay(i,t));if(0!==r.length){if(this.mediaTypes_.AUDIO.activePlaylistLoader){if(t=this.mediaTypes_.AUDIO.activePlaylistLoader.media(),null===(n=this.syncController_.getExpiredTime(t,this.duration())))return;if(0===(e=vu.Playlist.seekable(t,n,vu.Playlist.liveEdgeDelay(i,t))).length)return}var a,s;this.seekable_&&this.seekable_.length&&(a=this.seekable_.end(0),s=this.seekable_.start(0)),e?e.start(0)>r.end(0)||r.start(0)>e.end(0)?this.seekable_=r:this.seekable_=Zs.createTimeRanges([[e.start(0)>r.start(0)?e.start(0):r.start(0),e.end(0)<r.end(0)?e.end(0):r.end(0)]]):this.seekable_=r,this.seekable_&&this.seekable_.length&&this.seekable_.end(0)===a&&this.seekable_.start(0)===s||(this.logger_("seekable updated ["+co(this.seekable_)+"]"),this.tech_.trigger("seekablechanged"))}}}}},n.updateDuration=function(e){if(this.updateDuration_&&(this.mediaSource.removeEventListener("sourceopen",this.updateDuration_),this.updateDuration_=null),"open"!==this.mediaSource.readyState)return this.updateDuration_=this.updateDuration.bind(this,e),void this.mediaSource.addEventListener("sourceopen",this.updateDuration_);if(e){var t=this.seekable();if(!t.length)return;(isNaN(this.mediaSource.duration)||this.mediaSource.duration<t.end(t.length-1))&&this.sourceUpdater_.setDuration(t.end(t.length-1))}else{var n=this.tech_.buffered(),i=vu.Playlist.duration(this.masterPlaylistLoader_.media());n.length>0&&(i=Math.max(i,n.end(n.length-1))),this.mediaSource.duration!==i&&this.sourceUpdater_.setDuration(i)}},n.dispose=function(){var e=this;this.trigger("dispose"),this.decrypter_.terminate(),this.masterPlaylistLoader_.dispose(),this.mainSegmentLoader_.dispose(),this.loadOnPlay_&&this.tech_.off("play",this.loadOnPlay_),["AUDIO","SUBTITLES"].forEach((function(t){var n=e.mediaTypes_[t].groups;for(var i in n)n[i].forEach((function(e){e.playlistLoader&&e.playlistLoader.dispose()}))})),this.audioSegmentLoader_.dispose(),this.subtitleSegmentLoader_.dispose(),this.sourceUpdater_.dispose(),this.timelineChangeController_.dispose(),this.stopABRTimer_(),this.updateDuration_&&this.mediaSource.removeEventListener("sourceopen",this.updateDuration_),this.mediaSource.removeEventListener("durationchange",this.handleDurationChange_),this.mediaSource.removeEventListener("sourceopen",this.handleSourceOpen_),this.mediaSource.removeEventListener("sourceended",this.handleSourceEnded_),this.off()},n.master=function(){return this.masterPlaylistLoader_.master},n.media=function(){return this.masterPlaylistLoader_.media()||this.initialMedia_},n.areMediaTypesKnown_=function(){var e=!!this.mediaTypes_.AUDIO.activePlaylistLoader,t=!!this.mainSegmentLoader_.getCurrentMediaInfo_(),n=!e||!!this.audioSegmentLoader_.getCurrentMediaInfo_();return!(!t||!n)},n.getCodecsOrExclude_=function(){var e=this,t={main:this.mainSegmentLoader_.getCurrentMediaInfo_()||{},audio:this.audioSegmentLoader_.getCurrentMediaInfo_()||{}},n=this.mainSegmentLoader_.getPendingSegmentPlaylist()||this.media();t.video=t.main;var i=Jl(this.master(),n),r={},a=!!this.mediaTypes_.AUDIO.activePlaylistLoader;if(t.main.hasVideo&&(r.video=i.video||t.main.videoCodec||"avc1.4d400d"),t.main.isMuxed&&(r.video+=","+(i.audio||t.main.audioCodec||q)),(t.main.hasAudio&&!t.main.isMuxed||t.audio.hasAudio||a)&&(r.audio=i.audio||t.main.audioCodec||t.audio.audioCodec||q,t.audio.isFmp4=t.main.hasAudio&&!t.main.isMuxed?t.main.isFmp4:t.audio.isFmp4),r.audio||r.video){var s,o={};if(["video","audio"].forEach((function(e){if(r.hasOwnProperty(e)&&(i=t[e].isFmp4,a=r[e],!(i?H(a):W(a)))){var n=t[e].isFmp4?"browser":"muxer";o[n]=o[n]||[],o[n].push(r[e]),"audio"===e&&(s=n)}var i,a})),a&&s&&n.attributes.AUDIO){var l=n.attributes.AUDIO;this.master().playlists.forEach((function(e){(e.attributes&&e.attributes.AUDIO)===l&&e!==n&&(e.excludeUntil=1/0)})),this.logger_("excluding audio group "+l+" as "+s+' does not support codec(s): "'+r.audio+'"')}if(!Object.keys(o).length){if(this.sourceUpdater_.hasCreatedSourceBuffers()&&!this.sourceUpdater_.canChangeType()){var u=[];if(["video","audio"].forEach((function(t){var n=(B(e.sourceUpdater_.codecs[t]||"")[0]||{}).type,i=(B(r[t]||"")[0]||{}).type;n&&i&&n.toLowerCase()!==i.toLowerCase()&&u.push('"'+e.sourceUpdater_.codecs[t]+'" -> "'+r[t]+'"')})),u.length)return void this.blacklistCurrentPlaylist({playlist:n,message:"Codec switching not supported: "+u.join(", ")+".",blacklistDuration:1/0,internal:!0})}return r}var c=Object.keys(o).reduce((function(e,t){return e&&(e+=", "),e+=t+' does not support codec(s): "'+o[t].join(",")+'"'}),"")+".";this.blacklistCurrentPlaylist({playlist:n,internal:!0,message:c,blacklistDuration:1/0})}else this.blacklistCurrentPlaylist({playlist:n,message:"Could not determine codecs for playlist.",blacklistDuration:1/0})},n.tryToCreateSourceBuffers_=function(){if("open"===this.mediaSource.readyState&&!this.sourceUpdater_.hasCreatedSourceBuffers()&&this.areMediaTypesKnown_()){var e=this.getCodecsOrExclude_();if(e){this.sourceUpdater_.createSourceBuffers(e);var t=[e.video,e.audio].filter(Boolean).join(",");this.excludeIncompatibleVariants_(t)}}},n.excludeUnsupportedVariants_=function(){var e=this,t=this.master().playlists,n=[];Object.keys(t).forEach((function(i){var r=t[i];if(-1===n.indexOf(r.id)){n.push(r.id);var a=Jl(e.master,r),s=[];!a.audio||W(a.audio)||H(a.audio)||s.push("audio codec "+a.audio),!a.video||W(a.video)||H(a.video)||s.push("video codec "+a.video),a.text&&"stpp.ttml.im1t"===a.text&&s.push("text codec "+a.text),s.length&&(r.excludeUntil=1/0,e.logger_("excluding "+r.id+" for unsupported: "+s.join(", ")))}}))},n.excludeIncompatibleVariants_=function(e){var t=this,n=[],i=this.master().playlists,r=Yl(B(e)),a=Ql(r),s=r.video&&B(r.video)[0]||null,o=r.audio&&B(r.audio)[0]||null;Object.keys(i).forEach((function(e){var r=i[e];if(-1===n.indexOf(r.id)&&r.excludeUntil!==1/0){n.push(r.id);var l=[],u=Jl(t.masterPlaylistLoader_.master,r),c=Ql(u);if(u.audio||u.video){if(c!==a&&l.push('codec count "'+c+'" !== "'+a+'"'),!t.sourceUpdater_.canChangeType()){var d=u.video&&B(u.video)[0]||null,h=u.audio&&B(u.audio)[0]||null;d&&s&&d.type.toLowerCase()!==s.type.toLowerCase()&&l.push('video codec "'+d.type+'" !== "'+s.type+'"'),h&&o&&h.type.toLowerCase()!==o.type.toLowerCase()&&l.push('audio codec "'+h.type+'" !== "'+o.type+'"')}l.length&&(r.excludeUntil=1/0,t.logger_("blacklisting "+r.id+": "+l.join(" && ")))}}}))},n.updateAdCues_=function(e){var t=0,n=this.seekable();n.length&&(t=n.start(0)),function(e,t,n){if(void 0===n&&(n=0),e.segments)for(var i,a=n,s=0;s<e.segments.length;s++){var o=e.segments[s];if(i||(i=zu(t,a+o.duration/2)),i){if("cueIn"in o){i.endTime=a,i.adEndTime=a,a+=o.duration,i=null;continue}if(a<i.endTime){a+=o.duration;continue}i.endTime+=o.duration}else if("cueOut"in o&&((i=new(r().VTTCue)(a,a+o.duration,o.cueOut)).adStartTime=a,i.adEndTime=a+parseFloat(o.cueOut),t.addCue(i)),"cueOutCont"in o){var l=o.cueOutCont.split("/").map(parseFloat),u=l[0],c=l[1];(i=new(r().VTTCue)(a,a+o.duration,"")).adStartTime=a-u,i.adEndTime=i.adStartTime+c,t.addCue(i)}a+=o.duration}}(e,this.cueTagsTrack_,t)},n.goalBufferLength=function(){var e=this.tech_.currentTime(),t=_l.GOAL_BUFFER_LENGTH,n=_l.GOAL_BUFFER_LENGTH_RATE,i=Math.max(t,_l.MAX_GOAL_BUFFER_LENGTH);return Math.min(t+e*n,i)},n.bufferLowWaterLine=function(){var e=this.tech_.currentTime(),t=_l.BUFFER_LOW_WATER_LINE,n=_l.BUFFER_LOW_WATER_LINE_RATE,i=Math.max(t,_l.MAX_BUFFER_LOW_WATER_LINE),r=Math.max(t,_l.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE);return Math.min(t+e*n,this.experimentalBufferBasedABR?r:i)},n.bufferHighWaterLine=function(){return _l.BUFFER_HIGH_WATER_LINE},t}(Zs.EventTarget),sc=function(e,t,n){var i,r,a,s=e.masterPlaylistController_,o=s[(e.options_.smoothQualityChange?"smooth":"fast")+"QualityChange_"].bind(s);if(t.attributes){var l=t.attributes.RESOLUTION;this.width=l&&l.width,this.height=l&&l.height,this.bandwidth=t.attributes.BANDWIDTH,this.frameRate=t.attributes["FRAME-RATE"]}this.codecs=Jl(s.master(),t),this.playlist=t,this.id=n,this.enabled=(i=e.playlists,r=t.id,a=o,function(e){var t=i.master.playlists[r],n=Eo(t),s=Co(t);return"undefined"===typeof e?s:(e?delete t.disabled:t.disabled=!0,e===s||n||(a(),e?i.trigger("renditionenabled"):i.trigger("renditiondisabled")),e)})},oc=["seeking","seeked","pause","playing","error"],lc=function(){function e(e){var t=this;this.masterPlaylistController_=e.masterPlaylistController,this.tech_=e.tech,this.seekable=e.seekable,this.allowSeeksWithinUnsafeLiveWindow=e.allowSeeksWithinUnsafeLiveWindow,this.liveRangeSafeTimeDelta=e.liveRangeSafeTimeDelta,this.media=e.media,this.consecutiveUpdates=0,this.lastRecordedTime=null,this.timer_=null,this.checkCurrentTimeTimeout_=null,this.logger_=ro("PlaybackWatcher"),this.logger_("initialize");var n=function(){return t.monitorCurrentTime_()},i=function(){return t.monitorCurrentTime_()},a=function(){return t.techWaiting_()},s=function(){return t.cancelTimer_()},o=this.masterPlaylistController_,l=["main","subtitle","audio"],u={};l.forEach((function(e){u[e]={reset:function(){return t.resetSegmentDownloads_(e)},updateend:function(){return t.checkSegmentDownloads_(e)}},o[e+"SegmentLoader_"].on("appendsdone",u[e].updateend),o[e+"SegmentLoader_"].on("playlistupdate",u[e].reset),t.tech_.on(["seeked","seeking"],u[e].reset)}));var c=function(e){["main","audio"].forEach((function(n){o[n+"SegmentLoader_"][e]("appended",t.seekingAppendCheck_)}))};this.seekingAppendCheck_=function(){t.fixesBadSeeks_()&&(t.consecutiveUpdates=0,t.lastRecordedTime=t.tech_.currentTime(),c("off"))},this.clearSeekingAppendCheck_=function(){return c("off")},this.watchForBadSeeking_=function(){t.clearSeekingAppendCheck_(),c("on")},this.tech_.on("seeked",this.clearSeekingAppendCheck_),this.tech_.on("seeking",this.watchForBadSeeking_),this.tech_.on("waiting",a),this.tech_.on(oc,s),this.tech_.on("canplay",i),this.tech_.one("play",n),this.dispose=function(){t.clearSeekingAppendCheck_(),t.logger_("dispose"),t.tech_.off("waiting",a),t.tech_.off(oc,s),t.tech_.off("canplay",i),t.tech_.off("play",n),t.tech_.off("seeking",t.watchForBadSeeking_),t.tech_.off("seeked",t.clearSeekingAppendCheck_),l.forEach((function(e){o[e+"SegmentLoader_"].off("appendsdone",u[e].updateend),o[e+"SegmentLoader_"].off("playlistupdate",u[e].reset),t.tech_.off(["seeked","seeking"],u[e].reset)})),t.checkCurrentTimeTimeout_&&r().clearTimeout(t.checkCurrentTimeTimeout_),t.cancelTimer_()}}var t=e.prototype;return t.monitorCurrentTime_=function(){this.checkCurrentTime_(),this.checkCurrentTimeTimeout_&&r().clearTimeout(this.checkCurrentTimeTimeout_),this.checkCurrentTimeTimeout_=r().setTimeout(this.monitorCurrentTime_.bind(this),250)},t.resetSegmentDownloads_=function(e){var t=this.masterPlaylistController_[e+"SegmentLoader_"];this[e+"StalledDownloads_"]>0&&this.logger_("resetting possible stalled download count for "+e+" loader"),this[e+"StalledDownloads_"]=0,this[e+"Buffered_"]=t.buffered_()},t.checkSegmentDownloads_=function(e){var t=this.masterPlaylistController_,n=t[e+"SegmentLoader_"],i=n.buffered_(),r=function(e,t){if(e===t)return!1;if(!e&&t||!t&&e)return!0;if(e.length!==t.length)return!0;for(var n=0;n<e.length;n++)if(e.start(n)!==t.start(n)||e.end(n)!==t.end(n))return!0;return!1}(this[e+"Buffered_"],i);this[e+"Buffered_"]=i,r?this.resetSegmentDownloads_(e):(this[e+"StalledDownloads_"]++,this.logger_("found #"+this[e+"StalledDownloads_"]+" "+e+" appends that did not increase buffer (possible stalled download)",{playlistId:n.playlist_&&n.playlist_.id,buffered:ho(i)}),this[e+"StalledDownloads_"]<10||(this.logger_(e+" loader stalled download exclusion"),this.resetSegmentDownloads_(e),this.tech_.trigger({type:"usage",name:"vhs-"+e+"-download-exclusion"}),"subtitle"!==e&&t.blacklistCurrentPlaylist({message:"Excessive "+e+" segment downloading detected."},1/0)))},t.checkCurrentTime_=function(){if(!this.tech_.paused()&&!this.tech_.seeking()){var e=this.tech_.currentTime(),t=this.tech_.buffered();if(this.lastRecordedTime===e&&(!t.length||e+so>=t.end(t.length-1)))return this.techWaiting_();this.consecutiveUpdates>=5&&e===this.lastRecordedTime?(this.consecutiveUpdates++,this.waiting_()):e===this.lastRecordedTime?this.consecutiveUpdates++:(this.consecutiveUpdates=0,this.lastRecordedTime=e)}},t.cancelTimer_=function(){this.consecutiveUpdates=0,this.timer_&&(this.logger_("cancelTimer_"),clearTimeout(this.timer_)),this.timer_=null},t.fixesBadSeeks_=function(){if(!this.tech_.seeking())return!1;var e,t=this.seekable(),n=this.tech_.currentTime();this.afterSeekableWindow_(t,n,this.media(),this.allowSeeksWithinUnsafeLiveWindow)&&(e=t.end(t.length-1));if(this.beforeSeekableWindow_(t,n)){var i=t.start(0);e=i+(i===t.end(0)?0:so)}if("undefined"!==typeof e)return this.logger_("Trying to seek outside of seekable at time "+n+" with seekable range "+co(t)+". Seeking to "+e+"."),this.tech_.setCurrentTime(e),!0;for(var r=this.masterPlaylistController_.sourceUpdater_,a=this.tech_.buffered(),s=r.audioBuffer?r.audioBuffered():null,o=r.videoBuffer?r.videoBuffered():null,l=this.media(),u=l.partTargetDuration?l.partTargetDuration:2*(l.targetDuration-ao),c=[s,o],d=0;d<c.length;d++){if(c[d])if(po(c[d],n)<u)return!1}var h=uo(a,n);return 0!==h.length&&(e=h.start(0)+so,this.logger_("Buffered region starts ("+h.start(0)+")  just beyond seek point ("+n+"). Seeking to "+e+"."),this.tech_.setCurrentTime(e),!0)},t.waiting_=function(){if(!this.techWaiting_()){var e=this.tech_.currentTime(),t=this.tech_.buffered(),n=lo(t,e);return n.length&&e+3<=n.end(0)?(this.cancelTimer_(),this.tech_.setCurrentTime(e),this.logger_("Stopped at "+e+" while inside a buffered region ["+n.start(0)+" -> "+n.end(0)+"]. Attempting to resume playback by seeking to the current time."),this.tech_.trigger({type:"usage",name:"vhs-unknown-waiting"}),void this.tech_.trigger({type:"usage",name:"hls-unknown-waiting"})):void 0}},t.techWaiting_=function(){var e=this.seekable(),t=this.tech_.currentTime();if(this.tech_.seeking()||null!==this.timer_)return!0;if(this.beforeSeekableWindow_(e,t)){var n=e.end(e.length-1);return this.logger_("Fell out of live window at time "+t+". Seeking to live point (seekable end) "+n),this.cancelTimer_(),this.tech_.setCurrentTime(n),this.tech_.trigger({type:"usage",name:"vhs-live-resync"}),this.tech_.trigger({type:"usage",name:"hls-live-resync"}),!0}var i=this.tech_.vhs.masterPlaylistController_.sourceUpdater_,r=this.tech_.buffered();if(this.videoUnderflow_({audioBuffered:i.audioBuffered(),videoBuffered:i.videoBuffered(),currentTime:t}))return this.cancelTimer_(),this.tech_.setCurrentTime(t),this.tech_.trigger({type:"usage",name:"vhs-video-underflow"}),this.tech_.trigger({type:"usage",name:"hls-video-underflow"}),!0;var a=uo(r,t);if(a.length>0){var s=a.start(0)-t;return this.logger_("Stopped at "+t+", setting timer for "+s+", seeking to "+a.start(0)),this.cancelTimer_(),this.timer_=setTimeout(this.skipTheGap_.bind(this),1e3*s,t),!0}return!1},t.afterSeekableWindow_=function(e,t,n,i){if(void 0===i&&(i=!1),!e.length)return!1;var r=e.end(e.length-1)+so;return!n.endList&&i&&(r=e.end(e.length-1)+3*n.targetDuration),t>r},t.beforeSeekableWindow_=function(e,t){return!!(e.length&&e.start(0)>0&&t<e.start(0)-this.liveRangeSafeTimeDelta)},t.videoUnderflow_=function(e){var t=e.videoBuffered,n=e.audioBuffered,i=e.currentTime;if(t){var r;if(t.length&&n.length){var a=lo(t,i-3),s=lo(t,i),o=lo(n,i);o.length&&!s.length&&a.length&&(r={start:a.end(0),end:o.end(0)})}else{uo(t,i).length||(r=this.gapFromVideoUnderflow_(t,i))}return!!r&&(this.logger_("Encountered a gap in video from "+r.start+" to "+r.end+". Seeking to current time "+i),!0)}},t.skipTheGap_=function(e){var t=this.tech_.buffered(),n=this.tech_.currentTime(),i=uo(t,n);this.cancelTimer_(),0!==i.length&&n===e&&(this.logger_("skipTheGap_:","currentTime:",n,"scheduled currentTime:",e,"nextRange start:",i.start(0)),this.tech_.setCurrentTime(i.start(0)+ao),this.tech_.trigger({type:"usage",name:"vhs-gap-skip"}),this.tech_.trigger({type:"usage",name:"hls-gap-skip"}))},t.gapFromVideoUnderflow_=function(e,t){for(var n=function(e){if(e.length<2)return Zs.createTimeRanges();for(var t=[],n=1;n<e.length;n++){var i=e.end(n-1),r=e.start(n);t.push([i,r])}return Zs.createTimeRanges(t)}(e),i=0;i<n.length;i++){var r=n.start(i),a=n.end(i);if(t-r<4&&t-r>2)return{start:r,end:a}}return null},e}(),uc={errorInterval:30,getSource:function(e){return e(this.tech({IWillNotUseThisInPlugins:!0}).currentSource_||this.currentSource())}},cc=function e(t,n){var i=0,r=0,a=Zs.mergeOptions(uc,n);t.ready((function(){t.trigger({type:"usage",name:"vhs-error-reload-initialized"}),t.trigger({type:"usage",name:"hls-error-reload-initialized"})}));var s=function(){r&&t.currentTime(r)},o=function(e){null!==e&&void 0!==e&&(r=t.duration()!==1/0&&t.currentTime()||0,t.one("loadedmetadata",s),t.src(e),t.trigger({type:"usage",name:"vhs-error-reload"}),t.trigger({type:"usage",name:"hls-error-reload"}),t.play())},l=function(){return Date.now()-i<1e3*a.errorInterval?(t.trigger({type:"usage",name:"vhs-error-reload-canceled"}),void t.trigger({type:"usage",name:"hls-error-reload-canceled"})):a.getSource&&"function"===typeof a.getSource?(i=Date.now(),a.getSource.call(t,o)):void Zs.log.error("ERROR: reloadSourceOnError - The option getSource must be a function!")},u=function e(){t.off("loadedmetadata",s),t.off("error",l),t.off("dispose",e)};t.on("error",l),t.on("dispose",u),t.reloadSourceOnError=function(n){u(),e(t,n)}},dc="2.16.2",hc={PlaylistLoader:Ko,Playlist:Mo,utils:ol,STANDARD_PLAYLIST_SELECTOR:au,INITIAL_PLAYLIST_SELECTOR:function(){var e=this,t=this.playlists.master.playlists.filter(Mo.isEnabled);return nu(t,(function(e,t){return iu(e,t)})),t.filter((function(t){return!!Jl(e.playlists.master,t).video}))[0]||null},lastBandwidthSelector:au,movingAverageBandwidthSelector:function(e){var t=-1,n=-1;if(e<0||e>1)throw new Error("Moving average bandwidth decay must be between 0 and 1.");return function(){var i=this.useDevicePixelRatio&&r().devicePixelRatio||1;return t<0&&(t=this.systemBandwidth,n=this.systemBandwidth),this.systemBandwidth>0&&this.systemBandwidth!==n&&(t=e*this.systemBandwidth+(1-e)*t,n=this.systemBandwidth),ru(this.playlists.master,t,parseInt(tu(this.tech_.el(),"width"),10)*i,parseInt(tu(this.tech_.el(),"height"),10)*i,this.limitRenditionByPlayerDimensions,this.masterPlaylistController_)}},comparePlaylistBandwidth:iu,comparePlaylistResolution:function(e,t){var n,i;return e.attributes.RESOLUTION&&e.attributes.RESOLUTION.width&&(n=e.attributes.RESOLUTION.width),n=n||r().Number.MAX_VALUE,t.attributes.RESOLUTION&&t.attributes.RESOLUTION.width&&(i=t.attributes.RESOLUTION.width),n===(i=i||r().Number.MAX_VALUE)&&e.attributes.BANDWIDTH&&t.attributes.BANDWIDTH?e.attributes.BANDWIDTH-t.attributes.BANDWIDTH:n-i},xhr:Jo()};Object.keys(_l).forEach((function(e){Object.defineProperty(hc,e,{get:function(){return Zs.log.warn("using Vhs."+e+" is UNSAFE be sure you know what you are doing"),_l[e]},set:function(t){Zs.log.warn("using Vhs."+e+" is UNSAFE be sure you know what you are doing"),"number"!==typeof t||t<0?Zs.log.warn("value of Vhs."+e+" must be greater than or equal to 0"):_l[e]=t}})}));var fc="videojs-vhs",pc=function(e,t){for(var n=t.media(),i=-1,r=0;r<e.length;r++)if(e[r].id===n.id){i=r;break}e.selectedIndex_=i,e.trigger({selectedIndex:i,type:"change"})};hc.canPlaySource=function(){return Zs.log.warn("HLS is no longer a tech. Please remove it from your player's techOrder.")};var gc=function(e){var t=e.player,n=e.sourceKeySystems,i=e.audioMedia,r=e.mainPlaylists;if(!t.eme.initializeMediaKeys)return Promise.resolve();var a=function(e,t){return e.reduce((function(e,n){if(!n.contentProtection)return e;var i=t.reduce((function(e,t){var i=n.contentProtection[t];return i&&i.pssh&&(e[t]={pssh:i.pssh}),e}),{});return Object.keys(i).length&&e.push(i),e}),[])}(i?r.concat([i]):r,Object.keys(n)),s=[],o=[];return a.forEach((function(e){o.push(new Promise((function(e,n){t.tech_.one("keysessioncreated",e)}))),s.push(new Promise((function(n,i){t.eme.initializeMediaKeys({keySystems:e},(function(e){e?i(e):n()}))})))})),Promise.race([Promise.all(s),Promise.race(o)])},mc=function(e){var t=e.player,n=function(e,t,n){if(!e)return e;var i={};t&&t.attributes&&t.attributes.CODECS&&(i=Yl(B(t.attributes.CODECS))),n&&n.attributes&&n.attributes.CODECS&&(i.audio=n.attributes.CODECS);var r=V(i.video),a=V(i.audio),s={};for(var o in e)s[o]={},a&&(s[o].audioContentType=a),r&&(s[o].videoContentType=r),t.contentProtection&&t.contentProtection[o]&&t.contentProtection[o].pssh&&(s[o].pssh=t.contentProtection[o].pssh),"string"===typeof e[o]&&(s[o].url=e[o]);return Zs.mergeOptions(e,s)}(e.sourceKeySystems,e.media,e.audioMedia);return!!n&&(t.currentSource().keySystems=n,!(n&&!t.eme)||(Zs.log.warn("DRM encrypted source cannot be decrypted without a DRM plugin"),!1))},vc=function(){if(!r().localStorage)return null;var e=r().localStorage.getItem(fc);if(!e)return null;try{return JSON.parse(e)}catch(t){return null}};hc.supportsNativeHls=function(){if(!s()||!s().createElement)return!1;var e=s().createElement("video");if(!Zs.getTech("Html5").isSupported())return!1;return["application/vnd.apple.mpegurl","audio/mpegurl","audio/x-mpegurl","application/x-mpegurl","video/x-mpegurl","video/mpegurl","application/mpegurl"].some((function(t){return/maybe|probably/i.test(e.canPlayType(t))}))}(),hc.supportsNativeDash=!!(s()&&s().createElement&&Zs.getTech("Html5").isSupported())&&/maybe|probably/i.test(s().createElement("video").canPlayType("application/dash+xml")),hc.supportsTypeNatively=function(e){return"hls"===e?hc.supportsNativeHls:"dash"===e&&hc.supportsNativeDash},hc.isSupported=function(){return Zs.log.warn("HLS is no longer a tech. Please remove it from your player's techOrder.")};var yc=function(e){function t(t,n,i){var r;if(r=e.call(this,n,Zs.mergeOptions(i.hls,i.vhs))||this,i.hls&&Object.keys(i.hls).length&&Zs.log.warn("Using hls options is deprecated. Please rename `hls` to `vhs` in your options object."),"number"===typeof i.initialBandwidth&&(r.options_.bandwidth=i.initialBandwidth),r.logger_=ro("VhsHandler"),n.options_&&n.options_.playerId){var a=Zs(n.options_.playerId);a.hasOwnProperty("hls")||Object.defineProperty(a,"hls",{get:function(){return Zs.log.warn("player.hls is deprecated. Use player.tech().vhs instead."),n.trigger({type:"usage",name:"hls-player-access"}),c(r)},configurable:!0}),a.hasOwnProperty("vhs")||Object.defineProperty(a,"vhs",{get:function(){return Zs.log.warn("player.vhs is deprecated. Use player.tech().vhs instead."),n.trigger({type:"usage",name:"vhs-player-access"}),c(r)},configurable:!0}),a.hasOwnProperty("dash")||Object.defineProperty(a,"dash",{get:function(){return Zs.log.warn("player.dash is deprecated. Use player.tech().vhs instead."),c(r)},configurable:!0}),r.player_=a}if(r.tech_=n,r.source_=t,r.stats={},r.ignoreNextSeekingEvent_=!1,r.setOptions_(),r.options_.overrideNative&&n.overrideNativeAudioTracks&&n.overrideNativeVideoTracks)n.overrideNativeAudioTracks(!0),n.overrideNativeVideoTracks(!0);else if(r.options_.overrideNative&&(n.featuresNativeVideoTracks||n.featuresNativeAudioTracks))throw new Error("Overriding native HLS requires emulated tracks. See https://git.io/vMpjB");return r.on(s(),["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"],(function(e){var t=s().fullscreenElement||s().webkitFullscreenElement||s().mozFullScreenElement||s().msFullscreenElement;t&&t.contains(r.tech_.el())?r.masterPlaylistController_.fastQualityChange_():r.masterPlaylistController_.checkABR_()})),r.on(r.tech_,"seeking",(function(){this.ignoreNextSeekingEvent_?this.ignoreNextSeekingEvent_=!1:this.setCurrentTime(this.tech_.currentTime())})),r.on(r.tech_,"error",(function(){this.tech_.error()&&this.masterPlaylistController_&&this.masterPlaylistController_.pauseLoading()})),r.on(r.tech_,"play",r.play),r}h(t,e);var n=t.prototype;return n.setOptions_=function(){var e=this;if(this.options_.withCredentials=this.options_.withCredentials||!1,this.options_.handleManifestRedirects=!1!==this.options_.handleManifestRedirects,this.options_.limitRenditionByPlayerDimensions=!1!==this.options_.limitRenditionByPlayerDimensions,this.options_.useDevicePixelRatio=this.options_.useDevicePixelRatio||!1,this.options_.smoothQualityChange=this.options_.smoothQualityChange||!1,this.options_.useBandwidthFromLocalStorage="undefined"!==typeof this.source_.useBandwidthFromLocalStorage?this.source_.useBandwidthFromLocalStorage:this.options_.useBandwidthFromLocalStorage||!1,this.options_.useNetworkInformationApi=this.options_.useNetworkInformationApi||!1,this.options_.useDtsForTimestampOffset=this.options_.useDtsForTimestampOffset||!1,this.options_.customTagParsers=this.options_.customTagParsers||[],this.options_.customTagMappers=this.options_.customTagMappers||[],this.options_.cacheEncryptionKeys=this.options_.cacheEncryptionKeys||!1,"number"!==typeof this.options_.blacklistDuration&&(this.options_.blacklistDuration=300),"number"!==typeof this.options_.bandwidth&&this.options_.useBandwidthFromLocalStorage){var t=vc();t&&t.bandwidth&&(this.options_.bandwidth=t.bandwidth,this.tech_.trigger({type:"usage",name:"vhs-bandwidth-from-local-storage"}),this.tech_.trigger({type:"usage",name:"hls-bandwidth-from-local-storage"})),t&&t.throughput&&(this.options_.throughput=t.throughput,this.tech_.trigger({type:"usage",name:"vhs-throughput-from-local-storage"}),this.tech_.trigger({type:"usage",name:"hls-throughput-from-local-storage"}))}"number"!==typeof this.options_.bandwidth&&(this.options_.bandwidth=_l.INITIAL_BANDWIDTH),this.options_.enableLowInitialPlaylist=this.options_.enableLowInitialPlaylist&&this.options_.bandwidth===_l.INITIAL_BANDWIDTH,["withCredentials","useDevicePixelRatio","limitRenditionByPlayerDimensions","bandwidth","smoothQualityChange","customTagParsers","customTagMappers","handleManifestRedirects","cacheEncryptionKeys","playlistSelector","initialPlaylistSelector","experimentalBufferBasedABR","liveRangeSafeTimeDelta","experimentalLLHLS","useNetworkInformationApi","useDtsForTimestampOffset","experimentalExactManifestTimings","experimentalLeastPixelDiffSelector"].forEach((function(t){"undefined"!==typeof e.source_[t]&&(e.options_[t]=e.source_[t])})),this.limitRenditionByPlayerDimensions=this.options_.limitRenditionByPlayerDimensions,this.useDevicePixelRatio=this.options_.useDevicePixelRatio},n.src=function(e,t){var n=this;if(e){var i;this.setOptions_(),this.options_.src=0===(i=this.source_.src).toLowerCase().indexOf("data:application/vnd.videojs.vhs+json,")?JSON.parse(i.substring(i.indexOf(",")+1)):i,this.options_.tech=this.tech_,this.options_.externVhs=hc,this.options_.sourceType=K(t),this.options_.seekTo=function(e){n.tech_.setCurrentTime(e)},this.options_.smoothQualityChange&&Zs.log.warn("smoothQualityChange is deprecated and will be removed in the next major version"),this.masterPlaylistController_=new ac(this.options_);var a=Zs.mergeOptions({liveRangeSafeTimeDelta:so},this.options_,{seekable:function(){return n.seekable()},media:function(){return n.masterPlaylistController_.media()},masterPlaylistController:this.masterPlaylistController_});this.playbackWatcher_=new lc(a),this.masterPlaylistController_.on("error",(function(){var e=Zs.players[n.tech_.options_.playerId],t=n.masterPlaylistController_.error;"object"!==typeof t||t.code?"string"===typeof t&&(t={message:t,code:3}):t.code=3,e.error(t)}));var s=this.options_.experimentalBufferBasedABR?hc.movingAverageBandwidthSelector(.55):hc.STANDARD_PLAYLIST_SELECTOR;this.masterPlaylistController_.selectPlaylist=this.selectPlaylist?this.selectPlaylist.bind(this):s.bind(this),this.masterPlaylistController_.selectInitialPlaylist=hc.INITIAL_PLAYLIST_SELECTOR.bind(this),this.playlists=this.masterPlaylistController_.masterPlaylistLoader_,this.mediaSource=this.masterPlaylistController_.mediaSource,Object.defineProperties(this,{selectPlaylist:{get:function(){return this.masterPlaylistController_.selectPlaylist},set:function(e){this.masterPlaylistController_.selectPlaylist=e.bind(this)}},throughput:{get:function(){return this.masterPlaylistController_.mainSegmentLoader_.throughput.rate},set:function(e){this.masterPlaylistController_.mainSegmentLoader_.throughput.rate=e,this.masterPlaylistController_.mainSegmentLoader_.throughput.count=1}},bandwidth:{get:function(){var e=this.masterPlaylistController_.mainSegmentLoader_.bandwidth,t=r().navigator.connection||r().navigator.mozConnection||r().navigator.webkitConnection,n=1e7;if(this.options_.useNetworkInformationApi&&t){var i=1e3*t.downlink*1e3;e=i>=n&&e>=n?Math.max(e,i):i}return e},set:function(e){this.masterPlaylistController_.mainSegmentLoader_.bandwidth=e,this.masterPlaylistController_.mainSegmentLoader_.throughput={rate:0,count:0}}},systemBandwidth:{get:function(){var e,t=1/(this.bandwidth||1);return e=this.throughput>0?1/this.throughput:0,Math.floor(1/(t+e))},set:function(){Zs.log.error('The "systemBandwidth" property is read-only')}}}),this.options_.bandwidth&&(this.bandwidth=this.options_.bandwidth),this.options_.throughput&&(this.throughput=this.options_.throughput),Object.defineProperties(this.stats,{bandwidth:{get:function(){return n.bandwidth||0},enumerable:!0},mediaRequests:{get:function(){return n.masterPlaylistController_.mediaRequests_()||0},enumerable:!0},mediaRequestsAborted:{get:function(){return n.masterPlaylistController_.mediaRequestsAborted_()||0},enumerable:!0},mediaRequestsTimedout:{get:function(){return n.masterPlaylistController_.mediaRequestsTimedout_()||0},enumerable:!0},mediaRequestsErrored:{get:function(){return n.masterPlaylistController_.mediaRequestsErrored_()||0},enumerable:!0},mediaTransferDuration:{get:function(){return n.masterPlaylistController_.mediaTransferDuration_()||0},enumerable:!0},mediaBytesTransferred:{get:function(){return n.masterPlaylistController_.mediaBytesTransferred_()||0},enumerable:!0},mediaSecondsLoaded:{get:function(){return n.masterPlaylistController_.mediaSecondsLoaded_()||0},enumerable:!0},mediaAppends:{get:function(){return n.masterPlaylistController_.mediaAppends_()||0},enumerable:!0},mainAppendsToLoadedData:{get:function(){return n.masterPlaylistController_.mainAppendsToLoadedData_()||0},enumerable:!0},audioAppendsToLoadedData:{get:function(){return n.masterPlaylistController_.audioAppendsToLoadedData_()||0},enumerable:!0},appendsToLoadedData:{get:function(){return n.masterPlaylistController_.appendsToLoadedData_()||0},enumerable:!0},timeToLoadedData:{get:function(){return n.masterPlaylistController_.timeToLoadedData_()||0},enumerable:!0},buffered:{get:function(){return ho(n.tech_.buffered())},enumerable:!0},currentTime:{get:function(){return n.tech_.currentTime()},enumerable:!0},currentSource:{get:function(){return n.tech_.currentSource_},enumerable:!0},currentTech:{get:function(){return n.tech_.name_},enumerable:!0},duration:{get:function(){return n.tech_.duration()},enumerable:!0},master:{get:function(){return n.playlists.master},enumerable:!0},playerDimensions:{get:function(){return n.tech_.currentDimensions()},enumerable:!0},seekable:{get:function(){return ho(n.tech_.seekable())},enumerable:!0},timestamp:{get:function(){return Date.now()},enumerable:!0},videoPlaybackQuality:{get:function(){return n.tech_.getVideoPlaybackQuality()},enumerable:!0}}),this.tech_.one("canplay",this.masterPlaylistController_.setupFirstPlay.bind(this.masterPlaylistController_)),this.tech_.on("bandwidthupdate",(function(){n.options_.useBandwidthFromLocalStorage&&function(e){if(!r().localStorage)return!1;var t=vc();t=t?Zs.mergeOptions(t,e):e;try{r().localStorage.setItem(fc,JSON.stringify(t))}catch(n){return!1}}({bandwidth:n.bandwidth,throughput:Math.round(n.throughput)})})),this.masterPlaylistController_.on("selectedinitialmedia",(function(){var e;(e=n).representations=function(){var t=e.masterPlaylistController_.master(),n=Lo(t)?e.masterPlaylistController_.getAudioTrackPlaylists_():t.playlists;return n?n.filter((function(e){return!Eo(e)})).map((function(t,n){return new sc(e,t,t.id)})):[]}})),this.masterPlaylistController_.sourceUpdater_.on("createdsourcebuffers",(function(){n.setupEme_()})),this.on(this.masterPlaylistController_,"progress",(function(){this.tech_.trigger("progress")})),this.on(this.masterPlaylistController_,"firstplay",(function(){this.ignoreNextSeekingEvent_=!0})),this.setupQualityLevels_(),this.tech_.el()&&(this.mediaSourceUrl_=r().URL.createObjectURL(this.masterPlaylistController_.mediaSource),this.tech_.src(this.mediaSourceUrl_))}},n.createKeySessions_=function(){var e=this,t=this.masterPlaylistController_.mediaTypes_.AUDIO.activePlaylistLoader;this.logger_("waiting for EME key session creation"),gc({player:this.player_,sourceKeySystems:this.source_.keySystems,audioMedia:t&&t.media(),mainPlaylists:this.playlists.master.playlists}).then((function(){e.logger_("created EME key session"),e.masterPlaylistController_.sourceUpdater_.initializedEme()})).catch((function(t){e.logger_("error while creating EME key session",t),e.player_.error({message:"Failed to initialize media keys for EME",code:3})}))},n.handleWaitingForKey_=function(){this.logger_("waitingforkey fired, attempting to create any new key sessions"),this.createKeySessions_()},n.setupEme_=function(){var e=this,t=this.masterPlaylistController_.mediaTypes_.AUDIO.activePlaylistLoader,n=mc({player:this.player_,sourceKeySystems:this.source_.keySystems,media:this.playlists.media(),audioMedia:t&&t.media()});this.player_.tech_.on("keystatuschange",(function(t){if("output-restricted"===t.status){var n=e.masterPlaylistController_.master();if(n&&n.playlists){var i,r=[];if(n.playlists.forEach((function(e){e&&e.attributes&&e.attributes.RESOLUTION&&e.attributes.RESOLUTION.height>=720&&(!e.excludeUntil||e.excludeUntil<1/0)&&(e.excludeUntil=1/0,r.push(e))})),r.length)(i=Zs.log).warn.apply(i,['DRM keystatus changed to "output-restricted." Removing the following HD playlists that will most likely fail to play and clearing the buffer. This may be due to HDCP restrictions on the stream and the capabilities of the current device.'].concat(r)),e.masterPlaylistController_.fastQualityChange_()}}})),this.handleWaitingForKey_=this.handleWaitingForKey_.bind(this),this.player_.tech_.on("waitingforkey",this.handleWaitingForKey_),11!==Zs.browser.IE_VERSION&&n?this.createKeySessions_():this.masterPlaylistController_.sourceUpdater_.initializedEme()},n.setupQualityLevels_=function(){var e=this,t=Zs.players[this.tech_.options_.playerId];t&&t.qualityLevels&&!this.qualityLevels_&&(this.qualityLevels_=t.qualityLevels(),this.masterPlaylistController_.on("selectedinitialmedia",(function(){var t,n;t=e.qualityLevels_,(n=e).representations().forEach((function(e){t.addQualityLevel(e)})),pc(t,n.playlists)})),this.playlists.on("mediachange",(function(){pc(e.qualityLevels_,e.playlists)})))},t.version=function(){return{"@videojs/http-streaming":dc,"mux.js":"6.0.1","mpd-parser":"0.22.1","m3u8-parser":"4.8.0","aes-decrypter":"3.1.3"}},n.version=function(){return this.constructor.version()},n.canChangeType=function(){return Nu.canChangeType()},n.play=function(){this.masterPlaylistController_.play()},n.setCurrentTime=function(e){this.masterPlaylistController_.setCurrentTime(e)},n.duration=function(){return this.masterPlaylistController_.duration()},n.seekable=function(){return this.masterPlaylistController_.seekable()},n.dispose=function(){this.playbackWatcher_&&this.playbackWatcher_.dispose(),this.masterPlaylistController_&&this.masterPlaylistController_.dispose(),this.qualityLevels_&&this.qualityLevels_.dispose(),this.player_&&(delete this.player_.vhs,delete this.player_.dash,delete this.player_.hls),this.tech_&&this.tech_.vhs&&delete this.tech_.vhs,this.tech_&&delete this.tech_.hls,this.mediaSourceUrl_&&r().URL.revokeObjectURL&&(r().URL.revokeObjectURL(this.mediaSourceUrl_),this.mediaSourceUrl_=null),this.tech_&&this.tech_.off("waitingforkey",this.handleWaitingForKey_),e.prototype.dispose.call(this)},n.convertToProgramTime=function(e,t){return ll({playlist:this.masterPlaylistController_.media(),time:e,callback:t})},n.seekToProgramTime=function(e,t,n,i){return void 0===n&&(n=!0),void 0===i&&(i=2),ul({programTime:e,playlist:this.masterPlaylistController_.media(),retryCount:i,pauseAfterSeek:n,seekTo:this.options_.seekTo,tech:this.options_.tech,callback:t})},t}(Zs.getComponent("Component")),_c={name:"videojs-http-streaming",VERSION:dc,canHandleSource:function(e,t){void 0===t&&(t={});var n=Zs.mergeOptions(Zs.options,t);return _c.canPlayType(e.type,n)},handleSource:function(e,t,n){void 0===n&&(n={});var i=Zs.mergeOptions(Zs.options,n);return t.vhs=new yc(e,t,i),Zs.hasOwnProperty("hls")||Object.defineProperty(t,"hls",{get:function(){return Zs.log.warn("player.tech().hls is deprecated. Use player.tech().vhs instead."),t.vhs},configurable:!0}),t.vhs.xhr=Jo(),t.vhs.src(e.src,e.type),t.vhs},canPlayType:function(e,t){var n=K(e);if(!n)return"";var i=_c.getOverrideNative(t);return!hc.supportsTypeNatively(n)||i?"maybe":""},getOverrideNative:function(e){void 0===e&&(e={});var t=e,n=t.vhs,i=void 0===n?{}:n,r=t.hls,a=void 0===r?{}:r,s=!(Zs.browser.IS_ANY_SAFARI||Zs.browser.IS_IOS),o=i.overrideNative,l=void 0===o?s:o,u=a.overrideNative;return void 0!==u&&u||l}};(H("avc1.4d400d,mp4a.40.2")&&Zs.getTech("Html5").registerSourceHandler(_c,0),Zs.VhsHandler=yc,Object.defineProperty(Zs,"HlsHandler",{get:function(){return Zs.log.warn("videojs.HlsHandler is deprecated. Use videojs.VhsHandler instead."),yc},configurable:!0}),Zs.VhsSourceHandler=_c,Object.defineProperty(Zs,"HlsSourceHandler",{get:function(){return Zs.log.warn("videojs.HlsSourceHandler is deprecated. Use videojs.VhsSourceHandler instead."),_c},configurable:!0}),Zs.Vhs=hc,Object.defineProperty(Zs,"Hls",{get:function(){return Zs.log.warn("videojs.Hls is deprecated. Use videojs.Vhs instead."),hc},configurable:!0}),Zs.use||(Zs.registerComponent("Hls",hc),Zs.registerComponent("Vhs",hc)),Zs.options.vhs=Zs.options.vhs||{},Zs.options.hls=Zs.options.hls||{},Zs.getPlugin&&Zs.getPlugin("reloadSourceOnError"))||(Zs.registerPlugin||Zs.plugin)("reloadSourceOnError",(function(e){cc(this,e)}));var bc=Zs,Tc=n(184),kc=function(t){var n=e.useRef(null),i=e.useRef(null),r=t.options,a=t.onReady;return e.useEffect((function(){if(i.current){var e=i.current;e.autoplay(r.autoplay),e.src(r.sources)}else{var t=document.createElement("video-js");t.classList.add("vjs-big-play-centered"),n.current.appendChild(t);var s=i.current=bc(t,r,(function(){bc.log("player is ready"),a&&a(s)}))}}),[r,n]),e.useEffect((function(){var e=i.current;return function(){e&&!e.isDisposed()&&(e.dispose(),i.current=null)}}),[i]),(0,Tc.jsx)("div",{"data-vjs-player":!0,children:(0,Tc.jsx)("div",{ref:n})})},xc=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Sc(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var wc,Ec=function(e){e&&e instanceof Function&&n.e(377).then(n.bind(n,377)).then((function(t){var n=t.getCLS,i=t.getFID,r=t.getFCP,a=t.getLCP,s=t.getTTFB;n(e),i(e),r(e),a(e),s(e)}))};function Cc(e){if(Array.isArray(e))return e}function Pc(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function Ic(e,t){if(e){if("string"===typeof e)return Pc(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Pc(e,t):void 0}}function Ac(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Oc(e,t){return Cc(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,r,a,s,o=[],l=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(i=a.call(n)).done)&&(o.push(i.value),o.length!==t);l=!0);}catch(c){u=!0,r=c}finally{try{if(!l&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(u)throw r}}return o}}(e,t)||Ic(e,t)||Ac()}function Lc(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function Mc(e){return function(e){if(Array.isArray(e))return Pc(e)}(e)||Lc(e)||Ic(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Dc(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Rc(e){return Rc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Rc(e)}function Nc(e){var t=function(e,t){if("object"!==Rc(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!==Rc(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Rc(t)?t:String(t)}function Uc(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,Nc(i.key),i)}}function jc(e,t,n){return t&&Uc(e.prototype,t),n&&Uc(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Fc(e,t){return Fc=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Fc(e,t)}function Bc(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Fc(e,t)}function zc(e){return zc=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},zc(e)}function Vc(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function Hc(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Wc(e){var t=Vc();return function(){var n,i=zc(e);if(t){var r=zc(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return function(e,t){if(t&&("object"===Rc(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Hc(e)}(this,n)}}function qc(e,t,n){return qc=Vc()?Reflect.construct.bind():function(e,t,n){var i=[null];i.push.apply(i,t);var r=new(Function.bind.apply(e,i));return n&&Fc(r,n.prototype),r},qc.apply(null,arguments)}function Gc(e){var t="function"===typeof Map?new Map:void 0;return Gc=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,i)}function i(){return qc(e,arguments,zc(this).constructor)}return i.prototype=Object.create(e.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),Fc(i,e)},Gc(e)}function Xc(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=Ic(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0,r=function(){};return{s:r,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,o=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){o=!0,a=e},f:function(){try{s||null==n.return||n.return()}finally{if(o)throw a}}}}function Kc(){return Kc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Kc.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(wc||(wc={}));var $c,Yc="popstate";function Qc(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function Jc(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function Zc(e,t){return{usr:e.state,key:e.key,idx:t}}function ed(e,t,n,i){return void 0===n&&(n=null),Kc({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?nd(t):t,{state:n,key:t&&t.key||i||Math.random().toString(36).substr(2,8)})}function td(e){var t=e.pathname,n=void 0===t?"/":t,i=e.search,r=void 0===i?"":i,a=e.hash,s=void 0===a?"":a;return r&&"?"!==r&&(n+="?"===r.charAt(0)?r:"?"+r),s&&"#"!==s&&(n+="#"===s.charAt(0)?s:"#"+s),n}function nd(e){var t={};if(e){var n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));var i=e.indexOf("?");i>=0&&(t.search=e.substr(i),e=e.substr(0,i)),e&&(t.pathname=e)}return t}function id(e,t,n,i){void 0===i&&(i={});var r=i,a=r.window,s=void 0===a?document.defaultView:a,o=r.v5Compat,l=void 0!==o&&o,u=s.history,c=wc.Pop,d=null,h=f();function f(){return(u.state||{idx:null}).idx}function p(){c=wc.Pop;var e=f(),t=null==e?null:e-h;h=e,d&&d({action:c,location:m.location,delta:t})}function g(e){var t="null"!==s.location.origin?s.location.origin:s.location.href,n="string"===typeof e?e:td(e);return Qc(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}null==h&&(h=0,u.replaceState(Kc({},u.state,{idx:h}),""));var m={get action(){return c},get location(){return e(s,u)},listen:function(e){if(d)throw new Error("A history only accepts one active listener");return s.addEventListener(Yc,p),d=e,function(){s.removeEventListener(Yc,p),d=null}},createHref:function(e){return t(s,e)},createURL:g,encodeLocation:function(e){var t=g(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){c=wc.Push;var i=ed(m.location,e,t);n&&n(i,e);var r=Zc(i,h=f()+1),a=m.createHref(i);try{u.pushState(r,"",a)}catch(o){s.location.assign(a)}l&&d&&d({action:c,location:m.location,delta:1})},replace:function(e,t){c=wc.Replace;var i=ed(m.location,e,t);n&&n(i,e);var r=Zc(i,h=f()),a=m.createHref(i);u.replaceState(r,"",a),l&&d&&d({action:c,location:m.location,delta:0})},go:function(e){return u.go(e)}};return m}!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}($c||($c={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function rd(e,t,n){void 0===n&&(n="/");var i=yd(("string"===typeof t?nd(t):t).pathname||"/",n);if(null==i)return null;var r=ad(e);!function(e){e.sort((function(e,t){return e.score!==t.score?t.score-e.score:function(e,t){var n=e.length===t.length&&e.slice(0,-1).every((function(e,n){return e===t[n]}));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((function(e){return e.childrenIndex})),t.routesMeta.map((function(e){return e.childrenIndex})))}))}(r);for(var a=null,s=0;null==a&&s<r.length;++s)a=gd(r[s],vd(i));return a}function ad(e,t,n,i){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===i&&(i="");var r=function(e,r,a){var s={relativePath:void 0===a?e.path||"":a,caseSensitive:!0===e.caseSensitive,childrenIndex:r,route:e};s.relativePath.startsWith("/")&&(Qc(s.relativePath.startsWith(i),'Absolute route path "'+s.relativePath+'" nested under path "'+i+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),s.relativePath=s.relativePath.slice(i.length));var o=kd([i,s.relativePath]),l=n.concat(s);e.children&&e.children.length>0&&(Qc(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+o+'".'),ad(e.children,t,l,o)),(null!=e.path||e.index)&&t.push({path:o,score:pd(o,e.index),routesMeta:l})};return e.forEach((function(e,t){var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?")){var i,a=Xc(sd(e.path));try{for(a.s();!(i=a.n()).done;){var s=i.value;r(e,t,s)}}catch(o){a.e(o)}finally{a.f()}}else r(e,t)})),t}function sd(e){var t=e.split("/");if(0===t.length)return[];var n,i=Cc(n=t)||Lc(n)||Ic(n)||Ac(),r=i[0],a=i.slice(1),s=r.endsWith("?"),o=r.replace(/\?$/,"");if(0===a.length)return s?[o,""]:[o];var l=sd(a.join("/")),u=[];return u.push.apply(u,Mc(l.map((function(e){return""===e?o:[o,e].join("/")})))),s&&u.push.apply(u,Mc(l)),u.map((function(t){return e.startsWith("/")&&""===t?"/":t}))}var od=/^:\w+$/,ld=3,ud=2,cd=1,dd=10,hd=-2,fd=function(e){return"*"===e};function pd(e,t){var n=e.split("/"),i=n.length;return n.some(fd)&&(i+=hd),t&&(i+=ud),n.filter((function(e){return!fd(e)})).reduce((function(e,t){return e+(od.test(t)?ld:""===t?cd:dd)}),i)}function gd(e,t){for(var n=e.routesMeta,i={},r="/",a=[],s=0;s<n.length;++s){var o=n[s],l=s===n.length-1,u="/"===r?t:t.slice(r.length)||"/",c=md({path:o.relativePath,caseSensitive:o.caseSensitive,end:l},u);if(!c)return null;Object.assign(i,c.params);var d=o.route;a.push({params:i,pathname:kd([r,c.pathname]),pathnameBase:xd(kd([r,c.pathnameBase])),route:d}),"/"!==c.pathnameBase&&(r=kd([r,c.pathnameBase]))}return a}function md(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});var n=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);Jc("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');var i=[],r="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/\/:(\w+)/g,(function(e,t){return i.push(t),"/([^\\/]+)"}));e.endsWith("*")?(i.push("*"),r+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?r+="\\/*$":""!==e&&"/"!==e&&(r+="(?:(?=\\/|$))");var a=new RegExp(r,t?void 0:"i");return[a,i]}(e.path,e.caseSensitive,e.end),i=Oc(n,2),r=i[0],a=i[1],s=t.match(r);if(!s)return null;var o=s[0],l=o.replace(/(.)\/+$/,"$1"),u=s.slice(1),c=a.reduce((function(e,t,n){if("*"===t){var i=u[n]||"";l=o.slice(0,o.length-i.length).replace(/(.)\/+$/,"$1")}return e[t]=function(e,t){try{return decodeURIComponent(e)}catch(n){return Jc(!1,'The value for the URL param "'+t+'" will not be decoded because the string "'+e+'" is a malformed URL segment. This is probably due to a bad percent encoding ('+n+")."),e}}(u[n]||"",t),e}),{});return{params:c,pathname:o,pathnameBase:l,pattern:e}}function vd(e){try{return decodeURI(e)}catch(t){return Jc(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function yd(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;var n=t.endsWith("/")?t.length-1:t.length,i=e.charAt(n);return i&&"/"!==i?null:e.slice(n)||"/"}function _d(e,t,n,i){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(i)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function bd(e){return e.filter((function(e,t){return 0===t||e.route.path&&e.route.path.length>0}))}function Td(e,t,n,i){var r;void 0===i&&(i=!1),"string"===typeof e?r=nd(e):(Qc(!(r=Kc({},e)).pathname||!r.pathname.includes("?"),_d("?","pathname","search",r)),Qc(!r.pathname||!r.pathname.includes("#"),_d("#","pathname","hash",r)),Qc(!r.search||!r.search.includes("#"),_d("#","search","hash",r)));var a,s=""===e||""===r.pathname,o=s?"/":r.pathname;if(i||null==o)a=n;else{var l=t.length-1;if(o.startsWith("..")){for(var u=o.split("/");".."===u[0];)u.shift(),l-=1;r.pathname=u.join("/")}a=l>=0?t[l]:"/"}var c=function(e,t){void 0===t&&(t="/");var n="string"===typeof e?nd(e):e,i=n.pathname,r=n.search,a=void 0===r?"":r,s=n.hash,o=void 0===s?"":s,l=i?i.startsWith("/")?i:function(e,t){var n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((function(e){".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(i,t):t;return{pathname:l,search:Sd(a),hash:wd(o)}}(r,a),d=o&&"/"!==o&&o.endsWith("/"),h=(s||"."===o)&&n.endsWith("/");return c.pathname.endsWith("/")||!d&&!h||(c.pathname+="/"),c}var kd=function(e){return e.join("/").replace(/\/\/+/g,"/")},xd=function(e){return e.replace(/\/+$/,"").replace(/^\/*/,"/")},Sd=function(e){return e&&"?"!==e?e.startsWith("?")?e:"?"+e:""},wd=function(e){return e&&"#"!==e?e.startsWith("#")?e:"#"+e:""},Ed=function(e){Bc(n,e);var t=Wc(n);function n(){return Dc(this,n),t.apply(this,arguments)}return jc(n)}(Gc(Error));function Cd(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}var Pd=["post","put","patch","delete"],Id=(new Set(Pd),["get"].concat(Pd));new Set(Id),new Set([301,302,303,307,308]),new Set([307,308]),"undefined"!==typeof window&&"undefined"!==typeof window.document&&window.document.createElement;Symbol("deferred");var Ad="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},Od=e.useState,Ld=e.useEffect,Md=e.useLayoutEffect,Dd=e.useDebugValue;function Rd(e){var t=e.getSnapshot,n=e.value;try{var i=t();return!Ad(n,i)}catch(r){return!0}}"undefined"===typeof window||"undefined"===typeof window.document||window.document.createElement;var Nd=e.createContext(null);var Ud=e.createContext(null);var jd=e.createContext(null);var Fd=e.createContext(null);var Bd=e.createContext(null);var zd=e.createContext({outlet:null,matches:[]});var Vd=e.createContext(null);function Hd(){return Hd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Hd.apply(this,arguments)}function Wd(){return null!=e.useContext(Bd)}function qd(){return Wd()||Qc(!1),e.useContext(Bd).location}function Gd(){Wd()||Qc(!1);var t=e.useContext(Fd),n=t.basename,i=t.navigator,r=e.useContext(zd).matches,a=qd().pathname,s=JSON.stringify(bd(r).map((function(e){return e.pathnameBase}))),o=e.useRef(!1);e.useEffect((function(){o.current=!0}));var l=e.useCallback((function(e,t){if(void 0===t&&(t={}),o.current)if("number"!==typeof e){var r=Td(e,JSON.parse(s),a,"path"===t.relative);"/"!==n&&(r.pathname="/"===r.pathname?n:kd([n,r.pathname])),(t.replace?i.replace:i.push)(r,t.state,t)}else i.go(e)}),[n,i,s,a]);return l}function Xd(t,n){var i=(void 0===n?{}:n).relative,r=e.useContext(zd).matches,a=qd().pathname,s=JSON.stringify(bd(r).map((function(e){return e.pathnameBase})));return e.useMemo((function(){return Td(t,JSON.parse(s),a,"path"===i)}),[t,s,a,i])}function Kd(){var t=function(){var t,n=e.useContext(Vd),i=eh(Yd.UseRouteError),r=th(Yd.UseRouteError);if(n)return n;return null==(t=i.errors)?void 0:t[r]}(),n=Cd(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),i=t instanceof Error?t.stack:null,r="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:r};return e.createElement(e.Fragment,null,e.createElement("h2",null,"Unexpected Application Error!"),e.createElement("h3",{style:{fontStyle:"italic"}},n),i?e.createElement("pre",{style:a},i):null,null)}var $d,Yd,Qd=function(t){Bc(i,t);var n=Wc(i);function i(e){var t;return Dc(this,i),(t=n.call(this,e)).state={location:e.location,error:e.error},t}return jc(i,[{key:"componentDidCatch",value:function(e,t){console.error("React Router caught the following error during render",e,t)}},{key:"render",value:function(){return this.state.error?e.createElement(zd.Provider,{value:this.props.routeContext},e.createElement(Vd.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{error:e}}},{key:"getDerivedStateFromProps",value:function(e,t){return t.location!==e.location?{error:e.error,location:e.location}:{error:e.error||t.error,location:t.location}}}]),i}(e.Component);function Jd(t){var n=t.routeContext,i=t.match,r=t.children,a=e.useContext(Nd);return a&&a.static&&a.staticContext&&(i.route.errorElement||i.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=i.route.id),e.createElement(zd.Provider,{value:n},r)}function Zd(t,n,i){if(void 0===n&&(n=[]),null==t){if(null==i||!i.errors)return null;t=i.matches}var r=t,a=null==i?void 0:i.errors;if(null!=a){var s=r.findIndex((function(e){return e.route.id&&(null==a?void 0:a[e.route.id])}));s>=0||Qc(!1),r=r.slice(0,Math.min(r.length,s+1))}return r.reduceRight((function(t,s,o){var l=s.route.id?null==a?void 0:a[s.route.id]:null,u=null;i&&(u=s.route.ErrorBoundary?e.createElement(s.route.ErrorBoundary,null):s.route.errorElement?s.route.errorElement:e.createElement(Kd,null));var c=n.concat(r.slice(0,o+1)),d=function(){var n=t;return l?n=u:s.route.Component?n=e.createElement(s.route.Component,null):s.route.element&&(n=s.route.element),e.createElement(Jd,{match:s,routeContext:{outlet:t,matches:c},children:n})};return i&&(s.route.ErrorBoundary||s.route.errorElement||0===o)?e.createElement(Qd,{location:i.location,component:u,error:l,children:d(),routeContext:{outlet:null,matches:c}}):d()}),null)}function eh(t){var n=e.useContext(Ud);return n||Qc(!1),n}function th(t){var n=function(t){var n=e.useContext(zd);return n||Qc(!1),n}(),i=n.matches[n.matches.length-1];return i.route.id||Qc(!1),i.route.id}!function(e){e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator"}($d||($d={})),function(e){e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator"}(Yd||(Yd={}));var nh;function ih(e){Qc(!1)}function rh(t){var n=t.basename,i=void 0===n?"/":n,r=t.children,a=void 0===r?null:r,s=t.location,o=t.navigationType,l=void 0===o?wc.Pop:o,u=t.navigator,c=t.static,d=void 0!==c&&c;Wd()&&Qc(!1);var h=i.replace(/^\/*/,"/"),f=e.useMemo((function(){return{basename:h,navigator:u,static:d}}),[h,u,d]);"string"===typeof s&&(s=nd(s));var p=s,g=p.pathname,m=void 0===g?"/":g,v=p.search,y=void 0===v?"":v,_=p.hash,b=void 0===_?"":_,T=p.state,k=void 0===T?null:T,x=p.key,S=void 0===x?"default":x,w=e.useMemo((function(){var e=yd(m,h);return null==e?null:{location:{pathname:e,search:y,hash:b,state:k,key:S},navigationType:l}}),[h,m,y,b,k,S,l]);return null==w?null:e.createElement(Fd.Provider,{value:f},e.createElement(Bd.Provider,{children:a,value:w}))}function ah(t){var n=t.children,i=t.location,r=e.useContext(Nd);return function(t,n){Wd()||Qc(!1);var i,r=e.useContext(Fd).navigator,a=e.useContext(Ud),s=e.useContext(zd).matches,o=s[s.length-1],l=o?o.params:{},u=(o&&o.pathname,o?o.pathnameBase:"/"),c=(o&&o.route,qd());if(n){var d,h="string"===typeof n?nd(n):n;"/"===u||(null==(d=h.pathname)?void 0:d.startsWith(u))||Qc(!1),i=h}else i=c;var f=i.pathname||"/",p=rd(t,{pathname:"/"===u?f:f.slice(u.length)||"/"}),g=Zd(p&&p.map((function(e){return Object.assign({},e,{params:Object.assign({},l,e.params),pathname:kd([u,r.encodeLocation?r.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?u:kd([u,r.encodeLocation?r.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])})})),s,a||void 0);return n&&g?e.createElement(Bd.Provider,{value:{location:Hd({pathname:"/",search:"",hash:"",state:null,key:"default"},i),navigationType:wc.Pop}},g):g}(r&&!n?r.router.routes:oh(n),i)}!function(e){e[e.pending=0]="pending",e[e.success=1]="success",e[e.error=2]="error"}(nh||(nh={}));var sh=new Promise((function(){}));e.Component;function oh(t,n){void 0===n&&(n=[]);var i=[];return e.Children.forEach(t,(function(t,r){if(e.isValidElement(t))if(t.type!==e.Fragment){t.type!==ih&&Qc(!1),t.props.index&&t.props.children&&Qc(!1);var a=[].concat(Mc(n),[r]),s={id:t.props.id||a.join("-"),caseSensitive:t.props.caseSensitive,element:t.props.element,Component:t.props.Component,index:t.props.index,path:t.props.path,loader:t.props.loader,action:t.props.action,errorElement:t.props.errorElement,ErrorBoundary:t.props.ErrorBoundary,hasErrorBoundary:null!=t.props.ErrorBoundary||null!=t.props.errorElement,shouldRevalidate:t.props.shouldRevalidate,handle:t.props.handle,lazy:t.props.lazy};t.props.children&&(s.children=oh(t.props.children,a)),i.push(s)}else i.push.apply(i,oh(t.props.children,n))})),i}function lh(){return lh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},lh.apply(this,arguments)}function uh(e,t){if(null==e)return{};var n,i,r={},a=Object.keys(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}var ch=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset"],dh=["aria-current","caseSensitive","className","end","style","to","children"];function hh(t){var n,i=t.basename,r=t.children,a=t.window,s=e.useRef();null==s.current&&(s.current=(void 0===(n={window:a,v5Compat:!0})&&(n={}),id((function(e,t){var n=e.location;return ed("",{pathname:n.pathname,search:n.search,hash:n.hash},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){return"string"===typeof t?t:td(t)}),null,n)));var o=s.current,l=Oc(e.useState({action:o.action,location:o.location}),2),u=l[0],c=l[1];return e.useLayoutEffect((function(){return o.listen(c)}),[o]),e.createElement(rh,{basename:i,children:r,location:u.location,navigationType:u.action,navigator:o})}var fh="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement,ph=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,gh=e.forwardRef((function(t,n){var i,r=t.onClick,a=t.relative,s=t.reloadDocument,o=t.replace,l=t.state,u=t.target,c=t.to,d=t.preventScrollReset,h=uh(t,ch),f=e.useContext(Fd).basename,p=!1;if("string"===typeof c&&ph.test(c)&&(i=c,fh)){var g=new URL(window.location.href),m=c.startsWith("//")?new URL(g.protocol+c):new URL(c),v=yd(m.pathname,f);m.origin===g.origin&&null!=v?c=v+m.search+m.hash:p=!0}var y=function(t,n){var i=(void 0===n?{}:n).relative;Wd()||Qc(!1);var r=e.useContext(Fd),a=r.basename,s=r.navigator,o=Xd(t,{relative:i}),l=o.hash,u=o.pathname,c=o.search,d=u;return"/"!==a&&(d="/"===u?a:kd([a,u])),s.createHref({pathname:d,search:c,hash:l})}(c,{relative:a}),_=function(t,n){var i=void 0===n?{}:n,r=i.target,a=i.replace,s=i.state,o=i.preventScrollReset,l=i.relative,u=Gd(),c=qd(),d=Xd(t,{relative:l});return e.useCallback((function(e){if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(e,r)){e.preventDefault();var n=void 0!==a?a:td(c)===td(d);u(t,{replace:n,state:s,preventScrollReset:o,relative:l})}}),[c,u,d,a,s,r,t,o,l])}(c,{replace:o,state:l,target:u,preventScrollReset:d,relative:a});return e.createElement("a",lh({},h,{href:i||y,onClick:p||s?r:function(e){r&&r(e),e.defaultPrevented||_(e)},ref:n,target:u}))}));var mh=e.forwardRef((function(t,n){var i=t["aria-current"],r=void 0===i?"page":i,a=t.caseSensitive,s=void 0!==a&&a,o=t.className,l=void 0===o?"":o,u=t.end,c=void 0!==u&&u,d=t.style,h=t.to,f=t.children,p=uh(t,dh),g=Xd(h,{relative:p.relative}),m=qd(),v=e.useContext(Ud),y=e.useContext(Fd).navigator,_=y.encodeLocation?y.encodeLocation(g).pathname:g.pathname,b=m.pathname,T=v&&v.navigation&&v.navigation.location?v.navigation.location.pathname:null;s||(b=b.toLowerCase(),T=T?T.toLowerCase():null,_=_.toLowerCase());var k,x=b===_||!c&&b.startsWith(_)&&"/"===b.charAt(_.length),S=null!=T&&(T===_||!c&&T.startsWith(_)&&"/"===T.charAt(_.length)),w=x?r:void 0;k="function"===typeof l?l({isActive:x,isPending:S}):[l,x?"active":null,S?"pending":null].filter(Boolean).join(" ");var E="function"===typeof d?d({isActive:x,isPending:S}):d;return e.createElement(gh,lh({},p,{"aria-current":w,className:k,ref:n,style:E,to:h}),"function"===typeof f?f({isActive:x,isPending:S}):f)}));var vh,yh;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmitImpl="useSubmitImpl",e.UseFetcher="useFetcher"})(vh||(vh={})),function(e){e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(yh||(yh={}));function _h(e,t,n){return(t=Nc(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function bh(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Th(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?bh(Object(n),!0).forEach((function(t){_h(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):bh(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function kh(){return kh="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=zc(e)););return e}(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(arguments.length<3?e:n):r.value}},kh.apply(this,arguments)}function xh(e){return e+.5|0}var Sh=function(e,t,n){return Math.max(Math.min(e,n),t)};function wh(e){return Sh(xh(2.55*e),0,255)}function Eh(e){return Sh(xh(255*e),0,255)}function Ch(e){return Sh(xh(e/2.55)/100,0,1)}function Ph(e){return Sh(xh(100*e),0,100)}var Ih={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},Ah=Mc("0123456789ABCDEF"),Oh=function(e){return Ah[15&e]},Lh=function(e){return Ah[(240&e)>>4]+Ah[15&e]},Mh=function(e){return(240&e)>>4===(15&e)},Dh=function(e){return Mh(e.r)&&Mh(e.g)&&Mh(e.b)&&Mh(e.a)};var Rh=function(e,t){return e<255?t(e):""};var Nh=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function Uh(e,t,n){var i=t*Math.min(n,1-n),r=function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(t+e/30)%12;return n-i*Math.max(Math.min(r-3,9-r,1),-1)};return[r(0),r(8),r(4)]}function jh(e,t,n){var i=function(i){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(i+e/60)%6;return n-n*t*Math.max(Math.min(r,4-r,1),0)};return[i(5),i(3),i(1)]}function Fh(e,t,n){var i,r=Uh(e,1,.5);for(t+n>1&&(t*=i=1/(t+n),n*=i),i=0;i<3;i++)r[i]*=1-t-n,r[i]+=t;return r}function Bh(e){var t,n,i,r=e.r/255,a=e.g/255,s=e.b/255,o=Math.max(r,a,s),l=Math.min(r,a,s),u=(o+l)/2;return o!==l&&(i=o-l,n=u>.5?i/(2-o-l):i/(o+l),t=function(e,t,n,i,r){return e===r?(t-n)/i+(t<n?6:0):t===r?(n-e)/i+2:(e-t)/i+4}(r,a,s,i,o),t=60*t+.5),[0|t,n||0,u]}function zh(e,t,n,i){return(Array.isArray(t)?e(t[0],t[1],t[2]):e(t,n,i)).map(Eh)}function Vh(e,t,n){return zh(Uh,e,t,n)}function Hh(e){return(e%360+360)%360}function Wh(e){var t,n=Nh.exec(e),i=255;if(n){n[5]!==t&&(i=n[6]?wh(+n[5]):Eh(+n[5]));var r=Hh(+n[2]),a=+n[3]/100,s=+n[4]/100;return{r:(t="hwb"===n[1]?function(e,t,n){return zh(Fh,e,t,n)}(r,a,s):"hsv"===n[1]?function(e,t,n){return zh(jh,e,t,n)}(r,a,s):Vh(r,a,s))[0],g:t[1],b:t[2],a:i}}}var qh,Gh={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},Xh={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function Kh(e){qh||(qh=function(){var e,t,n,i,r,a={},s=Object.keys(Xh),o=Object.keys(Gh);for(e=0;e<s.length;e++){for(i=r=s[e],t=0;t<o.length;t++)n=o[t],r=r.replace(n,Gh[n]);n=parseInt(Xh[i],16),a[r]=[n>>16&255,n>>8&255,255&n]}return a}(),qh.transparent=[0,0,0,0]);var t=qh[e.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:4===t.length?t[3]:255}}var $h=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;var Yh=function(e){return e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055},Qh=function(e){return e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)};function Jh(e,t,n){if(e){var i=Bh(e);i[t]=Math.max(0,Math.min(i[t]+i[t]*n,0===t?360:1)),i=Vh(i),e.r=i[0],e.g=i[1],e.b=i[2]}}function Zh(e,t){return e?Object.assign(t||{},e):e}function ef(e){var t={r:0,g:0,b:0,a:255};return Array.isArray(e)?e.length>=3&&(t={r:e[0],g:e[1],b:e[2],a:255},e.length>3&&(t.a=Eh(e[3]))):(t=Zh(e,{r:0,g:0,b:0,a:1})).a=Eh(t.a),t}function tf(e){return"r"===e.charAt(0)?function(e){var t,n,i,r=$h.exec(e),a=255;if(r){if(r[7]!==t){var s=+r[7];a=r[8]?wh(s):Sh(255*s,0,255)}return t=+r[1],n=+r[3],i=+r[5],{r:t=255&(r[2]?wh(t):Sh(t,0,255)),g:n=255&(r[4]?wh(n):Sh(n,0,255)),b:i=255&(r[6]?wh(i):Sh(i,0,255)),a:a}}}(e):Wh(e)}var nf=function(){function e(t){if(Dc(this,e),t instanceof e)return t;var n,i=typeof t;"object"===i?n=ef(t):"string"===i&&(n=function(e){var t,n=e.length;return"#"===e[0]&&(4===n||5===n?t={r:255&17*Ih[e[1]],g:255&17*Ih[e[2]],b:255&17*Ih[e[3]],a:5===n?17*Ih[e[4]]:255}:7!==n&&9!==n||(t={r:Ih[e[1]]<<4|Ih[e[2]],g:Ih[e[3]]<<4|Ih[e[4]],b:Ih[e[5]]<<4|Ih[e[6]],a:9===n?Ih[e[7]]<<4|Ih[e[8]]:255})),t}(t)||Kh(t)||tf(t)),this._rgb=n,this._valid=!!n}return jc(e,[{key:"valid",get:function(){return this._valid}},{key:"rgb",get:function(){var e=Zh(this._rgb);return e&&(e.a=Ch(e.a)),e},set:function(e){this._rgb=ef(e)}},{key:"rgbString",value:function(){return this._valid?(e=this._rgb)&&(e.a<255?"rgba(".concat(e.r,", ").concat(e.g,", ").concat(e.b,", ").concat(Ch(e.a),")"):"rgb(".concat(e.r,", ").concat(e.g,", ").concat(e.b,")")):void 0;var e}},{key:"hexString",value:function(){return this._valid?function(e){var t=Dh(e)?Oh:Lh;return e?"#"+t(e.r)+t(e.g)+t(e.b)+Rh(e.a,t):void 0}(this._rgb):void 0}},{key:"hslString",value:function(){return this._valid?function(e){if(e){var t=Bh(e),n=t[0],i=Ph(t[1]),r=Ph(t[2]);return e.a<255?"hsla(".concat(n,", ").concat(i,"%, ").concat(r,"%, ").concat(Ch(e.a),")"):"hsl(".concat(n,", ").concat(i,"%, ").concat(r,"%)")}}(this._rgb):void 0}},{key:"mix",value:function(e,t){if(e){var n,i=this.rgb,r=e.rgb,a=t===n?.5:t,s=2*a-1,o=i.a-r.a,l=((s*o===-1?s:(s+o)/(1+s*o))+1)/2;n=1-l,i.r=255&l*i.r+n*r.r+.5,i.g=255&l*i.g+n*r.g+.5,i.b=255&l*i.b+n*r.b+.5,i.a=a*i.a+(1-a)*r.a,this.rgb=i}return this}},{key:"interpolate",value:function(e,t){return e&&(this._rgb=function(e,t,n){var i=Qh(Ch(e.r)),r=Qh(Ch(e.g)),a=Qh(Ch(e.b));return{r:Eh(Yh(i+n*(Qh(Ch(t.r))-i))),g:Eh(Yh(r+n*(Qh(Ch(t.g))-r))),b:Eh(Yh(a+n*(Qh(Ch(t.b))-a))),a:e.a+n*(t.a-e.a)}}(this._rgb,e._rgb,t)),this}},{key:"clone",value:function(){return new e(this.rgb)}},{key:"alpha",value:function(e){return this._rgb.a=Eh(e),this}},{key:"clearer",value:function(e){return this._rgb.a*=1-e,this}},{key:"greyscale",value:function(){var e=this._rgb,t=xh(.3*e.r+.59*e.g+.11*e.b);return e.r=e.g=e.b=t,this}},{key:"opaquer",value:function(e){return this._rgb.a*=1+e,this}},{key:"negate",value:function(){var e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}},{key:"lighten",value:function(e){return Jh(this._rgb,2,e),this}},{key:"darken",value:function(e){return Jh(this._rgb,2,-e),this}},{key:"saturate",value:function(e){return Jh(this._rgb,1,e),this}},{key:"desaturate",value:function(e){return Jh(this._rgb,1,-e),this}},{key:"rotate",value:function(e){return function(e,t){var n=Bh(e);n[0]=Hh(n[0]+t),n=Vh(n),e.r=n[0],e.g=n[1],e.b=n[2]}(this._rgb,e),this}}]),e}();function rf(){}var af=function(){var e=0;return function(){return e++}}();function sf(e){return null===e||"undefined"===typeof e}function of(e){if(Array.isArray&&Array.isArray(e))return!0;var t=Object.prototype.toString.call(e);return"[object"===t.slice(0,7)&&"Array]"===t.slice(-6)}function lf(e){return null!==e&&"[object Object]"===Object.prototype.toString.call(e)}function uf(e){return("number"===typeof e||e instanceof Number)&&isFinite(+e)}function cf(e,t){return uf(e)?e:t}function df(e,t){return"undefined"===typeof e?t:e}var hf=function(e,t){return"string"===typeof e&&e.endsWith("%")?parseFloat(e)/100*t:+e};function ff(e,t,n){if(e&&"function"===typeof e.call)return e.apply(n,t)}function pf(e,t,n,i){var r,a,s;if(of(e))if(a=e.length,i)for(r=a-1;r>=0;r--)t.call(n,e[r],r);else for(r=0;r<a;r++)t.call(n,e[r],r);else if(lf(e))for(a=(s=Object.keys(e)).length,r=0;r<a;r++)t.call(n,e[s[r]],s[r])}function gf(e,t){var n,i,r,a;if(!e||!t||e.length!==t.length)return!1;for(n=0,i=e.length;n<i;++n)if(r=e[n],a=t[n],r.datasetIndex!==a.datasetIndex||r.index!==a.index)return!1;return!0}function mf(e){if(of(e))return e.map(mf);if(lf(e)){for(var t=Object.create(null),n=Object.keys(e),i=n.length,r=0;r<i;++r)t[n[r]]=mf(e[n[r]]);return t}return e}function vf(e){return-1===["__proto__","prototype","constructor"].indexOf(e)}function yf(e,t,n,i){if(vf(e)){var r=t[e],a=n[e];lf(r)&&lf(a)?_f(r,a,i):t[e]=mf(a)}}function _f(e,t,n){var i=of(t)?t:[t],r=i.length;if(!lf(e))return e;for(var a,s=(n=n||{}).merger||yf,o=0;o<r;++o)if(lf(a=i[o]))for(var l=Object.keys(a),u=0,c=l.length;u<c;++u)s(l[u],e,a,n);return e}function bf(e,t){return _f(e,t,{merger:Tf})}function Tf(e,t,n){if(vf(e)){var i=t[e],r=n[e];lf(i)&&lf(r)?bf(i,r):Object.prototype.hasOwnProperty.call(t,e)||(t[e]=mf(r))}}var kf={"":function(e){return e},x:function(e){return e.x},y:function(e){return e.y}};function xf(e){var t=function(e){var t,n=[],i="",r=Xc(e.split("."));try{for(r.s();!(t=r.n()).done;)(i+=t.value).endsWith("\\")?i=i.slice(0,-1)+".":(n.push(i),i="")}catch(a){r.e(a)}finally{r.f()}return n}(e);return function(e){var n,i=Xc(t);try{for(i.s();!(n=i.n()).done;){var r=n.value;if(""===r)break;e=e&&e[r]}}catch(a){i.e(a)}finally{i.f()}return e}}function Sf(e,t){return(kf[t]||(kf[t]=xf(t)))(e)}function wf(e){return e.charAt(0).toUpperCase()+e.slice(1)}var Ef=function(e){return"undefined"!==typeof e},Cf=function(e){return"function"===typeof e},Pf=function(e,t){if(e.size!==t.size)return!1;var n,i=Xc(e);try{for(i.s();!(n=i.n()).done;){var r=n.value;if(!t.has(r))return!1}}catch(a){i.e(a)}finally{i.f()}return!0};var If=Math.PI,Af=2*If,Of=Af+If,Lf=Number.POSITIVE_INFINITY,Mf=If/180,Df=If/2,Rf=If/4,Nf=2*If/3,Uf=Math.log10,jf=Math.sign;function Ff(e,t,n){return Math.abs(e-t)<n}function Bf(e){var t=Math.round(e);e=Ff(e,t,e/1e3)?t:e;var n=Math.pow(10,Math.floor(Uf(e))),i=e/n;return(i<=1?1:i<=2?2:i<=5?5:10)*n}function zf(e){return!isNaN(parseFloat(e))&&isFinite(e)}function Vf(e,t,n){var i,r,a;for(i=0,r=e.length;i<r;i++)a=e[i][n],isNaN(a)||(t.min=Math.min(t.min,a),t.max=Math.max(t.max,a))}function Hf(e){return e*(If/180)}function Wf(e){return e*(180/If)}function qf(e){if(uf(e)){for(var t=1,n=0;Math.round(e*t)/t!==e;)t*=10,n++;return n}}function Gf(e,t){var n=t.x-e.x,i=t.y-e.y,r=Math.sqrt(n*n+i*i),a=Math.atan2(i,n);return a<-.5*If&&(a+=Af),{angle:a,distance:r}}function Xf(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function Kf(e,t){return(e-t+Of)%Af-If}function $f(e){return(e%Af+Af)%Af}function Yf(e,t,n,i){var r=$f(e),a=$f(t),s=$f(n),o=$f(a-r),l=$f(s-r),u=$f(r-a),c=$f(r-s);return r===a||r===s||i&&a===s||o>l&&u<c}function Qf(e,t,n){return Math.max(t,Math.min(n,e))}function Jf(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1e-6;return e>=Math.min(t,n)-i&&e<=Math.max(t,n)+i}function Zf(e,t,n){n=n||function(n){return e[n]<t};for(var i,r=e.length-1,a=0;r-a>1;)n(i=a+r>>1)?a=i:r=i;return{lo:a,hi:r}}var ep=function(e,t,n,i){return Zf(e,n,i?function(i){var r=e[i][t];return r<n||r===n&&e[i+1][t]===n}:function(i){return e[i][t]<n})},tp=function(e,t,n){return Zf(e,n,(function(i){return e[i][t]>=n}))};var np=["push","pop","shift","splice","unshift"];function ip(e,t){var n=e._chartjs;if(n){var i=n.listeners,r=i.indexOf(t);-1!==r&&i.splice(r,1),i.length>0||(np.forEach((function(t){delete e[t]})),delete e._chartjs)}}function rp(e){var t,n,i=new Set;for(t=0,n=e.length;t<n;++t)i.add(e[t]);return i.size===n?e:Array.from(i)}var ap="undefined"===typeof window?function(e){return e()}:window.requestAnimationFrame;function sp(e,t){var n=[],i=!1;return function(){for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];n=a,i||(i=!0,ap.call(window,(function(){i=!1,e.apply(t,n)})))}}var op=function(e){return"start"===e?"left":"end"===e?"right":"center"},lp=function(e,t,n){return"start"===e?t:"end"===e?n:(t+n)/2};function up(e,t,n){var i=t.length,r=0,a=i;if(e._sorted){var s=e.iScale,o=e._parsed,l=s.axis,u=s.getUserBounds(),c=u.min,d=u.max,h=u.minDefined,f=u.maxDefined;h&&(r=Qf(Math.min(ep(o,s.axis,c).lo,n?i:ep(t,l,s.getPixelForValue(c)).lo),0,i-1)),a=f?Qf(Math.max(ep(o,s.axis,d,!0).hi+1,n?0:ep(t,l,s.getPixelForValue(d),!0).hi+1),r,i)-r:i-r}return{start:r,count:a}}function cp(e){var t=e.xScale,n=e.yScale,i=e._scaleRanges,r={xmin:t.min,xmax:t.max,ymin:n.min,ymax:n.max};if(!i)return e._scaleRanges=r,!0;var a=i.xmin!==t.min||i.xmax!==t.max||i.ymin!==n.min||i.ymax!==n.max;return Object.assign(i,r),a}var dp=function(e){return 0===e||1===e},hp=function(e,t,n){return-Math.pow(2,10*(e-=1))*Math.sin((e-t)*Af/n)},fp=function(e,t,n){return Math.pow(2,-10*e)*Math.sin((e-t)*Af/n)+1},pp={linear:function(e){return e},easeInQuad:function(e){return e*e},easeOutQuad:function(e){return-e*(e-2)},easeInOutQuad:function(e){return(e/=.5)<1?.5*e*e:-.5*(--e*(e-2)-1)},easeInCubic:function(e){return e*e*e},easeOutCubic:function(e){return(e-=1)*e*e+1},easeInOutCubic:function(e){return(e/=.5)<1?.5*e*e*e:.5*((e-=2)*e*e+2)},easeInQuart:function(e){return e*e*e*e},easeOutQuart:function(e){return-((e-=1)*e*e*e-1)},easeInOutQuart:function(e){return(e/=.5)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2)},easeInQuint:function(e){return e*e*e*e*e},easeOutQuint:function(e){return(e-=1)*e*e*e*e+1},easeInOutQuint:function(e){return(e/=.5)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2)},easeInSine:function(e){return 1-Math.cos(e*Df)},easeOutSine:function(e){return Math.sin(e*Df)},easeInOutSine:function(e){return-.5*(Math.cos(If*e)-1)},easeInExpo:function(e){return 0===e?0:Math.pow(2,10*(e-1))},easeOutExpo:function(e){return 1===e?1:1-Math.pow(2,-10*e)},easeInOutExpo:function(e){return dp(e)?e:e<.5?.5*Math.pow(2,10*(2*e-1)):.5*(2-Math.pow(2,-10*(2*e-1)))},easeInCirc:function(e){return e>=1?e:-(Math.sqrt(1-e*e)-1)},easeOutCirc:function(e){return Math.sqrt(1-(e-=1)*e)},easeInOutCirc:function(e){return(e/=.5)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)},easeInElastic:function(e){return dp(e)?e:hp(e,.075,.3)},easeOutElastic:function(e){return dp(e)?e:fp(e,.075,.3)},easeInOutElastic:function(e){var t=.1125;return dp(e)?e:e<.5?.5*hp(2*e,t,.45):.5+.5*fp(2*e-1,t,.45)},easeInBack:function(e){var t=1.70158;return e*e*((t+1)*e-t)},easeOutBack:function(e){var t=1.70158;return(e-=1)*e*((t+1)*e+t)+1},easeInOutBack:function(e){var t=1.70158;return(e/=.5)<1?e*e*((1+(t*=1.525))*e-t)*.5:.5*((e-=2)*e*((1+(t*=1.525))*e+t)+2)},easeInBounce:function(e){return 1-pp.easeOutBounce(1-e)},easeOutBounce:function(e){var t=7.5625,n=2.75;return e<1/n?t*e*e:e<2/n?t*(e-=1.5/n)*e+.75:e<2.5/n?t*(e-=2.25/n)*e+.9375:t*(e-=2.625/n)*e+.984375},easeInOutBounce:function(e){return e<.5?.5*pp.easeInBounce(2*e):.5*pp.easeOutBounce(2*e-1)+.5}};function gp(e){if(e&&"object"===typeof e){var t=e.toString();return"[object CanvasPattern]"===t||"[object CanvasGradient]"===t}return!1}function mp(e){return gp(e)?e:new nf(e)}function vp(e){return gp(e)?e:new nf(e).saturate(.5).darken(.1).hexString()}var yp=["x","y","borderWidth","radius","tension"],_p=["color","borderColor","backgroundColor"];var bp=new Map;function Tp(e,t,n){return function(e,t){t=t||{};var n=e+JSON.stringify(t),i=bp.get(n);return i||(i=new Intl.NumberFormat(e,t),bp.set(n,i)),i}(t,n).format(e)}var kp={values:function(e){return of(e)?e:""+e},numeric:function(e,t,n){if(0===e)return"0";var i,r=this.chart.options.locale,a=e;if(n.length>1){var s=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(s<1e-4||s>1e15)&&(i="scientific"),a=function(e,t){var n=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;Math.abs(n)>=1&&e!==Math.floor(e)&&(n=e-Math.floor(e));return n}(e,n)}var o=Uf(Math.abs(a)),l=Math.max(Math.min(-1*Math.floor(o),20),0),u={notation:i,minimumFractionDigits:l,maximumFractionDigits:l};return Object.assign(u,this.options.ticks.format),Tp(e,r,u)},logarithmic:function(e,t,n){if(0===e)return"0";var i=n[t].significand||e/Math.pow(10,Math.floor(Uf(e)));return[1,2,3,5,10,15].includes(i)||t>.8*n.length?kp.numeric.call(this,e,t,n):""}};var xp={formatters:kp};var Sp=Object.create(null),wp=Object.create(null);function Ep(e,t){if(!t)return e;for(var n=t.split("."),i=0,r=n.length;i<r;++i){var a=n[i];e=e[a]||(e[a]=Object.create(null))}return e}function Cp(e,t,n){return"string"===typeof t?_f(Ep(e,t),n):_f(Ep(e,""),t)}var Pp=function(){function e(t,n){Dc(this,e),this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=function(e){return e.chart.platform.getDevicePixelRatio()},this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=function(e,t){return vp(t.backgroundColor)},this.hoverBorderColor=function(e,t){return vp(t.borderColor)},this.hoverColor=function(e,t){return vp(t.color)},this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t),this.apply(n)}return jc(e,[{key:"set",value:function(e,t){return Cp(this,e,t)}},{key:"get",value:function(e){return Ep(this,e)}},{key:"describe",value:function(e,t){return Cp(wp,e,t)}},{key:"override",value:function(e,t){return Cp(Sp,e,t)}},{key:"route",value:function(e,t,n,i){var r,a=Ep(this,e),s=Ep(this,n),o="_"+t;Object.defineProperties(a,(_h(r={},o,{value:a[t],writable:!0}),_h(r,t,{enumerable:!0,get:function(){var e=this[o],t=s[i];return lf(e)?Object.assign({},t,e):df(e,t)},set:function(e){this[o]=e}}),r))}},{key:"apply",value:function(e){var t=this;e.forEach((function(e){return e(t)}))}}]),e}(),Ip=new Pp({_scriptable:function(e){return!e.startsWith("on")},_indexable:function(e){return"events"!==e},hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[function(e){e.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),e.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:function(e){return"onProgress"!==e&&"onComplete"!==e&&"fn"!==e}}),e.set("animations",{colors:{type:"color",properties:_p},numbers:{type:"number",properties:yp}}),e.describe("animations",{_fallback:"animation"}),e.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:function(e){return 0|e}}}}})},function(e){e.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})},function(e){e.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:function(e,t){return t.lineWidth},tickColor:function(e,t){return t.color},offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:xp.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),e.route("scale.ticks","color","","color"),e.route("scale.grid","color","","borderColor"),e.route("scale.border","color","","borderColor"),e.route("scale.title","color","","color"),e.describe("scale",{_fallback:!1,_scriptable:function(e){return!e.startsWith("before")&&!e.startsWith("after")&&"callback"!==e&&"parser"!==e},_indexable:function(e){return"borderDash"!==e&&"tickBorderDash"!==e&&"dash"!==e}}),e.describe("scales",{_fallback:"scale"}),e.describe("scale.ticks",{_scriptable:function(e){return"backdropPadding"!==e&&"callback"!==e},_indexable:function(e){return"backdropPadding"!==e}})}]);function Ap(e,t,n,i,r){var a=t[r];return a||(a=t[r]=e.measureText(r).width,n.push(r)),a>i&&(i=a),i}function Op(e,t,n,i){var r=(i=i||{}).data=i.data||{},a=i.garbageCollect=i.garbageCollect||[];i.font!==t&&(r=i.data={},a=i.garbageCollect=[],i.font=t),e.save(),e.font=t;var s,o,l,u,c,d=0,h=n.length;for(s=0;s<h;s++)if(void 0!==(u=n[s])&&null!==u&&!0!==of(u))d=Ap(e,r,a,d,u);else if(of(u))for(o=0,l=u.length;o<l;o++)void 0===(c=u[o])||null===c||of(c)||(d=Ap(e,r,a,d,c));e.restore();var f=a.length/2;if(f>n.length){for(s=0;s<f;s++)delete r[a[s]];a.splice(0,f)}return d}function Lp(e,t,n){var i=e.currentDevicePixelRatio,r=0!==n?Math.max(n/2,.5):0;return Math.round((t-r)*i)/i+r}function Mp(e,t){(t=t||e.getContext("2d")).save(),t.resetTransform(),t.clearRect(0,0,e.width,e.height),t.restore()}function Dp(e,t,n,i){Rp(e,t,n,i,null)}function Rp(e,t,n,i,r){var a,s,o,l,u,c,d,h,f=t.pointStyle,p=t.rotation,g=t.radius,m=(p||0)*Mf;if(f&&"object"===typeof f&&("[object HTMLImageElement]"===(a=f.toString())||"[object HTMLCanvasElement]"===a))return e.save(),e.translate(n,i),e.rotate(m),e.drawImage(f,-f.width/2,-f.height/2,f.width,f.height),void e.restore();if(!(isNaN(g)||g<=0)){switch(e.beginPath(),f){default:r?e.ellipse(n,i,r/2,g,0,0,Af):e.arc(n,i,g,0,Af),e.closePath();break;case"triangle":c=r?r/2:g,e.moveTo(n+Math.sin(m)*c,i-Math.cos(m)*g),m+=Nf,e.lineTo(n+Math.sin(m)*c,i-Math.cos(m)*g),m+=Nf,e.lineTo(n+Math.sin(m)*c,i-Math.cos(m)*g),e.closePath();break;case"rectRounded":l=g-(u=.516*g),s=Math.cos(m+Rf)*l,d=Math.cos(m+Rf)*(r?r/2-u:l),o=Math.sin(m+Rf)*l,h=Math.sin(m+Rf)*(r?r/2-u:l),e.arc(n-d,i-o,u,m-If,m-Df),e.arc(n+h,i-s,u,m-Df,m),e.arc(n+d,i+o,u,m,m+Df),e.arc(n-h,i+s,u,m+Df,m+If),e.closePath();break;case"rect":if(!p){l=Math.SQRT1_2*g,c=r?r/2:l,e.rect(n-c,i-l,2*c,2*l);break}m+=Rf;case"rectRot":d=Math.cos(m)*(r?r/2:g),s=Math.cos(m)*g,o=Math.sin(m)*g,h=Math.sin(m)*(r?r/2:g),e.moveTo(n-d,i-o),e.lineTo(n+h,i-s),e.lineTo(n+d,i+o),e.lineTo(n-h,i+s),e.closePath();break;case"crossRot":m+=Rf;case"cross":d=Math.cos(m)*(r?r/2:g),s=Math.cos(m)*g,o=Math.sin(m)*g,h=Math.sin(m)*(r?r/2:g),e.moveTo(n-d,i-o),e.lineTo(n+d,i+o),e.moveTo(n+h,i-s),e.lineTo(n-h,i+s);break;case"star":d=Math.cos(m)*(r?r/2:g),s=Math.cos(m)*g,o=Math.sin(m)*g,h=Math.sin(m)*(r?r/2:g),e.moveTo(n-d,i-o),e.lineTo(n+d,i+o),e.moveTo(n+h,i-s),e.lineTo(n-h,i+s),m+=Rf,d=Math.cos(m)*(r?r/2:g),s=Math.cos(m)*g,o=Math.sin(m)*g,h=Math.sin(m)*(r?r/2:g),e.moveTo(n-d,i-o),e.lineTo(n+d,i+o),e.moveTo(n+h,i-s),e.lineTo(n-h,i+s);break;case"line":s=r?r/2:Math.cos(m)*g,o=Math.sin(m)*g,e.moveTo(n-s,i-o),e.lineTo(n+s,i+o);break;case"dash":e.moveTo(n,i),e.lineTo(n+Math.cos(m)*(r?r/2:g),i+Math.sin(m)*g);break;case!1:e.closePath()}e.fill(),t.borderWidth>0&&e.stroke()}}function Np(e,t,n){return n=n||.5,!t||e&&e.x>t.left-n&&e.x<t.right+n&&e.y>t.top-n&&e.y<t.bottom+n}function Up(e,t){e.save(),e.beginPath(),e.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),e.clip()}function jp(e){e.restore()}function Fp(e,t,n,i,r){if(!t)return e.lineTo(n.x,n.y);if("middle"===r){var a=(t.x+n.x)/2;e.lineTo(a,t.y),e.lineTo(a,n.y)}else"after"===r!==!!i?e.lineTo(t.x,n.y):e.lineTo(n.x,t.y);e.lineTo(n.x,n.y)}function Bp(e,t,n,i){if(!t)return e.lineTo(n.x,n.y);e.bezierCurveTo(i?t.cp1x:t.cp2x,i?t.cp1y:t.cp2y,i?n.cp2x:n.cp1x,i?n.cp2y:n.cp1y,n.x,n.y)}function zp(e,t,n,i,r){var a,s,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},l=of(t)?t:[t],u=o.strokeWidth>0&&""!==o.strokeColor;for(e.save(),e.font=r.string,function(e,t){t.translation&&e.translate(t.translation[0],t.translation[1]);sf(t.rotation)||e.rotate(t.rotation);t.color&&(e.fillStyle=t.color);t.textAlign&&(e.textAlign=t.textAlign);t.textBaseline&&(e.textBaseline=t.textBaseline)}(e,o),a=0;a<l.length;++a)s=l[a],o.backdrop&&Hp(e,o.backdrop),u&&(o.strokeColor&&(e.strokeStyle=o.strokeColor),sf(o.strokeWidth)||(e.lineWidth=o.strokeWidth),e.strokeText(s,n,i,o.maxWidth)),e.fillText(s,n,i,o.maxWidth),Vp(e,n,i,s,o),i+=r.lineHeight;e.restore()}function Vp(e,t,n,i,r){if(r.strikethrough||r.underline){var a=e.measureText(i),s=t-a.actualBoundingBoxLeft,o=t+a.actualBoundingBoxRight,l=n-a.actualBoundingBoxAscent,u=n+a.actualBoundingBoxDescent,c=r.strikethrough?(l+u)/2:u;e.strokeStyle=e.fillStyle,e.beginPath(),e.lineWidth=r.decorationWidth||2,e.moveTo(s,c),e.lineTo(o,c),e.stroke()}}function Hp(e,t){var n=e.fillStyle;e.fillStyle=t.color,e.fillRect(t.left,t.top,t.width,t.height),e.fillStyle=n}function Wp(e,t){var n=t.x,i=t.y,r=t.w,a=t.h,s=t.radius;e.arc(n+s.topLeft,i+s.topLeft,s.topLeft,-Df,If,!0),e.lineTo(n,i+a-s.bottomLeft),e.arc(n+s.bottomLeft,i+a-s.bottomLeft,s.bottomLeft,If,Df,!0),e.lineTo(n+r-s.bottomRight,i+a),e.arc(n+r-s.bottomRight,i+a-s.bottomRight,s.bottomRight,Df,0,!0),e.lineTo(n+r,i+s.topRight),e.arc(n+r-s.topRight,i+s.topRight,s.topRight,0,-Df,!0),e.lineTo(n+s.topLeft,i)}var qp=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,Gp=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function Xp(e,t){var n=(""+e).match(qp);if(!n||"normal"===n[1])return 1.2*t;switch(e=+n[2],n[3]){case"px":return e;case"%":e/=100}return t*e}var Kp=function(e){return+e||0};function $p(e,t){var n,i={},r=lf(t),a=r?Object.keys(t):t,s=lf(e)?r?function(n){return df(e[n],e[t[n]])}:function(t){return e[t]}:function(){return e},o=Xc(a);try{for(o.s();!(n=o.n()).done;){var l=n.value;i[l]=Kp(s(l))}}catch(u){o.e(u)}finally{o.f()}return i}function Yp(e){return $p(e,{top:"y",right:"x",bottom:"y",left:"x"})}function Qp(e){return $p(e,["topLeft","topRight","bottomLeft","bottomRight"])}function Jp(e){var t=Yp(e);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function Zp(e,t){e=e||{},t=t||Ip.font;var n=df(e.size,t.size);"string"===typeof n&&(n=parseInt(n,10));var i=df(e.style,t.style);i&&!(""+i).match(Gp)&&(console.warn('Invalid font style specified: "'+i+'"'),i=void 0);var r={family:df(e.family,t.family),lineHeight:Xp(df(e.lineHeight,t.lineHeight),n),size:n,style:i,weight:df(e.weight,t.weight),string:""};return r.string=function(e){return!e||sf(e.size)||sf(e.family)?null:(e.style?e.style+" ":"")+(e.weight?e.weight+" ":"")+e.size+"px "+e.family}(r),r}function eg(e,t,n,i){var r,a,s,o=!0;for(r=0,a=e.length;r<a;++r)if(void 0!==(s=e[r])&&(void 0!==t&&"function"===typeof s&&(s=s(t),o=!1),void 0!==n&&of(s)&&(s=s[n%s.length],o=!1),void 0!==s))return i&&!o&&(i.cacheable=!1),s}function tg(e,t){return Object.assign(Object.create(e),t)}function ng(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[""],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e,r=arguments.length>3?arguments[3]:void 0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:function(){return e[0]};Ef(r)||(r=fg("_fallback",e));var s=(_h(t={},Symbol.toStringTag,"Object"),_h(t,"_cacheable",!0),_h(t,"_scopes",e),_h(t,"_rootScopes",i),_h(t,"_fallback",r),_h(t,"_getTarget",a),_h(t,"override",(function(t){return ng([t].concat(Mc(e)),n,i,r)})),t);return new Proxy(s,{deleteProperty:function(t,n){return delete t[n],delete t._keys,delete e[0][n],!0},get:function(t,i){return og(t,i,(function(){return function(e,t,n,i){var r,a,s=Xc(t);try{for(s.s();!(a=s.n()).done;){var o=a.value;if(r=fg(ag(o,e),n),Ef(r))return sg(e,r)?dg(n,i,e,r):r}}catch(l){s.e(l)}finally{s.f()}}(i,n,e,t)}))},getOwnPropertyDescriptor:function(e,t){return Reflect.getOwnPropertyDescriptor(e._scopes[0],t)},getPrototypeOf:function(){return Reflect.getPrototypeOf(e[0])},has:function(e,t){return pg(e).includes(t)},ownKeys:function(e){return pg(e)},set:function(e,t,n){var i=e._storage||(e._storage=a());return e[t]=i[t]=n,delete e._keys,!0}})}function ig(e,t,n,i){var r={_cacheable:!1,_proxy:e,_context:t,_subProxy:n,_stack:new Set,_descriptors:rg(e,i),setContext:function(t){return ig(e,t,n,i)},override:function(r){return ig(e.override(r),t,n,i)}};return new Proxy(r,{deleteProperty:function(t,n){return delete t[n],delete e[n],!0},get:function(e,t,n){return og(e,t,(function(){return function(e,t,n){var i=e._proxy,r=e._context,a=e._subProxy,s=e._descriptors,o=i[t];Cf(o)&&s.isScriptable(t)&&(o=function(e,t,n,i){var r=n._proxy,a=n._context,s=n._subProxy,o=n._stack;if(o.has(e))throw new Error("Recursion detected: "+Array.from(o).join("->")+"->"+e);o.add(e),t=t(a,s||i),o.delete(e),sg(e,t)&&(t=dg(r._scopes,r,e,t));return t}(t,o,e,n));of(o)&&o.length&&(o=function(e,t,n,i){var r=n._proxy,a=n._context,s=n._subProxy,o=n._descriptors;if(Ef(a.index)&&i(e))t=t[a.index%t.length];else if(lf(t[0])){var l=t,u=r._scopes.filter((function(e){return e!==l}));t=[];var c,d=Xc(l);try{for(d.s();!(c=d.n()).done;){var h=dg(u,r,e,c.value);t.push(ig(h,a,s&&s[e],o))}}catch(f){d.e(f)}finally{d.f()}}return t}(t,o,e,s.isIndexable));sg(t,o)&&(o=ig(o,r,a&&a[t],s));return o}(e,t,n)}))},getOwnPropertyDescriptor:function(t,n){return t._descriptors.allKeys?Reflect.has(e,n)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(e,n)},getPrototypeOf:function(){return Reflect.getPrototypeOf(e)},has:function(t,n){return Reflect.has(e,n)},ownKeys:function(){return Reflect.ownKeys(e)},set:function(t,n,i){return e[n]=i,delete t[n],!0}})}function rg(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{scriptable:!0,indexable:!0},n=e._scriptable,i=void 0===n?t.scriptable:n,r=e._indexable,a=void 0===r?t.indexable:r,s=e._allKeys;return{allKeys:void 0===s?t.allKeys:s,scriptable:i,indexable:a,isScriptable:Cf(i)?i:function(){return i},isIndexable:Cf(a)?a:function(){return a}}}var ag=function(e,t){return e?e+wf(t):t},sg=function(e,t){return lf(t)&&"adapters"!==e&&(null===Object.getPrototypeOf(t)||t.constructor===Object)};function og(e,t,n){if(Object.prototype.hasOwnProperty.call(e,t))return e[t];var i=n();return e[t]=i,i}function lg(e,t,n){return Cf(e)?e(t,n):e}var ug=function(e,t){return!0===e?t:"string"===typeof e?Sf(t,e):void 0};function cg(e,t,n,i,r){var a,s=Xc(t);try{for(s.s();!(a=s.n()).done;){var o=a.value,l=ug(n,o);if(l){e.add(l);var u=lg(l._fallback,n,r);if(Ef(u)&&u!==n&&u!==i)return u}else if(!1===l&&Ef(i)&&n!==i)return null}}catch(c){s.e(c)}finally{s.f()}return!1}function dg(e,t,n,i){var r=t._rootScopes,a=lg(t._fallback,n,i),s=[].concat(Mc(e),Mc(r)),o=new Set;o.add(i);var l=hg(o,s,n,a||n,i);return null!==l&&((!Ef(a)||a===n||null!==(l=hg(o,s,a,l,i)))&&ng(Array.from(o),[""],r,a,(function(){return function(e,t,n){var i=e._getTarget();t in i||(i[t]={});var r=i[t];if(of(r)&&lf(n))return n;return r||{}}(t,n,i)})))}function hg(e,t,n,i,r){for(;n;)n=cg(e,t,n,i,r);return n}function fg(e,t){var n,i=Xc(t);try{for(i.s();!(n=i.n()).done;){var r=n.value;if(r){var a=r[e];if(Ef(a))return a}}}catch(s){i.e(s)}finally{i.f()}}function pg(e){var t=e._keys;return t||(t=e._keys=function(e){var t,n=new Set,i=Xc(e);try{for(i.s();!(t=i.n()).done;){var r,a=t.value,s=Xc(Object.keys(a).filter((function(e){return!e.startsWith("_")})));try{for(s.s();!(r=s.n()).done;){var o=r.value;n.add(o)}}catch(l){s.e(l)}finally{s.f()}}}catch(l){i.e(l)}finally{i.f()}return Array.from(n)}(e._scopes)),t}function gg(e,t,n,i){var r,a,s,o,l=e.iScale,u=this._parsing.key,c=void 0===u?"r":u,d=new Array(i);for(r=0,a=i;r<a;++r)o=t[s=r+n],d[r]={r:l.parse(Sf(o,c),s)};return d}var mg=Number.EPSILON||1e-14,vg=function(e,t){return t<e.length&&!e[t].skip&&e[t]},yg=function(e){return"x"===e?"y":"x"};function _g(e,t,n,i){var r=e.skip?t:e,a=t,s=n.skip?t:n,o=Xf(a,r),l=Xf(s,a),u=o/(o+l),c=l/(o+l),d=i*(u=isNaN(u)?0:u),h=i*(c=isNaN(c)?0:c);return{previous:{x:a.x-d*(s.x-r.x),y:a.y-d*(s.y-r.y)},next:{x:a.x+h*(s.x-r.x),y:a.y+h*(s.y-r.y)}}}function bg(e){var t,n,i,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"x",a=yg(r),s=e.length,o=Array(s).fill(0),l=Array(s),u=vg(e,0);for(t=0;t<s;++t)if(n=i,i=u,u=vg(e,t+1),i){if(u){var c=u[r]-i[r];o[t]=0!==c?(u[a]-i[a])/c:0}l[t]=n?u?jf(o[t-1])!==jf(o[t])?0:(o[t-1]+o[t])/2:o[t-1]:o[t]}!function(e,t,n){for(var i,r,a,s,o,l=e.length,u=vg(e,0),c=0;c<l-1;++c)o=u,u=vg(e,c+1),o&&u&&(Ff(t[c],0,mg)?n[c]=n[c+1]=0:(i=n[c]/t[c],r=n[c+1]/t[c],(s=Math.pow(i,2)+Math.pow(r,2))<=9||(a=3/Math.sqrt(s),n[c]=i*a*t[c],n[c+1]=r*a*t[c])))}(e,o,l),function(e,t){for(var n,i,r,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"x",s=yg(a),o=e.length,l=vg(e,0),u=0;u<o;++u)if(i=r,r=l,l=vg(e,u+1),r){var c=r[a],d=r[s];i&&(n=(c-i[a])/3,r["cp1".concat(a)]=c-n,r["cp1".concat(s)]=d-n*t[u]),l&&(n=(l[a]-c)/3,r["cp2".concat(a)]=c+n,r["cp2".concat(s)]=d+n*t[u])}}(e,l,r)}function Tg(e,t,n){return Math.max(Math.min(e,n),t)}function kg(e,t,n,i,r){var a,s,o,l;if(t.spanGaps&&(e=e.filter((function(e){return!e.skip}))),"monotone"===t.cubicInterpolationMode)bg(e,r);else{var u=i?e[e.length-1]:e[0];for(a=0,s=e.length;a<s;++a)l=_g(u,o=e[a],e[Math.min(a+1,s-(i?0:1))%s],t.tension),o.cp1x=l.previous.x,o.cp1y=l.previous.y,o.cp2x=l.next.x,o.cp2y=l.next.y,u=o}t.capBezierPoints&&function(e,t){var n,i,r,a,s,o=Np(e[0],t);for(n=0,i=e.length;n<i;++n)s=a,a=o,o=n<i-1&&Np(e[n+1],t),a&&(r=e[n],s&&(r.cp1x=Tg(r.cp1x,t.left,t.right),r.cp1y=Tg(r.cp1y,t.top,t.bottom)),o&&(r.cp2x=Tg(r.cp2x,t.left,t.right),r.cp2y=Tg(r.cp2y,t.top,t.bottom)))}(e,n)}function xg(){return"undefined"!==typeof window&&"undefined"!==typeof document}function Sg(e){var t=e.parentNode;return t&&"[object ShadowRoot]"===t.toString()&&(t=t.host),t}function wg(e,t,n){var i;return"string"===typeof e?(i=parseInt(e,10),-1!==e.indexOf("%")&&(i=i/100*t.parentNode[n])):i=e,i}var Eg=function(e){return e.ownerDocument.defaultView.getComputedStyle(e,null)};var Cg=["top","right","bottom","left"];function Pg(e,t,n){var i={};n=n?"-"+n:"";for(var r=0;r<4;r++){var a=Cg[r];i[a]=parseFloat(e[t+"-"+a+n])||0}return i.width=i.left+i.right,i.height=i.top+i.bottom,i}var Ig=function(e,t,n){return(e>0||t>0)&&(!n||!n.shadowRoot)};function Ag(e,t){if("native"in e)return e;var n=t.canvas,i=t.currentDevicePixelRatio,r=Eg(n),a="border-box"===r.boxSizing,s=Pg(r,"padding"),o=Pg(r,"border","width"),l=function(e,t){var n,i,r=e.touches,a=r&&r.length?r[0]:e,s=a.offsetX,o=a.offsetY,l=!1;if(Ig(s,o,e.target))n=s,i=o;else{var u=t.getBoundingClientRect();n=a.clientX-u.left,i=a.clientY-u.top,l=!0}return{x:n,y:i,box:l}}(e,n),u=l.x,c=l.y,d=l.box,h=s.left+(d&&o.left),f=s.top+(d&&o.top),p=t.width,g=t.height;return a&&(p-=s.width+o.width,g-=s.height+o.height),{x:Math.round((u-h)/p*n.width/i),y:Math.round((c-f)/g*n.height/i)}}var Og=function(e){return Math.round(10*e)/10};function Lg(e,t,n,i){var r=Eg(e),a=Pg(r,"margin"),s=wg(r.maxWidth,e,"clientWidth")||Lf,o=wg(r.maxHeight,e,"clientHeight")||Lf,l=function(e,t,n){var i,r;if(void 0===t||void 0===n){var a=Sg(e);if(a){var s=a.getBoundingClientRect(),o=Eg(a),l=Pg(o,"border","width"),u=Pg(o,"padding");t=s.width-u.width-l.width,n=s.height-u.height-l.height,i=wg(o.maxWidth,a,"clientWidth"),r=wg(o.maxHeight,a,"clientHeight")}else t=e.clientWidth,n=e.clientHeight}return{width:t,height:n,maxWidth:i||Lf,maxHeight:r||Lf}}(e,t,n),u=l.width,c=l.height;if("content-box"===r.boxSizing){var d=Pg(r,"border","width"),h=Pg(r,"padding");u-=h.width+d.width,c-=h.height+d.height}return u=Math.max(0,u-a.width),c=Math.max(0,i?u/i:c-a.height),u=Og(Math.min(u,s,l.maxWidth)),c=Og(Math.min(c,o,l.maxHeight)),u&&!c&&(c=Og(u/2)),(void 0!==t||void 0!==n)&&i&&l.height&&c>l.height&&(c=l.height,u=Og(Math.floor(c*i))),{width:u,height:c}}function Mg(e,t,n){var i=t||1,r=Math.floor(e.height*i),a=Math.floor(e.width*i);e.height=Math.floor(e.height),e.width=Math.floor(e.width);var s=e.canvas;return s.style&&(n||!s.style.height&&!s.style.width)&&(s.style.height="".concat(e.height,"px"),s.style.width="".concat(e.width,"px")),(e.currentDevicePixelRatio!==i||s.height!==r||s.width!==a)&&(e.currentDevicePixelRatio=i,s.height=r,s.width=a,e.ctx.setTransform(i,0,0,i,0,0),!0)}var Dg=function(){var e=!1;try{var t={get passive(){return e=!0,!1}};window.addEventListener("test",null,t),window.removeEventListener("test",null,t)}catch(n){}return e}();function Rg(e,t){var n=function(e,t){return Eg(e).getPropertyValue(t)}(e,t),i=n&&n.match(/^(\d+)(\.\d+)?px$/);return i?+i[1]:void 0}function Ng(e,t,n,i){return{x:e.x+n*(t.x-e.x),y:e.y+n*(t.y-e.y)}}function Ug(e,t,n,i){return{x:e.x+n*(t.x-e.x),y:"middle"===i?n<.5?e.y:t.y:"after"===i?n<1?e.y:t.y:n>0?t.y:e.y}}function jg(e,t,n,i){var r={x:e.cp2x,y:e.cp2y},a={x:t.cp1x,y:t.cp1y},s=Ng(e,r,n),o=Ng(r,a,n),l=Ng(a,t,n),u=Ng(s,o,n),c=Ng(o,l,n);return Ng(u,c,n)}var Fg=function(e,t){return{x:function(n){return e+e+t-n},setWidth:function(e){t=e},textAlign:function(e){return"center"===e?e:"right"===e?"left":"right"},xPlus:function(e,t){return e-t},leftForLtr:function(e,t){return e-t}}},Bg=function(){return{x:function(e){return e},setWidth:function(e){},textAlign:function(e){return e},xPlus:function(e,t){return e+t},leftForLtr:function(e,t){return e}}};function zg(e,t,n){return e?Fg(t,n):Bg()}function Vg(e,t){var n,i;"ltr"!==t&&"rtl"!==t||(i=[(n=e.canvas.style).getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",t,"important"),e.prevTextDirection=i)}function Hg(e,t){void 0!==t&&(delete e.prevTextDirection,e.canvas.style.setProperty("direction",t[0],t[1]))}function Wg(e){return"angle"===e?{between:Yf,compare:Kf,normalize:$f}:{between:Jf,compare:function(e,t){return e-t},normalize:function(e){return e}}}function qg(e){var t=e.start,n=e.end,i=e.count;return{start:t%i,end:n%i,loop:e.loop&&(n-t+1)%i===0,style:e.style}}function Gg(e,t,n){if(!n)return[e];for(var i,r,a,s=n.property,o=n.start,l=n.end,u=t.length,c=Wg(s),d=c.compare,h=c.between,f=c.normalize,p=function(e,t,n){var i,r,a=n.property,s=n.start,o=n.end,l=Wg(a),u=l.between,c=l.normalize,d=t.length,h=e.start,f=e.end,p=e.loop;if(p){for(h+=d,f+=d,i=0,r=d;i<r&&u(c(t[h%d][a]),s,o);++i)h--,f--;h%=d,f%=d}return f<h&&(f+=d),{start:h,end:f,loop:p,style:e.style}}(e,t,n),g=p.start,m=p.end,v=p.loop,y=p.style,_=[],b=!1,T=null,k=function(){return b||h(o,a,i)&&0!==d(o,a)},x=function(){return!b||0===d(l,i)||h(l,a,i)},S=g,w=g;S<=m;++S)(r=t[S%u]).skip||(i=f(r[s]))!==a&&(b=h(i,o,l),null===T&&k()&&(T=0===d(i,o)?S:w),null!==T&&x()&&(_.push(qg({start:T,end:S,loop:v,count:u,style:y})),T=null),w=S,a=i);return null!==T&&_.push(qg({start:T,end:m,loop:v,count:u,style:y})),_}function Xg(e,t){for(var n=[],i=e.segments,r=0;r<i.length;r++){var a=Gg(i[r],e.points,t);a.length&&n.push.apply(n,Mc(a))}return n}function Kg(e,t,n,i){return i&&i.setContext&&n?function(e,t,n,i){var r=e._chart.getContext(),a=$g(e.options),s=e._datasetIndex,o=e.options.spanGaps,l=n.length,u=[],c=a,d=t[0].start,h=d;function f(e,t,i,r){var a=o?-1:1;if(e!==t){for(e+=l;n[e%l].skip;)e-=a;for(;n[t%l].skip;)t+=a;e%l!==t%l&&(u.push({start:e%l,end:t%l,loop:i,style:r}),c=r,d=t%l)}}var p,g=Xc(t);try{for(g.s();!(p=g.n()).done;){var m=p.value;d=o?d:m.start;var v=n[d%l],y=void 0;for(h=d+1;h<=m.end;h++){var _=n[h%l];Yg(y=$g(i.setContext(tg(r,{type:"segment",p0:v,p1:_,p0DataIndex:(h-1)%l,p1DataIndex:h%l,datasetIndex:s}))),c)&&f(d,h-1,m.loop,c),v=_,c=y}d<h-1&&f(d,h-1,m.loop,c)}}catch(b){g.e(b)}finally{g.f()}return u}(e,t,n,i):t}function $g(e){return{backgroundColor:e.backgroundColor,borderCapStyle:e.borderCapStyle,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderJoinStyle:e.borderJoinStyle,borderWidth:e.borderWidth,borderColor:e.borderColor}}function Yg(e,t){return t&&JSON.stringify(e)!==JSON.stringify(t)}var Qg=function(){function e(){Dc(this,e),this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}return jc(e,[{key:"_notify",value:function(e,t,n,i){var r=t.listeners[i],a=t.duration;r.forEach((function(i){return i({chart:e,initial:t.initial,numSteps:a,currentStep:Math.min(n-t.start,a)})}))}},{key:"_refresh",value:function(){var e=this;this._request||(this._running=!0,this._request=ap.call(window,(function(){e._update(),e._request=null,e._running&&e._refresh()})))}},{key:"_update",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Date.now(),n=0;this._charts.forEach((function(i,r){if(i.running&&i.items.length){for(var a,s=i.items,o=s.length-1,l=!1;o>=0;--o)(a=s[o])._active?(a._total>i.duration&&(i.duration=a._total),a.tick(t),l=!0):(s[o]=s[s.length-1],s.pop());l&&(r.draw(),e._notify(r,i,t,"progress")),s.length||(i.running=!1,e._notify(r,i,t,"complete"),i.initial=!1),n+=s.length}})),this._lastDate=t,0===n&&(this._running=!1)}},{key:"_getAnims",value:function(e){var t=this._charts,n=t.get(e);return n||(n={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},t.set(e,n)),n}},{key:"listen",value:function(e,t,n){this._getAnims(e).listeners[t].push(n)}},{key:"add",value:function(e,t){var n;t&&t.length&&(n=this._getAnims(e).items).push.apply(n,Mc(t))}},{key:"has",value:function(e){return this._getAnims(e).items.length>0}},{key:"start",value:function(e){var t=this._charts.get(e);t&&(t.running=!0,t.start=Date.now(),t.duration=t.items.reduce((function(e,t){return Math.max(e,t._duration)}),0),this._refresh())}},{key:"running",value:function(e){if(!this._running)return!1;var t=this._charts.get(e);return!!(t&&t.running&&t.items.length)}},{key:"stop",value:function(e){var t=this._charts.get(e);if(t&&t.items.length){for(var n=t.items,i=n.length-1;i>=0;--i)n[i].cancel();t.items=[],this._notify(e,t,Date.now(),"complete")}}},{key:"remove",value:function(e){return this._charts.delete(e)}}]),e}(),Jg=new Qg,Zg="transparent",em={boolean:function(e,t,n){return n>.5?t:e},color:function(e,t,n){var i=mp(e||Zg),r=i.valid&&mp(t||Zg);return r&&r.valid?r.mix(i,n).hexString():t},number:function(e,t,n){return e+(t-e)*n}},tm=function(){function e(t,n,i,r){Dc(this,e);var a=n[i];r=eg([t.to,r,a,t.from]);var s=eg([t.from,a,r]);this._active=!0,this._fn=t.fn||em[t.type||typeof s],this._easing=pp[t.easing]||pp.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=n,this._prop=i,this._from=s,this._to=r,this._promises=void 0}return jc(e,[{key:"active",value:function(){return this._active}},{key:"update",value:function(e,t,n){if(this._active){this._notify(!1);var i=this._target[this._prop],r=n-this._start,a=this._duration-r;this._start=n,this._duration=Math.floor(Math.max(a,e.duration)),this._total+=r,this._loop=!!e.loop,this._to=eg([e.to,t,i,e.from]),this._from=eg([e.from,i,t])}}},{key:"cancel",value:function(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}},{key:"tick",value:function(e){var t,n=e-this._start,i=this._duration,r=this._prop,a=this._from,s=this._loop,o=this._to;if(this._active=a!==o&&(s||n<i),!this._active)return this._target[r]=o,void this._notify(!0);n<0?this._target[r]=a:(t=n/i%2,t=s&&t>1?2-t:t,t=this._easing(Math.min(1,Math.max(0,t))),this._target[r]=this._fn(a,o,t))}},{key:"wait",value:function(){var e=this._promises||(this._promises=[]);return new Promise((function(t,n){e.push({res:t,rej:n})}))}},{key:"_notify",value:function(e){for(var t=e?"res":"rej",n=this._promises||[],i=0;i<n.length;i++)n[i][t]()}}]),e}(),nm=function(){function e(t,n){Dc(this,e),this._chart=t,this._properties=new Map,this.configure(n)}return jc(e,[{key:"configure",value:function(e){if(lf(e)){var t=Object.keys(Ip.animation),n=this._properties;Object.getOwnPropertyNames(e).forEach((function(i){var r=e[i];if(lf(r)){for(var a={},s=0,o=t;s<o.length;s++){var l=o[s];a[l]=r[l]}(of(r.properties)&&r.properties||[i]).forEach((function(e){e!==i&&n.has(e)||n.set(e,a)}))}}))}}},{key:"_animateOptions",value:function(e,t){var n=t.options,i=function(e,t){if(!t)return;var n=e.options;if(!n)return void(e.options=t);n.$shared&&(e.options=n=Object.assign({},n,{$shared:!1,$animations:{}}));return n}(e,n);if(!i)return[];var r=this._createAnimations(i,n);return n.$shared&&function(e,t){for(var n=[],i=Object.keys(t),r=0;r<i.length;r++){var a=e[i[r]];a&&a.active()&&n.push(a.wait())}return Promise.all(n)}(e.options.$animations,n).then((function(){e.options=n}),(function(){})),r}},{key:"_createAnimations",value:function(e,t){var n,i=this._properties,r=[],a=e.$animations||(e.$animations={}),s=Object.keys(t),o=Date.now();for(n=s.length-1;n>=0;--n){var l=s[n];if("$"!==l.charAt(0))if("options"!==l){var u=t[l],c=a[l],d=i.get(l);if(c){if(d&&c.active()){c.update(d,u,o);continue}c.cancel()}d&&d.duration?(a[l]=c=new tm(d,e,l,u),r.push(c)):e[l]=u}else r.push.apply(r,Mc(this._animateOptions(e,t)))}return r}},{key:"update",value:function(e,t){if(0!==this._properties.size){var n=this._createAnimations(e,t);return n.length?(Jg.add(this._chart,n),!0):void 0}Object.assign(e,t)}}]),e}();function im(e,t){var n=e&&e.options||{},i=n.reverse,r=void 0===n.min?t:0,a=void 0===n.max?t:0;return{start:i?a:r,end:i?r:a}}function rm(e,t){var n,i,r=[],a=e._getSortedDatasetMetas(t);for(n=0,i=a.length;n<i;++n)r.push(a[n].index);return r}function am(e,t,n){var i,r,a,s,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},l=e.keys,u="single"===o.mode;if(null!==t){for(i=0,r=l.length;i<r;++i){if((a=+l[i])===n){if(o.all)continue;break}uf(s=e.values[a])&&(u||0===t||jf(t)===jf(s))&&(t+=s)}return t}}function sm(e,t){var n=e&&e.options.stacked;return n||void 0===n&&void 0!==t.stack}function om(e,t,n){var i=e[t]||(e[t]={});return i[n]||(i[n]={})}function lm(e,t,n,i){var r,a=Xc(t.getMatchingVisibleMetas(i).reverse());try{for(a.s();!(r=a.n()).done;){var s=r.value,o=e[s.index];if(n&&o>0||!n&&o<0)return s.index}}catch(l){a.e(l)}finally{a.f()}return null}function um(e,t){for(var n,i=e.chart,r=e._cachedMeta,a=i._stacks||(i._stacks={}),s=r.iScale,o=r.vScale,l=r.index,u=s.axis,c=o.axis,d=function(e,t,n){return"".concat(e.id,".").concat(t.id,".").concat(n.stack||n.type)}(s,o,r),h=t.length,f=0;f<h;++f){var p=t[f],g=p[u],m=p[c];(n=(p._stacks||(p._stacks={}))[c]=om(a,d,g))[l]=m,n._top=lm(n,o,!0,r.type),n._bottom=lm(n,o,!1,r.type),(n._visualValues||(n._visualValues={}))[l]=m}}function cm(e,t){var n=e.scales;return Object.keys(n).filter((function(e){return n[e].axis===t})).shift()}function dm(e,t){var n=e.controller.index,i=e.vScale&&e.vScale.axis;if(i){var r,a=Xc(t=t||e._parsed);try{for(a.s();!(r=a.n()).done;){var s=r.value._stacks;if(!s||void 0===s[i]||void 0===s[i][n])return;delete s[i][n],void 0!==s[i]._visualValues&&void 0!==s[i]._visualValues[n]&&delete s[i]._visualValues[n]}}catch(o){a.e(o)}finally{a.f()}}}var hm=function(e){return"reset"===e||"none"===e},fm=function(e,t){return t?e:Object.assign({},e)},pm=function(){function e(t,n){Dc(this,e),this.chart=t,this._ctx=t.ctx,this.index=n,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=(this instanceof e?this.constructor:void 0).datasetElementType,this.dataElementType=(this instanceof e?this.constructor:void 0).dataElementType,this.initialize()}return jc(e,[{key:"initialize",value:function(){var e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=sm(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}},{key:"updateIndex",value:function(e){this.index!==e&&dm(this._cachedMeta),this.index=e}},{key:"linkScales",value:function(){var e=this.chart,t=this._cachedMeta,n=this.getDataset(),i=function(e,t,n,i){return"x"===e?t:"r"===e?i:n},r=t.xAxisID=df(n.xAxisID,cm(e,"x")),a=t.yAxisID=df(n.yAxisID,cm(e,"y")),s=t.rAxisID=df(n.rAxisID,cm(e,"r")),o=t.indexAxis,l=t.iAxisID=i(o,r,a,s),u=t.vAxisID=i(o,a,r,s);t.xScale=this.getScaleForId(r),t.yScale=this.getScaleForId(a),t.rScale=this.getScaleForId(s),t.iScale=this.getScaleForId(l),t.vScale=this.getScaleForId(u)}},{key:"getDataset",value:function(){return this.chart.data.datasets[this.index]}},{key:"getMeta",value:function(){return this.chart.getDatasetMeta(this.index)}},{key:"getScaleForId",value:function(e){return this.chart.scales[e]}},{key:"_getOtherScale",value:function(e){var t=this._cachedMeta;return e===t.iScale?t.vScale:t.iScale}},{key:"reset",value:function(){this._update("reset")}},{key:"_destroy",value:function(){var e=this._cachedMeta;this._data&&ip(this._data,this),e._stacked&&dm(e)}},{key:"_dataCheck",value:function(){var e,t,n=this.getDataset(),i=n.data||(n.data=[]),r=this._data;if(lf(i))this._data=function(e){var t,n,i,r=Object.keys(e),a=new Array(r.length);for(t=0,n=r.length;t<n;++t)i=r[t],a[t]={x:i,y:e[i]};return a}(i);else if(r!==i){if(r){ip(r,this);var a=this._cachedMeta;dm(a),a._parsed=[]}i&&Object.isExtensible(i)&&(t=this,(e=i)._chartjs?e._chartjs.listeners.push(t):(Object.defineProperty(e,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),np.forEach((function(t){var n="_onData"+wf(t),i=e[t];Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value:function(){for(var t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];var s=i.apply(this,r);return e._chartjs.listeners.forEach((function(e){"function"===typeof e[n]&&e[n].apply(e,r)})),s}})})))),this._syncList=[],this._data=i}}},{key:"addElements",value:function(){var e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}},{key:"buildOrUpdateElements",value:function(e){var t=this._cachedMeta,n=this.getDataset(),i=!1;this._dataCheck();var r=t._stacked;t._stacked=sm(t.vScale,t),t.stack!==n.stack&&(i=!0,dm(t),t.stack=n.stack),this._resyncElements(e),(i||r!==t._stacked)&&um(this,t._parsed)}},{key:"configure",value:function(){var e=this.chart.config,t=e.datasetScopeKeys(this._type),n=e.getOptionScopes(this.getDataset(),t,!0);this.options=e.createResolver(n,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}},{key:"parse",value:function(e,t){var n,i,r,a=this._cachedMeta,s=this._data,o=a.iScale,l=a._stacked,u=o.axis,c=0===e&&t===s.length||a._sorted,d=e>0&&a._parsed[e-1];if(!1===this._parsing)a._parsed=s,a._sorted=!0,r=s;else{r=of(s[e])?this.parseArrayData(a,s,e,t):lf(s[e])?this.parseObjectData(a,s,e,t):this.parsePrimitiveData(a,s,e,t);for(n=0;n<t;++n)a._parsed[n+e]=i=r[n],c&&((null===i[u]||d&&i[u]<d[u])&&(c=!1),d=i);a._sorted=c}l&&um(this,r)}},{key:"parsePrimitiveData",value:function(e,t,n,i){var r,a,s,o=e.iScale,l=e.vScale,u=o.axis,c=l.axis,d=o.getLabels(),h=o===l,f=new Array(i);for(r=0,a=i;r<a;++r){var p;s=r+n,f[r]=(_h(p={},u,h||o.parse(d[s],s)),_h(p,c,l.parse(t[s],s)),p)}return f}},{key:"parseArrayData",value:function(e,t,n,i){var r,a,s,o,l=e.xScale,u=e.yScale,c=new Array(i);for(r=0,a=i;r<a;++r)o=t[s=r+n],c[r]={x:l.parse(o[0],s),y:u.parse(o[1],s)};return c}},{key:"parseObjectData",value:function(e,t,n,i){var r,a,s,o,l=e.xScale,u=e.yScale,c=this._parsing,d=c.xAxisKey,h=void 0===d?"x":d,f=c.yAxisKey,p=void 0===f?"y":f,g=new Array(i);for(r=0,a=i;r<a;++r)o=t[s=r+n],g[r]={x:l.parse(Sf(o,h),s),y:u.parse(Sf(o,p),s)};return g}},{key:"getParsed",value:function(e){return this._cachedMeta._parsed[e]}},{key:"getDataElement",value:function(e){return this._cachedMeta.data[e]}},{key:"applyStack",value:function(e,t,n){var i=this.chart,r=this._cachedMeta,a=t[e.axis];return am({keys:rm(i,!0),values:t._stacks[e.axis]._visualValues},a,r.index,{mode:n})}},{key:"updateRangeFromParsed",value:function(e,t,n,i){var r=n[t.axis],a=null===r?NaN:r,s=i&&n._stacks[t.axis];i&&s&&(i.values=s,a=am(i,r,this._cachedMeta.index)),e.min=Math.min(e.min,a),e.max=Math.max(e.max,a)}},{key:"getMinMax",value:function(e,t){var n,i,r=this._cachedMeta,a=r._parsed,s=r._sorted&&e===r.iScale,o=a.length,l=this._getOtherScale(e),u=function(e,t,n){return e&&!t.hidden&&t._stacked&&{keys:rm(n,!0),values:null}}(t,r,this.chart),c={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},d=function(e){var t=e.getUserBounds(),n=t.min,i=t.max,r=t.minDefined,a=t.maxDefined;return{min:r?n:Number.NEGATIVE_INFINITY,max:a?i:Number.POSITIVE_INFINITY}}(l),h=d.min,f=d.max;function p(){var t=(i=a[n])[l.axis];return!uf(i[e.axis])||h>t||f<t}for(n=0;n<o&&(p()||(this.updateRangeFromParsed(c,e,i,u),!s));++n);if(s)for(n=o-1;n>=0;--n)if(!p()){this.updateRangeFromParsed(c,e,i,u);break}return c}},{key:"getAllParsedValues",value:function(e){var t,n,i,r=this._cachedMeta._parsed,a=[];for(t=0,n=r.length;t<n;++t)uf(i=r[t][e.axis])&&a.push(i);return a}},{key:"getMaxOverflow",value:function(){return!1}},{key:"getLabelAndValue",value:function(e){var t=this._cachedMeta,n=t.iScale,i=t.vScale,r=this.getParsed(e);return{label:n?""+n.getLabelForValue(r[n.axis]):"",value:i?""+i.getLabelForValue(r[i.axis]):""}}},{key:"_update",value:function(e){var t=this._cachedMeta;this.update(e||"default"),t._clip=function(e){var t,n,i,r;return lf(e)?(t=e.top,n=e.right,i=e.bottom,r=e.left):t=n=i=r=e,{top:t,right:n,bottom:i,left:r,disabled:!1===e}}(df(this.options.clip,function(e,t,n){if(!1===n)return!1;var i=im(e,n),r=im(t,n);return{top:r.end,right:i.end,bottom:r.start,left:i.start}}(t.xScale,t.yScale,this.getMaxOverflow())))}},{key:"update",value:function(e){}},{key:"draw",value:function(){var e,t=this._ctx,n=this.chart,i=this._cachedMeta,r=i.data||[],a=n.chartArea,s=[],o=this._drawStart||0,l=this._drawCount||r.length-o,u=this.options.drawActiveElementsOnTop;for(i.dataset&&i.dataset.draw(t,a,o,l),e=o;e<o+l;++e){var c=r[e];c.hidden||(c.active&&u?s.push(c):c.draw(t,a))}for(e=0;e<s.length;++e)s[e].draw(t,a)}},{key:"getStyle",value:function(e,t){var n=t?"active":"default";return void 0===e&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(n):this.resolveDataElementOptions(e||0,n)}},{key:"getContext",value:function(e,t,n){var i,r=this.getDataset();if(e>=0&&e<this._cachedMeta.data.length){var a=this._cachedMeta.data[e];i=a.$context||(a.$context=function(e,t,n){return tg(e,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:n,index:t,mode:"default",type:"data"})}(this.getContext(),e,a)),i.parsed=this.getParsed(e),i.raw=r.data[e],i.index=i.dataIndex=e}else i=this.$context||(this.$context=function(e,t){return tg(e,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}(this.chart.getContext(),this.index)),i.dataset=r,i.index=i.datasetIndex=this.index;return i.active=!!t,i.mode=n,i}},{key:"resolveDatasetElementOptions",value:function(e){return this._resolveElementOptions(this.datasetElementType.id,e)}},{key:"resolveDataElementOptions",value:function(e,t){return this._resolveElementOptions(this.dataElementType.id,t,e)}},{key:"_resolveElementOptions",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default",i=arguments.length>2?arguments[2]:void 0,r="active"===n,a=this._cachedDataOpts,s=e+"-"+n,o=a[s],l=this.enableOptionSharing&&Ef(i);if(o)return fm(o,l);var u=this.chart.config,c=u.datasetElementScopeKeys(this._type,e),d=r?["".concat(e,"Hover"),"hover",e,""]:[e,""],h=u.getOptionScopes(this.getDataset(),c),f=Object.keys(Ip.elements[e]),p=u.resolveNamedOptions(h,f,(function(){return t.getContext(i,r,n)}),d);return p.$shared&&(p.$shared=l,a[s]=Object.freeze(fm(p,l))),p}},{key:"_resolveAnimations",value:function(e,t,n){var i,r=this.chart,a=this._cachedDataOpts,s="animation-".concat(t),o=a[s];if(o)return o;if(!1!==r.options.animation){var l=this.chart.config,u=l.datasetAnimationScopeKeys(this._type,t),c=l.getOptionScopes(this.getDataset(),u);i=l.createResolver(c,this.getContext(e,n,t))}var d=new nm(r,i&&i.animations);return i&&i._cacheable&&(a[s]=Object.freeze(d)),d}},{key:"getSharedOptions",value:function(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}},{key:"includeOptions",value:function(e,t){return!t||hm(e)||this.chart._animationsDisabled}},{key:"_getSharedOptions",value:function(e,t){var n=this.resolveDataElementOptions(e,t),i=this._sharedOptions,r=this.getSharedOptions(n),a=this.includeOptions(t,r)||r!==i;return this.updateSharedOptions(r,t,n),{sharedOptions:r,includeOptions:a}}},{key:"updateElement",value:function(e,t,n,i){hm(i)?Object.assign(e,n):this._resolveAnimations(t,i).update(e,n)}},{key:"updateSharedOptions",value:function(e,t,n){e&&!hm(t)&&this._resolveAnimations(void 0,t).update(e,n)}},{key:"_setStyle",value:function(e,t,n,i){e.active=i;var r=this.getStyle(t,i);this._resolveAnimations(t,n,i).update(e,{options:!i&&this.getSharedOptions(r)||r})}},{key:"removeHoverStyle",value:function(e,t,n){this._setStyle(e,n,"active",!1)}},{key:"setHoverStyle",value:function(e,t,n){this._setStyle(e,n,"active",!0)}},{key:"_removeDatasetHoverStyle",value:function(){var e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}},{key:"_setDatasetHoverStyle",value:function(){var e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}},{key:"_resyncElements",value:function(e){var t,n=this._data,i=this._cachedMeta.data,r=Xc(this._syncList);try{for(r.s();!(t=r.n()).done;){var a=Oc(t.value,3),s=a[0],o=a[1],l=a[2];this[s](o,l)}}catch(h){r.e(h)}finally{r.f()}this._syncList=[];var u=i.length,c=n.length,d=Math.min(c,u);d&&this.parse(0,d),c>u?this._insertElements(u,c-u,e):c<u&&this._removeElements(c,u-c)}},{key:"_insertElements",value:function(e,t){var n,i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=this._cachedMeta,a=r.data,s=e+t,o=function(e){for(e.length+=t,n=e.length-1;n>=s;n--)e[n]=e[n-t]};for(o(a),n=e;n<s;++n)a[n]=new this.dataElementType;this._parsing&&o(r._parsed),this.parse(e,t),i&&this.updateElements(a,e,t,"reset")}},{key:"updateElements",value:function(e,t,n,i){}},{key:"_removeElements",value:function(e,t){var n=this._cachedMeta;if(this._parsing){var i=n._parsed.splice(e,t);n._stacked&&dm(n,i)}n.data.splice(e,t)}},{key:"_sync",value:function(e){if(this._parsing)this._syncList.push(e);else{var t=Oc(e,3),n=t[0],i=t[1],r=t[2];this[n](i,r)}this.chart._dataChanges.push([this.index].concat(Mc(e)))}},{key:"_onDataPush",value:function(){var e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}},{key:"_onDataPop",value:function(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}},{key:"_onDataShift",value:function(){this._sync(["_removeElements",0,1])}},{key:"_onDataSplice",value:function(e,t){t&&this._sync(["_removeElements",e,t]);var n=arguments.length-2;n&&this._sync(["_insertElements",e,n])}},{key:"_onDataUnshift",value:function(){this._sync(["_insertElements",0,arguments.length])}}]),e}();function gm(e){var t,n,i,r,a=e.iScale,s=function(e,t){if(!e._cache.$bar){for(var n=e.getMatchingVisibleMetas(t),i=[],r=0,a=n.length;r<a;r++)i=i.concat(n[r].controller.getAllParsedValues(e));e._cache.$bar=rp(i.sort((function(e,t){return e-t})))}return e._cache.$bar}(a,e.type),o=a._length,l=function(){32767!==i&&-32768!==i&&(Ef(r)&&(o=Math.min(o,Math.abs(i-r)||o)),r=i)};for(t=0,n=s.length;t<n;++t)i=a.getPixelForValue(s[t]),l();for(r=void 0,t=0,n=a.ticks.length;t<n;++t)i=a.getPixelForTick(t),l();return o}function mm(e,t,n,i){return of(e)?function(e,t,n,i){var r=n.parse(e[0],i),a=n.parse(e[1],i),s=Math.min(r,a),o=Math.max(r,a),l=s,u=o;Math.abs(s)>Math.abs(o)&&(l=o,u=s),t[n.axis]=u,t._custom={barStart:l,barEnd:u,start:r,end:a,min:s,max:o}}(e,t,n,i):t[n.axis]=n.parse(e,i),t}function vm(e,t,n,i){var r,a,s,o,l=e.iScale,u=e.vScale,c=l.getLabels(),d=l===u,h=[];for(r=n,a=n+i;r<a;++r)o=t[r],(s={})[l.axis]=d||l.parse(c[r],r),h.push(mm(o,s,u,r));return h}function ym(e){return e&&void 0!==e.barStart&&void 0!==e.barEnd}function _m(e,t,n,i){var r=t.borderSkipped,a={};if(r)if(!0!==r){var s=function(e){var t,n,i,r,a;return e.horizontal?(t=e.base>e.x,n="left",i="right"):(t=e.base<e.y,n="bottom",i="top"),t?(r="end",a="start"):(r="start",a="end"),{start:n,end:i,reverse:t,top:r,bottom:a}}(e),o=s.start,l=s.end,u=s.reverse,c=s.top,d=s.bottom;"middle"===r&&n&&(e.enableBorderRadius=!0,(n._top||0)===i?r=c:(n._bottom||0)===i?r=d:(a[bm(d,o,l,u)]=!0,r=c)),a[bm(r,o,l,u)]=!0,e.borderSkipped=a}else e.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};else e.borderSkipped=a}function bm(e,t,n,i){var r,a,s;return i?(s=n,e=Tm(e=(r=e)===(a=t)?s:r===s?a:r,n,t)):e=Tm(e,t,n),e}function Tm(e,t,n){return"start"===e?t:"end"===e?n:e}function km(e,t,n){var i=t.inflateAmount;e.inflateAmount="auto"===i?1===n?.33:0:i}_h(pm,"defaults",{}),_h(pm,"datasetElementType",null),_h(pm,"dataElementType",null);var xm=function(e){Bc(n,e);var t=Wc(n);function n(){return Dc(this,n),t.apply(this,arguments)}return jc(n,[{key:"parsePrimitiveData",value:function(e,t,n,i){return vm(e,t,n,i)}},{key:"parseArrayData",value:function(e,t,n,i){return vm(e,t,n,i)}},{key:"parseObjectData",value:function(e,t,n,i){var r,a,s,o,l=e.iScale,u=e.vScale,c=this._parsing,d=c.xAxisKey,h=void 0===d?"x":d,f=c.yAxisKey,p=void 0===f?"y":f,g="x"===l.axis?h:p,m="x"===u.axis?h:p,v=[];for(r=n,a=n+i;r<a;++r)o=t[r],(s={})[l.axis]=l.parse(Sf(o,g),r),v.push(mm(Sf(o,m),s,u,r));return v}},{key:"updateRangeFromParsed",value:function(e,t,i,r){kh(zc(n.prototype),"updateRangeFromParsed",this).call(this,e,t,i,r);var a=i._custom;a&&t===this._cachedMeta.vScale&&(e.min=Math.min(e.min,a.min),e.max=Math.max(e.max,a.max))}},{key:"getMaxOverflow",value:function(){return 0}},{key:"getLabelAndValue",value:function(e){var t=this._cachedMeta,n=t.iScale,i=t.vScale,r=this.getParsed(e),a=r._custom,s=ym(a)?"["+a.start+", "+a.end+"]":""+i.getLabelForValue(r[i.axis]);return{label:""+n.getLabelForValue(r[n.axis]),value:s}}},{key:"initialize",value:function(){this.enableOptionSharing=!0,kh(zc(n.prototype),"initialize",this).call(this),this._cachedMeta.stack=this.getDataset().stack}},{key:"update",value:function(e){var t=this._cachedMeta;this.updateElements(t.data,0,t.data.length,e)}},{key:"updateElements",value:function(e,t,n,i){for(var r="reset"===i,a=this.index,s=this._cachedMeta.vScale,o=s.getBasePixel(),l=s.isHorizontal(),u=this._getRuler(),c=this._getSharedOptions(t,i),d=c.sharedOptions,h=c.includeOptions,f=t;f<t+n;f++){var p=this.getParsed(f),g=r||sf(p[s.axis])?{base:o,head:o}:this._calculateBarValuePixels(f),m=this._calculateBarIndexPixels(f,u),v=(p._stacks||{})[s.axis],y={horizontal:l,base:g.base,enableBorderRadius:!v||ym(p._custom)||a===v._top||a===v._bottom,x:l?g.head:m.center,y:l?m.center:g.head,height:l?m.size:Math.abs(g.size),width:l?Math.abs(g.size):m.size};h&&(y.options=d||this.resolveDataElementOptions(f,e[f].active?"active":i));var _=y.options||e[f].options;_m(y,_,v,a),km(y,_,u.ratio),this.updateElement(e[f],f,y,i)}}},{key:"_getStacks",value:function(e,t){var n,i=this._cachedMeta.iScale,r=i.getMatchingVisibleMetas(this._type).filter((function(e){return e.controller.options.grouped})),a=i.options.stacked,s=[],o=function(e){var n=e.controller.getParsed(t),i=n&&n[e.vScale.axis];if(sf(i)||isNaN(i))return!0},l=Xc(r);try{for(l.s();!(n=l.n()).done;){var u=n.value;if((void 0===t||!o(u))&&((!1===a||-1===s.indexOf(u.stack)||void 0===a&&void 0===u.stack)&&s.push(u.stack),u.index===e))break}}catch(c){l.e(c)}finally{l.f()}return s.length||s.push(void 0),s}},{key:"_getStackCount",value:function(e){return this._getStacks(void 0,e).length}},{key:"_getStackIndex",value:function(e,t,n){var i=this._getStacks(e,n),r=void 0!==t?i.indexOf(t):-1;return-1===r?i.length-1:r}},{key:"_getRuler",value:function(){var e,t,n=this.options,i=this._cachedMeta,r=i.iScale,a=[];for(e=0,t=i.data.length;e<t;++e)a.push(r.getPixelForValue(this.getParsed(e)[r.axis],e));var s=n.barThickness;return{min:s||gm(i),pixels:a,start:r._startPixel,end:r._endPixel,stackCount:this._getStackCount(),scale:r,grouped:n.grouped,ratio:s?1:n.categoryPercentage*n.barPercentage}}},{key:"_calculateBarValuePixels",value:function(e){var t,n,i=this._cachedMeta,r=i.vScale,a=i._stacked,s=i.index,o=this.options,l=o.base,u=o.minBarLength,c=l||0,d=this.getParsed(e),h=d._custom,f=ym(h),p=d[r.axis],g=0,m=a?this.applyStack(r,d,a):p;m!==p&&(g=m-p,m=p),f&&(p=h.barStart,m=h.barEnd-h.barStart,0!==p&&jf(p)!==jf(h.barEnd)&&(g=0),g+=p);var v=sf(l)||f?g:l,y=r.getPixelForValue(v);if(n=(t=this.chart.getDataVisibility(e)?r.getPixelForValue(g+m):y)-y,Math.abs(n)<u){n=function(e,t,n){return 0!==e?jf(e):(t.isHorizontal()?1:-1)*(t.min>=n?1:-1)}(n,r,c)*u,p===c&&(y-=n/2);var _=r.getPixelForDecimal(0),b=r.getPixelForDecimal(1),T=Math.min(_,b),k=Math.max(_,b);t=(y=Math.max(Math.min(y,k),T))+n,a&&!f&&(d._stacks[r.axis]._visualValues[s]=r.getValueForPixel(t)-r.getValueForPixel(y))}if(y===r.getPixelForValue(c)){var x=jf(n)*r.getLineWidthForValue(c)/2;y+=x,n-=x}return{size:n,base:y,head:t,center:t+n/2}}},{key:"_calculateBarIndexPixels",value:function(e,t){var n,i,r=t.scale,a=this.options,s=a.skipNull,o=df(a.maxBarThickness,1/0);if(t.grouped){var l=s?this._getStackCount(e):t.stackCount,u="flex"===a.barThickness?function(e,t,n,i){var r=t.pixels,a=r[e],s=e>0?r[e-1]:null,o=e<r.length-1?r[e+1]:null,l=n.categoryPercentage;null===s&&(s=a-(null===o?t.end-t.start:o-a)),null===o&&(o=a+a-s);var u=a-(a-Math.min(s,o))/2*l;return{chunk:Math.abs(o-s)/2*l/i,ratio:n.barPercentage,start:u}}(e,t,a,l):function(e,t,n,i){var r,a,s=n.barThickness;return sf(s)?(r=t.min*n.categoryPercentage,a=n.barPercentage):(r=s*i,a=1),{chunk:r/i,ratio:a,start:t.pixels[e]-r/2}}(e,t,a,l),c=this._getStackIndex(this.index,this._cachedMeta.stack,s?e:void 0);n=u.start+u.chunk*c+u.chunk/2,i=Math.min(o,u.chunk*u.ratio)}else n=r.getPixelForValue(this.getParsed(e)[r.axis],e),i=Math.min(o,t.min*t.ratio);return{base:n-i/2,head:n+i/2,center:n,size:i}}},{key:"draw",value:function(){for(var e=this._cachedMeta,t=e.vScale,n=e.data,i=n.length,r=0;r<i;++r)null!==this.getParsed(r)[t.axis]&&n[r].draw(this._ctx)}}]),n}(pm);_h(xm,"id","bar"),_h(xm,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),_h(xm,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});var Sm=function(e){Bc(n,e);var t=Wc(n);function n(){return Dc(this,n),t.apply(this,arguments)}return jc(n,[{key:"initialize",value:function(){this.enableOptionSharing=!0,kh(zc(n.prototype),"initialize",this).call(this)}},{key:"parsePrimitiveData",value:function(e,t,i,r){for(var a=kh(zc(n.prototype),"parsePrimitiveData",this).call(this,e,t,i,r),s=0;s<a.length;s++)a[s]._custom=this.resolveDataElementOptions(s+i).radius;return a}},{key:"parseArrayData",value:function(e,t,i,r){for(var a=kh(zc(n.prototype),"parseArrayData",this).call(this,e,t,i,r),s=0;s<a.length;s++){var o=t[i+s];a[s]._custom=df(o[2],this.resolveDataElementOptions(s+i).radius)}return a}},{key:"parseObjectData",value:function(e,t,i,r){for(var a=kh(zc(n.prototype),"parseObjectData",this).call(this,e,t,i,r),s=0;s<a.length;s++){var o=t[i+s];a[s]._custom=df(o&&o.r&&+o.r,this.resolveDataElementOptions(s+i).radius)}return a}},{key:"getMaxOverflow",value:function(){for(var e=this._cachedMeta.data,t=0,n=e.length-1;n>=0;--n)t=Math.max(t,e[n].size(this.resolveDataElementOptions(n))/2);return t>0&&t}},{key:"getLabelAndValue",value:function(e){var t=this._cachedMeta,n=this.chart.data.labels||[],i=t.xScale,r=t.yScale,a=this.getParsed(e),s=i.getLabelForValue(a.x),o=r.getLabelForValue(a.y),l=a._custom;return{label:n[e]||"",value:"("+s+", "+o+(l?", "+l:"")+")"}}},{key:"update",value:function(e){var t=this._cachedMeta.data;this.updateElements(t,0,t.length,e)}},{key:"updateElements",value:function(e,t,n,i){for(var r="reset"===i,a=this._cachedMeta,s=a.iScale,o=a.vScale,l=this._getSharedOptions(t,i),u=l.sharedOptions,c=l.includeOptions,d=s.axis,h=o.axis,f=t;f<t+n;f++){var p=e[f],g=!r&&this.getParsed(f),m={},v=m[d]=r?s.getPixelForDecimal(.5):s.getPixelForValue(g[d]),y=m[h]=r?o.getBasePixel():o.getPixelForValue(g[h]);m.skip=isNaN(v)||isNaN(y),c&&(m.options=u||this.resolveDataElementOptions(f,p.active?"active":i),r&&(m.options.radius=0)),this.updateElement(p,f,m,i)}}},{key:"resolveDataElementOptions",value:function(e,t){var i=this.getParsed(e),r=kh(zc(n.prototype),"resolveDataElementOptions",this).call(this,e,t);r.$shared&&(r=Object.assign({},r,{$shared:!1}));var a=r.radius;return"active"!==t&&(r.radius=0),r.radius+=df(i&&i._custom,a),r}}]),n}(pm);_h(Sm,"id","bubble"),_h(Sm,"defaults",{datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}}),_h(Sm,"overrides",{scales:{x:{type:"linear"},y:{type:"linear"}}});var wm=function(e){Bc(n,e);var t=Wc(n);function n(e,i){var r;return Dc(this,n),(r=t.call(this,e,i)).enableOptionSharing=!0,r.innerRadius=void 0,r.outerRadius=void 0,r.offsetX=void 0,r.offsetY=void 0,r}return jc(n,[{key:"linkScales",value:function(){}},{key:"parse",value:function(e,t){var n=this.getDataset().data,i=this._cachedMeta;if(!1===this._parsing)i._parsed=n;else{var r,a,s=function(e){return+n[e]};if(lf(n[e])){var o=this._parsing.key,l=void 0===o?"value":o;s=function(e){return+Sf(n[e],l)}}for(r=e,a=e+t;r<a;++r)i._parsed[r]=s(r)}}},{key:"_getRotation",value:function(){return Hf(this.options.rotation-90)}},{key:"_getCircumference",value:function(){return Hf(this.options.circumference)}},{key:"_getRotationExtents",value:function(){for(var e=Af,t=-Af,n=0;n<this.chart.data.datasets.length;++n)if(this.chart.isDatasetVisible(n)&&this.chart.getDatasetMeta(n).type===this._type){var i=this.chart.getDatasetMeta(n).controller,r=i._getRotation(),a=i._getCircumference();e=Math.min(e,r),t=Math.max(t,r+a)}return{rotation:e,circumference:t-e}}},{key:"update",value:function(e){var t,n,i=this.chart.chartArea,r=this._cachedMeta,a=r.data,s=this.getMaxBorderWidth()+this.getMaxOffset(a)+this.options.spacing,o=Math.max((Math.min(i.width,i.height)-s)/2,0),l=Math.min((t=this.options.cutout,n=o,"string"===typeof t&&t.endsWith("%")?parseFloat(t)/100:+t/n),1),u=this._getRingWeight(this.index),c=this._getRotationExtents(),d=c.circumference,h=function(e,t,n){var i=1,r=1,a=0,s=0;if(t<Af){var o=e,l=o+t,u=Math.cos(o),c=Math.sin(o),d=Math.cos(l),h=Math.sin(l),f=function(e,t,i){return Yf(e,o,l,!0)?1:Math.max(t,t*n,i,i*n)},p=function(e,t,i){return Yf(e,o,l,!0)?-1:Math.min(t,t*n,i,i*n)},g=f(0,u,d),m=f(Df,c,h),v=p(If,u,d),y=p(If+Df,c,h);i=(g-v)/2,r=(m-y)/2,a=-(g+v)/2,s=-(m+y)/2}return{ratioX:i,ratioY:r,offsetX:a,offsetY:s}}(c.rotation,d,l),f=h.ratioX,p=h.ratioY,g=h.offsetX,m=h.offsetY,v=(i.width-s)/f,y=(i.height-s)/p,_=Math.max(Math.min(v,y)/2,0),b=hf(this.options.radius,_),T=(b-Math.max(b*l,0))/this._getVisibleDatasetWeightTotal();this.offsetX=g*b,this.offsetY=m*b,r.total=this.calculateTotal(),this.outerRadius=b-T*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-T*u,0),this.updateElements(a,0,a.length,e)}},{key:"_circumference",value:function(e,t){var n=this.options,i=this._cachedMeta,r=this._getCircumference();return t&&n.animation.animateRotate||!this.chart.getDataVisibility(e)||null===i._parsed[e]||i.data[e].hidden?0:this.calculateCircumference(i._parsed[e]*r/Af)}},{key:"updateElements",value:function(e,t,n,i){var r,a="reset"===i,s=this.chart,o=s.chartArea,l=s.options.animation,u=(o.left+o.right)/2,c=(o.top+o.bottom)/2,d=a&&l.animateScale,h=d?0:this.innerRadius,f=d?0:this.outerRadius,p=this._getSharedOptions(t,i),g=p.sharedOptions,m=p.includeOptions,v=this._getRotation();for(r=0;r<t;++r)v+=this._circumference(r,a);for(r=t;r<t+n;++r){var y=this._circumference(r,a),_=e[r],b={x:u+this.offsetX,y:c+this.offsetY,startAngle:v,endAngle:v+y,circumference:y,outerRadius:f,innerRadius:h};m&&(b.options=g||this.resolveDataElementOptions(r,_.active?"active":i)),v+=y,this.updateElement(_,r,b,i)}}},{key:"calculateTotal",value:function(){var e,t=this._cachedMeta,n=t.data,i=0;for(e=0;e<n.length;e++){var r=t._parsed[e];null===r||isNaN(r)||!this.chart.getDataVisibility(e)||n[e].hidden||(i+=Math.abs(r))}return i}},{key:"calculateCircumference",value:function(e){var t=this._cachedMeta.total;return t>0&&!isNaN(e)?Af*(Math.abs(e)/t):0}},{key:"getLabelAndValue",value:function(e){var t=this._cachedMeta,n=this.chart,i=n.data.labels||[],r=Tp(t._parsed[e],n.options.locale);return{label:i[e]||"",value:r}}},{key:"getMaxBorderWidth",value:function(e){var t,n,i,r,a,s=0,o=this.chart;if(!e)for(t=0,n=o.data.datasets.length;t<n;++t)if(o.isDatasetVisible(t)){e=(i=o.getDatasetMeta(t)).data,r=i.controller;break}if(!e)return 0;for(t=0,n=e.length;t<n;++t)"inner"!==(a=r.resolveDataElementOptions(t)).borderAlign&&(s=Math.max(s,a.borderWidth||0,a.hoverBorderWidth||0));return s}},{key:"getMaxOffset",value:function(e){for(var t=0,n=0,i=e.length;n<i;++n){var r=this.resolveDataElementOptions(n);t=Math.max(t,r.offset||0,r.hoverOffset||0)}return t}},{key:"_getRingWeightOffset",value:function(e){for(var t=0,n=0;n<e;++n)this.chart.isDatasetVisible(n)&&(t+=this._getRingWeight(n));return t}},{key:"_getRingWeight",value:function(e){return Math.max(df(this.chart.data.datasets[e].weight,1),0)}},{key:"_getVisibleDatasetWeightTotal",value:function(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}]),n}(pm);_h(wm,"id","doughnut"),_h(wm,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),_h(wm,"descriptors",{_scriptable:function(e){return"spacing"!==e},_indexable:function(e){return"spacing"!==e}}),_h(wm,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels:function(e){var t=e.data;if(t.labels.length&&t.datasets.length){var n=e.legend.options.labels,i=n.pointStyle,r=n.color;return t.labels.map((function(t,n){var a=e.getDatasetMeta(0).controller.getStyle(n);return{text:t,fillStyle:a.backgroundColor,strokeStyle:a.borderColor,fontColor:r,lineWidth:a.borderWidth,pointStyle:i,hidden:!e.getDataVisibility(n),index:n}}))}return[]}},onClick:function(e,t,n){n.chart.toggleDataVisibility(t.index),n.chart.update()}}}});var Em=function(e){Bc(n,e);var t=Wc(n);function n(){return Dc(this,n),t.apply(this,arguments)}return jc(n,[{key:"initialize",value:function(){this.enableOptionSharing=!0,this.supportsDecimation=!0,kh(zc(n.prototype),"initialize",this).call(this)}},{key:"update",value:function(e){var t=this._cachedMeta,n=t.dataset,i=t.data,r=void 0===i?[]:i,a=t._dataset,s=this.chart._animationsDisabled,o=up(t,r,s),l=o.start,u=o.count;this._drawStart=l,this._drawCount=u,cp(t)&&(l=0,u=r.length),n._chart=this.chart,n._datasetIndex=this.index,n._decimated=!!a._decimated,n.points=r;var c=this.resolveDatasetElementOptions(e);this.options.showLine||(c.borderWidth=0),c.segment=this.options.segment,this.updateElement(n,void 0,{animated:!s,options:c},e),this.updateElements(r,l,u,e)}},{key:"updateElements",value:function(e,t,n,i){for(var r="reset"===i,a=this._cachedMeta,s=a.iScale,o=a.vScale,l=a._stacked,u=a._dataset,c=this._getSharedOptions(t,i),d=c.sharedOptions,h=c.includeOptions,f=s.axis,p=o.axis,g=this.options,m=g.spanGaps,v=g.segment,y=zf(m)?m:Number.POSITIVE_INFINITY,_=this.chart._animationsDisabled||r||"none"===i,b=t+n,T=e.length,k=t>0&&this.getParsed(t-1),x=0;x<T;++x){var S=e[x],w=_?S:{};if(x<t||x>=b)w.skip=!0;else{var E=this.getParsed(x),C=sf(E[p]),P=w[f]=s.getPixelForValue(E[f],x),I=w[p]=r||C?o.getBasePixel():o.getPixelForValue(l?this.applyStack(o,E,l):E[p],x);w.skip=isNaN(P)||isNaN(I)||C,w.stop=x>0&&Math.abs(E[f]-k[f])>y,v&&(w.parsed=E,w.raw=u.data[x]),h&&(w.options=d||this.resolveDataElementOptions(x,S.active?"active":i)),_||this.updateElement(S,x,w,i),k=E}}}},{key:"getMaxOverflow",value:function(){var e=this._cachedMeta,t=e.dataset,n=t.options&&t.options.borderWidth||0,i=e.data||[];if(!i.length)return n;var r=i[0].size(this.resolveDataElementOptions(0)),a=i[i.length-1].size(this.resolveDataElementOptions(i.length-1));return Math.max(n,r,a)/2}},{key:"draw",value:function(){var e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),kh(zc(n.prototype),"draw",this).call(this)}}]),n}(pm);_h(Em,"id","line"),_h(Em,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),_h(Em,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});var Cm=function(e){Bc(n,e);var t=Wc(n);function n(e,i){var r;return Dc(this,n),(r=t.call(this,e,i)).innerRadius=void 0,r.outerRadius=void 0,r}return jc(n,[{key:"getLabelAndValue",value:function(e){var t=this._cachedMeta,n=this.chart,i=n.data.labels||[],r=Tp(t._parsed[e].r,n.options.locale);return{label:i[e]||"",value:r}}},{key:"parseObjectData",value:function(e,t,n,i){return gg.bind(this)(e,t,n,i)}},{key:"update",value:function(e){var t=this._cachedMeta.data;this._updateRadius(),this.updateElements(t,0,t.length,e)}},{key:"getMinMax",value:function(){var e=this,t=this._cachedMeta,n={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return t.data.forEach((function(t,i){var r=e.getParsed(i).r;!isNaN(r)&&e.chart.getDataVisibility(i)&&(r<n.min&&(n.min=r),r>n.max&&(n.max=r))})),n}},{key:"_updateRadius",value:function(){var e=this.chart,t=e.chartArea,n=e.options,i=Math.min(t.right-t.left,t.bottom-t.top),r=Math.max(i/2,0),a=(r-Math.max(n.cutoutPercentage?r/100*n.cutoutPercentage:1,0))/e.getVisibleDatasetCount();this.outerRadius=r-a*this.index,this.innerRadius=this.outerRadius-a}},{key:"updateElements",value:function(e,t,n,i){var r,a="reset"===i,s=this.chart,o=s.options.animation,l=this._cachedMeta.rScale,u=l.xCenter,c=l.yCenter,d=l.getIndexAngle(0)-.5*If,h=d,f=360/this.countVisibleElements();for(r=0;r<t;++r)h+=this._computeAngle(r,i,f);for(r=t;r<t+n;r++){var p=e[r],g=h,m=h+this._computeAngle(r,i,f),v=s.getDataVisibility(r)?l.getDistanceFromCenterForValue(this.getParsed(r).r):0;h=m,a&&(o.animateScale&&(v=0),o.animateRotate&&(g=m=d));var y={x:u,y:c,innerRadius:0,outerRadius:v,startAngle:g,endAngle:m,options:this.resolveDataElementOptions(r,p.active?"active":i)};this.updateElement(p,r,y,i)}}},{key:"countVisibleElements",value:function(){var e=this,t=this._cachedMeta,n=0;return t.data.forEach((function(t,i){!isNaN(e.getParsed(i).r)&&e.chart.getDataVisibility(i)&&n++})),n}},{key:"_computeAngle",value:function(e,t,n){return this.chart.getDataVisibility(e)?Hf(this.resolveDataElementOptions(e,t).angle||n):0}}]),n}(pm);_h(Cm,"id","polarArea"),_h(Cm,"defaults",{dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0}),_h(Cm,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels:function(e){var t=e.data;if(t.labels.length&&t.datasets.length){var n=e.legend.options.labels,i=n.pointStyle,r=n.color;return t.labels.map((function(t,n){var a=e.getDatasetMeta(0).controller.getStyle(n);return{text:t,fillStyle:a.backgroundColor,strokeStyle:a.borderColor,fontColor:r,lineWidth:a.borderWidth,pointStyle:i,hidden:!e.getDataVisibility(n),index:n}}))}return[]}},onClick:function(e,t,n){n.chart.toggleDataVisibility(t.index),n.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}});var Pm=function(e){Bc(n,e);var t=Wc(n);function n(){return Dc(this,n),t.apply(this,arguments)}return jc(n)}(wm);_h(Pm,"id","pie"),_h(Pm,"defaults",{cutout:0,rotation:0,circumference:360,radius:"100%"});var Im=function(e){Bc(n,e);var t=Wc(n);function n(){return Dc(this,n),t.apply(this,arguments)}return jc(n,[{key:"getLabelAndValue",value:function(e){var t=this._cachedMeta.vScale,n=this.getParsed(e);return{label:t.getLabels()[e],value:""+t.getLabelForValue(n[t.axis])}}},{key:"parseObjectData",value:function(e,t,n,i){return gg.bind(this)(e,t,n,i)}},{key:"update",value:function(e){var t=this._cachedMeta,n=t.dataset,i=t.data||[],r=t.iScale.getLabels();if(n.points=i,"resize"!==e){var a=this.resolveDatasetElementOptions(e);this.options.showLine||(a.borderWidth=0);var s={_loop:!0,_fullLoop:r.length===i.length,options:a};this.updateElement(n,void 0,s,e)}this.updateElements(i,0,i.length,e)}},{key:"updateElements",value:function(e,t,n,i){for(var r=this._cachedMeta.rScale,a="reset"===i,s=t;s<t+n;s++){var o=e[s],l=this.resolveDataElementOptions(s,o.active?"active":i),u=r.getPointPositionForValue(s,this.getParsed(s).r),c=a?r.xCenter:u.x,d=a?r.yCenter:u.y,h={x:c,y:d,angle:u.angle,skip:isNaN(c)||isNaN(d),options:l};this.updateElement(o,s,h,i)}}}]),n}(pm);_h(Im,"id","radar"),_h(Im,"defaults",{datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}}),_h(Im,"overrides",{aspectRatio:1,scales:{r:{type:"radialLinear"}}});var Am=function(e){Bc(n,e);var t=Wc(n);function n(){return Dc(this,n),t.apply(this,arguments)}return jc(n,[{key:"getLabelAndValue",value:function(e){var t=this._cachedMeta,n=this.chart.data.labels||[],i=t.xScale,r=t.yScale,a=this.getParsed(e),s=i.getLabelForValue(a.x),o=r.getLabelForValue(a.y);return{label:n[e]||"",value:"("+s+", "+o+")"}}},{key:"update",value:function(e){var t=this._cachedMeta,n=t.data,i=void 0===n?[]:n,r=this.chart._animationsDisabled,a=up(t,i,r),s=a.start,o=a.count;if(this._drawStart=s,this._drawCount=o,cp(t)&&(s=0,o=i.length),this.options.showLine){var l=t.dataset,u=t._dataset;l._chart=this.chart,l._datasetIndex=this.index,l._decimated=!!u._decimated,l.points=i;var c=this.resolveDatasetElementOptions(e);c.segment=this.options.segment,this.updateElement(l,void 0,{animated:!r,options:c},e)}this.updateElements(i,s,o,e)}},{key:"addElements",value:function(){var e=this.options.showLine;!this.datasetElementType&&e&&(this.datasetElementType=this.chart.registry.getElement("line")),kh(zc(n.prototype),"addElements",this).call(this)}},{key:"updateElements",value:function(e,t,n,i){for(var r="reset"===i,a=this._cachedMeta,s=a.iScale,o=a.vScale,l=a._stacked,u=a._dataset,c=this.resolveDataElementOptions(t,i),d=this.getSharedOptions(c),h=this.includeOptions(i,d),f=s.axis,p=o.axis,g=this.options,m=g.spanGaps,v=g.segment,y=zf(m)?m:Number.POSITIVE_INFINITY,_=this.chart._animationsDisabled||r||"none"===i,b=t>0&&this.getParsed(t-1),T=t;T<t+n;++T){var k=e[T],x=this.getParsed(T),S=_?k:{},w=sf(x[p]),E=S[f]=s.getPixelForValue(x[f],T),C=S[p]=r||w?o.getBasePixel():o.getPixelForValue(l?this.applyStack(o,x,l):x[p],T);S.skip=isNaN(E)||isNaN(C)||w,S.stop=T>0&&Math.abs(x[f]-b[f])>y,v&&(S.parsed=x,S.raw=u.data[T]),h&&(S.options=d||this.resolveDataElementOptions(T,k.active?"active":i)),_||this.updateElement(k,T,S,i),b=x}this.updateSharedOptions(d,i,c)}},{key:"getMaxOverflow",value:function(){var e=this._cachedMeta,t=e.data||[];if(!this.options.showLine){for(var n=0,i=t.length-1;i>=0;--i)n=Math.max(n,t[i].size(this.resolveDataElementOptions(i))/2);return n>0&&n}var r=e.dataset,a=r.options&&r.options.borderWidth||0;if(!t.length)return a;var s=t[0].size(this.resolveDataElementOptions(0)),o=t[t.length-1].size(this.resolveDataElementOptions(t.length-1));return Math.max(a,s,o)/2}}]),n}(pm);_h(Am,"id","scatter"),_h(Am,"defaults",{datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1}),_h(Am,"overrides",{interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}});var Om=Object.freeze({__proto__:null,BarController:xm,BubbleController:Sm,DoughnutController:wm,LineController:Em,PolarAreaController:Cm,PieController:Pm,RadarController:Im,ScatterController:Am});function Lm(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}var Mm={_date:function(){function e(t){Dc(this,e),this.options=t||{}}return jc(e,[{key:"init",value:function(){}},{key:"formats",value:function(){return Lm()}},{key:"parse",value:function(){return Lm()}},{key:"format",value:function(){return Lm()}},{key:"add",value:function(){return Lm()}},{key:"diff",value:function(){return Lm()}},{key:"startOf",value:function(){return Lm()}},{key:"endOf",value:function(){return Lm()}}],[{key:"override",value:function(t){Object.assign(e.prototype,t)}}]),e}()};function Dm(e,t,n,i){var r=e.controller,a=e.data,s=e._sorted,o=r._cachedMeta.iScale;if(o&&t===o.axis&&"r"!==t&&s&&a.length){var l=o._reversePixels?tp:ep;if(!i)return l(a,t,n);if(r._sharedOptions){var u=a[0],c="function"===typeof u.getRange&&u.getRange(t);if(c){var d=l(a,t,n-c),h=l(a,t,n+c);return{lo:d.lo,hi:h.hi}}}}return{lo:0,hi:a.length-1}}function Rm(e,t,n,i,r){for(var a=e.getSortedVisibleDatasetMetas(),s=n[t],o=0,l=a.length;o<l;++o)for(var u=a[o],c=u.index,d=u.data,h=Dm(a[o],t,s,r),f=h.lo,p=h.hi,g=f;g<=p;++g){var m=d[g];m.skip||i(m,c,g)}}function Nm(e,t,n,i,r){var a=[];if(!r&&!e.isPointInArea(t))return a;return Rm(e,n,t,(function(n,s,o){(r||Np(n,e.chartArea,0))&&n.inRange(t.x,t.y,i)&&a.push({element:n,datasetIndex:s,index:o})}),!0),a}function Um(e,t,n,i,r,a){var s=[],o=function(e){var t=-1!==e.indexOf("x"),n=-1!==e.indexOf("y");return function(e,i){var r=t?Math.abs(e.x-i.x):0,a=n?Math.abs(e.y-i.y):0;return Math.sqrt(Math.pow(r,2)+Math.pow(a,2))}}(n),l=Number.POSITIVE_INFINITY;return Rm(e,n,t,(function(n,u,c){var d=n.inRange(t.x,t.y,r);if(!i||d){var h=n.getCenterPoint(r);if(!!a||e.isPointInArea(h)||d){var f=o(t,h);f<l?(s=[{element:n,datasetIndex:u,index:c}],l=f):f===l&&s.push({element:n,datasetIndex:u,index:c})}}})),s}function jm(e,t,n,i,r,a){return a||e.isPointInArea(t)?"r"!==n||i?Um(e,t,n,i,r,a):function(e,t,n,i){var r=[];return Rm(e,n,t,(function(e,n,a){var s=e.getProps(["startAngle","endAngle"],i),o=s.startAngle,l=s.endAngle;Yf(Gf(e,{x:t.x,y:t.y}).angle,o,l)&&r.push({element:e,datasetIndex:n,index:a})})),r}(e,t,n,r):[]}function Fm(e,t,n,i,r){var a=[],s="x"===n?"inXRange":"inYRange",o=!1;return Rm(e,n,t,(function(e,i,l){e[s](t[n],r)&&(a.push({element:e,datasetIndex:i,index:l}),o=o||e.inRange(t.x,t.y,r))})),i&&!o?[]:a}var Bm={evaluateInteractionItems:Rm,modes:{index:function(e,t,n,i){var r=Ag(t,e),a=n.axis||"x",s=n.includeInvisible||!1,o=n.intersect?Nm(e,r,a,i,s):jm(e,r,a,!1,i,s),l=[];return o.length?(e.getSortedVisibleDatasetMetas().forEach((function(e){var t=o[0].index,n=e.data[t];n&&!n.skip&&l.push({element:n,datasetIndex:e.index,index:t})})),l):[]},dataset:function(e,t,n,i){var r=Ag(t,e),a=n.axis||"xy",s=n.includeInvisible||!1,o=n.intersect?Nm(e,r,a,i,s):jm(e,r,a,!1,i,s);if(o.length>0){var l=o[0].datasetIndex,u=e.getDatasetMeta(l).data;o=[];for(var c=0;c<u.length;++c)o.push({element:u[c],datasetIndex:l,index:c})}return o},point:function(e,t,n,i){return Nm(e,Ag(t,e),n.axis||"xy",i,n.includeInvisible||!1)},nearest:function(e,t,n,i){var r=Ag(t,e),a=n.axis||"xy",s=n.includeInvisible||!1;return jm(e,r,a,n.intersect,i,s)},x:function(e,t,n,i){return Fm(e,Ag(t,e),"x",n.intersect,i)},y:function(e,t,n,i){return Fm(e,Ag(t,e),"y",n.intersect,i)}}},zm=["left","top","right","bottom"];function Vm(e,t){return e.filter((function(e){return e.pos===t}))}function Hm(e,t){return e.filter((function(e){return-1===zm.indexOf(e.pos)&&e.box.axis===t}))}function Wm(e,t){return e.sort((function(e,n){var i=t?n:e,r=t?e:n;return i.weight===r.weight?i.index-r.index:i.weight-r.weight}))}function qm(e,t){var n,i,r,a=function(e){var t,n={},i=Xc(e);try{for(i.s();!(t=i.n()).done;){var r=t.value,a=r.stack,s=r.pos,o=r.stackWeight;if(a&&zm.includes(s)){var l=n[a]||(n[a]={count:0,placed:0,weight:0,size:0});l.count++,l.weight+=o}}}catch(u){i.e(u)}finally{i.f()}return n}(e),s=t.vBoxMaxWidth,o=t.hBoxMaxHeight;for(n=0,i=e.length;n<i;++n){var l=(r=e[n]).box.fullSize,u=a[r.stack],c=u&&r.stackWeight/u.weight;r.horizontal?(r.width=c?c*s:l&&t.availableWidth,r.height=o):(r.width=s,r.height=c?c*o:l&&t.availableHeight)}return a}function Gm(e,t,n,i){return Math.max(e[n],t[n])+Math.max(e[i],t[i])}function Xm(e,t){e.top=Math.max(e.top,t.top),e.left=Math.max(e.left,t.left),e.bottom=Math.max(e.bottom,t.bottom),e.right=Math.max(e.right,t.right)}function Km(e,t,n,i){var r=n.pos,a=n.box,s=e.maxPadding;if(!lf(r)){n.size&&(e[r]-=n.size);var o=i[n.stack]||{size:0,count:1};o.size=Math.max(o.size,n.horizontal?a.height:a.width),n.size=o.size/o.count,e[r]+=n.size}a.getPadding&&Xm(s,a.getPadding());var l=Math.max(0,t.outerWidth-Gm(s,e,"left","right")),u=Math.max(0,t.outerHeight-Gm(s,e,"top","bottom")),c=l!==e.w,d=u!==e.h;return e.w=l,e.h=u,n.horizontal?{same:c,other:d}:{same:d,other:c}}function $m(e,t){var n=t.maxPadding;function i(e){var i={left:0,top:0,right:0,bottom:0};return e.forEach((function(e){i[e]=Math.max(t[e],n[e])})),i}return i(e?["left","right"]:["top","bottom"])}function Ym(e,t,n,i){var r,a,s,o,l,u,c=[];for(r=0,a=e.length,l=0;r<a;++r){(o=(s=e[r]).box).update(s.width||t.w,s.height||t.h,$m(s.horizontal,t));var d=Km(t,n,s,i),h=d.same,f=d.other;l|=h&&c.length,u=u||f,o.fullSize||c.push(s)}return l&&Ym(c,t,n,i)||u}function Qm(e,t,n,i,r){e.top=n,e.left=t,e.right=t+i,e.bottom=n+r,e.width=i,e.height=r}function Jm(e,t,n,i){var r,a=n.padding,s=t.x,o=t.y,l=Xc(e);try{for(l.s();!(r=l.n()).done;){var u=r.value,c=u.box,d=i[u.stack]||{count:1,placed:0,weight:1},h=u.stackWeight/d.weight||1;if(u.horizontal){var f=t.w*h,p=d.size||c.height;Ef(d.start)&&(o=d.start),c.fullSize?Qm(c,a.left,o,n.outerWidth-a.right-a.left,p):Qm(c,t.left+d.placed,o,f,p),d.start=o,d.placed+=f,o=c.bottom}else{var g=t.h*h,m=d.size||c.width;Ef(d.start)&&(s=d.start),c.fullSize?Qm(c,s,a.top,m,n.outerHeight-a.bottom-a.top):Qm(c,s,t.top+d.placed,m,g),d.start=s,d.placed+=g,s=c.right}}}catch(v){l.e(v)}finally{l.f()}t.x=s,t.y=o}var Zm={addBox:function(e,t){e.boxes||(e.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw:function(e){t.draw(e)}}]},e.boxes.push(t)},removeBox:function(e,t){var n=e.boxes?e.boxes.indexOf(t):-1;-1!==n&&e.boxes.splice(n,1)},configure:function(e,t,n){t.fullSize=n.fullSize,t.position=n.position,t.weight=n.weight},update:function(e,t,n,i){if(e){var r=Jp(e.options.layout.padding),a=Math.max(t-r.width,0),s=Math.max(n-r.height,0),o=function(e){var t=function(e){var t,n,i,r,a,s,o=[];for(t=0,n=(e||[]).length;t<n;++t){var l=i=e[t];r=l.position;var u=l.options;a=u.stack;var c=u.stackWeight;s=void 0===c?1:c,o.push({index:t,box:i,pos:r,horizontal:i.isHorizontal(),weight:i.weight,stack:a&&r+a,stackWeight:s})}return o}(e),n=Wm(t.filter((function(e){return e.box.fullSize})),!0),i=Wm(Vm(t,"left"),!0),r=Wm(Vm(t,"right")),a=Wm(Vm(t,"top"),!0),s=Wm(Vm(t,"bottom")),o=Hm(t,"x"),l=Hm(t,"y");return{fullSize:n,leftAndTop:i.concat(a),rightAndBottom:r.concat(l).concat(s).concat(o),chartArea:Vm(t,"chartArea"),vertical:i.concat(r).concat(l),horizontal:a.concat(s).concat(o)}}(e.boxes),l=o.vertical,u=o.horizontal;pf(e.boxes,(function(e){"function"===typeof e.beforeLayout&&e.beforeLayout()}));var c=l.reduce((function(e,t){return t.box.options&&!1===t.box.options.display?e:e+1}),0)||1,d=Object.freeze({outerWidth:t,outerHeight:n,padding:r,availableWidth:a,availableHeight:s,vBoxMaxWidth:a/2/c,hBoxMaxHeight:s/2}),h=Object.assign({},r);Xm(h,Jp(i));var f=Object.assign({maxPadding:h,w:a,h:s,x:r.left,y:r.top},r),p=qm(l.concat(u),d);Ym(o.fullSize,f,d,p),Ym(l,f,d,p),Ym(u,f,d,p)&&Ym(l,f,d,p),function(e){var t=e.maxPadding;function n(n){var i=Math.max(t[n]-e[n],0);return e[n]+=i,i}e.y+=n("top"),e.x+=n("left"),n("right"),n("bottom")}(f),Jm(o.leftAndTop,f,d,p),f.x+=f.w,f.y+=f.h,Jm(o.rightAndBottom,f,d,p),e.chartArea={left:f.left,top:f.top,right:f.left+f.w,bottom:f.top+f.h,height:f.h,width:f.w},pf(o.chartArea,(function(t){var n=t.box;Object.assign(n,e.chartArea),n.update(f.w,f.h,{left:0,top:0,right:0,bottom:0})}))}}},ev=function(){function e(){Dc(this,e)}return jc(e,[{key:"acquireContext",value:function(e,t){}},{key:"releaseContext",value:function(e){return!1}},{key:"addEventListener",value:function(e,t,n){}},{key:"removeEventListener",value:function(e,t,n){}},{key:"getDevicePixelRatio",value:function(){return 1}},{key:"getMaximumSize",value:function(e,t,n,i){return t=Math.max(0,t||e.width),n=n||e.height,{width:t,height:Math.max(0,i?Math.floor(t/i):n)}}},{key:"isAttached",value:function(e){return!0}},{key:"updateConfig",value:function(e){}}]),e}(),tv=function(e){Bc(n,e);var t=Wc(n);function n(){return Dc(this,n),t.apply(this,arguments)}return jc(n,[{key:"acquireContext",value:function(e){return e&&e.getContext&&e.getContext("2d")||null}},{key:"updateConfig",value:function(e){e.options.animation=!1}}]),n}(ev),nv="$chartjs",iv={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},rv=function(e){return null===e||""===e};var av=!!Dg&&{passive:!0};function sv(e,t,n){e.canvas.removeEventListener(t,n,av)}function ov(e,t){var n,i=Xc(e);try{for(i.s();!(n=i.n()).done;){var r=n.value;if(r===t||r.contains(t))return!0}}catch(a){i.e(a)}finally{i.f()}}function lv(e,t,n){var i=e.canvas,r=new MutationObserver((function(e){var t,r=!1,a=Xc(e);try{for(a.s();!(t=a.n()).done;){var s=t.value;r=(r=r||ov(s.addedNodes,i))&&!ov(s.removedNodes,i)}}catch(o){a.e(o)}finally{a.f()}r&&n()}));return r.observe(document,{childList:!0,subtree:!0}),r}function uv(e,t,n){var i=e.canvas,r=new MutationObserver((function(e){var t,r=!1,a=Xc(e);try{for(a.s();!(t=a.n()).done;){var s=t.value;r=(r=r||ov(s.removedNodes,i))&&!ov(s.addedNodes,i)}}catch(o){a.e(o)}finally{a.f()}r&&n()}));return r.observe(document,{childList:!0,subtree:!0}),r}var cv=new Map,dv=0;function hv(){var e=window.devicePixelRatio;e!==dv&&(dv=e,cv.forEach((function(t,n){n.currentDevicePixelRatio!==e&&t()})))}function fv(e,t,n){var i=e.canvas,r=i&&Sg(i);if(r){var a=sp((function(e,t){var i=r.clientWidth;n(e,t),i<r.clientWidth&&n()}),window),s=new ResizeObserver((function(e){var t=e[0],n=t.contentRect.width,i=t.contentRect.height;0===n&&0===i||a(n,i)}));return s.observe(r),function(e,t){cv.size||window.addEventListener("resize",hv),cv.set(e,t)}(e,a),s}}function pv(e,t,n){n&&n.disconnect(),"resize"===t&&function(e){cv.delete(e),cv.size||window.removeEventListener("resize",hv)}(e)}function gv(e,t,n){var i=e.canvas,r=sp((function(t){null!==e.ctx&&n(function(e,t){var n=iv[e.type]||e.type,i=Ag(e,t),r=i.x,a=i.y;return{type:n,chart:t,native:e,x:void 0!==r?r:null,y:void 0!==a?a:null}}(t,e))}),e);return function(e,t,n){e.addEventListener(t,n,av)}(i,t,r),r}var mv=function(e){Bc(n,e);var t=Wc(n);function n(){return Dc(this,n),t.apply(this,arguments)}return jc(n,[{key:"acquireContext",value:function(e,t){var n=e&&e.getContext&&e.getContext("2d");return n&&n.canvas===e?(function(e,t){var n=e.style,i=e.getAttribute("height"),r=e.getAttribute("width");if(e[nv]={initial:{height:i,width:r,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",rv(r)){var a=Rg(e,"width");void 0!==a&&(e.width=a)}if(rv(i))if(""===e.style.height)e.height=e.width/(t||2);else{var s=Rg(e,"height");void 0!==s&&(e.height=s)}}(e,t),n):null}},{key:"releaseContext",value:function(e){var t=e.canvas;if(!t[nv])return!1;var n=t[nv].initial;["height","width"].forEach((function(e){var i=n[e];sf(i)?t.removeAttribute(e):t.setAttribute(e,i)}));var i=n.style||{};return Object.keys(i).forEach((function(e){t.style[e]=i[e]})),t.width=t.width,delete t[nv],!0}},{key:"addEventListener",value:function(e,t,n){this.removeEventListener(e,t);var i=e.$proxies||(e.$proxies={}),r={attach:lv,detach:uv,resize:fv}[t]||gv;i[t]=r(e,t,n)}},{key:"removeEventListener",value:function(e,t){var n=e.$proxies||(e.$proxies={}),i=n[t];i&&(({attach:pv,detach:pv,resize:pv}[t]||sv)(e,t,i),n[t]=void 0)}},{key:"getDevicePixelRatio",value:function(){return window.devicePixelRatio}},{key:"getMaximumSize",value:function(e,t,n,i){return Lg(e,t,n,i)}},{key:"isAttached",value:function(e){var t=Sg(e);return!(!t||!t.isConnected)}}]),n}(ev);var vv=function(){function e(){Dc(this,e),_h(this,"active",!1)}return jc(e,[{key:"tooltipPosition",value:function(e){var t=this.getProps(["x","y"],e);return{x:t.x,y:t.y}}},{key:"hasValue",value:function(){return zf(this.x)&&zf(this.y)}},{key:"getProps",value:function(e,t){var n=this,i=this.$animations;if(!t||!i)return this;var r={};return e.forEach((function(e){r[e]=i[e]&&i[e].active()?i[e]._to:n[e]})),r}}]),e}();function yv(e,t){var n=e.options.ticks,i=function(e){var t=e.options.offset,n=e._tickSize(),i=e._length/n+(t?0:1),r=e._maxLength/n;return Math.floor(Math.min(i,r))}(e),r=Math.min(n.maxTicksLimit||i,i),a=n.major.enabled?function(e){var t,n,i=[];for(t=0,n=e.length;t<n;t++)e[t].major&&i.push(t);return i}(t):[],s=a.length,o=a[0],l=a[s-1],u=[];if(s>r)return function(e,t,n,i){var r,a=0,s=n[0];for(i=Math.ceil(i),r=0;r<e.length;r++)r===s&&(t.push(e[r]),s=n[++a*i])}(t,u,a,s/r),u;var c=function(e,t,n){var i=function(e){var t,n,i=e.length;if(i<2)return!1;for(n=e[0],t=1;t<i;++t)if(e[t]-e[t-1]!==n)return!1;return n}(e),r=t.length/n;if(!i)return Math.max(r,1);for(var a=function(e){var t,n=[],i=Math.sqrt(e);for(t=1;t<i;t++)e%t===0&&(n.push(t),n.push(e/t));return i===(0|i)&&n.push(i),n.sort((function(e,t){return e-t})).pop(),n}(i),s=0,o=a.length-1;s<o;s++){var l=a[s];if(l>r)return l}return Math.max(r,1)}(a,t,r);if(s>0){var d,h,f=s>1?Math.round((l-o)/(s-1)):null;for(_v(t,u,c,sf(f)?0:o-f,o),d=0,h=s-1;d<h;d++)_v(t,u,c,a[d],a[d+1]);return _v(t,u,c,l,sf(f)?t.length:l+f),u}return _v(t,u,c),u}function _v(e,t,n,i,r){var a,s,o,l=df(i,0),u=Math.min(df(r,e.length),e.length),c=0;for(n=Math.ceil(n),r&&(n=(a=r-i)/Math.floor(a/n)),o=l;o<0;)c++,o=Math.round(l+c*n);for(s=Math.max(l,0);s<u;s++)s===o&&(t.push(e[s]),c++,o=Math.round(l+c*n))}_h(vv,"defaults",{}),_h(vv,"defaultRoutes",void 0);var bv=function(e){return"left"===e?"right":"right"===e?"left":e},Tv=function(e,t,n){return"top"===t||"left"===t?e[t]+n:e[t]-n},kv=function(e,t){return Math.min(t||e,e)};function xv(e,t){for(var n=[],i=e.length/t,r=e.length,a=0;a<r;a+=i)n.push(e[Math.floor(a)]);return n}function Sv(e,t,n){var i,r=e.ticks.length,a=Math.min(t,r-1),s=e._startPixel,o=e._endPixel,l=1e-6,u=e.getPixelForTick(a);if(!(n&&(i=1===r?Math.max(u-s,o-u):0===t?(e.getPixelForTick(1)-u)/2:(u-e.getPixelForTick(a-1))/2,(u+=a<t?i:-i)<s-l||u>o+l)))return u}function wv(e){return e.drawTicks?e.tickLength:0}function Ev(e,t){if(!e.display)return 0;var n=Zp(e.font,t),i=Jp(e.padding);return(of(e.text)?e.text.length:1)*n.lineHeight+i.height}function Cv(e,t,n){var i=op(e);return(n&&"right"!==t||!n&&"right"===t)&&(i=bv(i)),i}var Pv=function(e){Bc(n,e);var t=Wc(n);function n(e){var i;return Dc(this,n),(i=t.call(this)).id=e.id,i.type=e.type,i.options=void 0,i.ctx=e.ctx,i.chart=e.chart,i.top=void 0,i.bottom=void 0,i.left=void 0,i.right=void 0,i.width=void 0,i.height=void 0,i._margins={left:0,right:0,top:0,bottom:0},i.maxWidth=void 0,i.maxHeight=void 0,i.paddingTop=void 0,i.paddingBottom=void 0,i.paddingLeft=void 0,i.paddingRight=void 0,i.axis=void 0,i.labelRotation=void 0,i.min=void 0,i.max=void 0,i._range=void 0,i.ticks=[],i._gridLineItems=null,i._labelItems=null,i._labelSizes=null,i._length=0,i._maxLength=0,i._longestTextCache={},i._startPixel=void 0,i._endPixel=void 0,i._reversePixels=!1,i._userMax=void 0,i._userMin=void 0,i._suggestedMax=void 0,i._suggestedMin=void 0,i._ticksLength=0,i._borderValue=0,i._cache={},i._dataLimitsCached=!1,i.$context=void 0,i}return jc(n,[{key:"init",value:function(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}},{key:"parse",value:function(e,t){return e}},{key:"getUserBounds",value:function(){var e=this._userMin,t=this._userMax,n=this._suggestedMin,i=this._suggestedMax;return e=cf(e,Number.POSITIVE_INFINITY),t=cf(t,Number.NEGATIVE_INFINITY),n=cf(n,Number.POSITIVE_INFINITY),i=cf(i,Number.NEGATIVE_INFINITY),{min:cf(e,n),max:cf(t,i),minDefined:uf(e),maxDefined:uf(t)}}},{key:"getMinMax",value:function(e){var t,n=this.getUserBounds(),i=n.min,r=n.max,a=n.minDefined,s=n.maxDefined;if(a&&s)return{min:i,max:r};for(var o=this.getMatchingVisibleMetas(),l=0,u=o.length;l<u;++l)t=o[l].controller.getMinMax(this,e),a||(i=Math.min(i,t.min)),s||(r=Math.max(r,t.max));return{min:cf(i=s&&i>r?r:i,cf(r=a&&i>r?i:r,i)),max:cf(r,cf(i,r))}}},{key:"getPadding",value:function(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}},{key:"getTicks",value:function(){return this.ticks}},{key:"getLabels",value:function(){var e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}},{key:"getLabelItems",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.chart.chartArea;return this._labelItems||(this._labelItems=this._computeLabelItems(e))}},{key:"beforeLayout",value:function(){this._cache={},this._dataLimitsCached=!1}},{key:"beforeUpdate",value:function(){ff(this.options.beforeUpdate,[this])}},{key:"update",value:function(e,t,n){var i=this.options,r=i.beginAtZero,a=i.grace,s=i.ticks,o=s.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=t,this._margins=n=Object.assign({left:0,right:0,top:0,bottom:0},n),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+n.left+n.right:this.height+n.top+n.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=function(e,t,n){var i=e.min,r=e.max,a=hf(t,(r-i)/2),s=function(e,t){return n&&0===e?0:e+t};return{min:s(i,-Math.abs(a)),max:s(r,a)}}(this,a,r),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();var l=o<this.ticks.length;this._convertTicksToLabels(l?xv(this.ticks,o):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),s.display&&(s.autoSkip||"auto"===s.source)&&(this.ticks=yv(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}},{key:"configure",value:function(){var e,t,n=this.options.reverse;this.isHorizontal()?(e=this.left,t=this.right):(e=this.top,t=this.bottom,n=!n),this._startPixel=e,this._endPixel=t,this._reversePixels=n,this._length=t-e,this._alignToPixels=this.options.alignToPixels}},{key:"afterUpdate",value:function(){ff(this.options.afterUpdate,[this])}},{key:"beforeSetDimensions",value:function(){ff(this.options.beforeSetDimensions,[this])}},{key:"setDimensions",value:function(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}},{key:"afterSetDimensions",value:function(){ff(this.options.afterSetDimensions,[this])}},{key:"_callHooks",value:function(e){this.chart.notifyPlugins(e,this.getContext()),ff(this.options[e],[this])}},{key:"beforeDataLimits",value:function(){this._callHooks("beforeDataLimits")}},{key:"determineDataLimits",value:function(){}},{key:"afterDataLimits",value:function(){this._callHooks("afterDataLimits")}},{key:"beforeBuildTicks",value:function(){this._callHooks("beforeBuildTicks")}},{key:"buildTicks",value:function(){return[]}},{key:"afterBuildTicks",value:function(){this._callHooks("afterBuildTicks")}},{key:"beforeTickToLabelConversion",value:function(){ff(this.options.beforeTickToLabelConversion,[this])}},{key:"generateTickLabels",value:function(e){var t,n,i,r=this.options.ticks;for(t=0,n=e.length;t<n;t++)(i=e[t]).label=ff(r.callback,[i.value,t,e],this)}},{key:"afterTickToLabelConversion",value:function(){ff(this.options.afterTickToLabelConversion,[this])}},{key:"beforeCalculateLabelRotation",value:function(){ff(this.options.beforeCalculateLabelRotation,[this])}},{key:"calculateLabelRotation",value:function(){var e,t,n,i=this.options,r=i.ticks,a=kv(this.ticks.length,i.ticks.maxTicksLimit),s=r.minRotation||0,o=r.maxRotation,l=s;if(!this._isVisible()||!r.display||s>=o||a<=1||!this.isHorizontal())this.labelRotation=s;else{var u=this._getLabelSizes(),c=u.widest.width,d=u.highest.height,h=Qf(this.chart.width-c,0,this.maxWidth);c+6>(e=i.offset?this.maxWidth/a:h/(a-1))&&(e=h/(a-(i.offset?.5:1)),t=this.maxHeight-wv(i.grid)-r.padding-Ev(i.title,this.chart.options.font),n=Math.sqrt(c*c+d*d),l=Wf(Math.min(Math.asin(Qf((u.highest.height+6)/e,-1,1)),Math.asin(Qf(t/n,-1,1))-Math.asin(Qf(d/n,-1,1)))),l=Math.max(s,Math.min(o,l))),this.labelRotation=l}}},{key:"afterCalculateLabelRotation",value:function(){ff(this.options.afterCalculateLabelRotation,[this])}},{key:"afterAutoSkip",value:function(){}},{key:"beforeFit",value:function(){ff(this.options.beforeFit,[this])}},{key:"fit",value:function(){var e={width:0,height:0},t=this.chart,n=this.options,i=n.ticks,r=n.title,a=n.grid,s=this._isVisible(),o=this.isHorizontal();if(s){var l=Ev(r,t.options.font);if(o?(e.width=this.maxWidth,e.height=wv(a)+l):(e.height=this.maxHeight,e.width=wv(a)+l),i.display&&this.ticks.length){var u=this._getLabelSizes(),c=u.first,d=u.last,h=u.widest,f=u.highest,p=2*i.padding,g=Hf(this.labelRotation),m=Math.cos(g),v=Math.sin(g);if(o){var y=i.mirror?0:v*h.width+m*f.height;e.height=Math.min(this.maxHeight,e.height+y+p)}else{var _=i.mirror?0:m*h.width+v*f.height;e.width=Math.min(this.maxWidth,e.width+_+p)}this._calculatePadding(c,d,v,m)}}this._handleMargins(),o?(this.width=this._length=t.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=t.height-this._margins.top-this._margins.bottom)}},{key:"_calculatePadding",value:function(e,t,n,i){var r=this.options,a=r.ticks,s=a.align,o=a.padding,l=r.position,u=0!==this.labelRotation,c="top"!==l&&"x"===this.axis;if(this.isHorizontal()){var d=this.getPixelForTick(0)-this.left,h=this.right-this.getPixelForTick(this.ticks.length-1),f=0,p=0;u?c?(f=i*e.width,p=n*t.height):(f=n*e.height,p=i*t.width):"start"===s?p=t.width:"end"===s?f=e.width:"inner"!==s&&(f=e.width/2,p=t.width/2),this.paddingLeft=Math.max((f-d+o)*this.width/(this.width-d),0),this.paddingRight=Math.max((p-h+o)*this.width/(this.width-h),0)}else{var g=t.height/2,m=e.height/2;"start"===s?(g=0,m=e.height):"end"===s&&(g=t.height,m=0),this.paddingTop=g+o,this.paddingBottom=m+o}}},{key:"_handleMargins",value:function(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}},{key:"afterFit",value:function(){ff(this.options.afterFit,[this])}},{key:"isHorizontal",value:function(){var e=this.options,t=e.axis,n=e.position;return"top"===n||"bottom"===n||"x"===t}},{key:"isFullSize",value:function(){return this.options.fullSize}},{key:"_convertTicksToLabels",value:function(e){var t,n;for(this.beforeTickToLabelConversion(),this.generateTickLabels(e),t=0,n=e.length;t<n;t++)sf(e[t].label)&&(e.splice(t,1),n--,t--);this.afterTickToLabelConversion()}},{key:"_getLabelSizes",value:function(){var e=this._labelSizes;if(!e){var t=this.options.ticks.sampleSize,n=this.ticks;t<n.length&&(n=xv(n,t)),this._labelSizes=e=this._computeLabelSizes(n,n.length,this.options.ticks.maxTicksLimit)}return e}},{key:"_computeLabelSizes",value:function(e,t,n){var i,r,a,s,o,l,u,c,d,h,f,p=this.ctx,g=this._longestTextCache,m=[],v=[],y=Math.floor(t/kv(t,n)),_=0,b=0;for(i=0;i<t;i+=y){if(s=e[i].label,o=this._resolveTickFontOptions(i),p.font=l=o.string,u=g[l]=g[l]||{data:{},gc:[]},c=o.lineHeight,d=h=0,sf(s)||of(s)){if(of(s))for(r=0,a=s.length;r<a;++r)sf(f=s[r])||of(f)||(d=Ap(p,u.data,u.gc,d,f),h+=c)}else d=Ap(p,u.data,u.gc,d,s),h=c;m.push(d),v.push(h),_=Math.max(d,_),b=Math.max(h,b)}!function(e,t){pf(e,(function(e){var n,i=e.gc,r=i.length/2;if(r>t){for(n=0;n<r;++n)delete e.data[i[n]];i.splice(0,r)}}))}(g,t);var T=m.indexOf(_),k=v.indexOf(b),x=function(e){return{width:m[e]||0,height:v[e]||0}};return{first:x(0),last:x(t-1),widest:x(T),highest:x(k),widths:m,heights:v}}},{key:"getLabelForValue",value:function(e){return e}},{key:"getPixelForValue",value:function(e,t){return NaN}},{key:"getValueForPixel",value:function(e){}},{key:"getPixelForTick",value:function(e){var t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}},{key:"getPixelForDecimal",value:function(e){this._reversePixels&&(e=1-e);var t=this._startPixel+e*this._length;return Qf(this._alignToPixels?Lp(this.chart,t,0):t,-32768,32767)}},{key:"getDecimalForPixel",value:function(e){var t=(e-this._startPixel)/this._length;return this._reversePixels?1-t:t}},{key:"getBasePixel",value:function(){return this.getPixelForValue(this.getBaseValue())}},{key:"getBaseValue",value:function(){var e=this.min,t=this.max;return e<0&&t<0?t:e>0&&t>0?e:0}},{key:"getContext",value:function(e){var t=this.ticks||[];if(e>=0&&e<t.length){var n=t[e];return n.$context||(n.$context=function(e,t,n){return tg(e,{tick:n,index:t,type:"tick"})}(this.getContext(),e,n))}return this.$context||(this.$context=tg(this.chart.getContext(),{scale:this,type:"scale"}))}},{key:"_tickSize",value:function(){var e=this.options.ticks,t=Hf(this.labelRotation),n=Math.abs(Math.cos(t)),i=Math.abs(Math.sin(t)),r=this._getLabelSizes(),a=e.autoSkipPadding||0,s=r?r.widest.width+a:0,o=r?r.highest.height+a:0;return this.isHorizontal()?o*n>s*i?s/n:o/i:o*i<s*n?o/n:s/i}},{key:"_isVisible",value:function(){var e=this.options.display;return"auto"!==e?!!e:this.getMatchingVisibleMetas().length>0}},{key:"_computeGridLineItems",value:function(e){var t,n,i,r,a,s,o,l,u,c,d,h,f=this.axis,p=this.chart,g=this.options,m=g.grid,v=g.position,y=g.border,_=m.offset,b=this.isHorizontal(),T=this.ticks.length+(_?1:0),k=wv(m),x=[],S=y.setContext(this.getContext()),w=S.display?S.width:0,E=w/2,C=function(e){return Lp(p,e,w)};if("top"===v)t=C(this.bottom),s=this.bottom-k,l=t-E,c=C(e.top)+E,h=e.bottom;else if("bottom"===v)t=C(this.top),c=e.top,h=C(e.bottom)-E,s=t+E,l=this.top+k;else if("left"===v)t=C(this.right),a=this.right-k,o=t-E,u=C(e.left)+E,d=e.right;else if("right"===v)t=C(this.left),u=e.left,d=C(e.right)-E,a=t+E,o=this.left+k;else if("x"===f){if("center"===v)t=C((e.top+e.bottom)/2+.5);else if(lf(v)){var P=Object.keys(v)[0],I=v[P];t=C(this.chart.scales[P].getPixelForValue(I))}c=e.top,h=e.bottom,l=(s=t+E)+k}else if("y"===f){if("center"===v)t=C((e.left+e.right)/2);else if(lf(v)){var A=Object.keys(v)[0],O=v[A];t=C(this.chart.scales[A].getPixelForValue(O))}o=(a=t-E)-k,u=e.left,d=e.right}var L=df(g.ticks.maxTicksLimit,T),M=Math.max(1,Math.ceil(T/L));for(n=0;n<T;n+=M){var D=this.getContext(n),R=m.setContext(D),N=y.setContext(D),U=R.lineWidth,j=R.color,F=N.dash||[],B=N.dashOffset,z=R.tickWidth,V=R.tickColor,H=R.tickBorderDash||[],W=R.tickBorderDashOffset;void 0!==(i=Sv(this,n,_))&&(r=Lp(p,i,U),b?a=o=u=d=r:s=l=c=h=r,x.push({tx1:a,ty1:s,tx2:o,ty2:l,x1:u,y1:c,x2:d,y2:h,width:U,color:j,borderDash:F,borderDashOffset:B,tickWidth:z,tickColor:V,tickBorderDash:H,tickBorderDashOffset:W}))}return this._ticksLength=T,this._borderValue=t,x}},{key:"_computeLabelItems",value:function(e){var t,n,i,r,a,s,o,l,u,c,d,h=this.axis,f=this.options,p=f.position,g=f.ticks,m=this.isHorizontal(),v=this.ticks,y=g.align,_=g.crossAlign,b=g.padding,T=g.mirror,k=wv(f.grid),x=k+b,S=T?-b:x,w=-Hf(this.labelRotation),E=[],C="middle";if("top"===p)a=this.bottom-S,s=this._getXAxisLabelAlignment();else if("bottom"===p)a=this.top+S,s=this._getXAxisLabelAlignment();else if("left"===p){var P=this._getYAxisLabelAlignment(k);s=P.textAlign,r=P.x}else if("right"===p){var I=this._getYAxisLabelAlignment(k);s=I.textAlign,r=I.x}else if("x"===h){if("center"===p)a=(e.top+e.bottom)/2+x;else if(lf(p)){var A=Object.keys(p)[0],O=p[A];a=this.chart.scales[A].getPixelForValue(O)+x}s=this._getXAxisLabelAlignment()}else if("y"===h){if("center"===p)r=(e.left+e.right)/2-x;else if(lf(p)){var L=Object.keys(p)[0],M=p[L];r=this.chart.scales[L].getPixelForValue(M)}s=this._getYAxisLabelAlignment(k).textAlign}"y"===h&&("start"===y?C="top":"end"===y&&(C="bottom"));var D=this._getLabelSizes();for(t=0,n=v.length;t<n;++t){i=v[t].label;var R=g.setContext(this.getContext(t));o=this.getPixelForTick(t)+g.labelOffset,u=(l=this._resolveTickFontOptions(t)).lineHeight;var N=(c=of(i)?i.length:1)/2,U=R.color,j=R.textStrokeColor,F=R.textStrokeWidth,B=s;m?(r=o,"inner"===s&&(B=t===n-1?this.options.reverse?"left":"right":0===t?this.options.reverse?"right":"left":"center"),d="top"===p?"near"===_||0!==w?-c*u+u/2:"center"===_?-D.highest.height/2-N*u+u:-D.highest.height+u/2:"near"===_||0!==w?u/2:"center"===_?D.highest.height/2-N*u:D.highest.height-c*u,T&&(d*=-1),0===w||R.showLabelBackdrop||(r+=u/2*Math.sin(w))):(a=o,d=(1-c)*u/2);var z=void 0;if(R.showLabelBackdrop){var V=Jp(R.backdropPadding),H=D.heights[t],W=D.widths[t],q=d-V.top,G=0-V.left;switch(C){case"middle":q-=H/2;break;case"bottom":q-=H}switch(s){case"center":G-=W/2;break;case"right":G-=W}z={left:G,top:q,width:W+V.width,height:H+V.height,color:R.backdropColor}}E.push({label:i,font:l,textOffset:d,options:{rotation:w,color:U,strokeColor:j,strokeWidth:F,textAlign:B,textBaseline:C,translation:[r,a],backdrop:z}})}return E}},{key:"_getXAxisLabelAlignment",value:function(){var e=this.options,t=e.position,n=e.ticks;if(-Hf(this.labelRotation))return"top"===t?"left":"right";var i="center";return"start"===n.align?i="left":"end"===n.align?i="right":"inner"===n.align&&(i="inner"),i}},{key:"_getYAxisLabelAlignment",value:function(e){var t,n,i=this.options,r=i.position,a=i.ticks,s=a.crossAlign,o=a.mirror,l=a.padding,u=e+l,c=this._getLabelSizes().widest.width;return"left"===r?o?(n=this.right+l,"near"===s?t="left":"center"===s?(t="center",n+=c/2):(t="right",n+=c)):(n=this.right-u,"near"===s?t="right":"center"===s?(t="center",n-=c/2):(t="left",n=this.left)):"right"===r?o?(n=this.left+l,"near"===s?t="right":"center"===s?(t="center",n-=c/2):(t="left",n-=c)):(n=this.left+u,"near"===s?t="left":"center"===s?(t="center",n+=c/2):(t="right",n=this.right)):t="right",{textAlign:t,x:n}}},{key:"_computeLabelArea",value:function(){if(!this.options.ticks.mirror){var e=this.chart,t=this.options.position;return"left"===t||"right"===t?{top:0,left:this.left,bottom:e.height,right:this.right}:"top"===t||"bottom"===t?{top:this.top,left:0,bottom:this.bottom,right:e.width}:void 0}}},{key:"drawBackground",value:function(){var e=this.ctx,t=this.options.backgroundColor,n=this.left,i=this.top,r=this.width,a=this.height;t&&(e.save(),e.fillStyle=t,e.fillRect(n,i,r,a),e.restore())}},{key:"getLineWidthForValue",value:function(e){var t=this.options.grid;if(!this._isVisible()||!t.display)return 0;var n=this.ticks.findIndex((function(t){return t.value===e}));return n>=0?t.setContext(this.getContext(n)).lineWidth:0}},{key:"drawGrid",value:function(e){var t,n,i=this.options.grid,r=this.ctx,a=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e)),s=function(e,t,n){n.width&&n.color&&(r.save(),r.lineWidth=n.width,r.strokeStyle=n.color,r.setLineDash(n.borderDash||[]),r.lineDashOffset=n.borderDashOffset,r.beginPath(),r.moveTo(e.x,e.y),r.lineTo(t.x,t.y),r.stroke(),r.restore())};if(i.display)for(t=0,n=a.length;t<n;++t){var o=a[t];i.drawOnChartArea&&s({x:o.x1,y:o.y1},{x:o.x2,y:o.y2},o),i.drawTicks&&s({x:o.tx1,y:o.ty1},{x:o.tx2,y:o.ty2},{color:o.tickColor,width:o.tickWidth,borderDash:o.tickBorderDash,borderDashOffset:o.tickBorderDashOffset})}}},{key:"drawBorder",value:function(){var e=this.chart,t=this.ctx,n=this.options,i=n.border,r=n.grid,a=i.setContext(this.getContext()),s=i.display?a.width:0;if(s){var o,l,u,c,d=r.setContext(this.getContext(0)).lineWidth,h=this._borderValue;this.isHorizontal()?(o=Lp(e,this.left,s)-s/2,l=Lp(e,this.right,d)+d/2,u=c=h):(u=Lp(e,this.top,s)-s/2,c=Lp(e,this.bottom,d)+d/2,o=l=h),t.save(),t.lineWidth=a.width,t.strokeStyle=a.color,t.beginPath(),t.moveTo(o,u),t.lineTo(l,c),t.stroke(),t.restore()}}},{key:"drawLabels",value:function(e){if(this.options.ticks.display){var t=this.ctx,n=this._computeLabelArea();n&&Up(t,n);var i,r=Xc(this.getLabelItems(e));try{for(r.s();!(i=r.n()).done;){var a=i.value,s=a.options,o=a.font;zp(t,a.label,0,a.textOffset,o,s)}}catch(l){r.e(l)}finally{r.f()}n&&jp(t)}}},{key:"drawTitle",value:function(){var e=this.ctx,t=this.options,n=t.position,i=t.title,r=t.reverse;if(i.display){var a=Zp(i.font),s=Jp(i.padding),o=i.align,l=a.lineHeight/2;"bottom"===n||"center"===n||lf(n)?(l+=s.bottom,of(i.text)&&(l+=a.lineHeight*(i.text.length-1))):l+=s.top;var u=function(e,t,n,i){var r,a,s,o=e.top,l=e.left,u=e.bottom,c=e.right,d=e.chart,h=d.chartArea,f=d.scales,p=0,g=u-o,m=c-l;if(e.isHorizontal()){if(a=lp(i,l,c),lf(n)){var v=Object.keys(n)[0],y=n[v];s=f[v].getPixelForValue(y)+g-t}else s="center"===n?(h.bottom+h.top)/2+g-t:Tv(e,n,t);r=c-l}else{if(lf(n)){var _=Object.keys(n)[0],b=n[_];a=f[_].getPixelForValue(b)-m+t}else a="center"===n?(h.left+h.right)/2-m+t:Tv(e,n,t);s=lp(i,u,o),p="left"===n?-Df:Df}return{titleX:a,titleY:s,maxWidth:r,rotation:p}}(this,l,n,o),c=u.titleX,d=u.titleY,h=u.maxWidth,f=u.rotation;zp(e,i.text,0,0,a,{color:i.color,maxWidth:h,rotation:f,textAlign:Cv(o,n,r),textBaseline:"middle",translation:[c,d]})}}},{key:"draw",value:function(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}},{key:"_layers",value:function(){var e=this,t=this.options,i=t.ticks&&t.ticks.z||0,r=df(t.grid&&t.grid.z,-1),a=df(t.border&&t.border.z,0);return this._isVisible()&&this.draw===n.prototype.draw?[{z:r,draw:function(t){e.drawBackground(),e.drawGrid(t),e.drawTitle()}},{z:a,draw:function(){e.drawBorder()}},{z:i,draw:function(t){e.drawLabels(t)}}]:[{z:i,draw:function(t){e.draw(t)}}]}},{key:"getMatchingVisibleMetas",value:function(e){var t,n,i=this.chart.getSortedVisibleDatasetMetas(),r=this.axis+"AxisID",a=[];for(t=0,n=i.length;t<n;++t){var s=i[t];s[r]!==this.id||e&&s.type!==e||a.push(s)}return a}},{key:"_resolveTickFontOptions",value:function(e){return Zp(this.options.ticks.setContext(this.getContext(e)).font)}},{key:"_maxDigits",value:function(){var e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}]),n}(vv),Iv=function(){function e(t,n,i){Dc(this,e),this.type=t,this.scope=n,this.override=i,this.items=Object.create(null)}return jc(e,[{key:"isForType",value:function(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}},{key:"register",value:function(e){var t,n=Object.getPrototypeOf(e);(function(e){return"id"in e&&"defaults"in e})(n)&&(t=this.register(n));var i=this.items,r=e.id,a=this.scope+"."+r;if(!r)throw new Error("class does not have id: "+e);return r in i||(i[r]=e,function(e,t,n){var i=_f(Object.create(null),[n?Ip.get(n):{},Ip.get(t),e.defaults]);Ip.set(t,i),e.defaultRoutes&&function(e,t){Object.keys(t).forEach((function(n){var i=n.split("."),r=i.pop(),a=[e].concat(i).join("."),s=t[n].split("."),o=s.pop(),l=s.join(".");Ip.route(a,r,l,o)}))}(t,e.defaultRoutes);e.descriptors&&Ip.describe(t,e.descriptors)}(e,a,t),this.override&&Ip.override(e.id,e.overrides)),a}},{key:"get",value:function(e){return this.items[e]}},{key:"unregister",value:function(e){var t=this.items,n=e.id,i=this.scope;n in t&&delete t[n],i&&n in Ip[i]&&(delete Ip[i][n],this.override&&delete Sp[n])}}]),e}();var Av=function(){function e(){Dc(this,e),this.controllers=new Iv(pm,"datasets",!0),this.elements=new Iv(vv,"elements"),this.plugins=new Iv(Object,"plugins"),this.scales=new Iv(Pv,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}return jc(e,[{key:"add",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t)}},{key:"remove",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t)}},{key:"addControllers",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t,this.controllers)}},{key:"addElements",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t,this.elements)}},{key:"addPlugins",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t,this.plugins)}},{key:"addScales",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t,this.scales)}},{key:"getController",value:function(e){return this._get(e,this.controllers,"controller")}},{key:"getElement",value:function(e){return this._get(e,this.elements,"element")}},{key:"getPlugin",value:function(e){return this._get(e,this.plugins,"plugin")}},{key:"getScale",value:function(e){return this._get(e,this.scales,"scale")}},{key:"removeControllers",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t,this.controllers)}},{key:"removeElements",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t,this.elements)}},{key:"removePlugins",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t,this.plugins)}},{key:"removeScales",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t,this.scales)}},{key:"_each",value:function(e,t,n){var i=this;Mc(t).forEach((function(t){var r=n||i._getRegistryForType(t);n||r.isForType(t)||r===i.plugins&&t.id?i._exec(e,r,t):pf(t,(function(t){var r=n||i._getRegistryForType(t);i._exec(e,r,t)}))}))}},{key:"_exec",value:function(e,t,n){var i=wf(e);ff(n["before"+i],[],n),t[e](n),ff(n["after"+i],[],n)}},{key:"_getRegistryForType",value:function(e){for(var t=0;t<this._typedRegistries.length;t++){var n=this._typedRegistries[t];if(n.isForType(e))return n}return this.plugins}},{key:"_get",value:function(e,t,n){var i=t.get(e);if(void 0===i)throw new Error('"'+e+'" is not a registered '+n+".");return i}}]),e}(),Ov=new Av,Lv=function(){function e(){Dc(this,e),this._init=[]}return jc(e,[{key:"notify",value:function(e,t,n,i){"beforeInit"===t&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));var r=i?this._descriptors(e).filter(i):this._descriptors(e),a=this._notify(r,e,t,n);return"afterDestroy"===t&&(this._notify(r,e,"stop"),this._notify(this._init,e,"uninstall")),a}},{key:"_notify",value:function(e,t,n,i){i=i||{};var r,a=Xc(e);try{for(a.s();!(r=a.n()).done;){var s=r.value,o=s.plugin;if(!1===ff(o[n],[t,i,s.options],o)&&i.cancelable)return!1}}catch(l){a.e(l)}finally{a.f()}return!0}},{key:"invalidate",value:function(){sf(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}},{key:"_descriptors",value:function(e){if(this._cache)return this._cache;var t=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),t}},{key:"_createDescriptors",value:function(e,t){var n=e&&e.config,i=df(n.options&&n.options.plugins,{}),r=function(e){for(var t={},n=[],i=Object.keys(Ov.plugins.items),r=0;r<i.length;r++)n.push(Ov.getPlugin(i[r]));for(var a=e.plugins||[],s=0;s<a.length;s++){var o=a[s];-1===n.indexOf(o)&&(n.push(o),t[o.id]=!0)}return{plugins:n,localIds:t}}(n);return!1!==i||t?function(e,t,n,i){var r,a=t.plugins,s=t.localIds,o=[],l=e.getContext(),u=Xc(a);try{for(u.s();!(r=u.n()).done;){var c=r.value,d=c.id,h=Mv(n[d],i);null!==h&&o.push({plugin:c,options:Dv(e.config,{plugin:c,local:s[d]},h,l)})}}catch(f){u.e(f)}finally{u.f()}return o}(e,r,i,t):[]}},{key:"_notifyStateChanges",value:function(e){var t=this._oldCache||[],n=this._cache,i=function(e,t){return e.filter((function(e){return!t.some((function(t){return e.plugin.id===t.plugin.id}))}))};this._notify(i(t,n),e,"stop"),this._notify(i(n,t),e,"start")}}]),e}();function Mv(e,t){return t||!1!==e?!0===e?{}:e:null}function Dv(e,t,n,i){var r=t.plugin,a=t.local,s=e.pluginScopeKeys(r),o=e.getOptionScopes(n,s);return a&&r.defaults&&o.push(r.defaults),e.createResolver(o,i,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function Rv(e,t){var n=Ip.datasets[e]||{};return((t.datasets||{})[e]||{}).indexAxis||t.indexAxis||n.indexAxis||"x"}function Nv(e,t){if("x"===e||"y"===e||"r"===e)return e;var n;if(e=t.axis||("top"===(n=t.position)||"bottom"===n?"x":"left"===n||"right"===n?"y":void 0)||e.length>1&&Nv(e[0].toLowerCase(),t))return e;throw new Error("Cannot determine type of '".concat(name,"' axis. Please provide 'axis' or 'position' option."))}function Uv(e){var t=e.options||(e.options={});t.plugins=df(t.plugins,{}),t.scales=function(e,t){var n=Sp[e.type]||{scales:{}},i=t.scales||{},r=Rv(e.type,t),a=Object.create(null);return Object.keys(i).forEach((function(e){var t=i[e];if(!lf(t))return console.error("Invalid scale configuration for scale: ".concat(e));if(t._proxy)return console.warn("Ignoring resolver passed as options for scale: ".concat(e));var s=Nv(e,t),o=function(e,t){return e===t?"_index_":"_value_"}(s,r),l=n.scales||{};a[e]=bf(Object.create(null),[{axis:s},t,l[s],l[o]])})),e.data.datasets.forEach((function(n){var r=n.type||e.type,s=n.indexAxis||Rv(r,t),o=(Sp[r]||{}).scales||{};Object.keys(o).forEach((function(e){var t=function(e,t){var n=e;return"_index_"===e?n=t:"_value_"===e&&(n="x"===t?"y":"x"),n}(e,s),r=n[t+"AxisID"]||t;a[r]=a[r]||Object.create(null),bf(a[r],[{axis:t},i[r],o[e]])}))})),Object.keys(a).forEach((function(e){var t=a[e];bf(t,[Ip.scales[t.type],Ip.scale])})),a}(e,t)}function jv(e){return(e=e||{}).datasets=e.datasets||[],e.labels=e.labels||[],e}var Fv=new Map,Bv=new Set;function zv(e,t){var n=Fv.get(e);return n||(n=t(),Fv.set(e,n),Bv.add(n)),n}var Vv=function(e,t,n){var i=Sf(t,n);void 0!==i&&e.add(i)},Hv=function(){function e(t){Dc(this,e),this._config=function(e){return(e=e||{}).data=jv(e.data),Uv(e),e}(t),this._scopeCache=new Map,this._resolverCache=new Map}return jc(e,[{key:"platform",get:function(){return this._config.platform}},{key:"type",get:function(){return this._config.type},set:function(e){this._config.type=e}},{key:"data",get:function(){return this._config.data},set:function(e){this._config.data=jv(e)}},{key:"options",get:function(){return this._config.options},set:function(e){this._config.options=e}},{key:"plugins",get:function(){return this._config.plugins}},{key:"update",value:function(){var e=this._config;this.clearCache(),Uv(e)}},{key:"clearCache",value:function(){this._scopeCache.clear(),this._resolverCache.clear()}},{key:"datasetScopeKeys",value:function(e){return zv(e,(function(){return[["datasets.".concat(e),""]]}))}},{key:"datasetAnimationScopeKeys",value:function(e,t){return zv("".concat(e,".transition.").concat(t),(function(){return[["datasets.".concat(e,".transitions.").concat(t),"transitions.".concat(t)],["datasets.".concat(e),""]]}))}},{key:"datasetElementScopeKeys",value:function(e,t){return zv("".concat(e,"-").concat(t),(function(){return[["datasets.".concat(e,".elements.").concat(t),"datasets.".concat(e),"elements.".concat(t),""]]}))}},{key:"pluginScopeKeys",value:function(e){var t=e.id,n=this.type;return zv("".concat(n,"-plugin-").concat(t),(function(){return[["plugins.".concat(t)].concat(Mc(e.additionalOptionScopes||[]))]}))}},{key:"_cachedScopes",value:function(e,t){var n=this._scopeCache,i=n.get(e);return i&&!t||(i=new Map,n.set(e,i)),i}},{key:"getOptionScopes",value:function(e,t,n){var i=this.options,r=this.type,a=this._cachedScopes(e,n),s=a.get(t);if(s)return s;var o=new Set;t.forEach((function(t){e&&(o.add(e),t.forEach((function(t){return Vv(o,e,t)}))),t.forEach((function(e){return Vv(o,i,e)})),t.forEach((function(e){return Vv(o,Sp[r]||{},e)})),t.forEach((function(e){return Vv(o,Ip,e)})),t.forEach((function(e){return Vv(o,wp,e)}))}));var l=Array.from(o);return 0===l.length&&l.push(Object.create(null)),Bv.has(t)&&a.set(t,l),l}},{key:"chartOptionScopes",value:function(){var e=this.options,t=this.type;return[e,Sp[t]||{},Ip.datasets[t]||{},{type:t},Ip,wp]}},{key:"resolveNamedOptions",value:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[""],r={$shared:!0},a=Wv(this._resolverCache,e,i),s=a.resolver,o=a.subPrefixes,l=s;(function(e,t){var n,i=rg(e),r=i.isScriptable,a=i.isIndexable,s=Xc(t);try{for(s.s();!(n=s.n()).done;){var o=n.value,l=r(o),u=a(o),c=(u||l)&&e[o];if(l&&(Cf(c)||qv(c))||u&&of(c))return!0}}catch(d){s.e(d)}finally{s.f()}return!1})(s,t)&&(r.$shared=!1,l=ig(s,n=Cf(n)?n():n,this.createResolver(e,n,o)));var u,c=Xc(t);try{for(c.s();!(u=c.n()).done;){var d=u.value;r[d]=l[d]}}catch(h){c.e(h)}finally{c.f()}return r}},{key:"createResolver",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[""],i=arguments.length>3?arguments[3]:void 0,r=Wv(this._resolverCache,e,n).resolver;return lf(t)?ig(r,t,void 0,i):r}}]),e}();function Wv(e,t,n){var i=e.get(t);i||(i=new Map,e.set(t,i));var r=n.join(),a=i.get(r);a||(a={resolver:ng(t,n),subPrefixes:n.filter((function(e){return!e.toLowerCase().includes("hover")}))},i.set(r,a));return a}var qv=function(e){return lf(e)&&Object.getOwnPropertyNames(e).reduce((function(t,n){return t||Cf(e[n])}),!1)};var Gv=["top","bottom","left","right","chartArea"];function Xv(e,t){return"top"===e||"bottom"===e||-1===Gv.indexOf(e)&&"x"===t}function Kv(e,t){return function(n,i){return n[e]===i[e]?n[t]-i[t]:n[e]-i[e]}}function $v(e){var t=e.chart,n=t.options.animation;t.notifyPlugins("afterRender"),ff(n&&n.onComplete,[e],t)}function Yv(e){var t=e.chart,n=t.options.animation;ff(n&&n.onProgress,[e],t)}function Qv(e){return xg()&&"string"===typeof e?e=document.getElementById(e):e&&e.length&&(e=e[0]),e&&e.canvas&&(e=e.canvas),e}var Jv={},Zv=function(e){var t=Qv(e);return Object.values(Jv).filter((function(e){return e.canvas===t})).pop()};function ey(e,t,n){for(var i=0,r=Object.keys(e);i<r.length;i++){var a=r[i],s=+a;if(s>=t){var o=e[a];delete e[a],(n>0||s>t)&&(e[s+n]=o)}}}var ty=function(){function e(t,n){var i=this;Dc(this,e);var r=this.config=new Hv(n),a=Qv(t),s=Zv(a);if(s)throw new Error("Canvas is already in use. Chart with ID '"+s.id+"' must be destroyed before the canvas with ID '"+s.canvas.id+"' can be reused.");var o=r.createResolver(r.chartOptionScopes(),this.getContext());this.platform=new(r.platform||function(e){return!xg()||"undefined"!==typeof OffscreenCanvas&&e instanceof OffscreenCanvas?tv:mv}(a)),this.platform.updateConfig(r);var l=this.platform.acquireContext(a,o.aspectRatio),u=l&&l.canvas,c=u&&u.height,d=u&&u.width;this.id=af(),this.ctx=l,this.canvas=u,this.width=d,this.height=c,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new Lv,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=function(e,t){var n;return function(){for(var i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return t?(clearTimeout(n),n=setTimeout(e,t,r)):e.apply(this,r),t}}((function(e){return i.update(e)}),o.resizeDelay||0),this._dataChanges=[],Jv[this.id]=this,l&&u?(Jg.listen(this,"complete",$v),Jg.listen(this,"progress",Yv),this._initialize(),this.attached&&this.update()):console.error("Failed to create chart: can't acquire context from the given item")}return jc(e,[{key:"aspectRatio",get:function(){var e=this.options,t=e.aspectRatio,n=e.maintainAspectRatio,i=this.width,r=this.height,a=this._aspectRatio;return sf(t)?n&&a?a:r?i/r:null:t}},{key:"data",get:function(){return this.config.data},set:function(e){this.config.data=e}},{key:"options",get:function(){return this._options},set:function(e){this.config.options=e}},{key:"registry",get:function(){return Ov}},{key:"_initialize",value:function(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():Mg(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}},{key:"clear",value:function(){return Mp(this.canvas,this.ctx),this}},{key:"stop",value:function(){return Jg.stop(this),this}},{key:"resize",value:function(e,t){Jg.running(this)?this._resizeBeforeDraw={width:e,height:t}:this._resize(e,t)}},{key:"_resize",value:function(e,t){var n=this.options,i=this.canvas,r=n.maintainAspectRatio&&this.aspectRatio,a=this.platform.getMaximumSize(i,e,t,r),s=n.devicePixelRatio||this.platform.getDevicePixelRatio(),o=this.width?"resize":"attach";this.width=a.width,this.height=a.height,this._aspectRatio=this.aspectRatio,Mg(this,s,!0)&&(this.notifyPlugins("resize",{size:a}),ff(n.onResize,[this,a],this),this.attached&&this._doResize(o)&&this.render())}},{key:"ensureScalesHaveIDs",value:function(){pf(this.options.scales||{},(function(e,t){e.id=t}))}},{key:"buildOrUpdateScales",value:function(){var e=this,t=this.options,n=t.scales,i=this.scales,r=Object.keys(i).reduce((function(e,t){return e[t]=!1,e}),{}),a=[];n&&(a=a.concat(Object.keys(n).map((function(e){var t=n[e],i=Nv(e,t),r="r"===i,a="x"===i;return{options:t,dposition:r?"chartArea":a?"bottom":"left",dtype:r?"radialLinear":a?"category":"linear"}})))),pf(a,(function(n){var a=n.options,s=a.id,o=Nv(s,a),l=df(a.type,n.dtype);void 0!==a.position&&Xv(a.position,o)===Xv(n.dposition)||(a.position=n.dposition),r[s]=!0;var u=null;s in i&&i[s].type===l?u=i[s]:(u=new(Ov.getScale(l))({id:s,type:l,ctx:e.ctx,chart:e}),i[u.id]=u);u.init(a,t)})),pf(r,(function(e,t){e||delete i[t]})),pf(i,(function(t){Zm.configure(e,t,t.options),Zm.addBox(e,t)}))}},{key:"_updateMetasets",value:function(){var e=this._metasets,t=this.data.datasets.length,n=e.length;if(e.sort((function(e,t){return e.index-t.index})),n>t){for(var i=t;i<n;++i)this._destroyDatasetMeta(i);e.splice(t,n-t)}this._sortedMetasets=e.slice(0).sort(Kv("order","index"))}},{key:"_removeUnreferencedMetasets",value:function(){var e=this,t=this._metasets,n=this.data.datasets;t.length>n.length&&delete this._stacks,t.forEach((function(t,i){0===n.filter((function(e){return e===t._dataset})).length&&e._destroyDatasetMeta(i)}))}},{key:"buildOrUpdateControllers",value:function(){var e,t,n=[],i=this.data.datasets;for(this._removeUnreferencedMetasets(),e=0,t=i.length;e<t;e++){var r=i[e],a=this.getDatasetMeta(e),s=r.type||this.config.type;if(a.type&&a.type!==s&&(this._destroyDatasetMeta(e),a=this.getDatasetMeta(e)),a.type=s,a.indexAxis=r.indexAxis||Rv(s,this.options),a.order=r.order||0,a.index=e,a.label=""+r.label,a.visible=this.isDatasetVisible(e),a.controller)a.controller.updateIndex(e),a.controller.linkScales();else{var o=Ov.getController(s),l=Ip.datasets[s],u=l.datasetElementType,c=l.dataElementType;Object.assign(o,{dataElementType:Ov.getElement(c),datasetElementType:u&&Ov.getElement(u)}),a.controller=new o(this,e),n.push(a.controller)}}return this._updateMetasets(),n}},{key:"_resetElements",value:function(){var e=this;pf(this.data.datasets,(function(t,n){e.getDatasetMeta(n).controller.reset()}),this)}},{key:"reset",value:function(){this._resetElements(),this.notifyPlugins("reset")}},{key:"update",value:function(e){var t=this.config;t.update();var n=this._options=t.createResolver(t.chartOptionScopes(),this.getContext()),i=this._animationsDisabled=!n.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),!1!==this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})){var r=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");for(var a=0,s=0,o=this.data.datasets.length;s<o;s++){var l=this.getDatasetMeta(s).controller,u=!i&&-1===r.indexOf(l);l.buildOrUpdateElements(u),a=Math.max(+l.getMaxOverflow(),a)}a=this._minPadding=n.layout.autoPadding?a:0,this._updateLayout(a),i||pf(r,(function(e){e.reset()})),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(Kv("z","_idx"));var c=this._active,d=this._lastEvent;d?this._eventHandler(d,!0):c.length&&this._updateHoverStyles(c,c,!0),this.render()}}},{key:"_updateScales",value:function(){var e=this;pf(this.scales,(function(t){Zm.removeBox(e,t)})),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}},{key:"_checkEventBindings",value:function(){var e=this.options,t=new Set(Object.keys(this._listeners)),n=new Set(e.events);Pf(t,n)&&!!this._responsiveListeners===e.responsive||(this.unbindEvents(),this.bindEvents())}},{key:"_updateHiddenIndices",value:function(){var e,t=this._hiddenIndices,n=Xc(this._getUniformDataChanges()||[]);try{for(n.s();!(e=n.n()).done;){var i=e.value,r=i.method,a=i.start,s=i.count;ey(t,a,"_removeElements"===r?-s:s)}}catch(o){n.e(o)}finally{n.f()}}},{key:"_getUniformDataChanges",value:function(){var e=this._dataChanges;if(e&&e.length){this._dataChanges=[];for(var t=this.data.datasets.length,n=function(t){return new Set(e.filter((function(e){return e[0]===t})).map((function(e,t){return t+","+e.splice(1).join(",")})))},i=n(0),r=1;r<t;r++)if(!Pf(i,n(r)))return;return Array.from(i).map((function(e){return e.split(",")})).map((function(e){return{method:e[1],start:+e[2],count:+e[3]}}))}}},{key:"_updateLayout",value:function(e){var t=this;if(!1!==this.notifyPlugins("beforeLayout",{cancelable:!0})){Zm.update(this,this.width,this.height,e);var n=this.chartArea,i=n.width<=0||n.height<=0;this._layers=[],pf(this.boxes,(function(e){var n;i&&"chartArea"===e.position||(e.configure&&e.configure(),(n=t._layers).push.apply(n,Mc(e._layers())))}),this),this._layers.forEach((function(e,t){e._idx=t})),this.notifyPlugins("afterLayout")}}},{key:"_updateDatasets",value:function(e){if(!1!==this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})){for(var t=0,n=this.data.datasets.length;t<n;++t)this.getDatasetMeta(t).controller.configure();for(var i=0,r=this.data.datasets.length;i<r;++i)this._updateDataset(i,Cf(e)?e({datasetIndex:i}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}},{key:"_updateDataset",value:function(e,t){var n=this.getDatasetMeta(e),i={meta:n,index:e,mode:t,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetUpdate",i)&&(n.controller._update(t),i.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",i))}},{key:"render",value:function(){!1!==this.notifyPlugins("beforeRender",{cancelable:!0})&&(Jg.has(this)?this.attached&&!Jg.running(this)&&Jg.start(this):(this.draw(),$v({chart:this})))}},{key:"draw",value:function(){var e;if(this._resizeBeforeDraw){var t=this._resizeBeforeDraw,n=t.width,i=t.height;this._resize(n,i),this._resizeBeforeDraw=null}if(this.clear(),!(this.width<=0||this.height<=0)&&!1!==this.notifyPlugins("beforeDraw",{cancelable:!0})){var r=this._layers;for(e=0;e<r.length&&r[e].z<=0;++e)r[e].draw(this.chartArea);for(this._drawDatasets();e<r.length;++e)r[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}}},{key:"_getSortedDatasetMetas",value:function(e){var t,n,i=this._sortedMetasets,r=[];for(t=0,n=i.length;t<n;++t){var a=i[t];e&&!a.visible||r.push(a)}return r}},{key:"getSortedVisibleDatasetMetas",value:function(){return this._getSortedDatasetMetas(!0)}},{key:"_drawDatasets",value:function(){if(!1!==this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})){for(var e=this.getSortedVisibleDatasetMetas(),t=e.length-1;t>=0;--t)this._drawDataset(e[t]);this.notifyPlugins("afterDatasetsDraw")}}},{key:"_drawDataset",value:function(e){var t=this.ctx,n=e._clip,i=!n.disabled,r=function(e){var t=e.xScale,n=e.yScale;if(t&&n)return{left:t.left,right:t.right,top:n.top,bottom:n.bottom}}(e)||this.chartArea,a={meta:e,index:e.index,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetDraw",a)&&(i&&Up(t,{left:!1===n.left?0:r.left-n.left,right:!1===n.right?this.width:r.right+n.right,top:!1===n.top?0:r.top-n.top,bottom:!1===n.bottom?this.height:r.bottom+n.bottom}),e.controller.draw(),i&&jp(t),a.cancelable=!1,this.notifyPlugins("afterDatasetDraw",a))}},{key:"isPointInArea",value:function(e){return Np(e,this.chartArea,this._minPadding)}},{key:"getElementsAtEventForMode",value:function(e,t,n,i){var r=Bm.modes[t];return"function"===typeof r?r(this,e,n,i):[]}},{key:"getDatasetMeta",value:function(e){var t=this.data.datasets[e],n=this._metasets,i=n.filter((function(e){return e&&e._dataset===t})).pop();return i||(i={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:t&&t.order||0,index:e,_dataset:t,_parsed:[],_sorted:!1},n.push(i)),i}},{key:"getContext",value:function(){return this.$context||(this.$context=tg(null,{chart:this,type:"chart"}))}},{key:"getVisibleDatasetCount",value:function(){return this.getSortedVisibleDatasetMetas().length}},{key:"isDatasetVisible",value:function(e){var t=this.data.datasets[e];if(!t)return!1;var n=this.getDatasetMeta(e);return"boolean"===typeof n.hidden?!n.hidden:!t.hidden}},{key:"setDatasetVisibility",value:function(e,t){this.getDatasetMeta(e).hidden=!t}},{key:"toggleDataVisibility",value:function(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}},{key:"getDataVisibility",value:function(e){return!this._hiddenIndices[e]}},{key:"_updateVisibility",value:function(e,t,n){var i=n?"show":"hide",r=this.getDatasetMeta(e),a=r.controller._resolveAnimations(void 0,i);Ef(t)?(r.data[t].hidden=!n,this.update()):(this.setDatasetVisibility(e,n),a.update(r,{visible:n}),this.update((function(t){return t.datasetIndex===e?i:void 0})))}},{key:"hide",value:function(e,t){this._updateVisibility(e,t,!1)}},{key:"show",value:function(e,t){this._updateVisibility(e,t,!0)}},{key:"_destroyDatasetMeta",value:function(e){var t=this._metasets[e];t&&t.controller&&t.controller._destroy(),delete this._metasets[e]}},{key:"_stop",value:function(){var e,t;for(this.stop(),Jg.remove(this),e=0,t=this.data.datasets.length;e<t;++e)this._destroyDatasetMeta(e)}},{key:"destroy",value:function(){this.notifyPlugins("beforeDestroy");var e=this.canvas,t=this.ctx;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),Mp(e,t),this.platform.releaseContext(t),this.canvas=null,this.ctx=null),delete Jv[this.id],this.notifyPlugins("afterDestroy")}},{key:"toBase64Image",value:function(){var e;return(e=this.canvas).toDataURL.apply(e,arguments)}},{key:"bindEvents",value:function(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}},{key:"bindUserEvents",value:function(){var e=this,t=this._listeners,n=this.platform,i=function(t,n,i){t.offsetX=n,t.offsetY=i,e._eventHandler(t)};pf(this.options.events,(function(r){return function(i,r){n.addEventListener(e,i,r),t[i]=r}(r,i)}))}},{key:"bindResponsiveEvents",value:function(){var e=this;this._responsiveListeners||(this._responsiveListeners={});var t,n=this._responsiveListeners,i=this.platform,r=function(t,r){i.addEventListener(e,t,r),n[t]=r},a=function(t,r){n[t]&&(i.removeEventListener(e,t,r),delete n[t])},s=function(t,n){e.canvas&&e.resize(t,n)},o=function n(){a("attach",n),e.attached=!0,e.resize(),r("resize",s),r("detach",t)};t=function(){e.attached=!1,a("resize",s),e._stop(),e._resize(0,0),r("attach",o)},i.isAttached(this.canvas)?o():t()}},{key:"unbindEvents",value:function(){var e=this;pf(this._listeners,(function(t,n){e.platform.removeEventListener(e,n,t)})),this._listeners={},pf(this._responsiveListeners,(function(t,n){e.platform.removeEventListener(e,n,t)})),this._responsiveListeners=void 0}},{key:"updateHoverStyle",value:function(e,t,n){var i,r,a,s=n?"set":"remove";for("dataset"===t&&this.getDatasetMeta(e[0].datasetIndex).controller["_"+s+"DatasetHoverStyle"](),r=0,a=e.length;r<a;++r){var o=(i=e[r])&&this.getDatasetMeta(i.datasetIndex).controller;o&&o[s+"HoverStyle"](i.element,i.datasetIndex,i.index)}}},{key:"getActiveElements",value:function(){return this._active||[]}},{key:"setActiveElements",value:function(e){var t=this,n=this._active||[],i=e.map((function(e){var n=e.datasetIndex,i=e.index,r=t.getDatasetMeta(n);if(!r)throw new Error("No dataset found at index "+n);return{datasetIndex:n,element:r.data[i],index:i}}));!gf(i,n)&&(this._active=i,this._lastEvent=null,this._updateHoverStyles(i,n))}},{key:"notifyPlugins",value:function(e,t,n){return this._plugins.notify(this,e,t,n)}},{key:"isPluginEnabled",value:function(e){return 1===this._plugins._cache.filter((function(t){return t.plugin.id===e})).length}},{key:"_updateHoverStyles",value:function(e,t,n){var i=this.options.hover,r=function(e,t){return e.filter((function(e){return!t.some((function(t){return e.datasetIndex===t.datasetIndex&&e.index===t.index}))}))},a=r(t,e),s=n?e:r(e,t);a.length&&this.updateHoverStyle(a,i.mode,!1),s.length&&i.mode&&this.updateHoverStyle(s,i.mode,!0)}},{key:"_eventHandler",value:function(e,t){var n=this,i={event:e,replay:t,cancelable:!0,inChartArea:this.isPointInArea(e)},r=function(t){return(t.options.events||n.options.events).includes(e.native.type)};if(!1!==this.notifyPlugins("beforeEvent",i,r)){var a=this._handleEvent(e,t,i.inChartArea);return i.cancelable=!1,this.notifyPlugins("afterEvent",i,r),(a||i.changed)&&this.render(),this}}},{key:"_handleEvent",value:function(e,t,n){var i=this._active,r=void 0===i?[]:i,a=this.options,s=t,o=this._getActiveElements(e,r,n,s),l=function(e){return"mouseup"===e.type||"click"===e.type||"contextmenu"===e.type}(e),u=function(e,t,n,i){return n&&"mouseout"!==e.type?i?t:e:null}(e,this._lastEvent,n,l);n&&(this._lastEvent=null,ff(a.onHover,[e,o,this],this),l&&ff(a.onClick,[e,o,this],this));var c=!gf(o,r);return(c||t)&&(this._active=o,this._updateHoverStyles(o,r,t)),this._lastEvent=u,c}},{key:"_getActiveElements",value:function(e,t,n,i){if("mouseout"===e.type)return[];if(!n)return t;var r=this.options.hover;return this.getElementsAtEventForMode(e,r.mode,r,i)}}],[{key:"register",value:function(){Ov.add.apply(Ov,arguments),ny()}},{key:"unregister",value:function(){Ov.remove.apply(Ov,arguments),ny()}}]),e}();function ny(){return pf(ty.instances,(function(e){return e._plugins.invalidate()}))}function iy(e,t,n,i){var r=$p(e.options.borderRadius,["outerStart","outerEnd","innerStart","innerEnd"]),a=(n-t)/2,s=Math.min(a,i*t/2),o=function(e){var t=(n-Math.min(a,e))*i/2;return Qf(e,0,Math.min(a,t))};return{outerStart:o(r.outerStart),outerEnd:o(r.outerEnd),innerStart:Qf(r.innerStart,0,s),innerEnd:Qf(r.innerEnd,0,s)}}function ry(e,t,n,i){return{x:n+e*Math.cos(t),y:i+e*Math.sin(t)}}function ay(e,t,n,i,r,a){var s=t.x,o=t.y,l=t.startAngle,u=t.pixelMargin,c=t.innerRadius,d=Math.max(t.outerRadius+i+n-u,0),h=c>0?c+i+n+u:0,f=0,p=r-l;if(i){var g=((c>0?c-i:0)+(d>0?d-i:0))/2;f=(p-(0!==g?p*g/(g+i):p))/2}var m=(p-Math.max(.001,p*d-n/If)/d)/2,v=l+m+f,y=r-m-f,_=iy(t,h,d,y-v),b=_.outerStart,T=_.outerEnd,k=_.innerStart,x=_.innerEnd,S=d-b,w=d-T,E=v+b/S,C=y-T/w,P=h+k,I=h+x,A=v+k/P,O=y-x/I;if(e.beginPath(),a){var L=(E+C)/2;if(e.arc(s,o,d,E,L),e.arc(s,o,d,L,C),T>0){var M=ry(w,C,s,o);e.arc(M.x,M.y,T,C,y+Df)}var D=ry(I,y,s,o);if(e.lineTo(D.x,D.y),x>0){var R=ry(I,O,s,o);e.arc(R.x,R.y,x,y+Df,O+Math.PI)}var N=(y-x/h+(v+k/h))/2;if(e.arc(s,o,h,y-x/h,N,!0),e.arc(s,o,h,N,v+k/h,!0),k>0){var U=ry(P,A,s,o);e.arc(U.x,U.y,k,A+Math.PI,v-Df)}var j=ry(S,v,s,o);if(e.lineTo(j.x,j.y),b>0){var F=ry(S,E,s,o);e.arc(F.x,F.y,b,v-Df,E)}}else{e.moveTo(s,o);var B=Math.cos(E)*d+s,z=Math.sin(E)*d+o;e.lineTo(B,z);var V=Math.cos(C)*d+s,H=Math.sin(C)*d+o;e.lineTo(V,H)}e.closePath()}function sy(e,t,n,i,r){var a=t.fullCircles,s=t.startAngle,o=t.circumference,l=t.options,u=l.borderWidth,c=l.borderJoinStyle,d="inner"===l.borderAlign;if(u){d?(e.lineWidth=2*u,e.lineJoin=c||"round"):(e.lineWidth=u,e.lineJoin=c||"bevel");var h=t.endAngle;if(a){ay(e,t,n,i,h,r);for(var f=0;f<a;++f)e.stroke();isNaN(o)||(h=s+(o%Af||Af))}d&&function(e,t,n){var i=t.startAngle,r=t.pixelMargin,a=t.x,s=t.y,o=t.outerRadius,l=t.innerRadius,u=r/o;e.beginPath(),e.arc(a,s,o,i-u,n+u),l>r?(u=r/l,e.arc(a,s,l,n+u,i-u,!0)):e.arc(a,s,r,n+Df,i-Df),e.closePath(),e.clip()}(e,t,h),a||(ay(e,t,n,i,h,r),e.stroke())}}_h(ty,"defaults",Ip),_h(ty,"instances",Jv),_h(ty,"overrides",Sp),_h(ty,"registry",Ov),_h(ty,"version","4.2.1"),_h(ty,"getChart",Zv);var oy=function(e){Bc(n,e);var t=Wc(n);function n(e){var i;return Dc(this,n),(i=t.call(this)).options=void 0,i.circumference=void 0,i.startAngle=void 0,i.endAngle=void 0,i.innerRadius=void 0,i.outerRadius=void 0,i.pixelMargin=0,i.fullCircles=0,e&&Object.assign(Hc(i),e),i}return jc(n,[{key:"inRange",value:function(e,t,n){var i=Gf(this.getProps(["x","y"],n),{x:e,y:t}),r=i.angle,a=i.distance,s=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],n),o=s.startAngle,l=s.endAngle,u=s.innerRadius,c=s.outerRadius,d=s.circumference,h=this.options.spacing/2,f=df(d,l-o)>=Af||Yf(r,o,l),p=Jf(a,u+h,c+h);return f&&p}},{key:"getCenterPoint",value:function(e){var t=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],e),n=t.x,i=t.y,r=t.startAngle,a=t.endAngle,s=t.innerRadius,o=t.outerRadius,l=this.options,u=l.offset,c=(r+a)/2,d=(s+o+l.spacing+u)/2;return{x:n+Math.cos(c)*d,y:i+Math.sin(c)*d}}},{key:"tooltipPosition",value:function(e){return this.getCenterPoint(e)}},{key:"draw",value:function(e){var t=this.options,n=this.circumference,i=(t.offset||0)/4,r=(t.spacing||0)/2,a=t.circular;if(this.pixelMargin="inner"===t.borderAlign?.33:0,this.fullCircles=n>Af?Math.floor(n/Af):0,!(0===n||this.innerRadius<0||this.outerRadius<0)){e.save();var s=(this.startAngle+this.endAngle)/2;e.translate(Math.cos(s)*i,Math.sin(s)*i);var o=i*(1-Math.sin(Math.min(If,n||0)));e.fillStyle=t.backgroundColor,e.strokeStyle=t.borderColor,function(e,t,n,i,r){var a=t.fullCircles,s=t.startAngle,o=t.circumference,l=t.endAngle;if(a){ay(e,t,n,i,l,r);for(var u=0;u<a;++u)e.fill();isNaN(o)||(l=s+(o%Af||Af))}ay(e,t,n,i,l,r),e.fill()}(e,this,o,r,a),sy(e,this,o,r,a),e.restore()}}}]),n}(vv);function ly(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t;e.lineCap=df(n.borderCapStyle,t.borderCapStyle),e.setLineDash(df(n.borderDash,t.borderDash)),e.lineDashOffset=df(n.borderDashOffset,t.borderDashOffset),e.lineJoin=df(n.borderJoinStyle,t.borderJoinStyle),e.lineWidth=df(n.borderWidth,t.borderWidth),e.strokeStyle=df(n.borderColor,t.borderColor)}function uy(e,t,n){e.lineTo(n.x,n.y)}function cy(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=e.length,r=n.start,a=void 0===r?0:r,s=n.end,o=void 0===s?i-1:s,l=t.start,u=t.end,c=Math.max(a,l),d=Math.min(o,u),h=a<l&&o<l||a>u&&o>u;return{count:i,start:c,loop:t.loop,ilen:d<c&&!h?i+d-c:d-c}}function dy(e,t,n,i){var r,a,s,o=t.points,l=t.options,u=cy(o,n,i),c=u.count,d=u.start,h=u.loop,f=u.ilen,p=function(e){return e.stepped?Fp:e.tension||"monotone"===e.cubicInterpolationMode?Bp:uy}(l),g=i||{},m=g.move,v=void 0===m||m,y=g.reverse;for(r=0;r<=f;++r)(a=o[(d+(y?f-r:r))%c]).skip||(v?(e.moveTo(a.x,a.y),v=!1):p(e,s,a,y,l.stepped),s=a);return h&&p(e,s,a=o[(d+(y?f:0))%c],y,l.stepped),!!h}function hy(e,t,n,i){var r,a,s,o,l,u,c=t.points,d=cy(c,n,i),h=d.count,f=d.start,p=d.ilen,g=i||{},m=g.move,v=void 0===m||m,y=g.reverse,_=0,b=0,T=function(e){return(f+(y?p-e:e))%h},k=function(){o!==l&&(e.lineTo(_,l),e.lineTo(_,o),e.lineTo(_,u))};for(v&&(a=c[T(0)],e.moveTo(a.x,a.y)),r=0;r<=p;++r)if(!(a=c[T(r)]).skip){var x=a.x,S=a.y,w=0|x;w===s?(S<o?o=S:S>l&&(l=S),_=(b*_+x)/++b):(k(),e.lineTo(x,S),s=w,b=0,o=l=S),u=S}k()}function fy(e){var t=e.options,n=t.borderDash&&t.borderDash.length;return!e._decimated&&!e._loop&&!t.tension&&"monotone"!==t.cubicInterpolationMode&&!t.stepped&&!n?hy:dy}_h(oy,"id","arc"),_h(oy,"defaults",{borderAlign:"center",borderColor:"#fff",borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0}),_h(oy,"defaultRoutes",{backgroundColor:"backgroundColor"});var py="function"===typeof Path2D;function gy(e,t,n,i){py&&!t.options.segment?function(e,t,n,i){var r=t._path;r||(r=t._path=new Path2D,t.path(r,n,i)&&r.closePath()),ly(e,t.options),e.stroke(r)}(e,t,n,i):function(e,t,n,i){var r,a=t.segments,s=t.options,o=fy(t),l=Xc(a);try{for(l.s();!(r=l.n()).done;){var u=r.value;ly(e,s,u.style),e.beginPath(),o(e,t,u,{start:n,end:n+i-1})&&e.closePath(),e.stroke()}}catch(c){l.e(c)}finally{l.f()}}(e,t,n,i)}var my=function(e){Bc(n,e);var t=Wc(n);function n(e){var i;return Dc(this,n),(i=t.call(this)).animated=!0,i.options=void 0,i._chart=void 0,i._loop=void 0,i._fullLoop=void 0,i._path=void 0,i._points=void 0,i._segments=void 0,i._decimated=!1,i._pointsUpdated=!1,i._datasetIndex=void 0,e&&Object.assign(Hc(i),e),i}return jc(n,[{key:"updateControlPoints",value:function(e,t){var n=this.options;if((n.tension||"monotone"===n.cubicInterpolationMode)&&!n.stepped&&!this._pointsUpdated){var i=n.spanGaps?this._loop:this._fullLoop;kg(this._points,n,e,i,t),this._pointsUpdated=!0}}},{key:"points",get:function(){return this._points},set:function(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}},{key:"segments",get:function(){return this._segments||(this._segments=function(e,t){var n=e.points,i=e.options.spanGaps,r=n.length;if(!r)return[];var a=!!e._loop,s=function(e,t,n,i){var r=0,a=t-1;if(n&&!i)for(;r<t&&!e[r].skip;)r++;for(;r<t&&e[r].skip;)r++;for(r%=t,n&&(a+=r);a>r&&e[a%t].skip;)a--;return{start:r,end:a%=t}}(n,r,a,i),o=s.start,l=s.end;return Kg(e,!0===i?[{start:o,end:l,loop:a}]:function(e,t,n,i){var r,a=e.length,s=[],o=t,l=e[t];for(r=t+1;r<=n;++r){var u=e[r%a];u.skip||u.stop?l.skip||(i=!1,s.push({start:t%a,end:(r-1)%a,loop:i}),t=o=u.stop?r:null):(o=r,l.skip&&(t=r)),l=u}return null!==o&&s.push({start:t%a,end:o%a,loop:i}),s}(n,o,l<o?l+r:l,!!e._fullLoop&&0===o&&l===r-1),n,t)}(this,this.options.segment))}},{key:"first",value:function(){var e=this.segments,t=this.points;return e.length&&t[e[0].start]}},{key:"last",value:function(){var e=this.segments,t=this.points,n=e.length;return n&&t[e[n-1].end]}},{key:"interpolate",value:function(e,t){var n=this.options,i=e[t],r=this.points,a=Xg(this,{property:t,start:i,end:i});if(a.length){var s,o,l=[],u=function(e){return e.stepped?Ug:e.tension||"monotone"===e.cubicInterpolationMode?jg:Ng}(n);for(s=0,o=a.length;s<o;++s){var c=a[s],d=c.start,h=c.end,f=r[d],p=r[h];if(f!==p){var g=u(f,p,Math.abs((i-f[t])/(p[t]-f[t])),n.stepped);g[t]=e[t],l.push(g)}else l.push(f)}return 1===l.length?l[0]:l}}},{key:"pathSegment",value:function(e,t,n){return fy(this)(e,this,t,n)}},{key:"path",value:function(e,t,n){var i=this.segments,r=fy(this),a=this._loop;t=t||0,n=n||this.points.length-t;var s,o=Xc(i);try{for(o.s();!(s=o.n()).done;){a&=r(e,this,s.value,{start:t,end:t+n-1})}}catch(l){o.e(l)}finally{o.f()}return!!a}},{key:"draw",value:function(e,t,n,i){var r=this.options||{};(this.points||[]).length&&r.borderWidth&&(e.save(),gy(e,this,n,i),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}]),n}(vv);function vy(e,t,n,i){var r=e.options,a=e.getProps([n],i)[n];return Math.abs(t-a)<r.radius+r.hitRadius}_h(my,"id","line"),_h(my,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),_h(my,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),_h(my,"descriptors",{_scriptable:!0,_indexable:function(e){return"borderDash"!==e&&"fill"!==e}});var yy=function(e){Bc(n,e);var t=Wc(n);function n(e){var i;return Dc(this,n),(i=t.call(this)).options=void 0,i.parsed=void 0,i.skip=void 0,i.stop=void 0,e&&Object.assign(Hc(i),e),i}return jc(n,[{key:"inRange",value:function(e,t,n){var i=this.options,r=this.getProps(["x","y"],n),a=r.x,s=r.y;return Math.pow(e-a,2)+Math.pow(t-s,2)<Math.pow(i.hitRadius+i.radius,2)}},{key:"inXRange",value:function(e,t){return vy(this,e,"x",t)}},{key:"inYRange",value:function(e,t){return vy(this,e,"y",t)}},{key:"getCenterPoint",value:function(e){var t=this.getProps(["x","y"],e);return{x:t.x,y:t.y}}},{key:"size",value:function(e){var t=(e=e||this.options||{}).radius||0;return 2*((t=Math.max(t,t&&e.hoverRadius||0))+(t&&e.borderWidth||0))}},{key:"draw",value:function(e,t){var n=this.options;this.skip||n.radius<.1||!Np(this,t,this.size(n)/2)||(e.strokeStyle=n.borderColor,e.lineWidth=n.borderWidth,e.fillStyle=n.backgroundColor,Dp(e,n,this.x,this.y))}},{key:"getRange",value:function(){var e=this.options||{};return e.radius+e.hitRadius}}]),n}(vv);function _y(e,t){var n,i,r,a,s,o=e.getProps(["x","y","base","width","height"],t),l=o.x,u=o.y,c=o.base,d=o.width,h=o.height;return e.horizontal?(s=h/2,n=Math.min(l,c),i=Math.max(l,c),r=u-s,a=u+s):(n=l-(s=d/2),i=l+s,r=Math.min(u,c),a=Math.max(u,c)),{left:n,top:r,right:i,bottom:a}}function by(e,t,n,i){return e?0:Qf(t,n,i)}function Ty(e){var t=_y(e),n=t.right-t.left,i=t.bottom-t.top,r=function(e,t,n){var i=e.options.borderWidth,r=e.borderSkipped,a=Yp(i);return{t:by(r.top,a.top,0,n),r:by(r.right,a.right,0,t),b:by(r.bottom,a.bottom,0,n),l:by(r.left,a.left,0,t)}}(e,n/2,i/2),a=function(e,t,n){var i=e.getProps(["enableBorderRadius"]).enableBorderRadius,r=e.options.borderRadius,a=Qp(r),s=Math.min(t,n),o=e.borderSkipped,l=i||lf(r);return{topLeft:by(!l||o.top||o.left,a.topLeft,0,s),topRight:by(!l||o.top||o.right,a.topRight,0,s),bottomLeft:by(!l||o.bottom||o.left,a.bottomLeft,0,s),bottomRight:by(!l||o.bottom||o.right,a.bottomRight,0,s)}}(e,n/2,i/2);return{outer:{x:t.left,y:t.top,w:n,h:i,radius:a},inner:{x:t.left+r.l,y:t.top+r.t,w:n-r.l-r.r,h:i-r.t-r.b,radius:{topLeft:Math.max(0,a.topLeft-Math.max(r.t,r.l)),topRight:Math.max(0,a.topRight-Math.max(r.t,r.r)),bottomLeft:Math.max(0,a.bottomLeft-Math.max(r.b,r.l)),bottomRight:Math.max(0,a.bottomRight-Math.max(r.b,r.r))}}}}function ky(e,t,n,i){var r=null===t,a=null===n,s=e&&!(r&&a)&&_y(e,i);return s&&(r||Jf(t,s.left,s.right))&&(a||Jf(n,s.top,s.bottom))}function xy(e,t){e.rect(t.x,t.y,t.w,t.h)}function Sy(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=e.x!==n.x?-t:0,r=e.y!==n.y?-t:0,a=(e.x+e.w!==n.x+n.w?t:0)-i,s=(e.y+e.h!==n.y+n.h?t:0)-r;return{x:e.x+i,y:e.y+r,w:e.w+a,h:e.h+s,radius:e.radius}}_h(yy,"id","point"),_h(yy,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),_h(yy,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});var wy=function(e){Bc(n,e);var t=Wc(n);function n(e){var i;return Dc(this,n),(i=t.call(this)).options=void 0,i.horizontal=void 0,i.base=void 0,i.width=void 0,i.height=void 0,i.inflateAmount=void 0,e&&Object.assign(Hc(i),e),i}return jc(n,[{key:"draw",value:function(e){var t,n=this.inflateAmount,i=this.options,r=i.borderColor,a=i.backgroundColor,s=Ty(this),o=s.inner,l=s.outer,u=(t=l.radius).topLeft||t.topRight||t.bottomLeft||t.bottomRight?Wp:xy;e.save(),l.w===o.w&&l.h===o.h||(e.beginPath(),u(e,Sy(l,n,o)),e.clip(),u(e,Sy(o,-n,l)),e.fillStyle=r,e.fill("evenodd")),e.beginPath(),u(e,Sy(o,n)),e.fillStyle=a,e.fill(),e.restore()}},{key:"inRange",value:function(e,t,n){return ky(this,e,t,n)}},{key:"inXRange",value:function(e,t){return ky(this,e,null,t)}},{key:"inYRange",value:function(e,t){return ky(this,null,e,t)}},{key:"getCenterPoint",value:function(e){var t=this.getProps(["x","y","base","horizontal"],e),n=t.x,i=t.y,r=t.base,a=t.horizontal;return{x:a?(n+r)/2:n,y:a?i:(i+r)/2}}},{key:"getRange",value:function(e){return"x"===e?this.width/2:this.height/2}}]),n}(vv);_h(wy,"id","bar"),_h(wy,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),_h(wy,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});var Ey=Object.freeze({__proto__:null,ArcElement:oy,LineElement:my,PointElement:yy,BarElement:wy}),Cy=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],Py=Cy.map((function(e){return e.replace("rgb(","rgba(").replace(")",", 0.5)")}));function Iy(e){return Cy[e%Cy.length]}function Ay(e){return Py[e%Py.length]}function Oy(e){var t=0;return function(n,i){var r=e.getDatasetMeta(i).controller;r instanceof wm?t=function(e,t){return e.backgroundColor=e.data.map((function(){return Iy(t++)})),t}(n,t):r instanceof Cm?t=function(e,t){return e.backgroundColor=e.data.map((function(){return Ay(t++)})),t}(n,t):r&&(t=function(e,t){return e.borderColor=Iy(t),e.backgroundColor=Ay(t),++t}(n,t))}}function Ly(e){var t;for(t in e)if(e[t].borderColor||e[t].backgroundColor)return!0;return!1}var My={id:"colors",defaults:{enabled:!0,forceOverride:!1},beforeLayout:function(e,t,n){if(n.enabled){var i=e.config,r=i.data.datasets,a=i.options,s=a.elements;if(n.forceOverride||!(Ly(r)||(o=a,o&&(o.borderColor||o.backgroundColor))||s&&Ly(s))){var o,l=Oy(e);r.forEach(l)}}}};function Dy(e){if(e._decimated){var t=e._data;delete e._decimated,delete e._data,Object.defineProperty(e,"data",{configurable:!0,enumerable:!0,writable:!0,value:t})}}function Ry(e){e.data.datasets.forEach((function(e){Dy(e)}))}var Ny={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:function(e,t,n){if(n.enabled){var i=e.width;e.data.datasets.forEach((function(t,r){var a=t._data,s=t.indexAxis,o=e.getDatasetMeta(r),l=a||t.data;if("y"!==eg([s,e.options.indexAxis])&&o.controller.supportsDecimation){var u=e.scales[o.xAxisID];if(("linear"===u.type||"time"===u.type)&&!e.options.parsing){var c=function(e,t){var n=t.length,i=0,r=e.iScale,a=r.getUserBounds(),s=a.min,o=a.max,l=a.minDefined,u=a.maxDefined;return l&&(i=Qf(ep(t,r.axis,s).lo,0,n-1)),{start:i,count:u?Qf(ep(t,r.axis,o).hi+1,i,n)-i:n-i}}(o,l),d=c.start,h=c.count;if(h<=(n.threshold||4*i))Dy(t);else{var f;switch(sf(a)&&(t._data=l,delete t.data,Object.defineProperty(t,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(e){this._data=e}})),n.algorithm){case"lttb":f=function(e,t,n,i,r){var a=r.samples||i;if(a>=n)return e.slice(t,t+n);var s,o,l,u,c,d=[],h=(n-2)/(a-2),f=0,p=t+n-1,g=t;for(d[f++]=e[g],s=0;s<a-2;s++){var m=0,v=0,y=void 0,_=Math.floor((s+1)*h)+1+t,b=Math.min(Math.floor((s+2)*h)+1,n)+t,T=b-_;for(y=_;y<b;y++)m+=e[y].x,v+=e[y].y;m/=T,v/=T;var k=Math.floor(s*h)+1+t,x=Math.min(Math.floor((s+1)*h)+1,n)+t,S=e[g],w=S.x,E=S.y;for(l=u=-1,y=k;y<x;y++)(u=.5*Math.abs((w-m)*(e[y].y-E)-(w-e[y].x)*(v-E)))>l&&(l=u,o=e[y],c=y);d[f++]=o,g=c}return d[f++]=e[p],d}(l,d,h,i,n);break;case"min-max":f=function(e,t,n,i){var r,a,s,o,l,u,c,d,h,f,p=0,g=0,m=[],v=t+n-1,y=e[t].x,_=e[v].x-y;for(r=t;r<t+n;++r){s=((a=e[r]).x-y)/_*i,o=a.y;var b=0|s;if(b===l)o<h?(h=o,u=r):o>f&&(f=o,c=r),p=(g*p+a.x)/++g;else{var T=r-1;if(!sf(u)&&!sf(c)){var k=Math.min(u,c),x=Math.max(u,c);k!==d&&k!==T&&m.push(Th(Th({},e[k]),{},{x:p})),x!==d&&x!==T&&m.push(Th(Th({},e[x]),{},{x:p}))}r>0&&T!==d&&m.push(e[T]),m.push(a),l=b,g=0,h=f=o,u=c=d=r}}return m}(l,d,h,i);break;default:throw new Error("Unsupported decimation algorithm '".concat(n.algorithm,"'"))}t._decimated=f}}}}))}else Ry(e)},destroy:function(e){Ry(e)}};function Uy(e,t,n,i){if(!i){var r=t[e],a=n[e];return"angle"===e&&(r=$f(r),a=$f(a)),{property:e,start:r,end:a}}}function jy(e,t,n){for(;t>e;t--){var i=n[t];if(!isNaN(i.x)&&!isNaN(i.y))break}return t}function Fy(e,t,n,i){return e&&t?i(e[n],t[n]):e?e[n]:t?t[n]:0}function By(e,t){var n=[],i=!1;return of(e)?(i=!0,n=e):n=function(e,t){var n=e||{},i=n.x,r=void 0===i?null:i,a=n.y,s=void 0===a?null:a,o=t.points,l=[];return t.segments.forEach((function(e){var t=e.start,n=e.end;n=jy(t,n,o);var i=o[t],a=o[n];null!==s?(l.push({x:i.x,y:s}),l.push({x:a.x,y:s})):null!==r&&(l.push({x:r,y:i.y}),l.push({x:r,y:a.y}))})),l}(e,t),n.length?new my({points:n,options:{tension:0},_loop:i,_fullLoop:i}):null}function zy(e){return e&&!1!==e.fill}function Vy(e,t,n){var i,r=e[t].fill,a=[t];if(!n)return r;for(;!1!==r&&-1===a.indexOf(r);){if(!uf(r))return r;if(!(i=e[r]))return!1;if(i.visible)return r;a.push(r),r=i.fill}return!1}function Hy(e,t,n){var i=function(e){var t=e.options,n=t.fill,i=df(n&&n.target,n);void 0===i&&(i=!!t.backgroundColor);if(!1===i||null===i)return!1;if(!0===i)return"origin";return i}(e);if(lf(i))return!isNaN(i.value)&&i;var r=parseFloat(i);return uf(r)&&Math.floor(r)===r?function(e,t,n,i){"-"!==e&&"+"!==e||(n=t+n);if(n===t||n<0||n>=i)return!1;return n}(i[0],t,r,n):["origin","start","end","stack","shape"].indexOf(i)>=0&&i}function Wy(e,t,n){for(var i=[],r=0;r<n.length;r++){var a=qy(n[r],t,"x"),s=a.first,o=a.last,l=a.point;if(!(!l||s&&o))if(s)i.unshift(l);else if(e.push(l),!o)break}e.push.apply(e,i)}function qy(e,t,n){var i=e.interpolate(t,n);if(!i)return{};for(var r=i[n],a=e.segments,s=e.points,o=!1,l=!1,u=0;u<a.length;u++){var c=a[u],d=s[c.start][n],h=s[c.end][n];if(Jf(r,d,h)){o=r===d,l=r===h;break}}return{first:o,last:l,point:i}}var Gy=function(){function e(t){Dc(this,e),this.x=t.x,this.y=t.y,this.radius=t.radius}return jc(e,[{key:"pathSegment",value:function(e,t,n){var i=this.x,r=this.y,a=this.radius;return t=t||{start:0,end:Af},e.arc(i,r,a,t.end,t.start,!0),!n.bounds}},{key:"interpolate",value:function(e){var t=this.x,n=this.y,i=this.radius,r=e.angle;return{x:t+Math.cos(r)*i,y:n+Math.sin(r)*i,angle:r}}}]),e}();function Xy(e){var t=e.chart,n=e.fill,i=e.line;if(uf(n))return function(e,t){var n=e.getDatasetMeta(t),i=n&&e.isDatasetVisible(t);return i?n.dataset:null}(t,n);if("stack"===n)return function(e){var t=e.scale,n=e.index,i=e.line,r=[],a=i.segments,s=i.points,o=function(e,t){for(var n=[],i=e.getMatchingVisibleMetas("line"),r=0;r<i.length;r++){var a=i[r];if(a.index===t)break;a.hidden||n.unshift(a.dataset)}return n}(t,n);o.push(By({x:null,y:t.bottom},i));for(var l=0;l<a.length;l++)for(var u=a[l],c=u.start;c<=u.end;c++)Wy(r,s[c],o);return new my({points:r,options:{}})}(e);if("shape"===n)return!0;var r=function(e){var t=e.scale||{};if(t.getPointPositionForValue)return function(e){var t=e.scale,n=e.fill,i=t.options,r=t.getLabels().length,a=i.reverse?t.max:t.min,s=function(e,t,n){return"start"===e?n:"end"===e?t.options.reverse?t.min:t.max:lf(e)?e.value:t.getBaseValue()}(n,t,a),o=[];if(i.grid.circular){var l=t.getPointPositionForValue(0,a);return new Gy({x:l.x,y:l.y,radius:t.getDistanceFromCenterForValue(s)})}for(var u=0;u<r;++u)o.push(t.getPointPositionForValue(u,s));return o}(e);return function(e){var t=e.scale,n=void 0===t?{}:t,i=e.fill,r=function(e,t){var n=null;return"start"===e?n=t.bottom:"end"===e?n=t.top:lf(e)?n=t.getPixelForValue(e.value):t.getBasePixel&&(n=t.getBasePixel()),n}(i,n);if(uf(r)){var a=n.isHorizontal();return{x:a?r:null,y:a?null:r}}return null}(e)}(e);return r instanceof Gy?r:By(r,i)}function Ky(e,t,n){var i=Xy(t),r=t.line,a=t.scale,s=t.axis,o=r.options,l=o.fill,u=o.backgroundColor,c=l||{},d=c.above,h=void 0===d?u:d,f=c.below,p=void 0===f?u:f;i&&r.points.length&&(Up(e,n),function(e,t){var n=t.line,i=t.target,r=t.above,a=t.below,s=t.area,o=t.scale,l=n._loop?"angle":t.axis;e.save(),"x"===l&&a!==r&&($y(e,i,s.top),Yy(e,{line:n,target:i,color:r,scale:o,property:l}),e.restore(),e.save(),$y(e,i,s.bottom));Yy(e,{line:n,target:i,color:a,scale:o,property:l}),e.restore()}(e,{line:r,target:i,above:h,below:p,area:n,scale:a,axis:s}),jp(e))}function $y(e,t,n){var i=t.segments,r=t.points,a=!0,s=!1;e.beginPath();var o,l=Xc(i);try{for(l.s();!(o=l.n()).done;){var u=o.value,c=u.start,d=u.end,h=r[c],f=r[jy(c,d,r)];a?(e.moveTo(h.x,h.y),a=!1):(e.lineTo(h.x,n),e.lineTo(h.x,h.y)),(s=!!t.pathSegment(e,u,{move:s}))?e.closePath():e.lineTo(f.x,n)}}catch(p){l.e(p)}finally{l.f()}e.lineTo(t.first().x,n),e.closePath(),e.clip()}function Yy(e,t){var n,i=t.line,r=t.target,a=t.property,s=t.color,o=t.scale,l=function(e,t,n){var i,r=e.segments,a=e.points,s=t.points,o=[],l=Xc(r);try{for(l.s();!(i=l.n()).done;){var u=i.value,c=u.start,d=u.end;d=jy(c,d,a);var h=Uy(n,a[c],a[d],u.loop);if(t.segments){var f,p=Xc(Xg(t,h));try{for(p.s();!(f=p.n()).done;){var g,m=f.value,v=Uy(n,s[m.start],s[m.end],m.loop),y=Xc(Gg(u,a,v));try{for(y.s();!(g=y.n()).done;){var _=g.value;o.push({source:_,target:m,start:_h({},n,Fy(h,v,"start",Math.max)),end:_h({},n,Fy(h,v,"end",Math.min))})}}catch(b){y.e(b)}finally{y.f()}}}catch(b){p.e(b)}finally{p.f()}}else o.push({source:u,target:h,start:a[c],end:a[d]})}}catch(b){l.e(b)}finally{l.f()}return o}(i,r,a),u=Xc(l);try{for(u.s();!(n=u.n()).done;){var c=n.value,d=c.source,h=c.target,f=c.start,p=c.end,g=d.style,m=(void 0===g?{}:g).backgroundColor,v=void 0===m?s:m,y=!0!==r;e.save(),e.fillStyle=v,Qy(e,o,y&&Uy(a,f,p)),e.beginPath();var _=!!i.pathSegment(e,d),b=void 0;if(y){_?e.closePath():Jy(e,r,p,a);var T=!!r.pathSegment(e,h,{move:_,reverse:!0});(b=_&&T)||Jy(e,r,f,a)}e.closePath(),e.fill(b?"evenodd":"nonzero"),e.restore()}}catch(k){u.e(k)}finally{u.f()}}function Qy(e,t,n){var i=t.chart.chartArea,r=i.top,a=i.bottom,s=n||{},o=s.property,l=s.start,u=s.end;"x"===o&&(e.beginPath(),e.rect(l,r,u-l,a-r),e.clip())}function Jy(e,t,n,i){var r=t.interpolate(n,i);r&&e.lineTo(r.x,r.y)}var Zy={id:"filler",afterDatasetsUpdate:function(e,t,n){var i,r,a,s,o=(e.data.datasets||[]).length,l=[];for(r=0;r<o;++r)s=null,(a=(i=e.getDatasetMeta(r)).dataset)&&a.options&&a instanceof my&&(s={visible:e.isDatasetVisible(r),index:r,fill:Hy(a,r,o),chart:e,axis:i.controller.options.indexAxis,scale:i.vScale,line:a}),i.$filler=s,l.push(s);for(r=0;r<o;++r)(s=l[r])&&!1!==s.fill&&(s.fill=Vy(l,r,n.propagate))},beforeDraw:function(e,t,n){for(var i="beforeDraw"===n.drawTime,r=e.getSortedVisibleDatasetMetas(),a=e.chartArea,s=r.length-1;s>=0;--s){var o=r[s].$filler;o&&(o.line.updateControlPoints(a,o.axis),i&&o.fill&&Ky(e.ctx,o,a))}},beforeDatasetsDraw:function(e,t,n){if("beforeDatasetsDraw"===n.drawTime)for(var i=e.getSortedVisibleDatasetMetas(),r=i.length-1;r>=0;--r){var a=i[r].$filler;zy(a)&&Ky(e.ctx,a,e.chartArea)}},beforeDatasetDraw:function(e,t,n){var i=t.meta.$filler;zy(i)&&"beforeDatasetDraw"===n.drawTime&&Ky(e.ctx,i,e.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}},e_=function(e,t){var n=e.boxHeight,i=void 0===n?t:n,r=e.boxWidth,a=void 0===r?t:r;return e.usePointStyle&&(i=Math.min(i,t),a=e.pointStyleWidth||Math.min(a,t)),{boxWidth:a,boxHeight:i,itemHeight:Math.max(t,i)}},t_=function(e){Bc(n,e);var t=Wc(n);function n(e){var i;return Dc(this,n),(i=t.call(this))._added=!1,i.legendHitBoxes=[],i._hoveredItem=null,i.doughnutMode=!1,i.chart=e.chart,i.options=e.options,i.ctx=e.ctx,i.legendItems=void 0,i.columnSizes=void 0,i.lineWidths=void 0,i.maxHeight=void 0,i.maxWidth=void 0,i.top=void 0,i.bottom=void 0,i.left=void 0,i.right=void 0,i.height=void 0,i.width=void 0,i._margins=void 0,i.position=void 0,i.weight=void 0,i.fullSize=void 0,i}return jc(n,[{key:"update",value:function(e,t,n){this.maxWidth=e,this.maxHeight=t,this._margins=n,this.setDimensions(),this.buildLabels(),this.fit()}},{key:"setDimensions",value:function(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}},{key:"buildLabels",value:function(){var e=this,t=this.options.labels||{},n=ff(t.generateLabels,[this.chart],this)||[];t.filter&&(n=n.filter((function(n){return t.filter(n,e.chart.data)}))),t.sort&&(n=n.sort((function(n,i){return t.sort(n,i,e.chart.data)}))),this.options.reverse&&n.reverse(),this.legendItems=n}},{key:"fit",value:function(){var e=this.options,t=this.ctx;if(e.display){var n,i,r=e.labels,a=Zp(r.font),s=a.size,o=this._computeTitleHeight(),l=e_(r,s),u=l.boxWidth,c=l.itemHeight;t.font=a.string,this.isHorizontal()?(n=this.maxWidth,i=this._fitRows(o,s,u,c)+10):(i=this.maxHeight,n=this._fitCols(o,a,u,c)+10),this.width=Math.min(n,e.maxWidth||this.maxWidth),this.height=Math.min(i,e.maxHeight||this.maxHeight)}else this.width=this.height=0}},{key:"_fitRows",value:function(e,t,n,i){var r=this.ctx,a=this.maxWidth,s=this.options.labels.padding,o=this.legendHitBoxes=[],l=this.lineWidths=[0],u=i+s,c=e;r.textAlign="left",r.textBaseline="middle";var d=-1,h=-u;return this.legendItems.forEach((function(e,f){var p=n+t/2+r.measureText(e.text).width;(0===f||l[l.length-1]+p+2*s>a)&&(c+=u,l[l.length-(f>0?0:1)]=0,h+=u,d++),o[f]={left:0,top:h,row:d,width:p,height:i},l[l.length-1]+=p+s})),c}},{key:"_fitCols",value:function(e,t,n,i){var r=this.ctx,a=this.maxHeight,s=this.options.labels.padding,o=this.legendHitBoxes=[],l=this.columnSizes=[],u=a-e,c=s,d=0,h=0,f=0,p=0;return this.legendItems.forEach((function(e,a){var g=function(e,t,n,i,r){var a=function(e,t,n,i){var r=e.text;r&&"string"!==typeof r&&(r=r.reduce((function(e,t){return e.length>t.length?e:t})));return t+n.size/2+i.measureText(r).width}(i,e,t,n),s=function(e,t,n){var i=e;"string"!==typeof t.text&&(i=n_(t,n));return i}(r,i,t.lineHeight);return{itemWidth:a,itemHeight:s}}(n,t,r,e,i),m=g.itemWidth,v=g.itemHeight;a>0&&h+v+2*s>u&&(c+=d+s,l.push({width:d,height:h}),f+=d+s,p++,d=h=0),o[a]={left:f,top:h,col:p,width:m,height:v},d=Math.max(d,m),h+=v+s})),c+=d,l.push({width:d,height:h}),c}},{key:"adjustHitBoxes",value:function(){if(this.options.display){var e=this._computeTitleHeight(),t=this.legendHitBoxes,n=this.options,i=n.align,r=n.labels.padding,a=zg(n.rtl,this.left,this.width);if(this.isHorizontal()){var s,o=0,l=lp(i,this.left+r,this.right-this.lineWidths[o]),u=Xc(t);try{for(u.s();!(s=u.n()).done;){var c=s.value;o!==c.row&&(o=c.row,l=lp(i,this.left+r,this.right-this.lineWidths[o])),c.top+=this.top+e+r,c.left=a.leftForLtr(a.x(l),c.width),l+=c.width+r}}catch(m){u.e(m)}finally{u.f()}}else{var d,h=0,f=lp(i,this.top+e+r,this.bottom-this.columnSizes[h].height),p=Xc(t);try{for(p.s();!(d=p.n()).done;){var g=d.value;g.col!==h&&(h=g.col,f=lp(i,this.top+e+r,this.bottom-this.columnSizes[h].height)),g.top=f,g.left+=this.left+r,g.left=a.leftForLtr(a.x(g.left),g.width),f+=g.height+r}}catch(m){p.e(m)}finally{p.f()}}}}},{key:"isHorizontal",value:function(){return"top"===this.options.position||"bottom"===this.options.position}},{key:"draw",value:function(){if(this.options.display){var e=this.ctx;Up(e,this),this._draw(),jp(e)}}},{key:"_draw",value:function(){var e,t=this,n=this.options,i=this.columnSizes,r=this.lineWidths,a=this.ctx,s=n.align,o=n.labels,l=Ip.color,u=zg(n.rtl,this.left,this.width),c=Zp(o.font),d=o.padding,h=c.size,f=h/2;this.drawTitle(),a.textAlign=u.textAlign("left"),a.textBaseline="middle",a.lineWidth=.5,a.font=c.string;var p=e_(o,h),g=p.boxWidth,m=p.boxHeight,v=p.itemHeight,y=this.isHorizontal(),_=this._computeTitleHeight();e=y?{x:lp(s,this.left+d,this.right-r[0]),y:this.top+d+_,line:0}:{x:this.left+d,y:lp(s,this.top+_+d,this.bottom-i[0].height),line:0},Vg(this.ctx,n.textDirection);var b=v+d;this.legendItems.forEach((function(p,T){a.strokeStyle=p.fontColor,a.fillStyle=p.fontColor;var k=a.measureText(p.text).width,x=u.textAlign(p.textAlign||(p.textAlign=o.textAlign)),S=g+f+k,w=e.x,E=e.y;if(u.setWidth(t.width),y?T>0&&w+S+d>t.right&&(E=e.y+=b,e.line++,w=e.x=lp(s,t.left+d,t.right-r[e.line])):T>0&&E+b>t.bottom&&(w=e.x=w+i[e.line].width+d,e.line++,E=e.y=lp(s,t.top+_+d,t.bottom-i[e.line].height)),function(e,t,n){if(!(isNaN(g)||g<=0||isNaN(m)||m<0)){a.save();var i=df(n.lineWidth,1);if(a.fillStyle=df(n.fillStyle,l),a.lineCap=df(n.lineCap,"butt"),a.lineDashOffset=df(n.lineDashOffset,0),a.lineJoin=df(n.lineJoin,"miter"),a.lineWidth=i,a.strokeStyle=df(n.strokeStyle,l),a.setLineDash(df(n.lineDash,[])),o.usePointStyle){var r={radius:m*Math.SQRT2/2,pointStyle:n.pointStyle,rotation:n.rotation,borderWidth:i},s=u.xPlus(e,g/2);Rp(a,r,s,t+f,o.pointStyleWidth&&g)}else{var c=t+Math.max((h-m)/2,0),d=u.leftForLtr(e,g),p=Qp(n.borderRadius);a.beginPath(),Object.values(p).some((function(e){return 0!==e}))?Wp(a,{x:d,y:c,w:g,h:m,radius:p}):a.rect(d,c,g,m),a.fill(),0!==i&&a.stroke()}a.restore()}}(u.x(w),E,p),w=function(e,t,n,i){return e===(i?"left":"right")?n:"center"===e?(t+n)/2:t}(x,w+g+f,y?w+S:t.right,n.rtl),function(e,t,n){zp(a,n.text,e,t+v/2,c,{strikethrough:n.hidden,textAlign:u.textAlign(n.textAlign)})}(u.x(w),E,p),y)e.x+=S+d;else if("string"!==typeof p.text){var C=c.lineHeight;e.y+=n_(p,C)}else e.y+=b})),Hg(this.ctx,n.textDirection)}},{key:"drawTitle",value:function(){var e=this.options,t=e.title,n=Zp(t.font),i=Jp(t.padding);if(t.display){var r,a=zg(e.rtl,this.left,this.width),s=this.ctx,o=t.position,l=n.size/2,u=i.top+l,c=this.left,d=this.width;if(this.isHorizontal())d=Math.max.apply(Math,Mc(this.lineWidths)),r=this.top+u,c=lp(e.align,c,this.right-d);else{var h=this.columnSizes.reduce((function(e,t){return Math.max(e,t.height)}),0);r=u+lp(e.align,this.top,this.bottom-h-e.labels.padding-this._computeTitleHeight())}var f=lp(o,c,c+d);s.textAlign=a.textAlign(op(o)),s.textBaseline="middle",s.strokeStyle=t.color,s.fillStyle=t.color,s.font=n.string,zp(s,t.text,f,r,n)}}},{key:"_computeTitleHeight",value:function(){var e=this.options.title,t=Zp(e.font),n=Jp(e.padding);return e.display?t.lineHeight+n.height:0}},{key:"_getLegendItemAt",value:function(e,t){var n,i,r;if(Jf(e,this.left,this.right)&&Jf(t,this.top,this.bottom))for(r=this.legendHitBoxes,n=0;n<r.length;++n)if(Jf(e,(i=r[n]).left,i.left+i.width)&&Jf(t,i.top,i.top+i.height))return this.legendItems[n];return null}},{key:"handleEvent",value:function(e){var t=this.options;if(function(e,t){if(("mousemove"===e||"mouseout"===e)&&(t.onHover||t.onLeave))return!0;if(t.onClick&&("click"===e||"mouseup"===e))return!0;return!1}(e.type,t)){var n,i,r=this._getLegendItemAt(e.x,e.y);if("mousemove"===e.type||"mouseout"===e.type){var a=this._hoveredItem,s=(i=r,null!==(n=a)&&null!==i&&n.datasetIndex===i.datasetIndex&&n.index===i.index);a&&!s&&ff(t.onLeave,[e,a,this],this),this._hoveredItem=r,r&&!s&&ff(t.onHover,[e,r,this],this)}else r&&ff(t.onClick,[e,r,this],this)}}}]),n}(vv);function n_(e,t){return t*(e.text?e.text.length+.5:0)}var i_={id:"legend",_element:t_,start:function(e,t,n){var i=e.legend=new t_({ctx:e.ctx,options:n,chart:e});Zm.configure(e,i,n),Zm.addBox(e,i)},stop:function(e){Zm.removeBox(e,e.legend),delete e.legend},beforeUpdate:function(e,t,n){var i=e.legend;Zm.configure(e,i,n),i.options=n},afterUpdate:function(e){var t=e.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent:function(e,t){t.replay||e.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick:function(e,t,n){var i=t.datasetIndex,r=n.chart;r.isDatasetVisible(i)?(r.hide(i),t.hidden=!0):(r.show(i),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:function(e){return e.chart.options.color},boxWidth:40,padding:10,generateLabels:function(e){var t=e.data.datasets,n=e.legend.options.labels,i=n.usePointStyle,r=n.pointStyle,a=n.textAlign,s=n.color,o=n.useBorderRadius,l=n.borderRadius;return e._getSortedDatasetMetas().map((function(e){var n=e.controller.getStyle(i?0:void 0),u=Jp(n.borderWidth);return{text:t[e.index].label,fillStyle:n.backgroundColor,fontColor:s,hidden:!e.visible,lineCap:n.borderCapStyle,lineDash:n.borderDash,lineDashOffset:n.borderDashOffset,lineJoin:n.borderJoinStyle,lineWidth:(u.width+u.height)/4,strokeStyle:n.borderColor,pointStyle:r||n.pointStyle,rotation:n.rotation,textAlign:a||n.textAlign,borderRadius:o&&(l||n.borderRadius),datasetIndex:e.index}}),this)}},title:{color:function(e){return e.chart.options.color},display:!1,position:"center",text:""}},descriptors:{_scriptable:function(e){return!e.startsWith("on")},labels:{_scriptable:function(e){return!["generateLabels","filter","sort"].includes(e)}}}},r_=function(e){Bc(n,e);var t=Wc(n);function n(e){var i;return Dc(this,n),(i=t.call(this)).chart=e.chart,i.options=e.options,i.ctx=e.ctx,i._padding=void 0,i.top=void 0,i.bottom=void 0,i.left=void 0,i.right=void 0,i.width=void 0,i.height=void 0,i.position=void 0,i.weight=void 0,i.fullSize=void 0,i}return jc(n,[{key:"update",value:function(e,t){var n=this.options;if(this.left=0,this.top=0,n.display){this.width=this.right=e,this.height=this.bottom=t;var i=of(n.text)?n.text.length:1;this._padding=Jp(n.padding);var r=i*Zp(n.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=r:this.width=r}else this.width=this.height=this.right=this.bottom=0}},{key:"isHorizontal",value:function(){var e=this.options.position;return"top"===e||"bottom"===e}},{key:"_drawArgs",value:function(e){var t,n,i,r=this.top,a=this.left,s=this.bottom,o=this.right,l=this.options,u=l.align,c=0;return this.isHorizontal()?(n=lp(u,a,o),i=r+e,t=o-a):("left"===l.position?(n=a+e,i=lp(u,s,r),c=-.5*If):(n=o-e,i=lp(u,r,s),c=.5*If),t=s-r),{titleX:n,titleY:i,maxWidth:t,rotation:c}}},{key:"draw",value:function(){var e=this.ctx,t=this.options;if(t.display){var n=Zp(t.font),i=n.lineHeight/2+this._padding.top,r=this._drawArgs(i),a=r.titleX,s=r.titleY,o=r.maxWidth,l=r.rotation;zp(e,t.text,0,0,n,{color:t.color,maxWidth:o,rotation:l,textAlign:op(t.align),textBaseline:"middle",translation:[a,s]})}}}]),n}(vv);var a_={id:"title",_element:r_,start:function(e,t,n){!function(e,t){var n=new r_({ctx:e.ctx,options:t,chart:e});Zm.configure(e,n,t),Zm.addBox(e,n),e.titleBlock=n}(e,n)},stop:function(e){var t=e.titleBlock;Zm.removeBox(e,t),delete e.titleBlock},beforeUpdate:function(e,t,n){var i=e.titleBlock;Zm.configure(e,i,n),i.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}},s_=new WeakMap,o_={id:"subtitle",start:function(e,t,n){var i=new r_({ctx:e.ctx,options:n,chart:e});Zm.configure(e,i,n),Zm.addBox(e,i),s_.set(e,i)},stop:function(e){Zm.removeBox(e,s_.get(e)),s_.delete(e)},beforeUpdate:function(e,t,n){var i=s_.get(e);Zm.configure(e,i,n),i.options=n},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}},l_={average:function(e){if(!e.length)return!1;var t,n,i=0,r=0,a=0;for(t=0,n=e.length;t<n;++t){var s=e[t].element;if(s&&s.hasValue()){var o=s.tooltipPosition();i+=o.x,r+=o.y,++a}}return{x:i/a,y:r/a}},nearest:function(e,t){if(!e.length)return!1;var n,i,r,a=t.x,s=t.y,o=Number.POSITIVE_INFINITY;for(n=0,i=e.length;n<i;++n){var l=e[n].element;if(l&&l.hasValue()){var u=Xf(t,l.getCenterPoint());u<o&&(o=u,r=l)}}if(r){var c=r.tooltipPosition();a=c.x,s=c.y}return{x:a,y:s}}};function u_(e,t){return t&&(of(t)?Array.prototype.push.apply(e,t):e.push(t)),e}function c_(e){return("string"===typeof e||e instanceof String)&&e.indexOf("\n")>-1?e.split("\n"):e}function d_(e,t){var n=t.element,i=t.datasetIndex,r=t.index,a=e.getDatasetMeta(i).controller,s=a.getLabelAndValue(r),o=s.label,l=s.value;return{chart:e,label:o,parsed:a.getParsed(r),raw:e.data.datasets[i].data[r],formattedValue:l,dataset:a.getDataset(),dataIndex:r,datasetIndex:i,element:n}}function h_(e,t){var n=e.chart.ctx,i=e.body,r=e.footer,a=e.title,s=t.boxWidth,o=t.boxHeight,l=Zp(t.bodyFont),u=Zp(t.titleFont),c=Zp(t.footerFont),d=a.length,h=r.length,f=i.length,p=Jp(t.padding),g=p.height,m=0,v=i.reduce((function(e,t){return e+t.before.length+t.lines.length+t.after.length}),0);(v+=e.beforeBody.length+e.afterBody.length,d&&(g+=d*u.lineHeight+(d-1)*t.titleSpacing+t.titleMarginBottom),v)&&(g+=f*(t.displayColors?Math.max(o,l.lineHeight):l.lineHeight)+(v-f)*l.lineHeight+(v-1)*t.bodySpacing);h&&(g+=t.footerMarginTop+h*c.lineHeight+(h-1)*t.footerSpacing);var y=0,_=function(e){m=Math.max(m,n.measureText(e).width+y)};return n.save(),n.font=u.string,pf(e.title,_),n.font=l.string,pf(e.beforeBody.concat(e.afterBody),_),y=t.displayColors?s+2+t.boxPadding:0,pf(i,(function(e){pf(e.before,_),pf(e.lines,_),pf(e.after,_)})),y=0,n.font=c.string,pf(e.footer,_),n.restore(),{width:m+=p.width,height:g}}function f_(e,t,n,i){var r=n.x,a=n.width,s=e.width,o=e.chartArea,l=o.left,u=o.right,c="center";return"center"===i?c=r<=(l+u)/2?"left":"right":r<=a/2?c="left":r>=s-a/2&&(c="right"),function(e,t,n,i){var r=i.x,a=i.width,s=n.caretSize+n.caretPadding;return"left"===e&&r+a+s>t.width||"right"===e&&r-a-s<0||void 0}(c,e,t,n)&&(c="center"),c}function p_(e,t,n){var i=n.yAlign||t.yAlign||function(e,t){var n=t.y,i=t.height;return n<i/2?"top":n>e.height-i/2?"bottom":"center"}(e,n);return{xAlign:n.xAlign||t.xAlign||f_(e,t,n,i),yAlign:i}}function g_(e,t,n,i){var r=e.caretSize,a=e.caretPadding,s=e.cornerRadius,o=n.xAlign,l=n.yAlign,u=r+a,c=Qp(s),d=c.topLeft,h=c.topRight,f=c.bottomLeft,p=c.bottomRight,g=function(e,t){var n=e.x,i=e.width;return"right"===t?n-=i:"center"===t&&(n-=i/2),n}(t,o),m=function(e,t,n){var i=e.y,r=e.height;return"top"===t?i+=n:i-="bottom"===t?r+n:r/2,i}(t,l,u);return"center"===l?"left"===o?g+=u:"right"===o&&(g-=u):"left"===o?g-=Math.max(d,f)+r:"right"===o&&(g+=Math.max(h,p)+r),{x:Qf(g,0,i.width-t.width),y:Qf(m,0,i.height-t.height)}}function m_(e,t,n){var i=Jp(n.padding);return"center"===t?e.x+e.width/2:"right"===t?e.x+e.width-i.right:e.x+i.left}function v_(e){return u_([],c_(e))}function y_(e,t){var n=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return n?e.override(n):e}var __={beforeTitle:rf,title:function(e){if(e.length>0){var t=e[0],n=t.chart.data.labels,i=n?n.length:0;if(this&&this.options&&"dataset"===this.options.mode)return t.dataset.label||"";if(t.label)return t.label;if(i>0&&t.dataIndex<i)return n[t.dataIndex]}return""},afterTitle:rf,beforeBody:rf,beforeLabel:rf,label:function(e){if(this&&this.options&&"dataset"===this.options.mode)return e.label+": "+e.formattedValue||e.formattedValue;var t=e.dataset.label||"";t&&(t+=": ");var n=e.formattedValue;return sf(n)||(t+=n),t},labelColor:function(e){var t=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{borderColor:t.borderColor,backgroundColor:t.backgroundColor,borderWidth:t.borderWidth,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderRadius:0}},labelTextColor:function(){return this.options.bodyColor},labelPointStyle:function(e){var t=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{pointStyle:t.pointStyle,rotation:t.rotation}},afterLabel:rf,afterBody:rf,beforeFooter:rf,footer:rf,afterFooter:rf};function b_(e,t,n,i){var r=e[t].call(n,i);return"undefined"===typeof r?__[t].call(n,i):r}var T_=function(e){Bc(n,e);var t=Wc(n);function n(e){var i;return Dc(this,n),(i=t.call(this)).opacity=0,i._active=[],i._eventPosition=void 0,i._size=void 0,i._cachedAnimations=void 0,i._tooltipItems=[],i.$animations=void 0,i.$context=void 0,i.chart=e.chart,i.options=e.options,i.dataPoints=void 0,i.title=void 0,i.beforeBody=void 0,i.body=void 0,i.afterBody=void 0,i.footer=void 0,i.xAlign=void 0,i.yAlign=void 0,i.x=void 0,i.y=void 0,i.height=void 0,i.width=void 0,i.caretX=void 0,i.caretY=void 0,i.labelColors=void 0,i.labelPointStyles=void 0,i.labelTextColors=void 0,i}return jc(n,[{key:"initialize",value:function(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}},{key:"_resolveAnimations",value:function(){var e=this._cachedAnimations;if(e)return e;var t=this.chart,n=this.options.setContext(this.getContext()),i=n.enabled&&t.options.animation&&n.animations,r=new nm(this.chart,i);return i._cacheable&&(this._cachedAnimations=Object.freeze(r)),r}},{key:"getContext",value:function(){return this.$context||(this.$context=(e=this.chart.getContext(),t=this,n=this._tooltipItems,tg(e,{tooltip:t,tooltipItems:n,type:"tooltip"})));var e,t,n}},{key:"getTitle",value:function(e,t){var n=t.callbacks,i=b_(n,"beforeTitle",this,e),r=b_(n,"title",this,e),a=b_(n,"afterTitle",this,e),s=[];return s=u_(s,c_(i)),s=u_(s,c_(r)),s=u_(s,c_(a))}},{key:"getBeforeBody",value:function(e,t){return v_(b_(t.callbacks,"beforeBody",this,e))}},{key:"getBody",value:function(e,t){var n=this,i=t.callbacks,r=[];return pf(e,(function(e){var t={before:[],lines:[],after:[]},a=y_(i,e);u_(t.before,c_(b_(a,"beforeLabel",n,e))),u_(t.lines,b_(a,"label",n,e)),u_(t.after,c_(b_(a,"afterLabel",n,e))),r.push(t)})),r}},{key:"getAfterBody",value:function(e,t){return v_(b_(t.callbacks,"afterBody",this,e))}},{key:"getFooter",value:function(e,t){var n=t.callbacks,i=b_(n,"beforeFooter",this,e),r=b_(n,"footer",this,e),a=b_(n,"afterFooter",this,e),s=[];return s=u_(s,c_(i)),s=u_(s,c_(r)),s=u_(s,c_(a))}},{key:"_createItems",value:function(e){var t,n,i=this,r=this._active,a=this.chart.data,s=[],o=[],l=[],u=[];for(t=0,n=r.length;t<n;++t)u.push(d_(this.chart,r[t]));return e.filter&&(u=u.filter((function(t,n,i){return e.filter(t,n,i,a)}))),e.itemSort&&(u=u.sort((function(t,n){return e.itemSort(t,n,a)}))),pf(u,(function(t){var n=y_(e.callbacks,t);s.push(b_(n,"labelColor",i,t)),o.push(b_(n,"labelPointStyle",i,t)),l.push(b_(n,"labelTextColor",i,t))})),this.labelColors=s,this.labelPointStyles=o,this.labelTextColors=l,this.dataPoints=u,u}},{key:"update",value:function(e,t){var n,i=this.options.setContext(this.getContext()),r=this._active,a=[];if(r.length){var s=l_[i.position].call(this,r,this._eventPosition);a=this._createItems(i),this.title=this.getTitle(a,i),this.beforeBody=this.getBeforeBody(a,i),this.body=this.getBody(a,i),this.afterBody=this.getAfterBody(a,i),this.footer=this.getFooter(a,i);var o=this._size=h_(this,i),l=Object.assign({},s,o),u=p_(this.chart,i,l),c=g_(i,l,u,this.chart);this.xAlign=u.xAlign,this.yAlign=u.yAlign,n={opacity:1,x:c.x,y:c.y,width:o.width,height:o.height,caretX:s.x,caretY:s.y}}else 0!==this.opacity&&(n={opacity:0});this._tooltipItems=a,this.$context=void 0,n&&this._resolveAnimations().update(this,n),e&&i.external&&i.external.call(this,{chart:this.chart,tooltip:this,replay:t})}},{key:"drawCaret",value:function(e,t,n,i){var r=this.getCaretPosition(e,n,i);t.lineTo(r.x1,r.y1),t.lineTo(r.x2,r.y2),t.lineTo(r.x3,r.y3)}},{key:"getCaretPosition",value:function(e,t,n){var i,r,a,s,o,l,u=this.xAlign,c=this.yAlign,d=n.caretSize,h=Qp(n.cornerRadius),f=h.topLeft,p=h.topRight,g=h.bottomLeft,m=h.bottomRight,v=e.x,y=e.y,_=t.width,b=t.height;return"center"===c?(o=y+b/2,"left"===u?(r=(i=v)-d,s=o+d,l=o-d):(r=(i=v+_)+d,s=o-d,l=o+d),a=i):(r="left"===u?v+Math.max(f,g)+d:"right"===u?v+_-Math.max(p,m)-d:this.caretX,"top"===c?(o=(s=y)-d,i=r-d,a=r+d):(o=(s=y+b)+d,i=r+d,a=r-d),l=s),{x1:i,x2:r,x3:a,y1:s,y2:o,y3:l}}},{key:"drawTitle",value:function(e,t,n){var i,r,a,s=this.title,o=s.length;if(o){var l=zg(n.rtl,this.x,this.width);for(e.x=m_(this,n.titleAlign,n),t.textAlign=l.textAlign(n.titleAlign),t.textBaseline="middle",i=Zp(n.titleFont),r=n.titleSpacing,t.fillStyle=n.titleColor,t.font=i.string,a=0;a<o;++a)t.fillText(s[a],l.x(e.x),e.y+i.lineHeight/2),e.y+=i.lineHeight+r,a+1===o&&(e.y+=n.titleMarginBottom-r)}}},{key:"_drawColorBox",value:function(e,t,n,i,r){var a=this.labelColors[n],s=this.labelPointStyles[n],o=r.boxHeight,l=r.boxWidth,u=r.boxPadding,c=Zp(r.bodyFont),d=m_(this,"left",r),h=i.x(d),f=o<c.lineHeight?(c.lineHeight-o)/2:0,p=t.y+f;if(r.usePointStyle){var g={radius:Math.min(l,o)/2,pointStyle:s.pointStyle,rotation:s.rotation,borderWidth:1},m=i.leftForLtr(h,l)+l/2,v=p+o/2;e.strokeStyle=r.multiKeyBackground,e.fillStyle=r.multiKeyBackground,Dp(e,g,m,v),e.strokeStyle=a.borderColor,e.fillStyle=a.backgroundColor,Dp(e,g,m,v)}else{e.lineWidth=lf(a.borderWidth)?Math.max.apply(Math,Mc(Object.values(a.borderWidth))):a.borderWidth||1,e.strokeStyle=a.borderColor,e.setLineDash(a.borderDash||[]),e.lineDashOffset=a.borderDashOffset||0;var y=i.leftForLtr(h,l-u),_=i.leftForLtr(i.xPlus(h,1),l-u-2),b=Qp(a.borderRadius);Object.values(b).some((function(e){return 0!==e}))?(e.beginPath(),e.fillStyle=r.multiKeyBackground,Wp(e,{x:y,y:p,w:l,h:o,radius:b}),e.fill(),e.stroke(),e.fillStyle=a.backgroundColor,e.beginPath(),Wp(e,{x:_,y:p+1,w:l-2,h:o-2,radius:b}),e.fill()):(e.fillStyle=r.multiKeyBackground,e.fillRect(y,p,l,o),e.strokeRect(y,p,l,o),e.fillStyle=a.backgroundColor,e.fillRect(_,p+1,l-2,o-2))}e.fillStyle=this.labelTextColors[n]}},{key:"drawBody",value:function(e,t,n){var i,r,a,s,o,l,u,c=this.body,d=n.bodySpacing,h=n.bodyAlign,f=n.displayColors,p=n.boxHeight,g=n.boxWidth,m=n.boxPadding,v=Zp(n.bodyFont),y=v.lineHeight,_=0,b=zg(n.rtl,this.x,this.width),T=function(n){t.fillText(n,b.x(e.x+_),e.y+y/2),e.y+=y+d},k=b.textAlign(h);for(t.textAlign=h,t.textBaseline="middle",t.font=v.string,e.x=m_(this,k,n),t.fillStyle=n.bodyColor,pf(this.beforeBody,T),_=f&&"right"!==k?"center"===h?g/2+m:g+2+m:0,s=0,l=c.length;s<l;++s){for(i=c[s],r=this.labelTextColors[s],t.fillStyle=r,pf(i.before,T),a=i.lines,f&&a.length&&(this._drawColorBox(t,e,s,b,n),y=Math.max(v.lineHeight,p)),o=0,u=a.length;o<u;++o)T(a[o]),y=v.lineHeight;pf(i.after,T)}_=0,y=v.lineHeight,pf(this.afterBody,T),e.y-=d}},{key:"drawFooter",value:function(e,t,n){var i,r,a=this.footer,s=a.length;if(s){var o=zg(n.rtl,this.x,this.width);for(e.x=m_(this,n.footerAlign,n),e.y+=n.footerMarginTop,t.textAlign=o.textAlign(n.footerAlign),t.textBaseline="middle",i=Zp(n.footerFont),t.fillStyle=n.footerColor,t.font=i.string,r=0;r<s;++r)t.fillText(a[r],o.x(e.x),e.y+i.lineHeight/2),e.y+=i.lineHeight+n.footerSpacing}}},{key:"drawBackground",value:function(e,t,n,i){var r=this.xAlign,a=this.yAlign,s=e.x,o=e.y,l=n.width,u=n.height,c=Qp(i.cornerRadius),d=c.topLeft,h=c.topRight,f=c.bottomLeft,p=c.bottomRight;t.fillStyle=i.backgroundColor,t.strokeStyle=i.borderColor,t.lineWidth=i.borderWidth,t.beginPath(),t.moveTo(s+d,o),"top"===a&&this.drawCaret(e,t,n,i),t.lineTo(s+l-h,o),t.quadraticCurveTo(s+l,o,s+l,o+h),"center"===a&&"right"===r&&this.drawCaret(e,t,n,i),t.lineTo(s+l,o+u-p),t.quadraticCurveTo(s+l,o+u,s+l-p,o+u),"bottom"===a&&this.drawCaret(e,t,n,i),t.lineTo(s+f,o+u),t.quadraticCurveTo(s,o+u,s,o+u-f),"center"===a&&"left"===r&&this.drawCaret(e,t,n,i),t.lineTo(s,o+d),t.quadraticCurveTo(s,o,s+d,o),t.closePath(),t.fill(),i.borderWidth>0&&t.stroke()}},{key:"_updateAnimationTarget",value:function(e){var t=this.chart,n=this.$animations,i=n&&n.x,r=n&&n.y;if(i||r){var a=l_[e.position].call(this,this._active,this._eventPosition);if(!a)return;var s=this._size=h_(this,e),o=Object.assign({},a,this._size),l=p_(t,e,o),u=g_(e,o,l,t);i._to===u.x&&r._to===u.y||(this.xAlign=l.xAlign,this.yAlign=l.yAlign,this.width=s.width,this.height=s.height,this.caretX=a.x,this.caretY=a.y,this._resolveAnimations().update(this,u))}}},{key:"_willRender",value:function(){return!!this.opacity}},{key:"draw",value:function(e){var t=this.options.setContext(this.getContext()),n=this.opacity;if(n){this._updateAnimationTarget(t);var i={width:this.width,height:this.height},r={x:this.x,y:this.y};n=Math.abs(n)<.001?0:n;var a=Jp(t.padding),s=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;t.enabled&&s&&(e.save(),e.globalAlpha=n,this.drawBackground(r,e,i,t),Vg(e,t.textDirection),r.y+=a.top,this.drawTitle(r,e,t),this.drawBody(r,e,t),this.drawFooter(r,e,t),Hg(e,t.textDirection),e.restore())}}},{key:"getActiveElements",value:function(){return this._active||[]}},{key:"setActiveElements",value:function(e,t){var n=this,i=this._active,r=e.map((function(e){var t=e.datasetIndex,i=e.index,r=n.chart.getDatasetMeta(t);if(!r)throw new Error("Cannot find a dataset at index "+t);return{datasetIndex:t,element:r.data[i],index:i}})),a=!gf(i,r),s=this._positionChanged(r,t);(a||s)&&(this._active=r,this._eventPosition=t,this._ignoreReplayEvents=!0,this.update(!0))}},{key:"handleEvent",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(t&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;var i=this.options,r=this._active||[],a=this._getActiveElements(e,r,t,n),s=this._positionChanged(a,e),o=t||!gf(a,r)||s;return o&&(this._active=a,(i.enabled||i.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,t))),o}},{key:"_getActiveElements",value:function(e,t,n,i){var r=this.options;if("mouseout"===e.type)return[];if(!i)return t;var a=this.chart.getElementsAtEventForMode(e,r.mode,r,n);return r.reverse&&a.reverse(),a}},{key:"_positionChanged",value:function(e,t){var n=this.caretX,i=this.caretY,r=this.options,a=l_[r.position].call(this,e,t);return!1!==a&&(n!==a.x||i!==a.y)}}]),n}(vv);_h(T_,"positioners",l_);var k_={id:"tooltip",_element:T_,positioners:l_,afterInit:function(e,t,n){n&&(e.tooltip=new T_({chart:e,options:n}))},beforeUpdate:function(e,t,n){e.tooltip&&e.tooltip.initialize(n)},reset:function(e,t,n){e.tooltip&&e.tooltip.initialize(n)},afterDraw:function(e){var t=e.tooltip;if(t&&t._willRender()){var n={tooltip:t};if(!1===e.notifyPlugins("beforeTooltipDraw",Th(Th({},n),{},{cancelable:!0})))return;t.draw(e.ctx),e.notifyPlugins("afterTooltipDraw",n)}},afterEvent:function(e,t){if(e.tooltip){var n=t.replay;e.tooltip.handleEvent(t.event,n,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:function(e,t){return t.bodyFont.size},boxWidth:function(e,t){return t.bodyFont.size},multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:__},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:function(e){return"filter"!==e&&"itemSort"!==e&&"external"!==e},_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},x_=Object.freeze({__proto__:null,Colors:My,Decimation:Ny,Filler:Zy,Legend:i_,SubTitle:o_,Title:a_,Tooltip:k_}),S_=function(e,t,n,i){return"string"===typeof t?(n=e.push(t)-1,i.unshift({index:n,label:t})):isNaN(t)&&(n=null),n};function w_(e){var t=this.getLabels();return e>=0&&e<t.length?t[e]:e}var E_=function(e){Bc(n,e);var t=Wc(n);function n(e){var i;return Dc(this,n),(i=t.call(this,e))._startValue=void 0,i._valueRange=0,i._addedLabels=[],i}return jc(n,[{key:"init",value:function(e){var t=this._addedLabels;if(t.length){var i,r=this.getLabels(),a=Xc(t);try{for(a.s();!(i=a.n()).done;){var s=i.value,o=s.index,l=s.label;r[o]===l&&r.splice(o,1)}}catch(u){a.e(u)}finally{a.f()}this._addedLabels=[]}kh(zc(n.prototype),"init",this).call(this,e)}},{key:"parse",value:function(e,t){if(sf(e))return null;var n=this.getLabels();return t=isFinite(t)&&n[t]===e?t:function(e,t,n,i){var r=e.indexOf(t);return-1===r?S_(e,t,n,i):r!==e.lastIndexOf(t)?n:r}(n,e,df(t,e),this._addedLabels),function(e,t){return null===e?null:Qf(Math.round(e),0,t)}(t,n.length-1)}},{key:"determineDataLimits",value:function(){var e=this.getUserBounds(),t=e.minDefined,n=e.maxDefined,i=this.getMinMax(!0),r=i.min,a=i.max;"ticks"===this.options.bounds&&(t||(r=0),n||(a=this.getLabels().length-1)),this.min=r,this.max=a}},{key:"buildTicks",value:function(){var e=this.min,t=this.max,n=this.options.offset,i=[],r=this.getLabels();r=0===e&&t===r.length-1?r:r.slice(e,t+1),this._valueRange=Math.max(r.length-(n?0:1),1),this._startValue=this.min-(n?.5:0);for(var a=e;a<=t;a++)i.push({value:a});return i}},{key:"getLabelForValue",value:function(e){return w_.call(this,e)}},{key:"configure",value:function(){kh(zc(n.prototype),"configure",this).call(this),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}},{key:"getPixelForValue",value:function(e){return"number"!==typeof e&&(e=this.parse(e)),null===e?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}},{key:"getPixelForTick",value:function(e){var t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}},{key:"getValueForPixel",value:function(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}},{key:"getBasePixel",value:function(){return this.bottom}}]),n}(Pv);function C_(e,t){var n,i,r,a,s=[],o=e.bounds,l=e.step,u=e.min,c=e.max,d=e.precision,h=e.count,f=e.maxTicks,p=e.maxDigits,g=e.includeBounds,m=l||1,v=f-1,y=t.min,_=t.max,b=!sf(u),T=!sf(c),k=!sf(h),x=(_-y)/(p+1),S=Bf((_-y)/v/m)*m;if(S<1e-14&&!b&&!T)return[{value:y},{value:_}];(a=Math.ceil(_/S)-Math.floor(y/S))>v&&(S=Bf(a*S/v/m)*m),sf(d)||(n=Math.pow(10,d),S=Math.ceil(S*n)/n),"ticks"===o?(i=Math.floor(y/S)*S,r=Math.ceil(_/S)*S):(i=y,r=_),b&&T&&l&&function(e,t){var n=Math.round(e);return n-t<=e&&n+t>=e}((c-u)/l,S/1e3)?(S=(c-u)/(a=Math.round(Math.min((c-u)/S,f))),i=u,r=c):k?S=((r=T?c:r)-(i=b?u:i))/(a=h-1):a=Ff(a=(r-i)/S,Math.round(a),S/1e3)?Math.round(a):Math.ceil(a);var w=Math.max(qf(S),qf(i));n=Math.pow(10,sf(d)?w:d),i=Math.round(i*n)/n,r=Math.round(r*n)/n;var E=0;for(b&&(g&&i!==u?(s.push({value:u}),i<u&&E++,Ff(Math.round((i+E*S)*n)/n,u,P_(u,x,e))&&E++):i<u&&E++);E<a;++E)s.push({value:Math.round((i+E*S)*n)/n});return T&&g&&r!==c?s.length&&Ff(s[s.length-1].value,c,P_(c,x,e))?s[s.length-1].value=c:s.push({value:c}):T&&r!==c||s.push({value:r}),s}function P_(e,t,n){var i=n.horizontal,r=Hf(n.minRotation),a=(i?Math.sin(r):Math.cos(r))||.001,s=.75*t*(""+e).length;return Math.min(t/a,s)}_h(E_,"id","category"),_h(E_,"defaults",{ticks:{callback:w_}});var I_=function(e){Bc(n,e);var t=Wc(n);function n(e){var i;return Dc(this,n),(i=t.call(this,e)).start=void 0,i.end=void 0,i._startValue=void 0,i._endValue=void 0,i._valueRange=0,i}return jc(n,[{key:"parse",value:function(e,t){return sf(e)||("number"===typeof e||e instanceof Number)&&!isFinite(+e)?null:+e}},{key:"handleTickRangeOptions",value:function(){var e=this.options.beginAtZero,t=this.getUserBounds(),n=t.minDefined,i=t.maxDefined,r=this.min,a=this.max,s=function(e){return r=n?r:e},o=function(e){return a=i?a:e};if(e){var l=jf(r),u=jf(a);l<0&&u<0?o(0):l>0&&u>0&&s(0)}if(r===a){var c=0===a?1:Math.abs(.05*a);o(a+c),e||s(r-c)}this.min=r,this.max=a}},{key:"getTickLimit",value:function(){var e,t=this.options.ticks,n=t.maxTicksLimit,i=t.stepSize;return i?(e=Math.ceil(this.max/i)-Math.floor(this.min/i)+1)>1e3&&(console.warn("scales.".concat(this.id,".ticks.stepSize: ").concat(i," would result generating up to ").concat(e," ticks. Limiting to 1000.")),e=1e3):(e=this.computeTickLimit(),n=n||11),n&&(e=Math.min(n,e)),e}},{key:"computeTickLimit",value:function(){return Number.POSITIVE_INFINITY}},{key:"buildTicks",value:function(){var e=this.options,t=e.ticks,n=this.getTickLimit(),i=C_({maxTicks:n=Math.max(2,n),bounds:e.bounds,min:e.min,max:e.max,precision:t.precision,step:t.stepSize,count:t.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:t.minRotation||0,includeBounds:!1!==t.includeBounds},this._range||this);return"ticks"===e.bounds&&Vf(i,this,"value"),e.reverse?(i.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),i}},{key:"configure",value:function(){var e=this.ticks,t=this.min,i=this.max;if(kh(zc(n.prototype),"configure",this).call(this),this.options.offset&&e.length){var r=(i-t)/Math.max(e.length-1,1)/2;t-=r,i+=r}this._startValue=t,this._endValue=i,this._valueRange=i-t}},{key:"getLabelForValue",value:function(e){return Tp(e,this.chart.options.locale,this.options.ticks.format)}}]),n}(Pv),A_=function(e){Bc(n,e);var t=Wc(n);function n(){return Dc(this,n),t.apply(this,arguments)}return jc(n,[{key:"determineDataLimits",value:function(){var e=this.getMinMax(!0),t=e.min,n=e.max;this.min=uf(t)?t:0,this.max=uf(n)?n:1,this.handleTickRangeOptions()}},{key:"computeTickLimit",value:function(){var e=this.isHorizontal(),t=e?this.width:this.height,n=Hf(this.options.ticks.minRotation),i=(e?Math.sin(n):Math.cos(n))||.001,r=this._resolveTickFontOptions(0);return Math.ceil(t/Math.min(40,r.lineHeight/i))}},{key:"getPixelForValue",value:function(e){return null===e?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}},{key:"getValueForPixel",value:function(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}]),n}(I_);_h(A_,"id","linear"),_h(A_,"defaults",{ticks:{callback:xp.formatters.numeric}});var O_=function(e){return Math.floor(Uf(e))},L_=function(e,t){return Math.pow(10,O_(e)+t)};function M_(e){return 1===e/Math.pow(10,O_(e))}function D_(e,t,n){var i=Math.pow(10,n),r=Math.floor(e/i);return Math.ceil(t/i)-r}function R_(e,t){var n=t.min,i=t.max;n=cf(e.min,n);for(var r=[],a=O_(n),s=function(e,t){for(var n=O_(t-e);D_(e,t,n)>10;)n++;for(;D_(e,t,n)<10;)n--;return Math.min(n,O_(e))}(n,i),o=s<0?Math.pow(10,Math.abs(s)):1,l=Math.pow(10,s),u=a>s?Math.pow(10,a):0,c=Math.round((n-u)*o)/o,d=Math.floor((n-u)/l/10)*l*10,h=Math.floor((c-d)/Math.pow(10,s)),f=cf(e.min,Math.round((u+d+h*Math.pow(10,s))*o)/o);f<i;)r.push({value:f,major:M_(f),significand:h}),h>=10?h=h<15?15:20:h++,h>=20&&(h=2,o=++s>=0?1:o),f=Math.round((u+d+h*Math.pow(10,s))*o)/o;var p=cf(e.max,f);return r.push({value:p,major:M_(p),significand:h}),r}var N_=function(e){Bc(n,e);var t=Wc(n);function n(e){var i;return Dc(this,n),(i=t.call(this,e)).start=void 0,i.end=void 0,i._startValue=void 0,i._valueRange=0,i}return jc(n,[{key:"parse",value:function(e,t){var n=I_.prototype.parse.apply(this,[e,t]);if(0!==n)return uf(n)&&n>0?n:null;this._zero=!0}},{key:"determineDataLimits",value:function(){var e=this.getMinMax(!0),t=e.min,n=e.max;this.min=uf(t)?Math.max(0,t):null,this.max=uf(n)?Math.max(0,n):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!uf(this._userMin)&&(this.min=t===L_(this.min,0)?L_(this.min,-1):L_(this.min,0)),this.handleTickRangeOptions()}},{key:"handleTickRangeOptions",value:function(){var e=this.getUserBounds(),t=e.minDefined,n=e.maxDefined,i=this.min,r=this.max,a=function(e){return i=t?i:e},s=function(e){return r=n?r:e};i===r&&(i<=0?(a(1),s(10)):(a(L_(i,-1)),s(L_(r,1)))),i<=0&&a(L_(r,-1)),r<=0&&s(L_(i,1)),this.min=i,this.max=r}},{key:"buildTicks",value:function(){var e=this.options,t=R_({min:this._userMin,max:this._userMax},this);return"ticks"===e.bounds&&Vf(t,this,"value"),e.reverse?(t.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),t}},{key:"getLabelForValue",value:function(e){return void 0===e?"0":Tp(e,this.chart.options.locale,this.options.ticks.format)}},{key:"configure",value:function(){var e=this.min;kh(zc(n.prototype),"configure",this).call(this),this._startValue=Uf(e),this._valueRange=Uf(this.max)-Uf(e)}},{key:"getPixelForValue",value:function(e){return void 0!==e&&0!==e||(e=this.min),null===e||isNaN(e)?NaN:this.getPixelForDecimal(e===this.min?0:(Uf(e)-this._startValue)/this._valueRange)}},{key:"getValueForPixel",value:function(e){var t=this.getDecimalForPixel(e);return Math.pow(10,this._startValue+t*this._valueRange)}}]),n}(Pv);function U_(e){var t=e.ticks;if(t.display&&e.display){var n=Jp(t.backdropPadding);return df(t.font&&t.font.size,Ip.font.size)+n.height}return 0}function j_(e,t,n,i,r){return e===i||e===r?{start:t-n/2,end:t+n/2}:e<i||e>r?{start:t-n,end:t}:{start:t,end:t+n}}function F_(e){for(var t,n,i,r={l:e.left+e._padding.left,r:e.right-e._padding.right,t:e.top+e._padding.top,b:e.bottom-e._padding.bottom},a=Object.assign({},r),s=[],o=[],l=e._pointLabels.length,u=e.options.pointLabels,c=u.centerPointLabels?If/l:0,d=0;d<l;d++){var h=u.setContext(e.getPointLabelContext(d));o[d]=h.padding;var f=e.getPointPosition(d,e.drawingArea+o[d],c),p=Zp(h.font),g=(t=e.ctx,n=p,i=of(i=e._pointLabels[d])?i:[i],{w:Op(t,n.string,i),h:i.length*n.lineHeight});s[d]=g;var m=$f(e.getIndexAngle(d)+c),v=Math.round(Wf(m));B_(a,r,m,j_(v,f.x,g.w,0,180),j_(v,f.y,g.h,90,270))}e.setCenterPoint(r.l-a.l,a.r-r.r,r.t-a.t,a.b-r.b),e._pointLabelItems=function(e,t,n){for(var i=[],r=e._pointLabels.length,a=e.options,s=U_(a)/2,o=e.drawingArea,l=a.pointLabels.centerPointLabels?If/r:0,u=0;u<r;u++){var c=e.getPointPosition(u,o+s+n[u],l),d=Math.round(Wf($f(c.angle+Df))),h=t[u],f=H_(c.y,h.h,d),p=z_(d),g=V_(c.x,h.w,p);i.push({x:c.x,y:f,textAlign:p,left:g,top:f,right:g+h.w,bottom:f+h.h})}return i}(e,s,o)}function B_(e,t,n,i,r){var a=Math.abs(Math.sin(n)),s=Math.abs(Math.cos(n)),o=0,l=0;i.start<t.l?(o=(t.l-i.start)/a,e.l=Math.min(e.l,t.l-o)):i.end>t.r&&(o=(i.end-t.r)/a,e.r=Math.max(e.r,t.r+o)),r.start<t.t?(l=(t.t-r.start)/s,e.t=Math.min(e.t,t.t-l)):r.end>t.b&&(l=(r.end-t.b)/s,e.b=Math.max(e.b,t.b+l))}function z_(e){return 0===e||180===e?"center":e<180?"left":"right"}function V_(e,t,n){return"right"===n?e-=t:"center"===n&&(e-=t/2),e}function H_(e,t,n){return 90===n||270===n?e-=t/2:(n>270||n<90)&&(e-=t),e}function W_(e,t,n,i){var r=e.ctx;if(n)r.arc(e.xCenter,e.yCenter,t,0,Af);else{var a=e.getPointPosition(0,t);r.moveTo(a.x,a.y);for(var s=1;s<i;s++)a=e.getPointPosition(s,t),r.lineTo(a.x,a.y)}}_h(N_,"id","logarithmic"),_h(N_,"defaults",{ticks:{callback:xp.formatters.logarithmic,major:{enabled:!0}}});var q_=function(e){Bc(n,e);var t=Wc(n);function n(e){var i;return Dc(this,n),(i=t.call(this,e)).xCenter=void 0,i.yCenter=void 0,i.drawingArea=void 0,i._pointLabels=[],i._pointLabelItems=[],i}return jc(n,[{key:"setDimensions",value:function(){var e=this._padding=Jp(U_(this.options)/2),t=this.width=this.maxWidth-e.width,n=this.height=this.maxHeight-e.height;this.xCenter=Math.floor(this.left+t/2+e.left),this.yCenter=Math.floor(this.top+n/2+e.top),this.drawingArea=Math.floor(Math.min(t,n)/2)}},{key:"determineDataLimits",value:function(){var e=this.getMinMax(!1),t=e.min,n=e.max;this.min=uf(t)&&!isNaN(t)?t:0,this.max=uf(n)&&!isNaN(n)?n:0,this.handleTickRangeOptions()}},{key:"computeTickLimit",value:function(){return Math.ceil(this.drawingArea/U_(this.options))}},{key:"generateTickLabels",value:function(e){var t=this;I_.prototype.generateTickLabels.call(this,e),this._pointLabels=this.getLabels().map((function(e,n){var i=ff(t.options.pointLabels.callback,[e,n],t);return i||0===i?i:""})).filter((function(e,n){return t.chart.getDataVisibility(n)}))}},{key:"fit",value:function(){var e=this.options;e.display&&e.pointLabels.display?F_(this):this.setCenterPoint(0,0,0,0)}},{key:"setCenterPoint",value:function(e,t,n,i){this.xCenter+=Math.floor((e-t)/2),this.yCenter+=Math.floor((n-i)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(e,t,n,i))}},{key:"getIndexAngle",value:function(e){return $f(e*(Af/(this._pointLabels.length||1))+Hf(this.options.startAngle||0))}},{key:"getDistanceFromCenterForValue",value:function(e){if(sf(e))return NaN;var t=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-e)*t:(e-this.min)*t}},{key:"getValueForDistanceFromCenter",value:function(e){if(sf(e))return NaN;var t=e/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-t:this.min+t}},{key:"getPointLabelContext",value:function(e){var t=this._pointLabels||[];if(e>=0&&e<t.length){var n=t[e];return function(e,t,n){return tg(e,{label:n,index:t,type:"pointLabel"})}(this.getContext(),e,n)}}},{key:"getPointPosition",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=this.getIndexAngle(e)-Df+n;return{x:Math.cos(i)*t+this.xCenter,y:Math.sin(i)*t+this.yCenter,angle:i}}},{key:"getPointPositionForValue",value:function(e,t){return this.getPointPosition(e,this.getDistanceFromCenterForValue(t))}},{key:"getBasePosition",value:function(e){return this.getPointPositionForValue(e||0,this.getBaseValue())}},{key:"getPointLabelPosition",value:function(e){var t=this._pointLabelItems[e];return{left:t.left,top:t.top,right:t.right,bottom:t.bottom}}},{key:"drawBackground",value:function(){var e=this.options,t=e.backgroundColor,n=e.grid.circular;if(t){var i=this.ctx;i.save(),i.beginPath(),W_(this,this.getDistanceFromCenterForValue(this._endValue),n,this._pointLabels.length),i.closePath(),i.fillStyle=t,i.fill(),i.restore()}}},{key:"drawGrid",value:function(){var e,t,n,i=this,r=this.ctx,a=this.options,s=a.angleLines,o=a.grid,l=a.border,u=this._pointLabels.length;if(a.pointLabels.display&&function(e,t){for(var n=e.ctx,i=e.options.pointLabels,r=t-1;r>=0;r--){var a=i.setContext(e.getPointLabelContext(r)),s=Zp(a.font),o=e._pointLabelItems[r],l=o.x,u=o.y,c=o.textAlign,d=o.left,h=o.top,f=o.right,p=o.bottom,g=a.backdropColor;if(!sf(g)){var m=Qp(a.borderRadius),v=Jp(a.backdropPadding);n.fillStyle=g;var y=d-v.left,_=h-v.top,b=f-d+v.width,T=p-h+v.height;Object.values(m).some((function(e){return 0!==e}))?(n.beginPath(),Wp(n,{x:y,y:_,w:b,h:T,radius:m}),n.fill()):n.fillRect(y,_,b,T)}zp(n,e._pointLabels[r],l,u+s.lineHeight/2,s,{color:a.color,textAlign:c,textBaseline:"middle"})}}(this,u),o.display&&this.ticks.forEach((function(e,n){if(0!==n){t=i.getDistanceFromCenterForValue(e.value);var r=i.getContext(n),a=o.setContext(r),s=l.setContext(r);!function(e,t,n,i,r){var a=e.ctx,s=t.circular,o=t.color,l=t.lineWidth;!s&&!i||!o||!l||n<0||(a.save(),a.strokeStyle=o,a.lineWidth=l,a.setLineDash(r.dash),a.lineDashOffset=r.dashOffset,a.beginPath(),W_(e,n,s,i),a.closePath(),a.stroke(),a.restore())}(i,a,t,u,s)}})),s.display){for(r.save(),e=u-1;e>=0;e--){var c=s.setContext(this.getPointLabelContext(e)),d=c.color,h=c.lineWidth;h&&d&&(r.lineWidth=h,r.strokeStyle=d,r.setLineDash(c.borderDash),r.lineDashOffset=c.borderDashOffset,t=this.getDistanceFromCenterForValue(a.ticks.reverse?this.min:this.max),n=this.getPointPosition(e,t),r.beginPath(),r.moveTo(this.xCenter,this.yCenter),r.lineTo(n.x,n.y),r.stroke())}r.restore()}}},{key:"drawBorder",value:function(){}},{key:"drawLabels",value:function(){var e=this,t=this.ctx,n=this.options,i=n.ticks;if(i.display){var r,a,s=this.getIndexAngle(0);t.save(),t.translate(this.xCenter,this.yCenter),t.rotate(s),t.textAlign="center",t.textBaseline="middle",this.ticks.forEach((function(s,o){if(0!==o||n.reverse){var l=i.setContext(e.getContext(o)),u=Zp(l.font);if(r=e.getDistanceFromCenterForValue(e.ticks[o].value),l.showLabelBackdrop){t.font=u.string,a=t.measureText(s.label).width,t.fillStyle=l.backdropColor;var c=Jp(l.backdropPadding);t.fillRect(-a/2-c.left,-r-u.size/2-c.top,a+c.width,u.size+c.height)}zp(t,s.label,0,-r,u,{color:l.color})}})),t.restore()}}},{key:"drawTitle",value:function(){}}]),n}(I_);_h(q_,"id","radialLinear"),_h(q_,"defaults",{display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:xp.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback:function(e){return e},padding:5,centerPointLabels:!1}}),_h(q_,"defaultRoutes",{"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"}),_h(q_,"descriptors",{angleLines:{_fallback:"grid"}});var G_={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},X_=Object.keys(G_);function K_(e,t){return e-t}function $_(e,t){if(sf(t))return null;var n=e._adapter,i=e._parseOpts,r=i.parser,a=i.round,s=i.isoWeekday,o=t;return"function"===typeof r&&(o=r(o)),uf(o)||(o="string"===typeof r?n.parse(o,r):n.parse(o)),null===o?null:(a&&(o="week"!==a||!zf(s)&&!0!==s?n.startOf(o,a):n.startOf(o,"isoWeek",s)),+o)}function Y_(e,t,n,i){for(var r=X_.length,a=X_.indexOf(e);a<r-1;++a){var s=G_[X_[a]],o=s.steps?s.steps:Number.MAX_SAFE_INTEGER;if(s.common&&Math.ceil((n-t)/(o*s.size))<=i)return X_[a]}return X_[r-1]}function Q_(e,t,n){if(n){if(n.length){var i=Zf(n,t),r=i.lo,a=i.hi;e[n[r]>=t?n[r]:n[a]]=!0}}else e[t]=!0}function J_(e,t,n){var i,r,a=[],s={},o=t.length;for(i=0;i<o;++i)s[r=t[i]]=i,a.push({value:r,major:!1});return 0!==o&&n?function(e,t,n,i){var r,a,s=e._adapter,o=+s.startOf(t[0].value,i),l=t[t.length-1].value;for(r=o;r<=l;r=+s.add(r,1,i))(a=n[r])>=0&&(t[a].major=!0);return t}(e,a,s,n):a}var Z_=function(e){Bc(n,e);var t=Wc(n);function n(e){var i;return Dc(this,n),(i=t.call(this,e))._cache={data:[],labels:[],all:[]},i._unit="day",i._majorUnit=void 0,i._offsets={},i._normalized=!1,i._parseOpts=void 0,i}return jc(n,[{key:"init",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=e.time||(e.time={}),r=this._adapter=new Mm._date(e.adapters.date);r.init(t),bf(i.displayFormats,r.formats()),this._parseOpts={parser:i.parser,round:i.round,isoWeekday:i.isoWeekday},kh(zc(n.prototype),"init",this).call(this,e),this._normalized=t.normalized}},{key:"parse",value:function(e,t){return void 0===e?null:$_(this,e)}},{key:"beforeLayout",value:function(){kh(zc(n.prototype),"beforeLayout",this).call(this),this._cache={data:[],labels:[],all:[]}}},{key:"determineDataLimits",value:function(){var e=this.options,t=this._adapter,n=e.time.unit||"day",i=this.getUserBounds(),r=i.min,a=i.max,s=i.minDefined,o=i.maxDefined;function l(e){s||isNaN(e.min)||(r=Math.min(r,e.min)),o||isNaN(e.max)||(a=Math.max(a,e.max))}s&&o||(l(this._getLabelBounds()),"ticks"===e.bounds&&"labels"===e.ticks.source||l(this.getMinMax(!1))),r=uf(r)&&!isNaN(r)?r:+t.startOf(Date.now(),n),a=uf(a)&&!isNaN(a)?a:+t.endOf(Date.now(),n)+1,this.min=Math.min(r,a-1),this.max=Math.max(r+1,a)}},{key:"_getLabelBounds",value:function(){var e=this.getLabelTimestamps(),t=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY;return e.length&&(t=e[0],n=e[e.length-1]),{min:t,max:n}}},{key:"buildTicks",value:function(){var e=this.options,t=e.time,n=e.ticks,i="labels"===n.source?this.getLabelTimestamps():this._generate();"ticks"===e.bounds&&i.length&&(this.min=this._userMin||i[0],this.max=this._userMax||i[i.length-1]);var r=this.min,a=function(e,t,n){for(var i=0,r=e.length;i<r&&e[i]<t;)i++;for(;r>i&&e[r-1]>n;)r--;return i>0||r<e.length?e.slice(i,r):e}(i,r,this.max);return this._unit=t.unit||(n.autoSkip?Y_(t.minUnit,this.min,this.max,this._getLabelCapacity(r)):function(e,t,n,i,r){for(var a=X_.length-1;a>=X_.indexOf(n);a--){var s=X_[a];if(G_[s].common&&e._adapter.diff(r,i,s)>=t-1)return s}return X_[n?X_.indexOf(n):0]}(this,a.length,t.minUnit,this.min,this.max)),this._majorUnit=n.major.enabled&&"year"!==this._unit?function(e){for(var t=X_.indexOf(e)+1,n=X_.length;t<n;++t)if(G_[X_[t]].common)return X_[t]}(this._unit):void 0,this.initOffsets(i),e.reverse&&a.reverse(),J_(this,a,this._majorUnit)}},{key:"afterAutoSkip",value:function(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map((function(e){return+e.value})))}},{key:"initOffsets",value:function(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],i=0,r=0;this.options.offset&&n.length&&(e=this.getDecimalForValue(n[0]),i=1===n.length?1-e:(this.getDecimalForValue(n[1])-e)/2,t=this.getDecimalForValue(n[n.length-1]),r=1===n.length?t:(t-this.getDecimalForValue(n[n.length-2]))/2);var a=n.length<3?.5:.25;i=Qf(i,0,a),r=Qf(r,0,a),this._offsets={start:i,end:r,factor:1/(i+1+r)}}},{key:"_generate",value:function(){var e,t,n=this._adapter,i=this.min,r=this.max,a=this.options,s=a.time,o=s.unit||Y_(s.minUnit,i,r,this._getLabelCapacity(i)),l=df(a.ticks.stepSize,1),u="week"===o&&s.isoWeekday,c=zf(u)||!0===u,d={},h=i;if(c&&(h=+n.startOf(h,"isoWeek",u)),h=+n.startOf(h,c?"day":o),n.diff(r,i,o)>1e5*l)throw new Error(i+" and "+r+" are too far apart with stepSize of "+l+" "+o);var f="data"===a.ticks.source&&this.getDataTimestamps();for(e=h,t=0;e<r;e=+n.add(e,l,o),t++)Q_(d,e,f);return e!==r&&"ticks"!==a.bounds&&1!==t||Q_(d,e,f),Object.keys(d).sort((function(e,t){return e-t})).map((function(e){return+e}))}},{key:"getLabelForValue",value:function(e){var t=this._adapter,n=this.options.time;return n.tooltipFormat?t.format(e,n.tooltipFormat):t.format(e,n.displayFormats.datetime)}},{key:"format",value:function(e,t){var n=this.options.time.displayFormats,i=this._unit,r=t||n[i];return this._adapter.format(e,r)}},{key:"_tickFormatFunction",value:function(e,t,n,i){var r=this.options,a=r.ticks.callback;if(a)return ff(a,[e,t,n],this);var s=r.time.displayFormats,o=this._unit,l=this._majorUnit,u=o&&s[o],c=l&&s[l],d=n[t],h=l&&c&&d&&d.major;return this._adapter.format(e,i||(h?c:u))}},{key:"generateTickLabels",value:function(e){var t,n,i;for(t=0,n=e.length;t<n;++t)(i=e[t]).label=this._tickFormatFunction(i.value,t,e)}},{key:"getDecimalForValue",value:function(e){return null===e?NaN:(e-this.min)/(this.max-this.min)}},{key:"getPixelForValue",value:function(e){var t=this._offsets,n=this.getDecimalForValue(e);return this.getPixelForDecimal((t.start+n)*t.factor)}},{key:"getValueForPixel",value:function(e){var t=this._offsets,n=this.getDecimalForPixel(e)/t.factor-t.end;return this.min+n*(this.max-this.min)}},{key:"_getLabelSize",value:function(e){var t=this.options.ticks,n=this.ctx.measureText(e).width,i=Hf(this.isHorizontal()?t.maxRotation:t.minRotation),r=Math.cos(i),a=Math.sin(i),s=this._resolveTickFontOptions(0).size;return{w:n*r+s*a,h:n*a+s*r}}},{key:"_getLabelCapacity",value:function(e){var t=this.options.time,n=t.displayFormats,i=n[t.unit]||n.millisecond,r=this._tickFormatFunction(e,0,J_(this,[e],this._majorUnit),i),a=this._getLabelSize(r),s=Math.floor(this.isHorizontal()?this.width/a.w:this.height/a.h)-1;return s>0?s:1}},{key:"getDataTimestamps",value:function(){var e,t,n=this._cache.data||[];if(n.length)return n;var i=this.getMatchingVisibleMetas();if(this._normalized&&i.length)return this._cache.data=i[0].controller.getAllParsedValues(this);for(e=0,t=i.length;e<t;++e)n=n.concat(i[e].controller.getAllParsedValues(this));return this._cache.data=this.normalize(n)}},{key:"getLabelTimestamps",value:function(){var e,t,n=this._cache.labels||[];if(n.length)return n;var i=this.getLabels();for(e=0,t=i.length;e<t;++e)n.push($_(this,i[e]));return this._cache.labels=this._normalized?n:this.normalize(n)}},{key:"normalize",value:function(e){return rp(e.sort(K_))}}]),n}(Pv);function eb(e,t,n){var i,r,a,s,o=0,l=e.length-1;if(n){if(t>=e[o].pos&&t<=e[l].pos){var u=ep(e,"pos",t);o=u.lo,l=u.hi}var c=e[o];i=c.pos,a=c.time;var d=e[l];r=d.pos,s=d.time}else{if(t>=e[o].time&&t<=e[l].time){var h=ep(e,"time",t);o=h.lo,l=h.hi}var f=e[o];i=f.time,a=f.pos;var p=e[l];r=p.time,s=p.pos}var g=r-i;return g?a+(s-a)*(t-i)/g:a}_h(Z_,"id","time"),_h(Z_,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});var tb=function(e){Bc(n,e);var t=Wc(n);function n(e){var i;return Dc(this,n),(i=t.call(this,e))._table=[],i._minPos=void 0,i._tableRange=void 0,i}return jc(n,[{key:"initOffsets",value:function(){var e=this._getTimestampsForTable(),t=this._table=this.buildLookupTable(e);this._minPos=eb(t,this.min),this._tableRange=eb(t,this.max)-this._minPos,kh(zc(n.prototype),"initOffsets",this).call(this,e)}},{key:"buildLookupTable",value:function(e){var t,n,i,r,a,s=this.min,o=this.max,l=[],u=[];for(t=0,n=e.length;t<n;++t)(r=e[t])>=s&&r<=o&&l.push(r);if(l.length<2)return[{time:s,pos:0},{time:o,pos:1}];for(t=0,n=l.length;t<n;++t)a=l[t+1],i=l[t-1],r=l[t],Math.round((a+i)/2)!==r&&u.push({time:r,pos:t/(n-1)});return u}},{key:"_getTimestampsForTable",value:function(){var e=this._cache.all||[];if(e.length)return e;var t=this.getDataTimestamps(),n=this.getLabelTimestamps();return e=t.length&&n.length?this.normalize(t.concat(n)):t.length?t:n,e=this._cache.all=e}},{key:"getDecimalForValue",value:function(e){return(eb(this._table,e)-this._minPos)/this._tableRange}},{key:"getValueForPixel",value:function(e){var t=this._offsets,n=this.getDecimalForPixel(e)/t.factor-t.end;return eb(this._table,n*this._tableRange+this._minPos,!0)}}]),n}(Z_);_h(tb,"id","timeseries"),_h(tb,"defaults",Z_.defaults);var nb=[Om,Ey,x_,Object.freeze({__proto__:null,CategoryScale:E_,LinearScale:A_,LogarithmicScale:N_,RadialLinearScale:q_,TimeScale:Z_,TimeSeriesScale:tb})];ty.register.apply(ty,Mc(nb));var ib=function(t){var n,i=new Date,r=(i.getHours(),Oc((0,e.useState)(""),2)),a=r[0],s=r[1],o=Oc((0,e.useState)(""),2),l=o[0],u=o[1],c=(0,e.useRef)(null),d=[],h={horas:[],alturas:[]};ty.register.apply(ty,Mc(nb));(0,e.useRef)(null);var f=Oc((0,e.useState)(null),2),p=(f[0],f[1],{color:"white",backgroundColor:"DodgerBlue",padding:"5px",fontSize:"22px",fontFamily:"Sans-Serif"});return fetch(t.url).then((function(e){return e.json()})).then((function(e){console.log("fetch Mareas...");for(var t,r,a,o,l,f,p="desconocido",g=new Date,m=e.mareas.datos.marea,v=0,y=m.length-1;y>=0;y--)r=m[y].tipo,a=m[y].hora,o=m[y].altura,l=new Date(Date.UTC(g.getFullYear(),g.getMonth(),g.getDate(),a.substring(0,2),a.substring(3,5),0,0)),d=[{fecha_marea:l,marea:r,altura:o}].concat(d);if(console.log(d),t=d.length-1,n=d[t],i>n.fecha_marea)f=Math.abs((n.fecha_marea-i)/1e3/60/60),"pleamar"==n.marea?("bajando",p=6-f,n.marea="BAJA",v=180):("subiendo",p=f,n.marea="ALTA"),n.fecha_marea.setTime(n.fecha_marea.getTime()+216e5);else{for(var _=d.length-1;_>=0;_--)d[_].fecha_marea>i&&(n.fecha_marea=d[_].fecha_marea,n.marea=d[_].marea);f=Math.abs((n.fecha_marea-i)/1e3/60/60),"pleamar"==n.marea?("subiendo",p=6-f,n.marea="ALTA"):("bajando",p=f,n.marea="BAJA",v=180)}p=Number.parseFloat(p).toFixed(1),n.marea,String(n.fecha_marea.getHours()).padStart(2,"0"),String(n.fecha_marea.getMinutes()).padStart(2,"0"),c.current.style.transform="rotate("+v+"deg)",c.current.height=50,c.current.width=40,s(p),u(String(n.fecha_marea.getHours()).padStart(2,"0")+":"+String(n.fecha_marea.getMinutes()).padStart(2,"0"));for(var b=0,T=0,k=0;k<=d.length-1;k++){var x=Math.abs(d[k].altura-2.13);h.horas[b]=1,h.alturas[b]=d[k].altura,T="bajamar"==d[k].marea?270:90;for(var S=1;S<89;S++){var w=(T+S)*Math.PI/180;h.horas[b+S]=1+S,h.alturas[b+S]=2.13+x*Math.sin(w)}for(var E=90;E<179;E++){var C=(T+E)*Math.PI/180;h.horas[b+E]=1+E,h.alturas[b+E]=2.13+x*Math.sin(C)}b+=180}console.log(h)})),(0,Tc.jsx)(Tc.Fragment,{children:(0,Tc.jsx)("div",{className:"card m-2",style:{width:"100%"},children:(0,Tc.jsx)("table",{cellSpacing:"0",cellPadding:"0",children:(0,Tc.jsx)("tbody",{children:(0,Tc.jsxs)("tr",{children:[(0,Tc.jsx)("td",{style:{width:"20%"},children:(0,Tc.jsx)("img",{src:"imagenes/bola_marea_luna.png",style:{width:"3rem"}})}),(0,Tc.jsx)("td",{children:(0,Tc.jsx)("div",{style:p,children:a})}),(0,Tc.jsx)("td",{children:(0,Tc.jsx)("img",{src:"imagenes/flecha_marea.png",ref:c,style:{width:"2rem",height:"2rem"}})}),(0,Tc.jsx)("td",{children:(0,Tc.jsx)("div",{style:p,children:l})})]})})})})})},rb=function(t){var n=(new Date).getHours(),i=Oc((0,e.useState)(""),2),r=i[0],a=i[1],s=Oc((0,e.useState)(""),2),o=s[0],l=s[1],u=(0,e.useRef)(null),c=(0,e.useRef)(null),d=Oc((0,e.useState)(null),2),h=d[0],f=d[1],p=null,g=[],m=["blue","#007f7f","green","#7f7f00","red","#ff6000","orange","#7f607f"],v="white",y="#e6e6e6",_=Array(8).fill(y).concat(Array(14).fill(v).concat(Array(10).fill(y).concat(Array(14).fill(v).concat(Array(10).fill(y).concat(Array(14).fill(v)))))),b={color:"white",backgroundColor:"DodgerBlue",padding:"5px",fontSize:"22px",fontFamily:"Sans-Serif"};return fetch(t.url).then((function(e){return e.json()})).then((function(e){console.log("fetch Oleaje..."),console.log(e),(g=e.hourly).time=g.time.map((function(e){return e.slice(11,13)+"h"})),g.colores=g.wave_direction.map((function(e){return m[Math.round(((e%=360)<0?e+360:e)/45)%8]})),g.colores_columnas=_;var t,i=g.wave_direction[n],r=g.wave_height[n],s=g.wave_period[n];u.current.style.transform="rotate("+(t=i,(t+=180)>=360&&(t-=360),t+"deg)"),a(r),l(s),p=c.current,h&&f(null),f(new ty(p,{data:{labels:g.time.slice(n,73),datasets:[{label:"Oleaje",type:"line",data:g.wave_height.slice(n,73),pointStyle:"circle",pointRadius:3,yAxisID:"y",pointBackgroundColor:g.colores.slice(n,73),order:1},{type:"bar",data:g.wave_period.slice(n,73),yAxisID:"y1",backgroundColor:"grey",barPercentage:1,categoryPercentage:1,order:2},{type:"bar",data:Array(g.colores.slice(n,73).length).fill(6),backgroundColor:g.colores_columnas.slice(n,73),barPercentage:1,categoryPercentage:1,order:3}]},options:{events:["click"],plugins:{legend:{display:!1,labels:{color:"grey"}}},scales:{x:{ticks:{maxRotation:0,minRotation:0}},y:{title:{display:!1,text:"Altura de ola (m)"},grid:{display:!1},display:!0,position:"left",max:6,min:2,ticks:{stepSize:1},backgroundColor:"white"},y1:{title:{display:!1,text:"Per\xedodo (s)"},grid:{display:!1},display:!0,position:"right",max:15,min:7},y2:{display:!1,position:"right",max:6,min:0}}}}))})),(0,Tc.jsxs)("div",{children:[(0,Tc.jsx)("div",{className:"card m-2",style:{width:"100%"},children:(0,Tc.jsx)("table",{cellSpacing:"0",cellPadding:"0",children:(0,Tc.jsx)("tbody",{children:(0,Tc.jsxs)("tr",{children:[(0,Tc.jsx)("td",{style:{width:"20%"},children:(0,Tc.jsx)("img",{src:"imagenes/ola_redondo.png",style:{width:"3rem"}})}),(0,Tc.jsx)("td",{children:(0,Tc.jsx)("div",{style:b,children:r+" m"})}),(0,Tc.jsx)("td",{children:(0,Tc.jsx)("img",{src:"imagenes/flecha_ola.png",ref:u,style:{width:"3rem"}})}),(0,Tc.jsx)("td",{children:(0,Tc.jsx)("div",{style:b,children:o+" s"})})]})})})}),(0,Tc.jsx)("div",{className:"card m-2",style:{width:"100%"},children:(0,Tc.jsx)("canvas",{ref:c})})]})},ab=(0,e.createContext)(null),sb=function(t){var n=(new Date).getHours(),i=Oc((0,e.useState)(""),2),r=(i[0],i[1],Oc((0,e.useState)(""),2)),a=r[0],s=r[1],o=Oc((0,e.useState)(""),2),l=o[0],u=o[1],c=Oc((0,e.useState)(""),2),d=c[0],h=c[1],f=Oc((0,e.useState)(""),2),p=f[0],g=f[1],m=(0,e.useRef)(null),v=(0,e.useRef)(null);ty.register.apply(ty,Mc(nb));var y=null,_=(0,e.useRef)(null),b=Oc((0,e.useState)(null),2),T=b[0],k=b[1],x=[],S=["white","#bdbdbd","#78909c","#263238"],w="white",E="#e6e6e6",C=Array(8).fill(E).concat(Array(14).fill(w).concat(Array(10).fill(E).concat(Array(14).fill(w).concat(Array(10).fill(E).concat(Array(14).fill(w))))));return fetch(t.url).then((function(e){return e.json()})).then((function(e){console.log("fetch Tiempo..."),console.log(e),(x=e.hourly).time=x.time.map((function(e){return e.slice(11,13)+"h"})),x.colores_nubosidad=x.cloudcover.map((function(e){return S[Math.ceil(e/25)-1]})),x.colores_columnas=C;var t=x.temperature_2m[n],i=(x.precipitation_probability[n],x.cloudcover[n]),r=x.rain[n];i>30?m.current.src="imagenes/nubes.png":i>5&&(m.current.src="imagenes/solynubes.png"),r>.5?v.current.src="imagenes/lluvia_mucha.png":r>.2?v.current.src="imagenes/lluvia_media.png":r>0?v.current.src="imagenes/lluvia_poca.png":0==r&&(v.current.src="imagenes/seco.png"),s(t),u(r),h(i),g(p),y=_.current,T&&k(null),k(new ty(y,{data:{labels:x.time.slice(n,73),datasets:[{type:"line",yAxisID:"y_temperatura",borderWidth:1,pointBackgroundColor:"red",data:x.temperature_2m.slice(n,73)},{type:"bar",yAxisID:"y_nublado",borderWidth:0,data:Array(x.cloudcover.slice(n,73).length).fill(100),backgroundColor:x.colores_nubosidad.slice(n,73),barPercentage:1,categoryPercentage:1},{type:"bar",yAxisID:"y_lluvia",data:x.rain.slice(n,73)}]},options:{events:[],backgroundColor:"blue",plugins:{legend:{display:!1,labels:{color:"grey"}}},scales:{x:{ticks:{maxRotation:0,minRotation:0}},y_temperatura:{title:{display:!1,text:"grados"},grid:{display:!1},display:!0,position:"left",max:40,min:0},y_nublado:{title:{display:!1,text:"%"},grid:{display:!1},display:!1,position:"left",max:100,min:0},y_lluvia:{title:{display:!1,text:"mm"},grid:{display:!1},display:!0,position:"right",max:2,min:0},y_dianoche:{display:!1}}}}))})),(0,Tc.jsxs)(Tc.Fragment,{children:[(0,Tc.jsx)("div",{className:"card m-2",style:{width:"100%"},children:(0,Tc.jsx)("table",{cellSpacing:"0",cellPadding:"0",children:(0,Tc.jsxs)("tbody",{children:[(0,Tc.jsxs)("tr",{children:[(0,Tc.jsx)("td",{style:{width:"20%"},colSpan:"2",children:(0,Tc.jsx)("img",{src:"imagenes/tiempo_redondo.png",style:{width:"3rem"}})}),(0,Tc.jsx)("td",{children:(0,Tc.jsx)("div",{style:{color:"white",backgroundColor:"DodgerBlue",padding:"5px",fontSize:"22px",fontFamily:"Sans-Serif"},colSpan:"2",children:a+"\u1d52 "})}),(0,Tc.jsx)("td",{children:(0,Tc.jsx)("img",{src:"imagenes/sol.png",ref:m,style:{width:"3rem"}})}),(0,Tc.jsx)("td",{children:(0,Tc.jsx)("img",{src:"imagenes/seco.png",ref:v,style:{height:"3rem",width:"3rem"}})})]}),(0,Tc.jsxs)("tr",{children:[(0,Tc.jsx)("td",{}),(0,Tc.jsx)("td",{}),(0,Tc.jsx)("td",{}),(0,Tc.jsxs)("td",{children:[d,"%"]}),(0,Tc.jsx)("td",{children:l+"mm "})]})]})})}),(0,Tc.jsxs)("div",{className:"card m-2",style:{width:"100%"},children:["temperatura, lluvia y nubosidad",(0,Tc.jsx)("canvas",{ref:_})]})]})},ob=function(t){var n=(new Date).getHours(),i=Oc((0,e.useState)(""),2),r=i[0],a=i[1],s=Oc((0,e.useState)(""),2),o=s[0],l=s[1],u=(0,e.useRef)(null);ty.register.apply(ty,Mc(nb));var c=(0,e.useRef)(null),d=Oc((0,e.useState)(null),2),h=d[0],f=d[1],p=null,g=[],m=["blue","#007f7f","green","#7f7f00","red","#ff6000","orange","#7f607f"],v="white",y="#e6e6e6",_=Array(8).fill(y).concat(Array(14).fill(v).concat(Array(10).fill(y).concat(Array(14).fill(v).concat(Array(10).fill(y).concat(Array(14).fill(v))))));return fetch(t.url).then((function(e){return e.json()})).then((function(e){console.log("fetch Viento..."),console.log("Array de viento: "),console.log(e.hourly),(g=e.hourly).time=g.time.map((function(e){return e.slice(11,13)+"h"})),g.colores=g.winddirection_10m.map((function(e){return m[Math.round(((e%=360)<0?e+360:e)/45)%8]})),g.colores_columnas=_;var t,i,r=g.winddirection_10m[n],s=g.windspeed_10m[n];l((t=r,["N","NE","E","SE","S","SO","O","NO"][Math.round(((t%=360)<0?t+360:t)/45)%8])),a(s),u.current.style.transform="rotate("+(i=r,(i+=180)>=360&&(i-=360),i+"deg)"),p=c.current,h&&f(null),f(new ty(p,{type:"line",data:{labels:g.time.slice(n,73),datasets:[{data:g.windspeed_10m.slice(n,73),pointStyle:"circle",pointRadius:4,pointHoverRadius:5,yAxisID:"y",pointBackgroundColor:g.colores.slice(n,73)},{type:"bar",data:Array(g.colores.slice(n,73).length).fill(1),yAxisID:"y1",backgroundColor:g.colores_columnas.slice(n,73),barPercentage:1,categoryPercentage:1}]},options:{events:["click"],responsive:!0,plugins:{legend:{display:!1,labels:{color:y}}},scales:{x:{ticks:{maxRotation:0,minRotation:0}},y:{title:{display:!1,text:"Velocidad del viento (Km/h)"},max:50,min:0,ticks:{stepSize:10}},y1:{display:!1}}}}))})),(0,Tc.jsxs)("div",{children:[(0,Tc.jsx)("div",{className:"card m-2",style:{width:"100%"},children:(0,Tc.jsx)("table",{cellSpacing:"0",cellPadding:"0",children:(0,Tc.jsxs)("tbody",{children:[(0,Tc.jsxs)("tr",{children:[(0,Tc.jsx)("td",{style:{width:"20%"},rowSpan:"2",children:(0,Tc.jsx)("img",{src:"imagenes/viento_redondo.png",style:{width:"3rem"}})}),(0,Tc.jsx)("td",{rowSpan:"2",children:(0,Tc.jsx)("div",{style:{color:"white",backgroundColor:"DodgerBlue",padding:"5px",fontSize:"22px",fontFamily:"Sans-Serif"},children:r+" Km/h"})}),(0,Tc.jsx)("td",{children:(0,Tc.jsx)("img",{src:"imagenes/flecha_viento.png",ref:u,style:{width:"3rem"}})}),(0,Tc.jsx)("td",{rowSpan:"2",children:(0,Tc.jsx)("img",{src:"imagenes/rosa_colores.png",width:"40px"})})]}),(0,Tc.jsxs)("tr",{children:[(0,Tc.jsx)("td",{children:o}),(0,Tc.jsx)("td",{})]})]})})}),(0,Tc.jsx)("div",{className:"card m-2",style:{width:"100%"},children:(0,Tc.jsx)("canvas",{ref:c})})]})},lb=function(){new Date;var t=(0,e.useContext)(ab).localizacion,n="https://marine-api.open-meteo.com/v1/marine?latitude="+t.latitud+"&longitude="+t.longitud+"&hourly=wave_height,wave_direction,wave_period&timezone=Europe%2FBerlin",i="https://api.open-meteo.com/v1/forecast?latitude="+t.latitud+"&longitude="+t.longitud+"&hourly=windspeed_10m,winddirection_10m&timezone=Europe%2FBerlin",r="https://ideihm.covam.es/api-ihm/getmarea?request=gettide&id="+t.estacion+"&format=json";return(0,Tc.jsxs)("div",{children:[(0,Tc.jsx)(ib,{url:r}),(0,Tc.jsx)(rb,{url:n}),(0,Tc.jsx)(ob,{url:i}),(0,Tc.jsx)("br",{})]})},ub=function(){var t=e.useRef(null),n={autoplay:!1,controls:!0,responsive:!0,fluid:!0,sources:[{src:"",type:"application/x-mpegURL"}]},i=Th(Th({},n),{},{sources:{src:"https://wow.camaramar.com/camaramar/17_bastiagueiro.stream/playlist.m3u8",type:'application/x-mpegURL"},'}}),r=Th(Th({},n),{},{sources:{src:"https://wow.camaramar.com/camaramar/51_santacristina.stream/playlist.m3u8",type:'application/x-mpegURL"},'}}),a=Th(Th({},n),{},{sources:{src:"https://wow.camaramar.com/camaramar/11_doninos.stream/playlist.m3u8",type:'application/x-mpegURL"},'}}),s=Th(Th({},n),{},{sources:{src:"https://wow.camaramar.com/camaramar/5_razo.stream/playlist.m3u8",type:'application/x-mpegURL"},'}}),o=Th(Th({},n),{},{sources:{src:"https://wow.camaramar.com/camaramar/61_perbes.stream/playlist.m3u8",type:'application/x-mpegURL"},'}}),l=Th(Th({},n),{},{sources:{src:"https://wow.camaramar.com/camaramar/44_caionsurfhouse.stream/playlist.m3u8",type:'application/x-mpegURL"},'}}),u=Th(Th({},n),{},{sources:{src:"https://wow.camaramar.com/camaramar/49_baldaio.stream/playlist.m3u8",type:'application/x-mpegURL"},'}}),c=Th(Th({},n),{},{sources:{src:"https://wow.camaramar.com/camaramar/54_cabana.stream/playlist.m3u8",type:'application/x-mpegURL"},'}}),d=Th(Th({},n),{},{sources:{src:"https://wow.camaramar.com/camaramar/62_matadero.stream/playlist.m3u8",type:'application/x-mpegURL"},'}}),h=Th(Th({},n),{},{sources:{src:"https://wow.camaramar.com/directo/KFC.stream/playlist.m3u8",type:'application/x-mpegURL"},'}}),f=function(e){t.current=e,e.on("waiting",(function(){bc.log("player is waiting")})),e.on("dispose",(function(){bc.log("player will dispose")}))};return(0,Tc.jsxs)(Tc.Fragment,{children:[(0,Tc.jsx)("div",{className:"card m-1",style:{width:"100%",height:"20%"},children:(0,Tc.jsx)("table",{cellSpacing:"0",cellPadding:"0",children:(0,Tc.jsxs)("tbody",{children:[(0,Tc.jsx)("tr",{children:(0,Tc.jsx)("td",{style:{width:"20%"},children:"Bastiagueiro"})}),(0,Tc.jsx)("tr",{children:(0,Tc.jsx)("td",{children:(0,Tc.jsx)(kc,{options:i,onReady:f})})})]})})}),(0,Tc.jsx)("div",{className:"card m-1",style:{width:"100%",height:"20%"},children:(0,Tc.jsx)("table",{cellSpacing:"0",cellPadding:"0",children:(0,Tc.jsxs)("tbody",{children:[(0,Tc.jsx)("tr",{children:(0,Tc.jsx)("td",{style:{width:"20%"},children:"Doni\xf1os"})}),(0,Tc.jsx)("tr",{children:(0,Tc.jsx)("td",{children:(0,Tc.jsx)(kc,{options:a,onReady:f})})})]})})}),(0,Tc.jsx)("div",{className:"card m-1",style:{width:"100%",height:"20%"},children:(0,Tc.jsx)("table",{cellSpacing:"0",cellPadding:"0",children:(0,Tc.jsxs)("tbody",{children:[(0,Tc.jsx)("tr",{children:(0,Tc.jsx)("td",{style:{width:"20%"},children:"Santa Cristina"})}),(0,Tc.jsx)("tr",{children:(0,Tc.jsx)("td",{children:(0,Tc.jsx)(kc,{options:r,onReady:f})})})]})})}),(0,Tc.jsx)("div",{className:"card m-1",style:{width:"100%",height:"20%"},children:(0,Tc.jsx)("table",{cellSpacing:"0",cellPadding:"0",children:(0,Tc.jsxs)("tbody",{children:[(0,Tc.jsx)("tr",{children:(0,Tc.jsx)("td",{style:{width:"20%"},children:"Barra\xf1\xe1n"})}),(0,Tc.jsx)("tr",{children:(0,Tc.jsx)("td",{children:(0,Tc.jsx)(kc,{options:h,onReady:f})})})]})})}),(0,Tc.jsx)("div",{className:"card m-1",style:{width:"100%",height:"20%"},children:(0,Tc.jsx)("table",{cellSpacing:"0",cellPadding:"0",children:(0,Tc.jsxs)("tbody",{children:[(0,Tc.jsx)("tr",{children:(0,Tc.jsx)("td",{style:{width:"20%"},children:"Ondalonga"})}),(0,Tc.jsx)("tr",{children:(0,Tc.jsx)("td",{children:(0,Tc.jsx)(kc,{options:c,onReady:f})})})]})})}),(0,Tc.jsx)("div",{className:"card m-1",style:{width:"100%",height:"20%"},children:(0,Tc.jsx)("table",{cellSpacing:"0",cellPadding:"0",children:(0,Tc.jsxs)("tbody",{children:[(0,Tc.jsx)("tr",{children:(0,Tc.jsx)("td",{style:{width:"20%"},children:"Matadero"})}),(0,Tc.jsx)("tr",{children:(0,Tc.jsx)("td",{children:(0,Tc.jsx)(kc,{options:d,onReady:f})})})]})})}),(0,Tc.jsx)("div",{className:"card m-1",style:{width:"100%",height:"20%"},children:(0,Tc.jsx)("table",{cellSpacing:"0",cellPadding:"0",children:(0,Tc.jsxs)("tbody",{children:[(0,Tc.jsx)("tr",{children:(0,Tc.jsx)("td",{style:{width:"20%"},children:"Razo"})}),(0,Tc.jsx)("tr",{children:(0,Tc.jsx)("td",{children:(0,Tc.jsx)(kc,{options:s,onReady:f})})})]})})}),(0,Tc.jsx)("div",{className:"card m-1",style:{width:"100%",height:"20%"},children:(0,Tc.jsx)("table",{cellSpacing:"0",cellPadding:"0",children:(0,Tc.jsxs)("tbody",{children:[(0,Tc.jsx)("tr",{children:(0,Tc.jsx)("td",{style:{width:"20%"},children:"Perbes"})}),(0,Tc.jsx)("tr",{children:(0,Tc.jsx)("td",{children:(0,Tc.jsx)(kc,{options:o,onReady:f})})})]})})}),(0,Tc.jsx)("div",{className:"card m-1",style:{width:"100%",height:"20%"},children:(0,Tc.jsx)("table",{cellSpacing:"0",cellPadding:"0",children:(0,Tc.jsxs)("tbody",{children:[(0,Tc.jsx)("tr",{children:(0,Tc.jsx)("td",{style:{width:"20%"},children:"Baldaio"})}),(0,Tc.jsx)("tr",{children:(0,Tc.jsx)("td",{children:(0,Tc.jsx)(kc,{options:u,onReady:f})})})]})})}),(0,Tc.jsx)("div",{className:"card m-1",style:{width:"100%",height:"20%"},children:(0,Tc.jsx)("table",{cellSpacing:"0",cellPadding:"0",children:(0,Tc.jsxs)("tbody",{children:[(0,Tc.jsx)("tr",{children:(0,Tc.jsx)("td",{style:{width:"20%"},children:"cai\xf3n"})}),(0,Tc.jsx)("tr",{children:(0,Tc.jsx)("td",{children:(0,Tc.jsx)(kc,{options:l,onReady:f})})})]})})})]})},cb=function(){return(0,Tc.jsx)("nav",{className:"navbar navbar-expand navbar-dark bg-info cabecera",children:(0,Tc.jsxs)("div",{className:"container-fluid",fixed:"top",children:[(0,Tc.jsx)("img",{src:"imagenes/surf.png",width:"20px"}),(0,Tc.jsx)("h2",{className:"navbar-brand",href:"#",children:" Mareator"}),(0,Tc.jsx)("button",{className:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarSupportedContent","aria-controls":"#navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation",children:(0,Tc.jsx)("span",{className:"navbar-toggler-icon"})}),(0,Tc.jsx)("div",{id:"navbarSupportedContent",children:(0,Tc.jsxs)("ul",{className:"navbar-nav mb-0 py-0",children:[(0,Tc.jsx)("li",{className:"navbar-item",children:(0,Tc.jsxs)(mh,{className:"nav-link","aria-current":"page",to:"/mar",children:["Mar ",(0,Tc.jsx)("span",{className:"sr-only"})]})}),(0,Tc.jsx)("li",{className:"navbar-item",children:(0,Tc.jsxs)(mh,{className:"nav-link","aria-current":"page",to:"/playas",children:["Playas ",(0,Tc.jsx)("span",{className:"sr-only"})]})}),(0,Tc.jsx)("li",{className:"navbar-item",children:(0,Tc.jsxs)(mh,{className:"nav-link","aria-current":"page",to:"/el_tiempo",children:["El tiempo ",(0,Tc.jsx)("span",{className:"sr-only"})]})})]})})]})})},db={localizacion:[{id:1,nombre:"Coru\xf1a",latitud:43.3781,longitud:-8.393,estacion:20,direccion:"Coru\xf1a"},{id:2,nombre:"Mi\xf1o",latitud:43.3521,longitud:-8.222,estacion:19,direccion:"Mi\xf1o"},{id:3,nombre:"Doni\xf1os",latitud:43.4969,longitud:-8.324,estacion:18,direccion:"Doni\xf1os"},{id:4,nombre:"Barmouth",latitud:52.7215,longitud:-4.0533,estacion:18,direccion:"Barmouth"}]},hb=function(){var t=(0,e.useContext)(ab),n=t.localizacion,i=t.setLocalizacion,r=Oc((0,e.useState)(),2),a=r[0],s=r[1],o=Oc((0,e.useState)(),2),l=o[0],u=o[1];navigator.geolocation.getCurrentPosition((function(e){s(e.coords.latitude),u(e.coords.longitude)}));var c=function(e){fetch("https://geocode.maps.co/reverse?lat="+n.latitud+"&lon="+n.longitud).then((function(e){return e.json()})).then((function(e){var t=e.display_name.split(",");return t[4]+" - "+t[3]+" - "+t[2]+" ("+n.latitud+", "+n.longitud+")"}))};function d(e){var t=n;0==e?(t.latitud=a,t.longitud=l,t.direccion=c(),i(t)):(t=db.localizacion[e-1],i(t)),localStorage.setItem("localizacion_local",JSON.stringify(t))}return(0,Tc.jsx)("div",{className:"cabecera_botones",children:(0,Tc.jsx)("table",{cellSpacing:"0",cellPadding:"0",style:{width:"100%",height:"2em"},children:(0,Tc.jsx)("tbody",{children:(0,Tc.jsxs)("tr",{children:[(0,Tc.jsx)("td",{children:(0,Tc.jsx)("button",{type:"button",className:"btn",onClick:function(){return d(1)},children:"Coru\xf1a"})}),(0,Tc.jsx)("td",{children:(0,Tc.jsx)("button",{type:"button",className:"btn",onClick:function(){return d(2)},children:"Mi\xf1o"})}),(0,Tc.jsx)("td",{children:(0,Tc.jsx)("button",{type:"button",className:"btn",onClick:function(){return d(3)},children:"Doni\xf1os"})}),(0,Tc.jsx)("td",{children:(0,Tc.jsx)("button",{type:"button",className:"btn",onClick:function(){return d(4)},children:"Barmouth"})}),(0,Tc.jsx)("td",{children:(0,Tc.jsx)("button",{type:"button",className:"btn",onClick:function(){return d(0)},children:"Aqu\xed"})})]})})})})},fb=function(){new Date;var t=(0,e.useContext)(ab).localizacion,n="https://api.open-meteo.com/v1/forecast?latitude="+t.latitud+"&longitude="+t.longitud+"&hourly=temperature_2m,precipitation_probability,rain,cloudcover,windspeed_10m&timezone=Europe%2FBerlin",i="https://api.open-meteo.com/v1/forecast?latitude="+t.latitud+"&longitude="+t.longitud+"&hourly=windspeed_10m,winddirection_10m&timezone=Europe%2FBerlin";return(0,Tc.jsxs)(Tc.Fragment,{children:[(0,Tc.jsx)(sb,{url:n}),(0,Tc.jsx)(ob,{url:i}),(0,Tc.jsx)("br",{})]})},pb=function(){return(0,Tc.jsxs)(hh,{children:[(0,Tc.jsx)(cb,{}),(0,Tc.jsx)(hb,{}),(0,Tc.jsx)("div",{className:"container-fluid text-center contenido",children:(0,Tc.jsxs)(ah,{children:[(0,Tc.jsx)(ih,{exact:!0,path:"/mar",element:(0,Tc.jsx)(lb,{})}),(0,Tc.jsx)(ih,{exact:!0,path:"/playas",element:(0,Tc.jsx)(ub,{})}),(0,Tc.jsx)(ih,{exact:!0,path:"/el_tiempo",element:(0,Tc.jsx)(fb,{})}),(0,Tc.jsx)(ih,{path:"*",element:(0,Tc.jsx)(lb,{})})]})})]})},gb=function(){var t=(0,e.useContext)(ab).localizacion;t.latitud,t.longitud,t.latitud,t.longitud,t.latitud,t.longitud,t.estacion,t.latitud,t.longitud,t.latitud,t.longitud;return(0,Tc.jsxs)("div",{className:"pie miniletra container",children:[t.direccion," | ",t.latitud.toString().slice(0,4)," ; ",t.longitud.toString().slice(0,4),"| La pr\xe1ctica's App | ",(0,Tc.jsx)("a",{href:"#",onClick:function(){"caches"in window&&(caches.keys().then((function(e){e.forEach((function(e){caches.delete(e)}))})),window.location.reload(!0))},children:"Actualizar"})," | ",(0,Tc.jsx)("img",{src:"imagenes/rosa_colores.png",alt:""})]})},mb=function(){null===localStorage.getItem("localizacion_local")&&localStorage.setItem("localizacion_local",JSON.stringify(db.localizacion[0]));var t=JSON.parse(localStorage.getItem("localizacion_local")),n=Oc((0,e.useState)(t),2),i={localizacion:n[0],setLocalizacion:n[1]};return(0,Tc.jsxs)(ab.Provider,{value:i,children:[(0,Tc.jsx)(pb,{}),(0,Tc.jsx)(gb,{})]})};t.render((0,Tc.jsx)(e.StrictMode,{children:(0,Tc.jsx)(mb,{})}),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("","/service-worker.js");xc?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var i=n.headers.get("content-type");404===n.status||null!=i&&-1===i.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):Sc(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):Sc(t,e)}))}}(),Ec()}()}();
//# sourceMappingURL=main.fcb772a9.js.map